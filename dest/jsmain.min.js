function t(e,t,i){return Math.max(e,Math.min(t,i))}((e,t)=>{"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(e.document)return t(e);throw new Error("jQuery requires a window with a document")}:t(e)})("undefined"!=typeof window?window:this,function(b,U){function y(e){return"function"==typeof e&&"number"!=typeof e.nodeType}function m(e){return null!=e&&e===e.window}var t=[],B=Object.getPrototypeOf,o=t.slice,F=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},G=t.push,k=t.indexOf,H={},z=H.toString,V=H.hasOwnProperty,W=V.toString,X=W.call(Object),g={},T=b.document,j={type:!0,src:!0,nonce:!0,noModule:!0};function q(e,t,i){var n,r,a=(i=i||T).createElement("script");if(a.text=e,t)for(n in j)(r=t[n]||t.getAttribute&&t.getAttribute(n))&&a.setAttribute(n,r);i.head.appendChild(a).parentNode.removeChild(a)}function f(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?H[z.call(e)]||"object":typeof e}var e="3.5.1",M=function(e,t){return new M.fn.init(e,t)};function Y(e){var t=!!e&&"length"in e&&e.length,i=f(e);return!y(e)&&!m(e)&&("array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e)}M.fn=M.prototype={jquery:e,constructor:M,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){e=M.merge(this.constructor(),e);return e.prevObject=this,e},each:function(e){return M.each(this,e)},map:function(i){return this.pushStack(M.map(this,function(e,t){return i.call(e,t,e)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(M.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(M.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:G,sort:t.sort,splice:t.splice},M.extend=M.fn.extend=function(){var e,t,i,n,r,a=arguments[0]||{},s=1,o=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||y(a)||(a={}),s===o&&(a=this,s--);s<o;s++)if(null!=(e=arguments[s]))for(t in e)i=e[t],"__proto__"!==t&&a!==i&&(l&&i&&(M.isPlainObject(i)||(n=Array.isArray(i)))?(r=a[t],r=n&&!Array.isArray(r)?[]:n||M.isPlainObject(r)?r:{},n=!1,a[t]=M.extend(l,r,i)):void 0!==i&&(a[t]=i));return a},M.extend({expando:"jQuery"+(e+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){return!(!e||"[object Object]"!==z.call(e)||(e=B(e))&&("function"!=typeof(e=V.call(e,"constructor")&&e.constructor)||W.call(e)!==X))},isEmptyObject:function(e){for(var t in e)return!1;return!0},globalEval:function(e,t,i){q(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,n=0;if(Y(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},makeArray:function(e,t){t=t||[];return null!=e&&(Y(Object(e))?M.merge(t,"string"==typeof e?[e]:e):G.call(t,e)),t},inArray:function(e,t,i){return null==t?-1:k.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;n<i;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,a=e.length,s=!i;r<a;r++)!t(e[r],r)!=s&&n.push(e[r]);return n},map:function(e,t,i){var n,r,a=0,s=[];if(Y(e))for(n=e.length;a<n;a++)null!=(r=t(e[a],a,i))&&s.push(r);else for(a in e)null!=(r=t(e[a],a,i))&&s.push(r);return F(s)},guid:1,support:g}),"function"==typeof Symbol&&(M.fn[Symbol.iterator]=t[Symbol.iterator]),M.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){H["[object "+t+"]"]=t.toLowerCase()});function n(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&M(e).is(i))break;n.push(e)}return n}function K(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}var e=(U=>{function u(e,t){return e="0x"+e.slice(1)-65536,t||(e<0?String.fromCharCode(65536+e):String.fromCharCode(e>>10|55296,1023&e|56320))}function B(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}function F(){b()}var e,d,x,a,G,p,k,H,S,l,h,b,T,i,M,f,n,r,m,w="sizzle"+ +new Date,c=U.document,E=0,z=0,V=L(),W=L(),X=L(),g=L(),j=function(e,t){return e===t&&(h=!0),0},q={}.hasOwnProperty,t=[],Y=t.pop,K=t.push,A=t.push,Z=t.slice,C=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",s="[\\x20\\t\\r\\n\\f]",o="(?:\\\\[\\da-fA-F]{1,6}"+s+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Q="\\["+s+"*("+o+")(?:"+s+"*([*^$|!~]?=)"+s+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+o+"))|)"+s+"*\\]",$=":("+o+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Q+")*)|.*)\\)|)",ee=new RegExp(s+"+","g"),P=new RegExp("^"+s+"+|((?:^|[^\\\\])(?:\\\\.)*)"+s+"+$","g"),te=new RegExp("^"+s+"*,"+s+"*"),ie=new RegExp("^"+s+"*([>+~]|"+s+")"+s+"*"),ne=new RegExp(s+"|>"),re=new RegExp($),ae=new RegExp("^"+o+"$"),v={ID:new RegExp("^#("+o+")"),CLASS:new RegExp("^\\.("+o+")"),TAG:new RegExp("^("+o+"|[*])"),ATTR:new RegExp("^"+Q),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+s+"*(even|odd|(([+-]|)(\\d*)n|)"+s+"*(?:([+-]|)"+s+"*(\\d+)|))"+s+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+s+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+s+"*((?:-\\d)?\\d*)"+s+"*\\)|)(?=[^-]|$)","i")},se=/HTML$/i,oe=/^(?:input|select|textarea|button)$/i,le=/^h\d$/i,y=/^[^{]+\{\s*\[native \w/,he=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ce=/[+~]/,_=new RegExp("\\\\[\\da-fA-F]{1,6}"+s+"?|\\\\([^\\r\\n\\f])","g"),ue=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,de=ye(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{A.apply(t=Z.call(c.childNodes),c.childNodes),t[c.childNodes.length].nodeType}catch(e){A={apply:t.length?function(e,t){K.apply(e,Z.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function R(e,t,i,n){var r,a,s,o,l,h,c=t&&t.ownerDocument,u=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==u&&9!==u&&11!==u)return i;if(!n&&(b(t),t=t||T,M)){if(11!==u&&(o=he.exec(e)))if(r=o[1]){if(9===u){if(!(h=t.getElementById(r)))return i;if(h.id===r)return i.push(h),i}else if(c&&(h=c.getElementById(r))&&m(t,h)&&h.id===r)return i.push(h),i}else{if(o[2])return A.apply(i,t.getElementsByTagName(e)),i;if((r=o[3])&&d.getElementsByClassName&&t.getElementsByClassName)return A.apply(i,t.getElementsByClassName(r)),i}if(d.qsa&&!g[e+" "]&&(!f||!f.test(e))&&(1!==u||"object"!==t.nodeName.toLowerCase())){if(h=e,c=t,1===u&&(ne.test(e)||ie.test(e))){for((c=ce.test(e)&&ge(t.parentNode)||t)===t&&d.scope||((s=t.getAttribute("id"))?s=s.replace(ue,B):t.setAttribute("id",s=w)),a=(l=p(e)).length;a--;)l[a]=(s?"#"+s:":scope")+" "+O(l[a]);h=l.join(",")}try{return A.apply(i,c.querySelectorAll(h)),i}catch(t){g(e,!0)}finally{s===w&&t.removeAttribute("id")}}}return H(e.replace(P,"$1"),t,i,n)}function L(){var n=[];return function e(t,i){return n.push(t+" ")>x.cacheLength&&delete e[n.shift()],e[t+" "]=i}}function D(e){return e[w]=!0,e}function I(e){var t=T.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function pe(e,t){for(var i=e.split("|"),n=i.length;n--;)x.attrHandle[i[n]]=t}function fe(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function me(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&de(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function N(s){return D(function(a){return a=+a,D(function(e,t){for(var i,n=s([],e.length,a),r=n.length;r--;)e[i=n[r]]&&(e[i]=!(t[i]=e[i]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in d=R.support={},G=R.isXML=function(e){var t=e.namespaceURI,e=(e.ownerDocument||e).documentElement;return!se.test(t||e&&e.nodeName||"HTML")},b=R.setDocument=function(e){var e=e?e.ownerDocument||e:c;return e!=T&&9===e.nodeType&&e.documentElement&&(i=(T=e).documentElement,M=!G(T),c!=T&&(e=T.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",F,!1):e.attachEvent&&e.attachEvent("onunload",F)),d.scope=I(function(e){return i.appendChild(e).appendChild(T.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),d.attributes=I(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=I(function(e){return e.appendChild(T.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=y.test(T.getElementsByClassName),d.getById=I(function(e){return i.appendChild(e).id=w,!T.getElementsByName||!T.getElementsByName(w).length}),d.getById?(x.filter.ID=function(e){var t=e.replace(_,u);return function(e){return e.getAttribute("id")===t}},x.find.ID=function(e,t){if(void 0!==t.getElementById&&M)return(t=t.getElementById(e))?[t]:[]}):(x.filter.ID=function(e){var t=e.replace(_,u);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}},x.find.ID=function(e,t){if(void 0!==t.getElementById&&M){var i,n,r,a=t.getElementById(e);if(a){if((i=a.getAttributeNode("id"))&&i.value===e)return[a];for(r=t.getElementsByName(e),n=0;a=r[n++];)if((i=a.getAttributeNode("id"))&&i.value===e)return[a]}return[]}}),x.find.TAG=d.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,a=t.getElementsByTagName(e);if("*"!==e)return a;for(;i=a[r++];)1===i.nodeType&&n.push(i);return n},x.find.CLASS=d.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&M)return t.getElementsByClassName(e)},n=[],f=[],(d.qsa=y.test(T.querySelectorAll))&&(I(function(e){var t;i.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&f.push("[*^$]="+s+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||f.push("\\["+s+"*(?:value|"+J+")"),e.querySelectorAll("[id~="+w+"-]").length||f.push("~="),(t=T.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||f.push("\\["+s+"*name"+s+"*="+s+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||f.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||f.push(".#.+[+~]"),e.querySelectorAll("\\\f"),f.push("[\\r\\n\\f]")}),I(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=T.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&f.push("name"+s+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&f.push(":enabled",":disabled"),i.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),f.push(",.*:")})),(d.matchesSelector=y.test(r=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.oMatchesSelector||i.msMatchesSelector))&&I(function(e){d.disconnectedMatch=r.call(e,"*"),r.call(e,"[s!='']:x"),n.push("!=",$)}),f=f.length&&new RegExp(f.join("|")),n=n.length&&new RegExp(n.join("|")),e=y.test(i.compareDocumentPosition),m=e||y.test(i.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(i.contains?i.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},j=e?function(e,t){var i;return e===t?(h=!0,0):!e.compareDocumentPosition-!t.compareDocumentPosition||(1&(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===i?e==T||e.ownerDocument==c&&m(c,e)?-1:t==T||t.ownerDocument==c&&m(c,t)?1:l?C(l,e)-C(l,t):0:4&i?-1:1)}:function(e,t){if(e===t)return h=!0,0;var i,n=0,r=e.parentNode,a=t.parentNode,s=[e],o=[t];if(!r||!a)return e==T?-1:t==T?1:r?-1:a?1:l?C(l,e)-C(l,t):0;if(r===a)return fe(e,t);for(i=e;i=i.parentNode;)s.unshift(i);for(i=t;i=i.parentNode;)o.unshift(i);for(;s[n]===o[n];)n++;return n?fe(s[n],o[n]):s[n]==c?-1:o[n]==c?1:0}),T},R.matches=function(e,t){return R(e,null,null,t)},R.matchesSelector=function(e,t){if(b(e),d.matchesSelector&&M&&!g[t+" "]&&(!n||!n.test(t))&&(!f||!f.test(t)))try{var i=r.call(e,t);if(i||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){g(t,!0)}return 0<R(t,T,null,[e]).length},R.contains=function(e,t){return(e.ownerDocument||e)!=T&&b(e),m(e,t)},R.attr=function(e,t){(e.ownerDocument||e)!=T&&b(e);var i=x.attrHandle[t.toLowerCase()],i=i&&q.call(x.attrHandle,t.toLowerCase())?i(e,t,!M):void 0;return void 0!==i?i:d.attributes||!M?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},R.escape=function(e){return(e+"").replace(ue,B)},R.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},R.uniqueSort=function(e){var t,i=[],n=0,r=0;if(h=!d.detectDuplicates,l=!d.sortStable&&e.slice(0),e.sort(j),h){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return l=null,e},a=R.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=a(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=a(t);return i},(x=R.selectors={cacheLength:50,createPseudo:D,match:v,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_,u),e[3]=(e[3]||e[4]||e[5]||"").replace(_,u),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||R.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&R.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return v.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&re.test(i)&&(t=(t=p(i,!0))&&i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_,u).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=V[e+" "];return t||(t=new RegExp("(^|"+s+")"+e+"("+s+"|$)"))&&V(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(e){e=R.attr(e,t);return null==e?"!="===i:!i||(e+="","="===i?e===n:"!="===i?e!==n:"^="===i?n&&0===e.indexOf(n):"*="===i?n&&-1<e.indexOf(n):"$="===i?n&&e.slice(-n.length)===n:"~="===i?-1<(" "+e.replace(ee," ")+" ").indexOf(n):"|="===i&&(e===n||e.slice(0,n.length+1)===n+"-"))}},CHILD:function(f,e,t,m,g){var v="nth"!==f.slice(0,3),y="last"!==f.slice(-4),_="of-type"===e;return 1===m&&0===g?function(e){return!!e.parentNode}:function(e,t,i){var n,r,a,s,o,l,h=v!=y?"nextSibling":"previousSibling",c=e.parentNode,u=_&&e.nodeName.toLowerCase(),d=!i&&!_,p=!1;if(c){if(v){for(;h;){for(s=e;s=s[h];)if(_?s.nodeName.toLowerCase()===u:1===s.nodeType)return!1;l=h="only"===f&&!l&&"nextSibling"}return!0}if(l=[y?c.firstChild:c.lastChild],y&&d){for(p=(o=(n=(r=(a=(s=c)[w]||(s[w]={}))[s.uniqueID]||(a[s.uniqueID]={}))[f]||[])[0]===E&&n[1])&&n[2],s=o&&c.childNodes[o];s=++o&&s&&s[h]||(p=o=0,l.pop());)if(1===s.nodeType&&++p&&s===e){r[f]=[E,o,p];break}}else if(!1===(p=d?o=(n=(r=(a=(s=e)[w]||(s[w]={}))[s.uniqueID]||(a[s.uniqueID]={}))[f]||[])[0]===E&&n[1]:p))for(;(s=++o&&s&&s[h]||(p=o=0,l.pop()))&&((_?s.nodeName.toLowerCase()!==u:1!==s.nodeType)||!++p||(d&&((r=(a=s[w]||(s[w]={}))[s.uniqueID]||(a[s.uniqueID]={}))[f]=[E,p]),s!==e)););return(p-=g)===m||p%m==0&&0<=p/m}}},PSEUDO:function(e,a){var t,s=x.pseudos[e]||x.setFilters[e.toLowerCase()]||R.error("unsupported pseudo: "+e);return s[w]?s(a):1<s.length?(t=[e,e,"",a],x.setFilters.hasOwnProperty(e.toLowerCase())?D(function(e,t){for(var i,n=s(e,a),r=n.length;r--;)e[i=C(e,n[r])]=!(t[i]=n[r])}):function(e){return s(e,0,t)}):s}},pseudos:{not:D(function(e){var n=[],r=[],o=k(e.replace(P,"$1"));return o[w]?D(function(e,t,i,n){for(var r,a=o(e,null,n,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))}):function(e,t,i){return n[0]=e,o(n,null,i,r),n[0]=null,!r.pop()}}),has:D(function(t){return function(e){return 0<R(t,e).length}}),contains:D(function(t){return t=t.replace(_,u),function(e){return-1<(e.textContent||a(e)).indexOf(t)}}),lang:D(function(i){return ae.test(i||"")||R.error("unsupported lang: "+i),i=i.replace(_,u).toLowerCase(),function(e){var t;do{if(t=M?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===i||0===t.indexOf(i+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=U.location&&U.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===i},focus:function(e){return e===T.activeElement&&(!T.hasFocus||T.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return le.test(e.nodeName)},input:function(e){return oe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:N(function(){return[0]}),last:N(function(e,t){return[t-1]}),eq:N(function(e,t,i){return[i<0?i+t:i]}),even:N(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:N(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:N(function(e,t,i){for(var n=i<0?i+t:t<i?t:i;0<=--n;)e.push(n);return e}),gt:N(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}}).pseudos.nth=x.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[e]=(t=>function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t})(e);for(e in{submit:!0,reset:!0})x.pseudos[e]=(i=>function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===i})(e);function ve(){}function O(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function ye(s,e,t){var o=e.dir,l=e.next,h=l||o,c=t&&"parentNode"===h,u=z++;return e.first?function(e,t,i){for(;e=e[o];)if(1===e.nodeType||c)return s(e,t,i);return!1}:function(e,t,i){var n,r,a=[E,u];if(i){for(;e=e[o];)if((1===e.nodeType||c)&&s(e,t,i))return!0}else for(;e=e[o];)if(1===e.nodeType||c)if(r=(r=e[w]||(e[w]={}))[e.uniqueID]||(r[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[o]||e;else{if((n=r[h])&&n[0]===E&&n[1]===u)return a[2]=n[2];if((r[h]=a)[2]=s(e,t,i))return!0}return!1}}function _e(r){return 1<r.length?function(e,t,i){for(var n=r.length;n--;)if(!r[n](e,t,i))return!1;return!0}:r[0]}function xe(e,t,i,n,r){for(var a,s=[],o=0,l=e.length,h=null!=t;o<l;o++)!(a=e[o])||i&&!i(a,n,r)||(s.push(a),h&&t.push(o));return s}function Se(p,f,m,g,v,e){return g&&!g[w]&&(g=Se(g)),v&&!v[w]&&(v=Se(v,e)),D(function(e,t,i,n){var r,a,s,o=[],l=[],h=t.length,c=e||((e,t,i)=>{for(var n=0,r=t.length;n<r;n++)R(e,t[n],i);return i})(f||"*",i.nodeType?[i]:i,[]),u=!p||!e&&f?c:xe(c,o,p,i,n),d=m?v||(e?p:h||g)?[]:t:u;if(m&&m(u,d,i,n),g)for(r=xe(d,l),g(r,[],i,n),a=r.length;a--;)(s=r[a])&&(d[l[a]]=!(u[l[a]]=s));if(e){if(v||p){if(v){for(r=[],a=d.length;a--;)(s=d[a])&&r.push(u[a]=s);v(null,d=[],r,n)}for(a=d.length;a--;)(s=d[a])&&-1<(r=v?C(e,s):o[a])&&(e[r]=!(t[r]=s))}}else d=xe(d===t?d.splice(h,d.length):d),v?v(null,t,d,n):A.apply(t,d)})}return ve.prototype=x.filters=x.pseudos,x.setFilters=new ve,p=R.tokenize=function(e,t){var i,n,r,a,s,o,l,h=W[e+" "];if(h)return t?0:h.slice(0);for(s=e,o=[],l=x.preFilter;s;){for(a in i&&!(n=te.exec(s))||(n&&(s=s.slice(n[0].length)||s),o.push(r=[])),i=!1,(n=ie.exec(s))&&(i=n.shift(),r.push({value:i,type:n[0].replace(P," ")}),s=s.slice(i.length)),x.filter)!(n=v[a].exec(s))||l[a]&&!(n=l[a](n))||(i=n.shift(),r.push({value:i,type:a,matches:n}),s=s.slice(i.length));if(!i)break}return t?s.length:s?R.error(e):W(e,o).slice(0)},k=R.compile=function(e,t){var i,g,v,y,_,n,r=[],a=[],s=X[e+" "];if(!s){for(i=(t=t||p(e)).length;i--;)((s=function e(t){for(var n,i,r,a=t.length,s=x.relative[t[0].type],o=s||x.relative[" "],l=s?1:0,h=ye(function(e){return e===n},o,!0),c=ye(function(e){return-1<C(n,e)},o,!0),u=[function(e,t,i){return e=!s&&(i||t!==S)||((n=t).nodeType?h:c)(e,t,i),n=null,e}];l<a;l++)if(i=x.relative[t[l].type])u=[ye(_e(u),i)];else{if((i=x.filter[t[l].type].apply(null,t[l].matches))[w]){for(r=++l;r<a&&!x.relative[t[r].type];r++);return Se(1<l&&_e(u),1<l&&O(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(P,"$1"),i,l<r&&e(t.slice(l,r)),r<a&&e(t=t.slice(r)),r<a&&O(t))}u.push(i)}return _e(u)}(t[i]))[w]?r:a).push(s);(s=X(e,(y=0<(v=r).length,_=0<(g=a).length,n=function(e,t,i,n,r){var a,s,o,l=0,h="0",c=e&&[],u=[],d=S,p=e||_&&x.find.TAG("*",r),f=E+=null==d?1:Math.random()||.1,m=p.length;for(r&&(S=t==T||t||r);h!==m&&null!=(a=p[h]);h++){if(_&&a){for(s=0,t||a.ownerDocument==T||(b(a),i=!M);o=g[s++];)if(o(a,t||T,i)){n.push(a);break}r&&(E=f)}y&&((a=!o&&a)&&l--,e)&&c.push(a)}if(l+=h,y&&h!==l){for(s=0;o=v[s++];)o(c,u,t,i);if(e){if(0<l)for(;h--;)c[h]||u[h]||(u[h]=Y.call(n));u=xe(u)}A.apply(n,u),r&&!e&&0<u.length&&1<l+v.length&&R.uniqueSort(n)}return r&&(E=f,S=d),c},y?D(n):n))).selector=e}return s},H=R.select=function(e,t,i,n){var r,a,s,o,l,h="function"==typeof e&&e,c=!n&&p(e=h.selector||e);if(i=i||[],1===c.length){if(2<(a=c[0]=c[0].slice(0)).length&&"ID"===(s=a[0]).type&&9===t.nodeType&&M&&x.relative[a[1].type]){if(!(t=(x.find.ID(s.matches[0].replace(_,u),t)||[])[0]))return i;h&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(r=v.needsContext.test(e)?0:a.length;r--&&(s=a[r],!x.relative[o=s.type]);)if((l=x.find[o])&&(n=l(s.matches[0].replace(_,u),ce.test(a[0].type)&&ge(t.parentNode)||t))){if(a.splice(r,1),e=n.length&&O(a))break;return A.apply(i,n),i}}return(h||k(e,c))(n,t,!M,i,!t||ce.test(e)&&ge(t.parentNode)||t),i},d.sortStable=w.split("").sort(j).join("")===w,d.detectDuplicates=!!h,b(),d.sortDetached=I(function(e){return 1&e.compareDocumentPosition(T.createElement("fieldset"))}),I(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||pe("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&I(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||pe("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),I(function(e){return null==e.getAttribute("disabled")})||pe(J,function(e,t,i){if(!i)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),R})(b),Z=(M.find=e,M.expr=e.selectors,M.expr[":"]=M.expr.pseudos,M.uniqueSort=M.unique=e.uniqueSort,M.text=e.getText,M.isXMLDoc=e.isXML,M.contains=e.contains,M.escapeSelector=e.escape,M.expr.match.needsContext);function l(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var J=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Q(e,i,n){return y(i)?M.grep(e,function(e,t){return!!i.call(e,t,e)!==n}):i.nodeType?M.grep(e,function(e){return e===i!==n}):"string"!=typeof i?M.grep(e,function(e){return-1<k.call(i,e)!==n}):M.filter(i,e,n)}M.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?M.find.matchesSelector(n,e)?[n]:[]:M.find.matches(e,M.grep(t,function(e){return 1===e.nodeType}))},M.fn.extend({find:function(e){var t,i,n=this.length,r=this;if("string"!=typeof e)return this.pushStack(M(e).filter(function(){for(t=0;t<n;t++)if(M.contains(r[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)M.find(e,r[t],i);return 1<n?M.uniqueSort(i):i},filter:function(e){return this.pushStack(Q(this,e||[],!1))},not:function(e){return this.pushStack(Q(this,e||[],!0))},is:function(e){return!!Q(this,"string"==typeof e&&Z.test(e)?M(e):e||[],!1).length}});var $,ee=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,te=((M.fn.init=function(e,t,i){if(e){if(i=i||$,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==i.ready?i.ready(e):e(M):M.makeArray(e,this);if(!(n="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:ee.exec(e))||!n[1]&&t)return(!t||t.jquery?t||i:this.constructor(t)).find(e);if(n[1]){if(t=t instanceof M?t[0]:t,M.merge(this,M.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:T,!0)),J.test(n[1])&&M.isPlainObject(t))for(var n in t)y(this[n])?this[n](t[n]):this.attr(n,t[n])}else(i=T.getElementById(n[2]))&&(this[0]=i,this.length=1)}return this}).prototype=M.fn,$=M(T),/^(?:parents|prev(?:Until|All))/),ie={children:!0,contents:!0,next:!0,prev:!0};function ne(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}M.fn.extend({has:function(e){var t=M(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(M.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,r=this.length,a=[],s="string"!=typeof e&&M(e);if(!Z.test(e))for(;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?-1<s.index(i):1===i.nodeType&&M.find.matchesSelector(i,e))){a.push(i);break}return this.pushStack(1<a.length?M.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?k.call(M(e),this[0]):k.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(M.uniqueSort(M.merge(this.get(),M(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),M.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return n(e,"parentNode")},parentsUntil:function(e,t,i){return n(e,"parentNode",i)},next:function(e){return ne(e,"nextSibling")},prev:function(e){return ne(e,"previousSibling")},nextAll:function(e){return n(e,"nextSibling")},prevAll:function(e){return n(e,"previousSibling")},nextUntil:function(e,t,i){return n(e,"nextSibling",i)},prevUntil:function(e,t,i){return n(e,"previousSibling",i)},siblings:function(e){return K((e.parentNode||{}).firstChild,e)},children:function(e){return K(e.firstChild)},contents:function(e){return null!=e.contentDocument&&B(e.contentDocument)?e.contentDocument:(l(e,"template")&&(e=e.content||e),M.merge([],e.childNodes))}},function(n,r){M.fn[n]=function(e,t){var i=M.map(this,r,e);return(t="Until"!==n.slice(-5)?e:t)&&"string"==typeof t&&(i=M.filter(t,i)),1<this.length&&(ie[n]||M.uniqueSort(i),te.test(n))&&i.reverse(),this.pushStack(i)}});var w=/[^\x20\t\r\n\f]+/g;function c(e){return e}function re(e){throw e}function ae(e,t,i,n){var r;try{e&&y(r=e.promise)?r.call(e).done(t).fail(i):e&&y(r=e.then)?r.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}M.Callbacks=function(n){var e,i;n="string"==typeof n?(e=n,i={},M.each(e.match(w)||[],function(e,t){i[t]=!0}),i):M.extend({},n);function r(){for(o=o||n.once,s=a=!0;h.length;c=-1)for(t=h.shift();++c<l.length;)!1===l[c].apply(t[0],t[1])&&n.stopOnFalse&&(c=l.length,t=!1);n.memory||(t=!1),a=!1,o&&(l=t?[]:"")}var a,t,s,o,l=[],h=[],c=-1,u={add:function(){return l&&(t&&!a&&(c=l.length-1,h.push(t)),function i(e){M.each(e,function(e,t){y(t)?n.unique&&u.has(t)||l.push(t):t&&t.length&&"string"!==f(t)&&i(t)})}(arguments),t)&&!a&&r(),this},remove:function(){return M.each(arguments,function(e,t){for(var i;-1<(i=M.inArray(t,l,i));)l.splice(i,1),i<=c&&c--}),this},has:function(e){return e?-1<M.inArray(e,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return o=h=[],l=t="",this},disabled:function(){return!l},lock:function(){return o=h=[],t||a||(l=t=""),this},locked:function(){return!!o},fireWith:function(e,t){return o||(t=[e,(t=t||[]).slice?t.slice():t],h.push(t),a)||r(),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!s}};return u},M.extend({Deferred:function(e){var a=[["notify","progress",M.Callbacks("memory"),M.Callbacks("memory"),2],["resolve","done",M.Callbacks("once memory"),M.Callbacks("once memory"),0,"resolved"],["reject","fail",M.Callbacks("once memory"),M.Callbacks("once memory"),1,"rejected"]],r="pending",s={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return s.then(null,e)},pipe:function(){var r=arguments;return M.Deferred(function(n){M.each(a,function(e,t){var i=y(r[t[4]])&&r[t[4]];o[t[1]](function(){var e=i&&i.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[t[0]+"With"](this,i?[e]:arguments)})}),r=null}).promise()},then:function(t,i,n){var l=0;function h(r,a,s,o){return function(){function e(){var e,t;if(!(r<l)){if((e=s.apply(i,n))===a.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,y(t)?o?t.call(e,h(l,a,c,o),h(l,a,re,o)):(l++,t.call(e,h(l,a,c,o),h(l,a,re,o),h(l,a,c,a.notifyWith))):(s!==c&&(i=void 0,n=[e]),(o||a.resolveWith)(i,n))}}var i=this,n=arguments,t=o?e:function(){try{e()}catch(e){M.Deferred.exceptionHook&&M.Deferred.exceptionHook(e,t.stackTrace),l<=r+1&&(s!==re&&(i=void 0,n=[e]),a.rejectWith(i,n))}};r?t():(M.Deferred.getStackHook&&(t.stackTrace=M.Deferred.getStackHook()),b.setTimeout(t))}}return M.Deferred(function(e){a[0][3].add(h(0,e,y(n)?n:c,e.notifyWith)),a[1][3].add(h(0,e,y(t)?t:c)),a[2][3].add(h(0,e,y(i)?i:re))}).promise()},promise:function(e){return null!=e?M.extend(e,s):s}},o={};return M.each(a,function(e,t){var i=t[2],n=t[5];s[t[1]]=i.add,n&&i.add(function(){r=n},a[3-e][2].disable,a[3-e][3].disable,a[0][2].lock,a[0][3].lock),i.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=i.fireWith}),s.promise(o),e&&e.call(o,o),o},when:function(e){function t(t){return function(e){r[t]=this,a[t]=1<arguments.length?o.call(arguments):e,--i||s.resolveWith(r,a)}}var i=arguments.length,n=i,r=Array(n),a=o.call(arguments),s=M.Deferred();if(i<=1&&(ae(e,s.done(t(n)).resolve,s.reject,!i),"pending"===s.state()||y(a[n]&&a[n].then)))return s.then();for(;n--;)ae(a[n],t(n),s.reject);return s.promise()}});var se=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/,oe=(M.Deferred.exceptionHook=function(e,t){b.console&&b.console.warn&&e&&se.test(e.name)&&b.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},M.readyException=function(e){b.setTimeout(function(){throw e})},M.Deferred());function le(){T.removeEventListener("DOMContentLoaded",le),b.removeEventListener("load",le),M.ready()}M.fn.ready=function(e){return oe.then(e).catch(function(e){M.readyException(e)}),this},M.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--M.readyWait:M.isReady)||(M.isReady=!0)!==e&&0<--M.readyWait||oe.resolveWith(T,[M])}}),M.ready.then=oe.then,"complete"===T.readyState||"loading"!==T.readyState&&!T.documentElement.doScroll?b.setTimeout(M.ready):(T.addEventListener("DOMContentLoaded",le),b.addEventListener("load",le));function u(e,t,i,n,r,a,s){var o=0,l=e.length,h=null==i;if("object"===f(i))for(o in r=!0,i)u(e,t,o,i[o],!0,a,s);else if(void 0!==n&&(r=!0,y(n)||(s=!0),t=h?s?(t.call(e,n),null):(h=t,function(e,t,i){return h.call(M(e),i)}):t))for(;o<l;o++)t(e[o],i,s?n:n.call(e[o],o,t(e[o],i)));return r?e:h?t.call(e):l?t(e[0],i):a}var he=/^-ms-/,ce=/-([a-z])/g;function ue(e,t){return t.toUpperCase()}function _(e){return e.replace(he,"ms-").replace(ce,ue)}function v(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function de(){this.expando=M.expando+de.uid++}de.uid=1,de.prototype={cache:function(e){var t=e[this.expando];return t||(t={},v(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"==typeof t)r[_(t)]=i;else for(n in t)r[_(n)]=t[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][_(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(_):(t=_(t))in n?[t]:t.match(w)||[]).length;for(;i--;)delete n[t[i]]}void 0!==t&&!M.isEmptyObject(n)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){e=e[this.expando];return void 0!==e&&!M.isEmptyObject(e)}};var x=new de,h=new de,pe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,fe=/[A-Z]/g;function me(e,t,i){var n,r;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(fe,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i="true"===(r=i)||"false"!==r&&("null"===r?null:r===+r+""?+r:pe.test(r)?JSON.parse(r):r)}catch(e){}h.set(e,t,i)}else i=void 0;return i}M.extend({hasData:function(e){return h.hasData(e)||x.hasData(e)},data:function(e,t,i){return h.access(e,t,i)},removeData:function(e,t){h.remove(e,t)},_data:function(e,t,i){return x.access(e,t,i)},_removeData:function(e,t){x.remove(e,t)}}),M.fn.extend({data:function(i,e){var t,n,r,a=this[0],s=a&&a.attributes;if(void 0!==i)return"object"==typeof i?this.each(function(){h.set(this,i)}):u(this,function(e){var t;if(a&&void 0===e)return void 0!==(t=h.get(a,i))||void 0!==(t=me(a,i))?t:void 0;this.each(function(){h.set(this,i,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(r=h.get(a),1===a.nodeType)&&!x.get(a,"hasDataAttrs")){for(t=s.length;t--;)s[t]&&0===(n=s[t].name).indexOf("data-")&&(n=_(n.slice(5)),me(a,n,r[n]));x.set(a,"hasDataAttrs",!0)}return r},removeData:function(e){return this.each(function(){h.remove(this,e)})}}),M.extend({queue:function(e,t,i){var n;if(e)return n=x.get(e,t=(t||"fx")+"queue"),i&&(!n||Array.isArray(i)?n=x.access(e,t,M.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=M.queue(e,t),n=i.length,r=i.shift(),a=M._queueHooks(e,t);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete a.stop,r.call(e,function(){M.dequeue(e,t)},a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return x.get(e,i)||x.access(e,i,{empty:M.Callbacks("once memory").add(function(){x.remove(e,[t+"queue",i])})})}}),M.fn.extend({queue:function(t,i){var e=2;return"string"!=typeof t&&(i=t,t="fx",e--),arguments.length<e?M.queue(this[0],t):void 0===i?this:this.each(function(){var e=M.queue(this,t,i);M._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&M.dequeue(this,t)})},dequeue:function(e){return this.each(function(){M.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function i(){--r||a.resolveWith(s,[s])}var n,r=1,a=M.Deferred(),s=this,o=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=x.get(s[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(i));return i(),a.promise(t)}});function ge(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&E(e)&&"none"===M.css(e,"display")}var e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ve=new RegExp("^(?:([+-])=|)("+e+")([a-z%]*)$","i"),d=["Top","Right","Bottom","Left"],S=T.documentElement,E=function(e){return M.contains(e.ownerDocument,e)},ye={composed:!0};S.getRootNode&&(E=function(e){return M.contains(e.ownerDocument,e)||e.getRootNode(ye)===e.ownerDocument});function _e(e,t,i,n){var r,a,s=20,o=n?function(){return n.cur()}:function(){return M.css(e,t,"")},l=o(),h=i&&i[3]||(M.cssNumber[t]?"":"px"),c=e.nodeType&&(M.cssNumber[t]||"px"!==h&&+l)&&ve.exec(M.css(e,t));if(c&&c[3]!==h){for(h=h||c[3],c=+(l/=2)||1;s--;)M.style(e,t,c+h),(1-a)*(1-(a=o()/l||.5))<=0&&(s=0),c/=a;M.style(e,t,(c*=2)+h),i=i||[]}return i&&(c=+c||+l||0,r=i[1]?c+(i[1]+1)*i[2]:+i[2],n)&&(n.unit=h,n.start=c,n.end=r),r}var xe={};function A(e,t){for(var i,n,r,a,s,o,l=[],h=0,c=e.length;h<c;h++)(n=e[h]).style&&(i=n.style.display,t?("none"===i&&(l[h]=x.get(n,"display")||null,l[h]||(n.style.display="")),""===n.style.display&&ge(n)&&(l[h]=(o=a=r=void 0,a=n.ownerDocument,(o=xe[s=n.nodeName])||(r=a.body.appendChild(a.createElement(s)),o=M.css(r,"display"),r.parentNode.removeChild(r),xe[s]=o="none"===o?"block":o)))):"none"!==i&&(l[h]="none",x.set(n,"display",i)));for(h=0;h<c;h++)null!=l[h]&&(e[h].style.display=l[h]);return e}M.fn.extend({show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ge(this)?M(this).show():M(this).hide()})}});var Se=/^(?:checkbox|radio)$/i,be=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Te=/^$|^module$|\/(?:java|ecma)script/i,i=T.createDocumentFragment().appendChild(T.createElement("div")),C=((D=T.createElement("input")).setAttribute("type","radio"),D.setAttribute("checked","checked"),D.setAttribute("name","t"),i.appendChild(D),g.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,i.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!i.cloneNode(!0).lastChild.defaultValue,i.innerHTML="<option></option>",g.option=!!i.lastChild,{thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]});function P(e,t){var i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&l(e,t)?M.merge([e],i):i}function Me(e,t){for(var i=0,n=e.length;i<n;i++)x.set(e[i],"globalEval",!t||x.get(t[i],"globalEval"))}C.tbody=C.tfoot=C.colgroup=C.caption=C.thead,C.th=C.td,g.option||(C.optgroup=C.option=[1,"<select multiple='multiple'>","</select>"]);var we=/<|&#?\w+;/;function Ee(e,t,i,n,r){for(var a,s,o,l,h,c=t.createDocumentFragment(),u=[],d=0,p=e.length;d<p;d++)if((a=e[d])||0===a)if("object"===f(a))M.merge(u,a.nodeType?[a]:a);else if(we.test(a)){for(s=s||c.appendChild(t.createElement("div")),o=(be.exec(a)||["",""])[1].toLowerCase(),o=C[o]||C._default,s.innerHTML=o[1]+M.htmlPrefilter(a)+o[2],h=o[0];h--;)s=s.lastChild;M.merge(u,s.childNodes),(s=c.firstChild).textContent=""}else u.push(t.createTextNode(a));for(c.textContent="",d=0;a=u[d++];)if(n&&-1<M.inArray(a,n))r&&r.push(a);else if(l=E(a),s=P(c.appendChild(a),"script"),l&&Me(s),i)for(h=0;a=s[h++];)Te.test(a.type||"")&&i.push(a);return c}var Ae=/^key/,Ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Pe=/^([^.]*)(?:\.(.+)|)/;function s(){return!0}function p(){return!1}function Re(e,t){return e===(()=>{try{return T.activeElement}catch(e){}})()==("focus"===t)}function Le(e,t,i,n,r,a){var s,o;if("object"==typeof t){for(o in"string"!=typeof i&&(n=n||i,i=void 0),t)Le(e,o,i,n,t[o],a);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=p;else if(!r)return e;return 1===a&&(s=r,(r=function(e){return M().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=M.guid++)),e.each(function(){M.event.add(this,t,r,n,i)})}function De(e,r,a){a?(x.set(e,r,!1),M.event.add(e,r,{namespace:!1,handler:function(e){var t,i,n=x.get(this,r);if(1&e.isTrigger&&this[r]){if(n.length)(M.event.special[r]||{}).delegateType&&e.stopPropagation();else if(n=o.call(arguments),x.set(this,r,n),t=a(this,r),this[r](),n!==(i=x.get(this,r))||t?x.set(this,r,!1):i={},n!==i)return e.stopImmediatePropagation(),e.preventDefault(),i.value}else n.length&&(x.set(this,r,{value:M.event.trigger(M.extend(n[0],M.Event.prototype),n.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===x.get(e,r)&&M.event.add(e,r,s)}M.event={global:{},add:function(t,e,i,n,r){var a,s,o,l,h,c,u,d,p,f=x.get(t);if(v(t))for(i.handler&&(i=(a=i).handler,r=a.selector),r&&M.find.matchesSelector(S,r),i.guid||(i.guid=M.guid++),o=(o=f.events)||(f.events=Object.create(null)),s=(s=f.handle)||(f.handle=function(e){return void 0!==M&&M.event.triggered!==e.type?M.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(w)||[""]).length;l--;)u=p=(d=Pe.exec(e[l])||[])[1],d=(d[2]||"").split(".").sort(),u&&(h=M.event.special[u]||{},u=(r?h.delegateType:h.bindType)||u,h=M.event.special[u]||{},p=M.extend({type:u,origType:p,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&M.expr.match.needsContext.test(r),namespace:d.join(".")},a),(c=o[u])||((c=o[u]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,n,d,s))||t.addEventListener&&t.addEventListener(u,s),h.add&&(h.add.call(t,p),p.handler.guid||(p.handler.guid=i.guid)),r?c.splice(c.delegateCount++,0,p):c.push(p),M.event.global[u]=!0)},remove:function(e,t,i,n,r){var a,s,o,l,h,c,u,d,p,f,m,g=x.hasData(e)&&x.get(e);if(g&&(l=g.events)){for(h=(t=(t||"").match(w)||[""]).length;h--;)if(p=m=(o=Pe.exec(t[h])||[])[1],f=(o[2]||"").split(".").sort(),p){for(u=M.event.special[p]||{},d=l[p=(n?u.delegateType:u.bindType)||p]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=a=d.length;a--;)c=d[a],!r&&m!==c.origType||i&&i.guid!==c.guid||o&&!o.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(d.splice(a,1),c.selector&&d.delegateCount--,u.remove&&u.remove.call(e,c));s&&!d.length&&(u.teardown&&!1!==u.teardown.call(e,f,g.handle)||M.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)M.event.remove(e,p+t[h],i,n,!0);M.isEmptyObject(l)&&x.remove(e,"handle events")}},dispatch:function(e){var t,i,n,r,a,s=new Array(arguments.length),o=M.event.fix(e),e=(x.get(this,"events")||Object.create(null))[o.type]||[],l=M.event.special[o.type]||{};for(s[0]=o,t=1;t<arguments.length;t++)s[t]=arguments[t];if(o.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,o)){for(a=M.event.handlers.call(this,o,e),t=0;(n=a[t++])&&!o.isPropagationStopped();)for(o.currentTarget=n.elem,i=0;(r=n.handlers[i++])&&!o.isImmediatePropagationStopped();)o.rnamespace&&!1!==r.namespace&&!o.rnamespace.test(r.namespace)||(o.handleObj=r,o.data=r.data,void 0!==(r=((M.event.special[r.origType]||{}).handle||r.handler).apply(n.elem,s))&&!1===(o.result=r)&&(o.preventDefault(),o.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,o),o.result}},handlers:function(e,t){var i,n,r,a,s,o=[],l=t.delegateCount,h=e.target;if(l&&h.nodeType&&!("click"===e.type&&1<=e.button))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==e.type||!0!==h.disabled)){for(a=[],s={},i=0;i<l;i++)void 0===s[r=(n=t[i]).selector+" "]&&(s[r]=n.needsContext?-1<M(r,this).index(h):M.find(r,this,null,[h]).length),s[r]&&a.push(n);a.length&&o.push({elem:h,handlers:a})}return h=this,l<t.length&&o.push({elem:h,handlers:t.slice(l)}),o},addProp:function(t,e){Object.defineProperty(M.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[M.expando]?e:new M.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){e=this||e;return Se.test(e.type)&&e.click&&l(e,"input")&&De(e,"click",s),!1},trigger:function(e){e=this||e;return Se.test(e.type)&&e.click&&l(e,"input")&&De(e,"click"),!0},_default:function(e){e=e.target;return Se.test(e.type)&&e.click&&l(e,"input")&&x.get(e,"click")||l(e,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},M.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},M.Event=function(e,t){if(!(this instanceof M.Event))return new M.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?s:p,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&M.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[M.expando]=!0},M.Event.prototype={constructor:M.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=s,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=s,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=s,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},M.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ae.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ce.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},M.event.addProp),M.each({focus:"focusin",blur:"focusout"},function(e,t){M.event.special[e]={setup:function(){return De(this,e,Re),!1},trigger:function(){return De(this,e),!0},delegateType:t}}),M.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,r){M.event.special[e]={delegateType:r,bindType:r,handle:function(e){var t,i=e.relatedTarget,n=e.handleObj;return i&&(i===this||M.contains(this,i))||(e.type=n.origType,t=n.handler.apply(this,arguments),e.type=r),t}}}),M.fn.extend({on:function(e,t,i,n){return Le(this,e,t,i,n)},one:function(e,t,i,n){return Le(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)n=e.handleObj,M(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler);else{if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=p),this.each(function(){M.event.remove(this,e,i,t)});for(r in e)this.off(r,t,e[r])}return this}});var Ie=/<script|<style|<link/i,Ne=/checked\s*(?:[^=]|=\s*.checked.)/i,Oe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ue(e,t){return l(e,"table")&&l(11!==t.nodeType?t:t.firstChild,"tr")&&M(e).children("tbody")[0]||e}function Be(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Fe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ge(e,t){var i,n,r,a;if(1===t.nodeType){if(x.hasData(e)&&(a=x.get(e).events))for(r in x.remove(t,"handle events"),a)for(i=0,n=a[r].length;i<n;i++)M.event.add(t,r,a[r][i]);h.hasData(e)&&(e=h.access(e),e=M.extend({},e),h.set(t,e))}}function R(i,n,r,a){n=F(n);var e,t,s,o,l,h,c=0,u=i.length,d=u-1,p=n[0],f=y(p);if(f||1<u&&"string"==typeof p&&!g.checkClone&&Ne.test(p))return i.each(function(e){var t=i.eq(e);f&&(n[0]=p.call(this,e,t.html())),R(t,n,r,a)});if(u&&(t=(e=Ee(n,i[0].ownerDocument,!1,i,a)).firstChild,1===e.childNodes.length&&(e=t),t||a)){for(o=(s=M.map(P(e,"script"),Be)).length;c<u;c++)l=e,c!==d&&(l=M.clone(l,!0,!0),o)&&M.merge(s,P(l,"script")),r.call(i[c],l,c);if(o)for(h=s[s.length-1].ownerDocument,M.map(s,Fe),c=0;c<o;c++)l=s[c],Te.test(l.type||"")&&!x.access(l,"globalEval")&&M.contains(h,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?M._evalUrl&&!l.noModule&&M._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},h):q(l.textContent.replace(Oe,""),l,h))}return i}function ke(e,t,i){for(var n,r=t?M.filter(t,e):e,a=0;null!=(n=r[a]);a++)i||1!==n.nodeType||M.cleanData(P(n)),n.parentNode&&(i&&E(n)&&Me(P(n,"script")),n.parentNode.removeChild(n));return e}M.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var n,r,a,s,o,l,h,c=e.cloneNode(!0),u=E(e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||M.isXMLDoc(e)))for(s=P(c),n=0,r=(a=P(e)).length;n<r;n++)o=a[n],"input"===(h=(l=s[n]).nodeName.toLowerCase())&&Se.test(o.type)?l.checked=o.checked:"input"!==h&&"textarea"!==h||(l.defaultValue=o.defaultValue);if(t)if(i)for(a=a||P(e),s=s||P(c),n=0,r=a.length;n<r;n++)Ge(a[n],s[n]);else Ge(e,c);return 0<(s=P(c,"script")).length&&Me(s,!u&&P(e,"script")),c},cleanData:function(e){for(var t,i,n,r=M.event.special,a=0;void 0!==(i=e[a]);a++)if(v(i)){if(t=i[x.expando]){if(t.events)for(n in t.events)r[n]?M.event.remove(i,n):M.removeEvent(i,n,t.handle);i[x.expando]=void 0}i[h.expando]&&(i[h.expando]=void 0)}}}),M.fn.extend({detach:function(e){return ke(this,e,!0)},remove:function(e){return ke(this,e)},text:function(e){return u(this,function(e){return void 0===e?M.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return R(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ue(this,e).appendChild(e)})},prepend:function(){return R(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=Ue(this,e)).insertBefore(e,t.firstChild)})},before:function(){return R(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return R(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(M.cleanData(P(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return M.clone(this,e,t)})},html:function(e){return u(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ie.test(e)&&!C[(be.exec(e)||["",""])[1].toLowerCase()]){e=M.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(M.cleanData(P(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var i=[];return R(this,arguments,function(e){var t=this.parentNode;M.inArray(this,i)<0&&(M.cleanData(P(this)),t)&&t.replaceChild(e,this)},i)}}),M.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,s){M.fn[e]=function(e){for(var t,i=[],n=M(e),r=n.length-1,a=0;a<=r;a++)t=a===r?this:this.clone(!0),M(n[a])[s](t),G.apply(i,t.get());return this.pushStack(i)}});function He(e){var t=e.ownerDocument.defaultView;return(t=t&&t.opener?t:b).getComputedStyle(e)}function ze(e,t,i){var n,r={};for(n in t)r[n]=e.style[n],e.style[n]=t[n];for(n in i=i.call(e),t)e.style[n]=r[n];return i}var Ve,We,Xe,je,qe,Ye,Ke,r,Ze=new RegExp("^("+e+")(?!px)[a-z%]+$","i"),Je=new RegExp(d.join("|"),"i");function Qe(e,t,i){var n,r,a=e.style;return(i=i||He(e))&&(""!==(r=i.getPropertyValue(t)||i[t])||E(e)||(r=M.style(e,t)),!g.pixelBoxStyles())&&Ze.test(r)&&Je.test(t)&&(e=a.width,t=a.minWidth,n=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=i.width,a.width=e,a.minWidth=t,a.maxWidth=n),void 0!==r?r+"":r}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function et(){var e;r&&(Ke.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",r.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",S.appendChild(Ke).appendChild(r),e=b.getComputedStyle(r),Ve="1%"!==e.top,Ye=12===tt(e.marginLeft),r.style.right="60%",je=36===tt(e.right),We=36===tt(e.width),r.style.position="absolute",Xe=12===tt(r.offsetWidth/3),S.removeChild(Ke),r=null)}function tt(e){return Math.round(parseFloat(e))}Ke=T.createElement("div"),(r=T.createElement("div")).style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===r.style.backgroundClip,M.extend(g,{boxSizingReliable:function(){return et(),We},pixelBoxStyles:function(){return et(),je},pixelPosition:function(){return et(),Ve},reliableMarginLeft:function(){return et(),Ye},scrollboxSize:function(){return et(),Xe},reliableTrDimensions:function(){var e,t,i;return null==qe&&(e=T.createElement("table"),t=T.createElement("tr"),i=T.createElement("div"),e.style.cssText="position:absolute;left:-11111px",t.style.height="1px",i.style.height="9px",S.appendChild(e).appendChild(t).appendChild(i),i=b.getComputedStyle(t),qe=3<parseInt(i.height),S.removeChild(e)),qe}}));var it=["Webkit","Moz","ms"],nt=T.createElement("div").style,rt={};function at(e){return M.cssProps[e]||rt[e]||(e in nt?e:rt[e]=(e=>{for(var t=e[0].toUpperCase()+e.slice(1),i=it.length;i--;)if((e=it[i]+t)in nt)return e})(e)||e)}var st=/^(none|table(?!-c[ea]).+)/,ot=/^--/,lt={position:"absolute",visibility:"hidden",display:"block"},ht={letterSpacing:"0",fontWeight:"400"};function ct(e,t,i){var n=ve.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function ut(e,t,i,n,r,a){var s="width"===t?1:0,o=0,l=0;if(i===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(l+=M.css(e,i+d[s],!0,r)),n?("content"===i&&(l-=M.css(e,"padding"+d[s],!0,r)),"margin"!==i&&(l-=M.css(e,"border"+d[s]+"Width",!0,r))):(l+=M.css(e,"padding"+d[s],!0,r),"padding"!==i?l+=M.css(e,"border"+d[s]+"Width",!0,r):o+=M.css(e,"border"+d[s]+"Width",!0,r));return!n&&0<=a&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-l-o-.5))||0),l}function dt(e,t,i){var n=He(e),r=(!g.boxSizingReliable()||i)&&"border-box"===M.css(e,"boxSizing",!1,n),a=r,s=Qe(e,t,n),o="offset"+t[0].toUpperCase()+t.slice(1);if(Ze.test(s)){if(!i)return s;s="auto"}return(!g.boxSizingReliable()&&r||!g.reliableTrDimensions()&&l(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===M.css(e,"display",!1,n))&&e.getClientRects().length&&(r="border-box"===M.css(e,"boxSizing",!1,n),a=o in e)&&(s=e[o]),(s=parseFloat(s)||0)+ut(e,t,i||(r?"border":"content"),a,n,s)+"px"}function a(e,t,i,n,r){return new a.prototype.init(e,t,i,n,r)}M.extend({cssHooks:{opacity:{get:function(e,t){if(t)return""===(t=Qe(e,"opacity"))?"1":t}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,s,o=_(t),l=ot.test(t),h=e.style;if(l||(t=at(o)),s=M.cssHooks[t]||M.cssHooks[o],void 0===i)return s&&"get"in s&&void 0!==(r=s.get(e,!1,n))?r:h[t];"string"==(a=typeof i)&&(r=ve.exec(i))&&r[1]&&(i=_e(e,t,r),a="number"),null!=i&&i==i&&("number"!==a||l||(i+=r&&r[3]||(M.cssNumber[o]?"":"px")),g.clearCloneStyle||""!==i||0!==t.indexOf("background")||(h[t]="inherit"),s&&"set"in s&&void 0===(i=s.set(e,i,n))||(l?h.setProperty(t,i):h[t]=i))}},css:function(e,t,i,n){var r,a=_(t);return ot.test(t)||(t=at(a)),"normal"===(r=void 0===(r=(a=M.cssHooks[t]||M.cssHooks[a])&&"get"in a?a.get(e,!0,i):r)?Qe(e,t,n):r)&&t in ht&&(r=ht[t]),(""===i||i)&&(a=parseFloat(r),!0===i||isFinite(a))?a||0:r}}),M.each(["height","width"],function(e,s){M.cssHooks[s]={get:function(e,t,i){if(t)return!st.test(M.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?dt(e,s,i):ze(e,lt,function(){return dt(e,s,i)})},set:function(e,t,i){var n=He(e),r=!g.scrollboxSize()&&"absolute"===n.position,a=(r||i)&&"border-box"===M.css(e,"boxSizing",!1,n),i=i?ut(e,s,i,a,n):0;return a&&r&&(i-=Math.ceil(e["offset"+s[0].toUpperCase()+s.slice(1)]-parseFloat(n[s])-ut(e,s,"border",!1,n)-.5)),i&&(a=ve.exec(t))&&"px"!==(a[3]||"px")&&(e.style[s]=t,t=M.css(e,s)),ct(0,t,i)}}}),M.cssHooks.marginLeft=$e(g.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Qe(e,"marginLeft"))||e.getBoundingClientRect().left-ze(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),M.each({margin:"",padding:"",border:"Width"},function(r,a){M.cssHooks[r+a]={expand:function(e){for(var t=0,i={},n="string"==typeof e?e.split(" "):[e];t<4;t++)i[r+d[t]+a]=n[t]||n[t-2]||n[0];return i}},"margin"!==r&&(M.cssHooks[r+a].set=ct)}),M.fn.extend({css:function(e,t){return u(this,function(e,t,i){var n,r,a={},s=0;if(Array.isArray(t)){for(n=He(e),r=t.length;s<r;s++)a[t[s]]=M.css(e,t[s],!1,n);return a}return void 0!==i?M.style(e,t,i):M.css(e,t)},e,t,1<arguments.length)}}),((M.Tween=a).prototype={constructor:a,init:function(e,t,i,n,r,a){this.elem=e,this.prop=i,this.easing=r||M.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||(M.cssNumber[i]?"":"px")},cur:function(){var e=a.propHooks[this.prop];return(e&&e.get?e:a.propHooks._default).get(this)},run:function(e){var t,i=a.propHooks[this.prop];return this.options.duration?this.pos=t=M.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(i&&i.set?i:a.propHooks._default).set(this),this}}).init.prototype=a.prototype,(a.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=M.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){M.fx.step[e.prop]?M.fx.step[e.prop](e):1!==e.elem.nodeType||!M.cssHooks[e.prop]&&null==e.elem.style[at(e.prop)]?e.elem[e.prop]=e.now:M.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=a.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},M.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},M.fx=a.prototype.init,M.fx.step={};var L,pt,D,ft=/^(?:toggle|show|hide)$/,mt=/queueHooks$/;function gt(){pt&&(!1===T.hidden&&b.requestAnimationFrame?b.requestAnimationFrame(gt):b.setTimeout(gt,M.fx.interval),M.fx.tick())}function vt(){return b.setTimeout(function(){L=void 0}),L=Date.now()}function yt(e,t){var i,n=0,r={height:e};for(t=t?1:0;n<4;n+=2-t)r["margin"+(i=d[n])]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function _t(e,t,i){for(var n,r=(I.tweeners[t]||[]).concat(I.tweeners["*"]),a=0,s=r.length;a<s;a++)if(n=r[a].call(i,t,e))return n}function I(r,e,t){var i,a,n,s,o,l,h,c=0,u=I.prefilters.length,d=M.Deferred().always(function(){delete p.elem}),p=function(){if(a)return!1;for(var e=L||vt(),e=Math.max(0,f.startTime+f.duration-e),t=1-(e/f.duration||0),i=0,n=f.tweens.length;i<n;i++)f.tweens[i].run(t);return d.notifyWith(r,[f,t,e]),t<1&&n?e:(n||d.notifyWith(r,[f,1,0]),d.resolveWith(r,[f]),!1)},f=d.promise({elem:r,props:M.extend({},e),opts:M.extend(!0,{specialEasing:{},easing:M.easing._default},t),originalProperties:e,originalOptions:t,startTime:L||vt(),duration:t.duration,tweens:[],createTween:function(e,t){t=M.Tween(r,f.opts,e,t,f.opts.specialEasing[e]||f.opts.easing);return f.tweens.push(t),t},stop:function(e){var t=0,i=e?f.tweens.length:0;if(!a){for(a=!0;t<i;t++)f.tweens[t].run(1);e?(d.notifyWith(r,[f,1,0]),d.resolveWith(r,[f,e])):d.rejectWith(r,[f,e])}return this}}),m=f.props,g=m,v=f.opts.specialEasing;for(n in g)if(o=v[s=_(n)],l=g[n],Array.isArray(l)&&(o=l[1],l=g[n]=l[0]),n!==s&&(g[s]=l,delete g[n]),(h=M.cssHooks[s])&&"expand"in h)for(n in l=h.expand(l),delete g[s],l)n in g||(g[n]=l[n],v[n]=o);else v[s]=o;for(;c<u;c++)if(i=I.prefilters[c].call(f,r,m,f.opts))return y(i.stop)&&(M._queueHooks(f.elem,f.opts.queue).stop=i.stop.bind(i)),i;return M.map(m,_t,f),y(f.opts.start)&&f.opts.start.call(r,f),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always),M.fx.timer(M.extend(p,{elem:r,anim:f,queue:f.opts.queue})),f}M.Animation=M.extend(I,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return _e(i.elem,e,ve.exec(t),i),i}]},tweener:function(e,t){for(var i,n=0,r=(e=y(e)?(t=e,["*"]):e.match(w)).length;n<r;n++)i=e[n],I.tweeners[i]=I.tweeners[i]||[],I.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var n,r,a,s,o,l,h,c="width"in t||"height"in t,u=this,d={},p=e.style,f=e.nodeType&&ge(e),m=x.get(e,"fxshow");for(n in i.queue||(null==(s=M._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,o=s.empty.fire,s.empty.fire=function(){s.unqueued||o()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,M.queue(e,"fx").length||s.empty.fire()})})),t)if(r=t[n],ft.test(r)){if(delete t[n],a=a||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;f=!0}d[n]=m&&m[n]||M.style(e,n)}if((l=!M.isEmptyObject(t))||!M.isEmptyObject(d))for(n in c&&1===e.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],null==(h=m&&m.display)&&(h=x.get(e,"display")),"none"===(c=M.css(e,"display"))&&(h?c=h:(A([e],!0),h=e.style.display||h,c=M.css(e,"display"),A([e]))),"inline"===c||"inline-block"===c&&null!=h)&&"none"===M.css(e,"float")&&(l||(u.done(function(){p.display=h}),null==h&&(c=p.display,h="none"===c?"":c)),p.display="inline-block"),i.overflow&&(p.overflow="hidden",u.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]})),l=!1,d)l||(m?"hidden"in m&&(f=m.hidden):m=x.access(e,"fxshow",{display:h}),a&&(m.hidden=!f),f&&A([e],!0),u.done(function(){for(n in f||A([e]),x.remove(e,"fxshow"),d)M.style(e,n,d[n])})),l=_t(f?m[n]:0,n,u),n in m||(m[n]=l.start,f&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?I.prefilters.unshift(e):I.prefilters.push(e)}}),M.speed=function(e,t,i){var n=e&&"object"==typeof e?M.extend({},e):{complete:i||!i&&t||y(e)&&e,duration:e,easing:i&&t||t&&!y(t)&&t};return M.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in M.fx.speeds?n.duration=M.fx.speeds[n.duration]:n.duration=M.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){y(n.old)&&n.old.call(this),n.queue&&M.dequeue(this,n.queue)},n},M.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ge).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(t,e,i,n){function r(){var e=I(this,M.extend({},t),s);(a||x.get(this,"finish"))&&e.stop(!0)}var a=M.isEmptyObject(t),s=M.speed(e,i,n);return r.finish=r,a||!1===s.queue?this.each(r):this.queue(s.queue,r)},stop:function(r,e,a){function s(e){var t=e.stop;delete e.stop,t(a)}return"string"!=typeof r&&(a=e,e=r,r=void 0),e&&this.queue(r||"fx",[]),this.each(function(){var e=!0,t=null!=r&&r+"queueHooks",i=M.timers,n=x.get(this);if(t)n[t]&&n[t].stop&&s(n[t]);else for(t in n)n[t]&&n[t].stop&&mt.test(t)&&s(n[t]);for(t=i.length;t--;)i[t].elem!==this||null!=r&&i[t].queue!==r||(i[t].anim.stop(a),e=!1,i.splice(t,1));!e&&a||M.dequeue(this,r)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var e,t=x.get(this),i=t[s+"queue"],n=t[s+"queueHooks"],r=M.timers,a=i?i.length:0;for(t.finish=!0,M.queue(this,s,[]),n&&n.stop&&n.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===s&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<a;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete t.finish})}}),M.each(["toggle","show","hide"],function(e,n){var r=M.fn[n];M.fn[n]=function(e,t,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(yt(n,!0),e,t,i)}}),M.each({slideDown:yt("show"),slideUp:yt("hide"),slideToggle:yt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){M.fn[e]=function(e,t,i){return this.animate(n,e,t,i)}}),M.timers=[],M.fx.tick=function(){var e,t=0,i=M.timers;for(L=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||M.fx.stop(),L=void 0},M.fx.timer=function(e){M.timers.push(e),M.fx.start()},M.fx.interval=13,M.fx.start=function(){pt||(pt=!0,gt())},M.fx.stop=function(){pt=null},M.fx.speeds={slow:600,fast:200,_default:400},M.fn.delay=function(n,e){return n=M.fx&&M.fx.speeds[n]||n,this.queue(e=e||"fx",function(e,t){var i=b.setTimeout(e,n);t.stop=function(){b.clearTimeout(i)}})},D=T.createElement("input"),i=T.createElement("select").appendChild(T.createElement("option")),D.type="checkbox",g.checkOn=""!==D.value,g.optSelected=i.selected,(D=T.createElement("input")).value="t",D.type="radio",g.radioValue="t"===D.value;var xt,St=M.expr.attrHandle,bt=(M.fn.extend({attr:function(e,t){return u(this,M.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){M.removeAttr(this,e)})}}),M.extend({attr:function(e,t,i){var n,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?M.prop(e,t,i):(1===a&&M.isXMLDoc(e)||(r=M.attrHooks[t.toLowerCase()]||(M.expr.match.bool.test(t)?xt:void 0)),void 0!==i?null===i?void M.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,i+""),i):!(r&&"get"in r&&null!==(n=r.get(e,t)))&&null==(n=M.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){var i;if(!g.radioValue&&"radio"===t&&l(e,"input"))return i=e.value,e.setAttribute("type",t),i&&(e.value=i),t}}},removeAttr:function(e,t){var i,n=0,r=t&&t.match(w);if(r&&1===e.nodeType)for(;i=r[n++];)e.removeAttribute(i)}}),xt={set:function(e,t,i){return!1===t?M.removeAttr(e,i):e.setAttribute(i,i),i}},M.each(M.expr.match.bool.source.match(/\w+/g),function(e,t){var s=St[t]||M.find.attr;St[t]=function(e,t,i){var n,r,a=t.toLowerCase();return i||(r=St[a],St[a]=n,n=null!=s(e,t,i)?a:null,St[a]=r),n}}),/^(?:input|select|textarea|button)$/i),Tt=/^(?:a|area)$/i;function N(e){return(e.match(w)||[]).join(" ")}function O(e){return e.getAttribute&&e.getAttribute("class")||""}function Mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(w)||[]}M.fn.extend({prop:function(e,t){return u(this,M.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[M.propFix[e]||e]})}}),M.extend({prop:function(e,t,i){var n,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&M.isXMLDoc(e)||(t=M.propFix[t]||t,r=M.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=M.find.attr(e,"tabindex");return t?parseInt(t,10):bt.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(M.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){e=e.parentNode;e&&(e.selectedIndex,e.parentNode)&&e.parentNode.selectedIndex}}),M.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){M.propFix[this.toLowerCase()]=this}),M.fn.extend({addClass:function(t){var e,i,n,r,a,s,o=0;if(y(t))return this.each(function(e){M(this).addClass(t.call(this,e,O(this)))});if((e=Mt(t)).length)for(;i=this[o++];)if(s=O(i),n=1===i.nodeType&&" "+N(s)+" "){for(a=0;r=e[a++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");s!==(s=N(n))&&i.setAttribute("class",s)}return this},removeClass:function(t){var e,i,n,r,a,s,o=0;if(y(t))return this.each(function(e){M(this).removeClass(t.call(this,e,O(this)))});if(!arguments.length)return this.attr("class","");if((e=Mt(t)).length)for(;i=this[o++];)if(s=O(i),n=1===i.nodeType&&" "+N(s)+" "){for(a=0;r=e[a++];)for(;-1<n.indexOf(" "+r+" ");)n=n.replace(" "+r+" "," ");s!==(s=N(n))&&i.setAttribute("class",s)}return this},toggleClass:function(r,t){var a=typeof r,s="string"==a||Array.isArray(r);return"boolean"==typeof t&&s?t?this.addClass(r):this.removeClass(r):y(r)?this.each(function(e){M(this).toggleClass(r.call(this,e,O(this),t),t)}):this.each(function(){var e,t,i,n;if(s)for(t=0,i=M(this),n=Mt(r);e=n[t++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==r&&"boolean"!=a||((e=O(this))&&x.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==r&&x.get(this,"__className__")||""))})},hasClass:function(e){for(var t,i=0,n=" "+e+" ";t=this[i++];)if(1===t.nodeType&&-1<(" "+N(O(t))+" ").indexOf(n))return!0;return!1}});function wt(e){e.stopPropagation()}var Et=/\r/g,At=(M.fn.extend({val:function(t){var i,e,n,r=this[0];return arguments.length?(n=y(t),this.each(function(e){1===this.nodeType&&(null==(e=n?t.call(this,e,M(this).val()):t)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=M.map(e,function(e){return null==e?"":e+""})),(i=M.valHooks[this.type]||M.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,e,"value")||(this.value=e))})):r?(i=M.valHooks[r.type]||M.valHooks[r.nodeName.toLowerCase()])&&"get"in i&&void 0!==(e=i.get(r,"value"))?e:"string"==typeof(e=r.value)?e.replace(Et,""):null==e?"":e:void 0}}),M.extend({valHooks:{option:{get:function(e){var t=M.find.attr(e,"value");return null!=t?t:N(M.text(e))}},select:{get:function(e){for(var t,i=e.options,n=e.selectedIndex,r="select-one"===e.type,a=r?null:[],s=r?n+1:i.length,o=n<0?s:r?n:0;o<s;o++)if(((t=i[o]).selected||o===n)&&!t.disabled&&(!t.parentNode.disabled||!l(t.parentNode,"optgroup"))){if(t=M(t).val(),r)return t;a.push(t)}return a},set:function(e,t){for(var i,n,r=e.options,a=M.makeArray(t),s=r.length;s--;)((n=r[s]).selected=-1<M.inArray(M.valHooks.option.get(n),a))&&(i=!0);return i||(e.selectedIndex=-1),a}}}}),M.each(["radio","checkbox"],function(){M.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<M.inArray(M(e).val(),t)}},g.checkOn||(M.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),g.focusin="onfocusin"in b,/^(?:focusinfocus|focusoutblur)$/),Ct=(M.extend(M.event,{trigger:function(e,t,i,n){var r,a,s,o,l,h,c,u=[i||T],d=V.call(e,"type")?e.type:e,p=V.call(e,"namespace")?e.namespace.split("."):[],f=c=a=i=i||T;if(3!==i.nodeType&&8!==i.nodeType&&!At.test(d+M.event.triggered)&&(-1<d.indexOf(".")&&(d=(p=d.split(".")).shift(),p.sort()),o=d.indexOf(":")<0&&"on"+d,(e=e[M.expando]?e:new M.Event(d,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:M.makeArray(t,[e]),h=M.event.special[d]||{},n||!h.trigger||!1!==h.trigger.apply(i,t))){if(!n&&!h.noBubble&&!m(i)){for(s=h.delegateType||d,At.test(s+d)||(f=f.parentNode);f;f=f.parentNode)u.push(f),a=f;a===(i.ownerDocument||T)&&u.push(a.defaultView||a.parentWindow||b)}for(r=0;(f=u[r++])&&!e.isPropagationStopped();)c=f,e.type=1<r?s:h.bindType||d,(l=(x.get(f,"events")||Object.create(null))[e.type]&&x.get(f,"handle"))&&l.apply(f,t),(l=o&&f[o])&&l.apply&&v(f)&&(e.result=l.apply(f,t),!1===e.result)&&e.preventDefault();return e.type=d,n||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(u.pop(),t)||!v(i)||o&&y(i[d])&&!m(i)&&((a=i[o])&&(i[o]=null),M.event.triggered=d,e.isPropagationStopped()&&c.addEventListener(d,wt),i[d](),e.isPropagationStopped()&&c.removeEventListener(d,wt),M.event.triggered=void 0,a)&&(i[o]=a),e.result}},simulate:function(e,t,i){i=M.extend(new M.Event,i,{type:e,isSimulated:!0});M.event.trigger(i,null,t)}}),M.fn.extend({trigger:function(e,t){return this.each(function(){M.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return M.event.trigger(e,t,i,!0)}}),g.focusin||M.each({focus:"focusin",blur:"focusout"},function(i,n){function r(e){M.event.simulate(n,e.target,M.event.fix(e))}M.event.special[n]={setup:function(){var e=this.ownerDocument||this.document||this,t=x.access(e,n);t||e.addEventListener(i,r,!0),x.access(e,n,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=x.access(e,n)-1;t?x.access(e,n,t):(e.removeEventListener(i,r,!0),x.remove(e,n))}}}),b.location),Pt={guid:Date.now()},Rt=/\?/,Lt=(M.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new b.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||M.error("Invalid XML: "+e),t},/\[\]$/),Dt=/\r?\n/g,It=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;M.param=function(e,t){function i(e,t){t=y(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)}var n,r=[];if(null==e)return"";if(Array.isArray(e)||e.jquery&&!M.isPlainObject(e))M.each(e,function(){i(this.name,this.value)});else for(n in e)!function i(n,e,r,a){if(Array.isArray(e))M.each(e,function(e,t){r||Lt.test(n)?a(n,t):i(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,a)});else if(r||"object"!==f(e))a(n,e);else for(var t in e)i(n+"["+t+"]",e[t],r,a)}(n,e[n],t,i);return r.join("&")},M.fn.extend({serialize:function(){return M.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=M.prop(this,"elements");return e?M.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!M(this).is(":disabled")&&Nt.test(this.nodeName)&&!It.test(e)&&(this.checked||!Se.test(e))}).map(function(e,t){var i=M(this).val();return null==i?null:Array.isArray(i)?M.map(i,function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}}):{name:t.name,value:i.replace(Dt,"\r\n")}}).get()}});var Ot=/%20/g,Ut=/#.*$/,Bt=/([?&])_=[^&]*/,Ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,Gt=/^(?:GET|HEAD)$/,kt=/^\/\//,Ht={},zt={},Vt="*/".concat("*"),Wt=T.createElement("a");function Xt(a){return function(e,t){"string"!=typeof e&&(t=e,e="*");var i,n=0,r=e.toLowerCase().match(w)||[];if(y(t))for(;i=r[n++];)"+"===i[0]?(i=i.slice(1)||"*",(a[i]=a[i]||[]).unshift(t)):(a[i]=a[i]||[]).push(t)}}function jt(t,n,r,a){var s={},o=t===zt;function l(e){var i;return s[e]=!0,M.each(t[e]||[],function(e,t){t=t(n,r,a);return"string"!=typeof t||o||s[t]?o?!(i=t):void 0:(n.dataTypes.unshift(t),l(t),!1)}),i}return l(n.dataTypes[0])||!s["*"]&&l("*")}function qt(e,t){var i,n,r=M.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n=n||{})[i]=t[i]);return n&&M.extend(!0,e,n),e}Wt.href=Ct.href,M.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":M.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?qt(qt(e,M.ajaxSettings),t):qt(M.ajaxSettings,e)},ajaxPrefilter:Xt(Ht),ajaxTransport:Xt(zt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var l,h,c,i,u,d,p,n,r,f=M.ajaxSetup({},t=t||{}),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?M(m):M.event,v=M.Deferred(),y=M.Callbacks("once memory"),_=f.statusCode||{},a={},s={},o="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(d){if(!i)for(i={};t=Ft.exec(c);)i[t[1].toLowerCase()+" "]=(i[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=i[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return d?c:null},setRequestHeader:function(e,t){return null==d&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==d&&(f.mimeType=e),this},statusCode:function(e){if(e)if(d)x.always(e[x.status]);else for(var t in e)_[t]=[_[t],e[t]];return this},abort:function(e){e=e||o;return l&&l.abort(e),S(0,e),this}};if(v.promise(x),f.url=((e||f.url||Ct.href)+"").replace(kt,Ct.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(w)||[""],null==f.crossDomain){r=T.createElement("a");try{r.href=f.url,r.href=r.href,f.crossDomain=Wt.protocol+"//"+Wt.host!=r.protocol+"//"+r.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=M.param(f.data,f.traditional)),jt(Ht,f,t,x),!d){for(n in(p=M.event&&f.global)&&0==M.active++&&M.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Gt.test(f.type),h=f.url.replace(Ut,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Ot,"+")):(r=f.url.slice(h.length),f.data&&(f.processData||"string"==typeof f.data)&&(h+=(Rt.test(h)?"&":"?")+f.data,delete f.data),!1===f.cache&&(h=h.replace(Bt,"$1"),r=(Rt.test(h)?"&":"?")+"_="+Pt.guid+++r),f.url=h+r),f.ifModified&&(M.lastModified[h]&&x.setRequestHeader("If-Modified-Since",M.lastModified[h]),M.etag[h])&&x.setRequestHeader("If-None-Match",M.etag[h]),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&x.setRequestHeader("Content-Type",f.contentType),x.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Vt+"; q=0.01":""):f.accepts["*"]),f.headers)x.setRequestHeader(n,f.headers[n]);if(f.beforeSend&&(!1===f.beforeSend.call(m,x,f)||d))return x.abort();if(o="abort",y.add(f.complete),x.done(f.success),x.fail(f.error),l=jt(zt,f,t,x)){if(x.readyState=1,p&&g.trigger("ajaxSend",[x,f]),d)return x;f.async&&0<f.timeout&&(u=b.setTimeout(function(){x.abort("timeout")},f.timeout));try{d=!1,l.send(a,S)}catch(e){if(d)throw e;S(-1,e)}}else S(-1,"No Transport")}return x;function S(e,t,i,n){var r,a,s,o=t;d||(d=!0,u&&b.clearTimeout(u),l=void 0,c=n||"",x.readyState=0<e?4:0,n=200<=e&&e<300||304===e,i&&(s=((e,t,i)=>{for(var n,r,a,s,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in o)if(o[r]&&o[r].test(n)){l.unshift(r);break}if(l[0]in i)a=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){a=r;break}s=s||r}a=a||s}if(a)return a!==l[0]&&l.unshift(a),i[a]})(f,x,i)),!n&&-1<M.inArray("script",f.dataTypes)&&(f.converters["text script"]=function(){}),s=((e,t,i,n)=>{var r,a,s,o,l,h={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)h[s.toLowerCase()]=e.converters[s];for(a=c.shift();a;)if(e.responseFields[a]&&(i[e.responseFields[a]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(s=h[l+" "+a]||h["* "+a]))for(r in h)if((o=r.split(" "))[1]===a&&(s=h[l+" "+o[0]]||h["* "+o[0]])){!0===s?s=h[r]:!0!==h[r]&&(a=o[0],c.unshift(o[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}})(f,s,x,n),n?(f.ifModified&&((i=x.getResponseHeader("Last-Modified"))&&(M.lastModified[h]=i),i=x.getResponseHeader("etag"))&&(M.etag[h]=i),204===e||"HEAD"===f.type?o="nocontent":304===e?o="notmodified":(o=s.state,r=s.data,n=!(a=s.error))):(a=o,!e&&o||(o="error",e<0&&(e=0))),x.status=e,x.statusText=(t||o)+"",n?v.resolveWith(m,[r,o,x]):v.rejectWith(m,[x,o,a]),x.statusCode(_),_=void 0,p&&g.trigger(n?"ajaxSuccess":"ajaxError",[x,f,n?r:a]),y.fireWith(m,[x,o]),p&&(g.trigger("ajaxComplete",[x,f]),--M.active||M.event.trigger("ajaxStop")))}},getJSON:function(e,t,i){return M.get(e,t,i,"json")},getScript:function(e,t){return M.get(e,void 0,t,"script")}}),M.each(["get","post"],function(e,r){M[r]=function(e,t,i,n){return y(t)&&(n=n||i,i=t,t=void 0),M.ajax(M.extend({url:e,type:r,dataType:n,data:t,success:i},M.isPlainObject(e)&&e))}}),M.ajaxPrefilter(function(e){for(var t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),M._evalUrl=function(e,t,i){return M.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){M.globalEval(e,t,i)}})},M.fn.extend({wrapAll:function(e){return this[0]&&(y(e)&&(e=e.call(this[0])),e=M(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(i){return y(i)?this.each(function(e){M(this).wrapInner(i.call(this,e))}):this.each(function(){var e=M(this),t=e.contents();t.length?t.wrapAll(i):e.append(i)})},wrap:function(t){var i=y(t);return this.each(function(e){M(this).wrapAll(i?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){M(this).replaceWith(this.childNodes)}),this}}),M.expr.pseudos.hidden=function(e){return!M.expr.pseudos.visible(e)},M.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},M.ajaxSettings.xhr=function(){try{return new b.XMLHttpRequest}catch(e){}};var Yt={0:200,1223:204},Kt=M.ajaxSettings.xhr();g.cors=!!Kt&&"withCredentials"in Kt,g.ajax=Kt=!!Kt,M.ajaxTransport(function(r){var a,s;if(g.cors||Kt&&!r.crossDomain)return{send:function(e,t){var i,n=r.xhr();if(n.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(i in r.xhrFields)n[i]=r.xhrFields[i];for(i in r.mimeType&&n.overrideMimeType&&n.overrideMimeType(r.mimeType),r.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)n.setRequestHeader(i,e[i]);a=function(e){return function(){a&&(a=s=n.onload=n.onerror=n.onabort=n.ontimeout=n.onreadystatechange=null,"abort"===e?n.abort():"error"===e?"number"!=typeof n.status?t(0,"error"):t(n.status,n.statusText):t(Yt[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=a(),s=n.onerror=n.ontimeout=a("error"),void 0!==n.onabort?n.onabort=s:n.onreadystatechange=function(){4===n.readyState&&b.setTimeout(function(){a&&s()})},a=a("abort");try{n.send(r.hasContent&&r.data||null)}catch(e){if(a)throw e}},abort:function(){a&&a()}}}),M.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),M.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return M.globalEval(e),e}}}),M.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),M.ajaxTransport("script",function(i){var n,r;if(i.crossDomain||i.scriptAttrs)return{send:function(e,t){n=M("<script>").attr(i.scriptAttrs||{}).prop({charset:i.scriptCharset,src:i.url}).on("load error",r=function(e){n.remove(),r=null,e&&t("error"===e.type?404:200,e.type)}),T.head.appendChild(n[0])},abort:function(){r&&r()}}});var Zt=[],Jt=/(=)\?(?=&|$)|\?\?/,Qt=(M.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Zt.pop()||M.expando+"_"+Pt.guid++;return this[e]=!0,e}}),M.ajaxPrefilter("json jsonp",function(e,t,i){var n,r,a,s=!1!==e.jsonp&&(Jt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Jt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Jt,"$1"+n):!1!==e.jsonp&&(e.url+=(Rt.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return a||M.error(n+" was not called"),a[0]},e.dataTypes[0]="json",r=b[n],b[n]=function(){a=arguments},i.always(function(){void 0===r?M(b).removeProp(n):b[n]=r,e[n]&&(e.jsonpCallback=t.jsonpCallback,Zt.push(n)),a&&y(r)&&r(a[0]),a=r=void 0}),"script"}),g.createHTMLDocument=((e=T.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===e.childNodes.length),M.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(g.createHTMLDocument?((n=(t=T.implementation.createHTMLDocument("")).createElement("base")).href=T.location.href,t.head.appendChild(n)):t=T),n=!i&&[],(i=J.exec(e))?[t.createElement(i[1])]:(i=Ee([e],t,n),n&&n.length&&M(n).remove(),M.merge([],i.childNodes)));var n},M.fn.load=function(e,t,i){var n,r,a,s=this,o=e.indexOf(" ");return-1<o&&(n=N(e.slice(o)),e=e.slice(0,o)),y(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),0<s.length&&M.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){a=arguments,s.html(n?M("<div>").append(M.parseHTML(e)).find(n):e)}).always(i&&function(e,t){s.each(function(){i.apply(this,a||[e.responseText,t,e])})}),this},M.expr.pseudos.animated=function(t){return M.grep(M.timers,function(e){return t===e.elem}).length},M.offset={setOffset:function(e,t,i){var n,r,a,s,o=M.css(e,"position"),l=M(e),h={};"static"===o&&(e.style.position="relative"),a=l.offset(),n=M.css(e,"top"),s=M.css(e,"left"),o=("absolute"===o||"fixed"===o)&&-1<(n+s).indexOf("auto")?(r=(o=l.position()).top,o.left):(r=parseFloat(n)||0,parseFloat(s)||0),null!=(t=y(t)?t.call(e,i,M.extend({},a)):t).top&&(h.top=t.top-a.top+r),null!=t.left&&(h.left=t.left-a.left+o),"using"in t?t.using.call(e,h):("number"==typeof h.top&&(h.top+="px"),"number"==typeof h.left&&(h.left+="px"),l.css(h))}},M.fn.extend({offset:function(t){var e,i;return arguments.length?void 0===t?this:this.each(function(e){M.offset.setOffset(this,t,e)}):(i=this[0])?i.getClientRects().length?(e=i.getBoundingClientRect(),i=i.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],r={top:0,left:0};if("fixed"===M.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===M.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((r=M(e).offset()).top+=M.css(e,"borderTopWidth",!0),r.left+=M.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-M.css(n,"marginTop",!0),left:t.left-r.left-M.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===M.css(e,"position");)e=e.offsetParent;return e||S})}}),M.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var a="pageYOffset"===r;M.fn[t]=function(e){return u(this,function(e,t,i){var n;if(m(e)?n=e:9===e.nodeType&&(n=e.defaultView),void 0===i)return n?n[r]:e[t];n?n.scrollTo(a?n.pageXOffset:i,a?i:n.pageYOffset):e[t]=i},t,e,arguments.length)}}),M.each(["top","left"],function(e,i){M.cssHooks[i]=$e(g.pixelPosition,function(e,t){if(t)return t=Qe(e,i),Ze.test(t)?M(e).position()[i]+"px":t})}),M.each({Height:"height",Width:"width"},function(s,o){M.each({padding:"inner"+s,content:o,"":"outer"+s},function(n,a){M.fn[a]=function(e,t){var i=arguments.length&&(n||"boolean"!=typeof e),r=n||(!0===e||!0===t?"margin":"border");return u(this,function(e,t,i){var n;return m(e)?0===a.indexOf("outer")?e["inner"+s]:e.document.documentElement["client"+s]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+s],n["scroll"+s],e.body["offset"+s],n["offset"+s],n["client"+s])):void 0===i?M.css(e,t,r):M.style(e,t,i,r)},o,i?e:void 0,i)}})}),M.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){M.fn[t]=function(e){return this.on(t,e)}}),M.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),M.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,i){M.fn[i]=function(e,t){return 0<arguments.length?this.on(i,null,e,t):this.trigger(i)}}),/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g),$t=(M.proxy=function(e,t){var i,n;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return i=o.call(arguments,2),(n=function(){return e.apply(t||this,i.concat(o.call(arguments)))}).guid=e.guid=e.guid||M.guid++,n},M.holdReady=function(e){e?M.readyWait++:M.ready(!0)},M.isArray=Array.isArray,M.parseJSON=JSON.parse,M.nodeName=l,M.isFunction=y,M.isWindow=m,M.camelCase=_,M.type=f,M.now=Date.now,M.isNumeric=function(e){var t=M.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},M.trim=function(e){return null==e?"":(e+"").replace(Qt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return M}),b.jQuery),ei=b.$;return M.noConflict=function(e){return b.$===M&&(b.$=ei),e&&b.jQuery===M&&(b.jQuery=$t),M},void 0===U&&(b.jQuery=b.$=M),M}),((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).window=e.window||{})})(this,function(e){function v(e){return Math.round(1e5*e)/1e5||0}var b=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,T=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,I=Math.PI/180,N=Math.sin,O=Math.cos,U=Math.abs,B=Math.sqrt;function M(e){function t(e,t,i,n){c=(i-e)/3,u=(n-t)/3,o.push(e+c,t+u,i-c,n-u,i,n)}var i,n,r,a,s,o,l,h,c,u,d,p,f,m=(e+"").replace(T,function(e){e=+e;return e<1e-4&&-1e-4<e?0:e}).match(b)||[],g=[],v=0,y=0,_=m.length,x=0,S="ERROR: malformed path: "+e;if(e&&isNaN(m[0])&&!isNaN(m[1])){for(i=0;i<_;i++)if(p=a,isNaN(m[i])?s=(a=m[i].toUpperCase())!==m[i]:i--,f=+m[i+1],r=+m[i+2],s&&(f+=v,r+=y),i||(l=f,h=r),"M"===a)o&&(o.length<8?--g.length:x+=o.length),v=l=f,y=h=r,o=[f,r],g.push(o),i+=2,a="L";else if("C"===a)s||(v=y=0),(o=o||[0,0]).push(f,r,v+ +m[i+3],y+ +m[i+4],v+=+m[i+5],y+=+m[i+6]),i+=6;else if("S"===a)c=v,u=y,"C"!==p&&"S"!==p||(c+=v-o[o.length-4],u+=y-o[o.length-3]),s||(v=y=0),o.push(c,u,f,r,v+=+m[i+3],y+=+m[i+4]),i+=4;else if("Q"===a)c=v+2/3*(f-v),u=y+2/3*(r-y),s||(v=y=0),v+=+m[i+3],y+=+m[i+4],o.push(c,u,v+2/3*(f-v),y+2/3*(r-y),v,y),i+=4;else if("T"===a)c=v-o[o.length-4],u=y-o[o.length-3],o.push(v+c,y+u,f+2/3*(v+1.5*c-f),r+2/3*(y+1.5*u-r),v=f,y=r),i+=2;else if("H"===a)t(v,y,v=f,y),i+=1;else if("V"===a)t(v,y,v,y=f+(s?y-v:0)),i+=1;else if("L"===a||"Z"===a)"Z"===a&&(f=l,r=h,o.closed=!0),("L"===a||.5<U(v-f)||.5<U(y-r))&&(t(v,y,f,r),"L"===a)&&(i+=2),v=f,y=r;else if("A"===a){if(p=m[i+4],f=m[i+5],c=m[i+6],u=m[i+7],n=7,1<p.length&&(p.length<3?(u=c,c=f,n--):(u=f,c=p.substr(2),n-=2),f=p.charAt(1),p=p.charAt(0)),d=((e,t,i,n,r,a,s,o,l)=>{if(e!==o||t!==l){i=U(i),n=U(n);var h=r%360*I,c=O(h),h=N(h),u=Math.PI,d=2*u,p=(e-o)/2,f=(t-l)/2,m=c*p+h*f,g=-h*p+c*f,p=m*m,f=g*g,v=p/(i*i)+f/(n*n),v=(1<v&&(i=B(v)*i,n=B(v)*n),i*i),y=n*n,v=(v*y-v*f-y*p)/(v*f+y*p),f=(a===s?-1:1)*B(v=v<0?0:v),y=i*g/n*f,p=-n*m/i*f,_=c*y-h*p+(e+o)/2,x=h*y+c*p+(t+l)/2,S=(m-y)/i,b=(g-p)/n,a=(-m-y)/i,v=(-g-p)/n,f=S*S+b*b,T=(b<0?-1:1)*Math.acos(S/B(f)),e=(S*v-b*a<0?-1:1)*Math.acos((S*a+b*v)/B(f*(a*a+v*v)));isNaN(e)&&(e=u),!s&&0<e?e-=d:s&&e<0&&(e+=d),T%=d,e%=d;for(var M=Math.ceil(U(e)/(d/4)),w=[],E=e/M,A=4/3*N(E/2)/(1+O(E/2)),C=c*i,P=h*i,R=h*-n,L=c*n,D=0;D<M;D++)m=O(r=T+D*E),g=N(r),S=O(r+=E),b=N(r),w.push(m-A*g,g+A*m,S+A*b,b-A*S,S,b);for(D=0;D<w.length;D+=2)w[D]=(m=w[D])*C+(g=w[D+1])*R+_,w[D+1]=m*P+g*L+x;return w[D-2]=o,w[D-1]=l,w}})(v,y,+m[i+1],+m[i+2],+m[i+3],+p,+f,(s?v:0)+ +c,(s?y:0)+ +u),i+=n,d)for(n=0;n<d.length;n++)o.push(d[n]);v=o[o.length-2],y=o[o.length-1]}else console.log(S);(i=o.length)<6?(g.pop(),i=0):o[0]===o[i-2]&&o[1]===o[i-1]&&(o.closed=!0),g.totalPoints=x+i}else console.log(S);return g}function t(){return w||"undefined"!=typeof window&&(w=window.gsap)&&w.registerPlugin&&w}function n(){(w=t())?(w.registerEase("_CE",a.create),r=1):console.warn("Please gsap.registerPlugin(CustomEase)")}function y(e){return~~(1e3*e+(e<0?-.5:.5))/1e3}var w,r,i,E=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/gi,A=/[cLlsSaAhHvVtTqQ]/g,a=((i=_.prototype).setData=function(e,t){t=t||{};var i,n,r,a,s,o,l,h,c,u=(e=e||"0,0,1,1").match(E),d=1,p=[],f=[],m=t.precision||1,g=m<=1;if(this.data=e,(A.test(e)||~e.indexOf("M")&&e.indexOf("C")<0)&&(u=M(e)[0]),4===(i=u.length))u.unshift(0,0),u.push(1,1),i=8;else if((i-2)%6)throw"Invalid CustomEase";if(0!=+u[0]||1!=+u[i-2]){var v=u;e=t.height,(t=t.originY)||0===t||(t=Math.max(+v[v.length-1],+v[1]));for(var y=-1*v[0],_=-t,x=v.length,S=1/(+v[x-2]+y),b=(b=-e||(Math.abs(v[x-1]-v[1])<.01*(v[x-2]-v[0])?(e=>{for(var t=e.length,i=1e20,n=1;n<t;n+=6)+e[n]<i&&(i=+e[n]);return i})(v)+_:+v[x-1]+_))?1/b:-S,T=0;T<x;T+=2)v[T]=(+v[T]+y)*S,v[T+1]=(+v[T+1]+_)*b}for(this.segment=u,a=2;a<i;a+=6)n={x:+u[a-2],y:+u[a-1]},r={x:+u[a+4],y:+u[a+5]},p.push(n,r),function e(t,i,n,r,a,s,o,l,h,c,u){var d=(t+n)/2,p=(i+r)/2,f=(n+a)/2,m=(r+s)/2,g=(a+o)/2,v=(s+l)/2,y=(d+f)/2,_=(p+m)/2,f=(f+g)/2,m=(m+v)/2,x=(y+f)/2,S=(_+m)/2,b=o-t,T=l-i,n=Math.abs((n-o)*T-(r-l)*b),r=Math.abs((a-o)*T-(s-l)*b);c||(c=[{x:t,y:i},{x:o,y:l}],u=1),c.splice(u||c.length-1,0,{x:x,y:S}),h*(b*b+T*T)<(n+r)*(n+r)&&(a=c.length,e(t,i,d,p,y,_,x,S,h,c,u),e(x,S,f,m,g,v,o,l,h,c,u+1+(c.length-a)))}(n.x,n.y,+u[a],+u[a+1],+u[a+2],+u[a+3],r.x,r.y,1/(2e5*m),p,p.length-1);for(i=p.length,a=0;a<i;a++)((l=p[a]).x>(h=p[a-1]||l).x||h.y!==l.y&&h.x===l.x||l===h)&&l.x<=1?(h.cx=l.x-h.x,h.cy=l.y-h.y,h.n=l,h.nx=l.x,g&&1<a&&2<Math.abs(h.cy/h.cx-p[a-2].cy/p[a-2].cx)&&(g=0),h.cx<d&&(h.cx?d=h.cx:(h.cx=.001,a===i-1&&(h.x-=.001,d=Math.min(d,.001),g=0)))):(p.splice(a--,1),i--);if(s=1/(i=1/d+1|0),l=p[o=0],g){for(a=0;a<i;a++)n=(l=l.nx<(c=a*s)?p[++o]:l).y+(c-l.x)/l.cx*l.cy,f[a]={x:c,cx:s,y:n,cy:0,nx:9},a&&(f[a-1].cy=n-f[a-1].y);f[i-1].cy=(o=p[p.length-1]).y-n,f[i-1].cx=o.x-f[f.length-1].x}else{for(a=0;a<i;a++)l.nx<a*s&&(l=p[++o]),f[a]=l;o<p.length-1&&(f[a-1]=p[p.length-2])}return this.ease=function(e){var t=f[e*i|0]||f[i-1];return(t=t.nx<e?t.n:t).y+(e-t.x)/t.cx*t.cy},(this.ease.custom=this).id&&w&&w.registerEase(this.id,this.ease),this},i.getSVGData=function(e){return _.getSVGData(this,e)},_.create=function(e,t,i){return new _(e,t,i).ease},_.register=function(e){w=e,n()},_.get=function(e){return w.parseEase(e)},_.getSVGData=function(e,t){var i,n,r,a,s,o,l,h,c,u,d=(t=t||{}).width||100,p=t.height||100,f=t.x||0,m=(t.y||0)+p,g=w.utils.toArray(t.path)[0];if(t.invert&&(p=-p,m=0),(e=(e="string"==typeof e?w.parseEase(e):e).custom?e.custom:e)instanceof _)i=(e=>{for(var t,i,n,r="",a=(e="number"==typeof e[0]?[e]:e).length,s=0;s<a;s++){for(r+="M"+v((n=e[s])[0])+","+v(n[1])+" C",t=n.length,i=2;i<t;i++)r+=v(n[i++])+","+v(n[i++])+" "+v(n[i++])+","+v(n[i++])+" "+v(n[i++])+","+v(n[i])+" ";n.closed&&(r+="z")}return r})(((e,t,i,n,r,a,s)=>{for(var o,l,h,c,u,d=e.length;-1<--d;)for(l=(o=e[d]).length,h=0;h<l;h+=2)c=o[h],u=o[h+1],o[h]=c*t+u*n+a,o[h+1]=c*i+u*r+s;return e._dirty=1,e})([e.segment],d,0,0,-p,f,m));else{for(i=[f,m],a=1/(l=Math.max(5,200*(t.precision||1))),h=5/(l+=2),c=y(f+a*d),n=((u=y(m+e(a)*-p))-m)/(c-f),r=2;r<l;r++)s=y(f+r*a*d),o=y(m+e(r*a)*-p),(Math.abs((o-u)/(s-c)-n)>h||r===l-1)&&(i.push(c,u),n=(o-u)/(s-c)),c=s,u=o;i="M"+i.join(",")}return g&&g.setAttribute("d",i),i},_);function _(e,t,i){r||n(),this.id=e,this.setData(t,i)}a.version="3.13.0",a.headless=!0,t()&&w.registerPlugin(a),e.CustomEase=a,e.default=a,"undefined"==typeof window||window!==e?Object.defineProperty(e,"__esModule",{value:!0}):delete e.default}),((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).window=e.window||{})})(this,function(e){function t(){return"undefined"!=typeof window}function i(){return n||t()&&(n=window.gsap)&&n.registerPlugin&&n}function p(e){return Math.round(1e4*e)/1e4}function h(e){return parseFloat(e)||0}function c(e,t){var i=h(e);return~e.indexOf("%")?i/100*t:i}function f(e,t){return h(e.getAttribute(t))}function m(e,t,i,n,r,a){return A(Math.pow((h(i)-h(e))*r,2)+Math.pow((h(n)-h(t))*a,2))}function g(e){console.warn(e)}function v(e){return"non-scaling-stroke"===e.getAttribute("vector-effect")}function u(e){if(!(e=_(e)[0]))return 0;var t,i,n,r,a=e.tagName.toLowerCase(),s=e.style,o=1,l=1;v(e)&&(l=e.getScreenCTM(),o=A(l.a*l.a+l.b*l.b),l=A(l.d*l.d+l.c*l.c));try{r=e.getBBox()}catch(e){g("Some browsers won't measure invisible elements (like display:none or masks inside defs).")}var h=r||{x:0,y:0,width:0,height:0},c=h.x,u=h.y,d=h.width,h=h.height;if(r&&(d||h)||!E[a]||(d=f(e,E[a][0]),h=f(e,E[a][1]),"rect"!==a&&"line"!==a&&(d*=2,h*=2),"line"===a&&(c=f(e,"x1"),u=f(e,"y1"),d=Math.abs(d-c),h=Math.abs(h-u))),"path"===a)r=s.strokeDasharray,s.strokeDasharray="none",t=e.getTotalLength()||0,p(o)===p(l)||T||(T=1,g("Warning: <path> length cannot be measured when vector-effect is non-scaling-stroke and the element isn't proportionally scaled.")),t*=(o+l)/2,s.strokeDasharray=r;else if("rect"===a)t=2*d*o+2*h*l;else if("line"===a)t=m(c,u,c+d,u+h,o,l);else if("polyline"===a||"polygon"===a)for(i=e.getAttribute("points").match(w)||[],"polygon"===a&&i.push(i[0],i[1]),t=0,n=2;n<i.length;n+=2)t+=m(i[n-2],i[n-1],i[n],i[n+1],o,l)||0;else"circle"!==a&&"ellipse"!==a||(s=d/2*o,r=h/2*l,t=Math.PI*(3*(s+r)-A((3*s+r)*(s+3*r))));return t||0}function d(e,t){if(!(e=_(e)[0]))return[0,0];t=t||u(e)+1;var e=x.getComputedStyle(e),i=e.strokeDasharray||"",e=h(e.strokeDashoffset),n=i.indexOf(",");return[-e||0,(i=t<(i=(n=n<0?i.indexOf(" "):n)<0?t:h(i.substr(0,n)))?t:i)-e||0]}function y(){t()&&(x=window,b=n=i(),_=n.utils.toArray,M=n.core.getStyleSaver,o=n.core.reverting||function(){},S=-1!==((x.navigator||{}).userAgent||"").indexOf("Edge"))}var n,_,x,S,b,T,M,o,w=/[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi,E={rect:["width","height"],circle:["r","r"],ellipse:["rx","ry"],line:["x2","y2"]},A=Math.sqrt,r={version:"3.13.0",name:"drawSVG",register:function(e){n=e,y()},init:function(e,t,i){if(!e.getBBox)return!1;b||y();var n,r,a,s,o,l=u(e);return this.styles=M&&M(e,"strokeDashoffset,strokeDasharray,strokeMiterlimit"),this.tween=i,this._style=e.style,this._target=e,t+""=="true"?t="0 100%":t?-1===(t+"").indexOf(" ")&&(t="0 "+t):t="0 0",i=t,a=(n=d(e,r=l))[0],s=i.indexOf(" "),a=s<0?(o=void 0!==a?a+"":i,i):(o=i.substr(0,s),i.substr(s+1)),o=c(o,r),i=(a=c(a,r))<o?[a,o]:[o,a],this._length=p(l),this._dash=p(n[1]-n[0]),this._offset=p(-n[0]),this._dashPT=this.add(this,"_dash",this._dash,p(i[1]-i[0]),0,0,0,0,0,1),this._offsetPT=this.add(this,"_offset",this._offset,p(-i[0]),0,0,0,0,0,1),S&&(s=x.getComputedStyle(e)).strokeLinecap!==s.strokeLinejoin&&(i=h(s.strokeMiterlimit),this.add(e.style,"strokeMiterlimit",i,i+.01)),this._live=v(e)||~(t+"").indexOf("live"),this._nowrap=~(t+"").indexOf("nowrap"),this._props.push("drawSVG"),1},render:function(e,t){if(t.tween._time||!o()){var i,n,r,a=t._pt,s=t._style;if(a){for(t._live&&(i=u(t._target))!==t._length&&(n=i/t._length,t._length=i,t._offsetPT&&(t._offsetPT.s*=n,t._offsetPT.c*=n),t._dashPT?(t._dashPT.s*=n,t._dashPT.c*=n):t._dash*=n);a;)a.r(e,a.d),a=a._next;i=t._length-(n=t._dash||(e&&1!==e?1e-4:0))+.1,r=t._offset,n&&r&&n+Math.abs(r%t._length)>t._length-.05&&(r+=r<0?.005:-.005)&&(i+=.005),s.strokeDashoffset=n?r:r+.001,s.strokeDasharray=i<.1?"none":n?n+"px,"+(t._nowrap?999999:i)+"px":"0px, 999999px"}}else t.styles.revert()},getLength:u,getPosition:d};i()&&n.registerPlugin(r),e.DrawSVGPlugin=r,e.default=r,"undefined"==typeof window||window!==e?Object.defineProperty(e,"__esModule",{value:!0}):delete e.default}),((t,i)=>{"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(e){return i(t,e)}):"object"==typeof module&&module.exports?module.exports=i(t,require("jquery")):t.jQueryBridget=i(t,t.jQuery)})(window,function(e,t){var i=Array.prototype.slice,n=e.console,u=void 0===n?function(){}:function(e){n.error(e)};function r(l,h,c){(c=c||t||e.jQuery)&&(h.prototype.option||(h.prototype.option=function(e){c.isPlainObject(e)&&(this.options=c.extend(!0,this.options,e))}),c.fn[l]=function(e){return"string"==typeof e?(t=this,r=e,a=i.call(arguments,1),o="$()."+l+'("'+r+'")',t.each(function(e,t){var i,t=c.data(t,l);t?(i=t[r])&&"_"!=r.charAt(0)?(i=i.apply(t,a),s=void 0===s?i:s):u(o+" is not a valid method"):u(l+" not initialized. Cannot call methods, i.e. "+o)}),void 0!==s?s:t):(n=e,this.each(function(e,t){var i=c.data(t,l);i?(i.option(n),i._init()):(i=new h(t,n),c.data(t,l,i))}),this);var n,t,r,a,s,o},a(c))}function a(e){e&&!e.bridget&&(e.bridget=r)}return a(t||e.jQuery),r}),((e,t)=>{"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()})("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){var i;if(e&&t)return-1==(i=(i=this._events=this._events||{})[e]=i[e]||[]).indexOf(t)&&i.push(t),this},t.once=function(e,t){var i;if(e&&t)return this.on(e,t),((i=this._onceEvents=this._onceEvents||{})[e]=i[e]||{})[t]=!0,this},t.off=function(e,t){e=this._events&&this._events[e];if(e&&e.length)return-1!=(t=e.indexOf(t))&&e.splice(t,1),this},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],r=0;r<i.length;r++){var a=i[r];n&&n[a]&&(this.off(e,a),delete n[a]),a.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),((e,t)=>{"function"==typeof define&&define.amd?define("get-size/get-size",t):"object"==typeof module&&module.exports?module.exports=t():e.getSize=t()})(window,function(){function g(e){var t=parseFloat(e);return-1==e.indexOf("%")&&!isNaN(t)&&t}var t="undefined"==typeof console?function(){}:function(e){console.error(e)},v=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],y=v.length;function _(e){e=getComputedStyle(e);return e||t("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),e}var x,S=!1;function b(e){if(S||(S=!0,(c=document.createElement("div")).style.width="200px",c.style.padding="1px 2px 3px 4px",c.style.borderStyle="solid",c.style.borderWidth="1px 2px 3px 4px",c.style.boxSizing="border-box",(h=document.body||document.documentElement).appendChild(c),a=_(c),x=200==Math.round(g(a.width)),b.isBoxSizeOuter=x,h.removeChild(c)),(e="string"==typeof e?document.querySelector(e):e)&&"object"==typeof e&&e.nodeType){var t=_(e);if("none"==t.display){for(var i={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},n=0;n<y;n++)i[v[n]]=0;return i}var r={};r.width=e.offsetWidth,r.height=e.offsetHeight;for(var a=r.isBorderBox="border-box"==t.boxSizing,s=0;s<y;s++){var o=v[s],l=t[o],l=parseFloat(l);r[o]=isNaN(l)?0:l}var h=r.paddingLeft+r.paddingRight,c=r.paddingTop+r.paddingBottom,e=r.marginLeft+r.marginRight,u=r.marginTop+r.marginBottom,d=r.borderLeftWidth+r.borderRightWidth,p=r.borderTopWidth+r.borderBottomWidth,f=a&&x,m=g(t.width),m=(!1!==m&&(r.width=m+(f?0:h+d)),g(t.height));return!1!==m&&(r.height=m+(f?0:c+p)),r.innerWidth=r.width-(h+d),r.innerHeight=r.height-(c+p),r.outerWidth=r.width+e,r.outerHeight=r.height+u,r}var c,h,a}return b}),((e,t)=>{"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",t):"object"==typeof module&&module.exports?module.exports=t():e.matchesSelector=t()})(window,function(){var i=(()=>{var e=window.Element.prototype;if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],i=0;i<t.length;i++){var n=t[i]+"MatchesSelector";if(e[n])return n}})();return function(e,t){return e[i](t)}}),((t,i)=>{"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(e){return i(t,e)}):"object"==typeof module&&module.exports?module.exports=i(t,require("desandro-matches-selector")):t.fizzyUIUtils=i(t,t.matchesSelector)})(window,function(i,a){var l={extend:function(e,t){for(var i in t)e[i]=t[i];return e},modulo:function(e,t){return(e%t+t)%t}},t=Array.prototype.slice,h=(l.makeArray=function(e){return Array.isArray(e)?e:null==e?[]:"object"==typeof e&&"number"==typeof e.length?t.call(e):[e]},l.removeFrom=function(e,t){t=e.indexOf(t);-1!=t&&e.splice(t,1)},l.getParent=function(e,t){for(;e.parentNode&&e!=document.body;)if(a(e=e.parentNode,t))return e},l.getQueryElement=function(e){return"string"==typeof e?document.querySelector(e):e},l.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},l.filterFindElements=function(e,n){e=l.makeArray(e);var r=[];return e.forEach(function(e){if(e instanceof HTMLElement)if(n){a(e,n)&&r.push(e);for(var t=e.querySelectorAll(n),i=0;i<t.length;i++)r.push(t[i])}else r.push(e)}),r},l.debounceMethod=function(e,t,n){n=n||100;var r=e.prototype[t],a=t+"Timeout";e.prototype[t]=function(){var e=this[a],t=(clearTimeout(e),arguments),i=this;this[a]=setTimeout(function(){r.apply(i,t),delete i[a]},n)}},l.docReady=function(e){var t=document.readyState;"complete"==t||"interactive"==t?setTimeout(e):document.addEventListener("DOMContentLoaded",e)},l.toDashed=function(e){return e.replace(/(.)([A-Z])/g,function(e,t,i){return t+"-"+i}).toLowerCase()},i.console);return l.htmlInit=function(s,o){l.docReady(function(){var e=l.toDashed(o),n="data-"+e,t=document.querySelectorAll("["+n+"]"),e=document.querySelectorAll(".js-"+e),t=l.makeArray(t).concat(l.makeArray(e)),r=n+"-options",a=i.jQuery;t.forEach(function(e){var t,i=e.getAttribute(n)||e.getAttribute(r);try{t=i&&JSON.parse(i)}catch(t){return void(h&&h.error("Error parsing "+n+" on "+e.className+": "+t))}i=new s(e,t);a&&a.data(e,o,i)})})},l}),((e,t)=>{"function"==typeof define&&define.amd?define("flickity/js/cell",["get-size/get-size"],function(e){return t(0,e)}):"object"==typeof module&&module.exports?module.exports=t(0,require("get-size")):(e.Flickity=e.Flickity||{},e.Flickity.Cell=t(0,e.getSize))})(window,function(e,t){function i(e,t){this.element=e,this.parent=t,this.create()}var n=i.prototype;return n.create=function(){this.element.style.position="absolute",this.element.setAttribute("aria-hidden","true"),this.x=0,this.shift=0},n.destroy=function(){this.unselect(),this.element.style.position="";var e=this.parent.originSide;this.element.style[e]=""},n.getSize=function(){this.size=t(this.element)},n.setPosition=function(e){this.x=e,this.updateTarget(),this.renderPosition(e)},n.updateTarget=n.setDefaultTarget=function(){var e="left"==this.parent.originSide?"marginLeft":"marginRight";this.target=this.x+this.size[e]+this.size.width*this.parent.cellAlign},n.renderPosition=function(e){var t=this.parent.originSide;this.element.style[t]=this.parent.getPositionValue(e)},n.select=function(){this.element.classList.add("is-selected"),this.element.removeAttribute("aria-hidden")},n.unselect=function(){this.element.classList.remove("is-selected"),this.element.setAttribute("aria-hidden","true")},n.wrapShift=function(e){this.shift=e,this.renderPosition(this.x+this.parent.slideableWidth*e)},n.remove=function(){this.element.parentNode.removeChild(this.element)},i}),((e,t)=>{"function"==typeof define&&define.amd?define("flickity/js/slide",t):"object"==typeof module&&module.exports?module.exports=t():(e.Flickity=e.Flickity||{},e.Flickity.Slide=t())})(window,function(){function e(e){this.parent=e,this.isOriginLeft="left"==e.originSide,this.cells=[],this.outerWidth=0,this.height=0}var t=e.prototype;return t.addCell=function(e){var t;this.cells.push(e),this.outerWidth+=e.size.outerWidth,this.height=Math.max(e.size.outerHeight,this.height),1==this.cells.length&&(this.x=e.x,t=this.isOriginLeft?"marginLeft":"marginRight",this.firstMargin=e.size[t])},t.updateTarget=function(){var e=this.isOriginLeft?"marginRight":"marginLeft",t=this.getLastCell(),t=t?t.size[e]:0,e=this.outerWidth-(this.firstMargin+t);this.target=this.x+this.firstMargin+e*this.parent.cellAlign},t.getLastCell=function(){return this.cells[this.cells.length-1]},t.select=function(){this.cells.forEach(function(e){e.select()})},t.unselect=function(){this.cells.forEach(function(e){e.unselect()})},t.getCellElements=function(){return this.cells.map(function(e){return e.element})},e}),((e,t)=>{"function"==typeof define&&define.amd?define("flickity/js/animate",["fizzy-ui-utils/utils"],function(e){return t(0,e)}):"object"==typeof module&&module.exports?module.exports=t(0,require("fizzy-ui-utils")):(e.Flickity=e.Flickity||{},e.Flickity.animatePrototype=t(0,e.fizzyUIUtils))})(window,function(e,t){return{startAnimation:function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},animate:function(){this.applyDragForce(),this.applySelectedAttraction();var e,t=this.x;this.integratePhysics(),this.positionSlider(),this.settle(t),this.isAnimating&&(e=this,requestAnimationFrame(function(){e.animate()}))},positionSlider:function(){var e=this.x;this.options.wrapAround&&1<this.cells.length&&(e=t.modulo(e,this.slideableWidth),e-=this.slideableWidth,this.shiftWrapCells(e)),this.setTranslateX(e,this.isAnimating),this.dispatchScrollEvent()},setTranslateX:function(e,t){e+=this.cursorPosition,e=this.options.rightToLeft?-e:e;e=this.getPositionValue(e);this.slider.style.transform=t?"translate3d("+e+",0,0)":"translateX("+e+")"},dispatchScrollEvent:function(){var e,t=this.slides[0];t&&(e=(t=-this.x-t.target)/this.slidesWidth,this.dispatchEvent("scroll",null,[e,t]))},positionSliderAtSelected:function(){this.cells.length&&(this.x=-this.selectedSlide.target,this.velocity=0,this.positionSlider())},getPositionValue:function(e){return this.options.percentPosition?.01*Math.round(e/this.size.innerWidth*1e4)+"%":Math.round(e)+"px"},settle:function(e){this.isPointerDown||Math.round(100*this.x)!=Math.round(100*e)||this.restingFrames++,2<this.restingFrames&&(this.isAnimating=!1,delete this.isFreeScrolling,this.positionSlider(),this.dispatchEvent("settle",null,[this.selectedIndex]))},shiftWrapCells:function(e){var t=this.cursorPosition+e,t=(this._shiftCells(this.beforeShiftCells,t,-1),this.size.innerWidth-(e+this.slideableWidth+this.cursorPosition));this._shiftCells(this.afterShiftCells,t,1)},_shiftCells:function(e,t,i){for(var n=0;n<e.length;n++){var r=e[n];r.wrapShift(0<t?i:0),t-=r.size.outerWidth}},_unshiftCells:function(e){if(e&&e.length)for(var t=0;t<e.length;t++)e[t].wrapShift(0)},integratePhysics:function(){this.x+=this.velocity,this.velocity*=this.getFrictionFactor()},applyForce:function(e){this.velocity+=e},getFrictionFactor:function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},getRestingPosition:function(){return this.x+this.velocity/(1-this.getFrictionFactor())},applyDragForce:function(){var e;this.isDraggable&&this.isPointerDown&&(e=this.dragX-this.x-this.velocity,this.applyForce(e))},applySelectedAttraction:function(){var e;this.isDraggable&&this.isPointerDown||this.isFreeScrolling||!this.slides.length||(e=(-1*this.selectedSlide.target-this.x)*this.options.selectedAttraction,this.applyForce(e))}}}),((s,o)=>{var e;"function"==typeof define&&define.amd?define("flickity/js/flickity",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./cell","./slide","./animate"],function(e,t,i,n,r,a){return o(s,e,t,i,n,r,a)}):"object"==typeof module&&module.exports?module.exports=o(s,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./cell"),require("./slide"),require("./animate")):(e=s.Flickity,s.Flickity=o(s,s.EvEmitter,s.getSize,s.fizzyUIUtils,e.Cell,e.Slide,e.animatePrototype))})(window,function(n,e,t,s,i,o,r){var a=n.jQuery,l=n.getComputedStyle,h=n.console;function c(e,t){for(e=s.makeArray(e);e.length;)t.appendChild(e.shift())}var u=0,d={};function p(e,t){var i,n=s.getQueryElement(e);if(n){if(this.element=n,this.element.flickityGUID)return(i=d[this.element.flickityGUID]).option(t),i;a&&(this.$element=a(this.element)),this.options=s.extend({},this.constructor.defaults),this.option(t),this._create()}else h&&h.error("Bad element for Flickity: "+(n||e))}p.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,namespaceJQueryEvents:!0,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},p.createMethods=[];var f=p.prototype,m=(s.extend(f,e.prototype),f._create=function(){var e,t=this.guid=++u;for(e in this.element.flickityGUID=t,(d[t]=this).selectedIndex=0,this.restingFrames=0,this.x=0,this.velocity=0,this.originSide=this.options.rightToLeft?"right":"left",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",this._createSlider(),(this.options.resize||this.options.watchCSS)&&n.addEventListener("resize",this),this.options.on){var i=this.options.on[e];this.on(e,i)}p.createMethods.forEach(function(e){this[e]()},this),this.options.watchCSS?this.watchCSS():this.activate()},f.option=function(e){s.extend(this.options,e)},f.activate=function(){this.isActive||(this.isActive=!0,this.element.classList.add("flickity-enabled"),this.options.rightToLeft&&this.element.classList.add("flickity-rtl"),this.getSize(),c(this._filterFindCellElements(this.element.children),this.slider),this.viewport.appendChild(this.slider),this.element.appendChild(this.viewport),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,this.element.addEventListener("keydown",this)),this.emitEvent("activate"),this.selectInitialIndex(),this.isInitActivated=!0,this.dispatchEvent("ready"))},f._createSlider=function(){var e=document.createElement("div");e.className="flickity-slider",e.style[this.originSide]=0,this.slider=e},f._filterFindCellElements=function(e){return s.filterFindElements(e,this.options.cellSelector)},f.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize()},f._makeCells=function(e){return this._filterFindCellElements(e).map(function(e){return new i(e,this)},this)},f.getLastCell=function(){return this.cells[this.cells.length-1]},f.getLastSlide=function(){return this.slides[this.slides.length-1]},f.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},f._positionCells=function(e){this.maxCellHeight=(e=e||0)&&this.maxCellHeight||0;var t,i=0;0<e&&(i=(t=this.cells[e-1]).x+t.size.outerWidth);for(var n=this.cells.length,r=e;r<n;r++){var a=this.cells[r];a.setPosition(i),i+=a.size.outerWidth,this.maxCellHeight=Math.max(a.size.outerHeight,this.maxCellHeight)}this.slideableWidth=i,this.updateSlides(),this._containSlides(),this.slidesWidth=n?this.getLastSlide().target-this.slides[0].target:0},f._sizeCells=function(e){e.forEach(function(e){e.getSize()})},f.updateSlides=function(){var n,r,a;this.slides=[],this.cells.length&&(n=new o(this),this.slides.push(n),r="left"==this.originSide?"marginRight":"marginLeft",a=this._getCanCellFit(),this.cells.forEach(function(e,t){var i;n.cells.length&&(i=n.outerWidth-n.firstMargin+(e.size.outerWidth-e.size[r]),a.call(this,t,i)||(n.updateTarget(),n=new o(this),this.slides.push(n))),n.addCell(e)},this),n.updateTarget(),this.updateSelectedSlide())},f._getCanCellFit=function(){var t,i,e=this.options.groupCells;return e?"number"==typeof e?(t=parseInt(e,10),function(e){return e%t!=0}):(e="string"==typeof e&&e.match(/^(\d+)%$/),i=e?parseInt(e[1],10)/100:1,function(e,t){return t<=(this.size.innerWidth+1)*i}):function(){return!1}},f._init=f.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},f.getSize=function(){this.size=t(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign},{center:{left:.5,right:.5},left:{left:0,right:1},right:{right:0,left:1}});return f.setCellAlign=function(){var e=m[this.options.cellAlign];this.cellAlign=e?e[this.originSide]:this.options.cellAlign},f.setGallerySize=function(){var e;this.options.setGallerySize&&(e=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight,this.viewport.style.height=e+"px")},f._getWrapShiftCells=function(){var e,t;this.options.wrapAround&&(this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells),e=this.cursorPosition,t=this.cells.length-1,this.beforeShiftCells=this._getGapCells(e,t,-1),e=this.size.innerWidth-this.cursorPosition,this.afterShiftCells=this._getGapCells(e,0,1))},f._getGapCells=function(e,t,i){for(var n=[];0<e;){var r=this.cells[t];if(!r)break;n.push(r),t+=i,e-=r.size.outerWidth}return n},f._containSlides=function(){var e,t,i,n,r,a;this.options.contain&&!this.options.wrapAround&&this.cells.length&&(e=(t=this.options.rightToLeft)?"marginRight":"marginLeft",t=t?"marginLeft":"marginRight",i=this.slideableWidth-this.getLastCell().size[t],n=i<this.size.innerWidth,r=this.cursorPosition+this.cells[0].size[e],a=i-this.size.innerWidth*(1-this.cellAlign),this.slides.forEach(function(e){n?e.target=i*this.cellAlign:(e.target=Math.max(e.target,r),e.target=Math.min(e.target,a))},this))},f.dispatchEvent=function(e,t,i){var n=t?[t].concat(i):i;this.emitEvent(e,n),a&&this.$element&&(n=e+=this.options.namespaceJQueryEvents?".flickity":"",t&&((t=a.Event(t)).type=e,n=t),this.$element.trigger(n,i))},f.select=function(e,t,i){this.isActive&&(e=parseInt(e,10),this._wrapSelect(e),(this.options.wrapAround||t)&&(e=s.modulo(e,this.slides.length)),this.slides[e])&&(t=this.selectedIndex,this.selectedIndex=e,this.updateSelectedSlide(),i?this.positionSliderAtSelected():this.startAnimation(),this.options.adaptiveHeight&&this.setGallerySize(),this.dispatchEvent("select",null,[e]),e!=t&&this.dispatchEvent("change",null,[e]),this.dispatchEvent("cellSelect"))},f._wrapSelect=function(e){var t=this.slides.length;if(!(this.options.wrapAround&&1<t))return e;var i=s.modulo(e,t),n=Math.abs(i-this.selectedIndex),r=Math.abs(i+t-this.selectedIndex),i=Math.abs(i-t-this.selectedIndex);!this.isDragSelect&&r<n?e+=t:!this.isDragSelect&&i<n&&(e-=t),e<0?this.x-=this.slideableWidth:t<=e&&(this.x+=this.slideableWidth)},f.previous=function(e,t){this.select(this.selectedIndex-1,e,t)},f.next=function(e,t){this.select(this.selectedIndex+1,e,t)},f.updateSelectedSlide=function(){var e=this.slides[this.selectedIndex];e&&(this.unselectSelectedSlide(),(this.selectedSlide=e).select(),this.selectedCells=e.cells,this.selectedElements=e.getCellElements(),this.selectedCell=e.cells[0],this.selectedElement=this.selectedElements[0])},f.unselectSelectedSlide=function(){this.selectedSlide&&this.selectedSlide.unselect()},f.selectInitialIndex=function(){var e,t=this.options.initialIndex;this.isInitActivated?this.select(this.selectedIndex,!1,!0):t&&"string"==typeof t&&this.queryCell(t)?this.selectCell(t,!1,!0):(e=0,t&&this.slides[t]&&(e=t),this.select(e,!1,!0))},f.selectCell=function(e,t,i){var e=this.queryCell(e);e&&(e=this.getCellSlideIndex(e),this.select(e,t,i))},f.getCellSlideIndex=function(e){for(var t=0;t<this.slides.length;t++)if(-1!=this.slides[t].cells.indexOf(e))return t},f.getCell=function(e){for(var t=0;t<this.cells.length;t++){var i=this.cells[t];if(i.element==e)return i}},f.getCells=function(e){e=s.makeArray(e);var t=[];return e.forEach(function(e){e=this.getCell(e);e&&t.push(e)},this),t},f.getCellElements=function(){return this.cells.map(function(e){return e.element})},f.getParentCell=function(e){return this.getCell(e)||(e=s.getParent(e,".flickity-slider > *"),this.getCell(e))},f.getAdjacentCellElements=function(e,t){if(!e)return this.selectedSlide.getCellElements();t=void 0===t?this.selectedIndex:t;var i=this.slides.length;if(i<=1+2*e)return this.getCellElements();for(var n=[],r=t-e;r<=t+e;r++){var a=this.options.wrapAround?s.modulo(r,i):r,a=this.slides[a];a&&(n=n.concat(a.getCellElements()))}return n},f.queryCell=function(e){if("number"==typeof e)return this.cells[e];if("string"==typeof e){if(e.match(/^[#\.]?[\d\/]/))return;e=this.element.querySelector(e)}return this.getCell(e)},f.uiChange=function(){this.emitEvent("uiChange")},f.childUIPointerDown=function(e){"touchstart"!=e.type&&e.preventDefault(),this.focus()},f.onresize=function(){this.watchCSS(),this.resize()},s.debounceMethod(p,"onresize",150),f.resize=function(){var e;this.isActive&&(this.getSize(),this.options.wrapAround&&(this.x=s.modulo(this.x,this.slideableWidth)),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize(),this.emitEvent("resize"),e=this.selectedElements&&this.selectedElements[0],this.selectCell(e,!1,!0))},f.watchCSS=function(){this.options.watchCSS&&(-1!=l(this.element,":after").content.indexOf("flickity")?this.activate():this.deactivate())},f.onkeydown=function(e){var t=document.activeElement&&document.activeElement!=this.element;this.options.accessibility&&!t&&(t=p.keyboardHandlers[e.keyCode])&&t.call(this)},p.keyboardHandlers={37:function(){var e=this.options.rightToLeft?"next":"previous";this.uiChange(),this[e]()},39:function(){var e=this.options.rightToLeft?"previous":"next";this.uiChange(),this[e]()}},f.focus=function(){var e=n.pageYOffset;this.element.focus({preventScroll:!0}),n.pageYOffset!=e&&n.scrollTo(n.pageXOffset,e)},f.deactivate=function(){this.isActive&&(this.element.classList.remove("flickity-enabled"),this.element.classList.remove("flickity-rtl"),this.unselectSelectedSlide(),this.cells.forEach(function(e){e.destroy()}),this.element.removeChild(this.viewport),c(this.slider.children,this.element),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),this.element.removeEventListener("keydown",this)),this.isActive=!1,this.emitEvent("deactivate"))},f.destroy=function(){this.deactivate(),n.removeEventListener("resize",this),this.allOff(),this.emitEvent("destroy"),a&&this.$element&&a.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete d[this.guid]},s.extend(f,r),p.data=function(e){e=(e=s.getQueryElement(e))&&e.flickityGUID;return e&&d[e]},s.htmlInit(p,"flickity"),a&&a.bridget&&a.bridget("flickity",p),p.setJQuery=function(e){a=e},p.Cell=i,p.Slide=o,p}),((t,i)=>{"function"==typeof define&&define.amd?define("unipointer/unipointer",["ev-emitter/ev-emitter"],function(e){return i(t,e)}):"object"==typeof module&&module.exports?module.exports=i(t,require("ev-emitter")):t.Unipointer=i(t,t.EvEmitter)})(window,function(n,e){function t(){}var e=t.prototype=Object.create(e.prototype),i=(e.bindStartEvent=function(e){this._bindStartEvent(e,!0)},e.unbindStartEvent=function(e){this._bindStartEvent(e,!1)},e._bindStartEvent=function(e,t){var t=(t=void 0===t||t)?"addEventListener":"removeEventListener",i="mousedown";n.PointerEvent?i="pointerdown":"ontouchstart"in n&&(i="touchstart"),e[t](i,this)},e.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},e.getTouch=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.identifier==this.pointerIdentifier)return i}},e.onmousedown=function(e){var t=e.button;t&&0!==t&&1!==t||this._pointerDown(e,e)},e.ontouchstart=function(e){this._pointerDown(e,e.changedTouches[0])},e.onpointerdown=function(e){this._pointerDown(e,e)},e._pointerDown=function(e,t){e.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,this.pointerDown(e,t))},e.pointerDown=function(e,t){this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t])},{mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]});return e._bindPostStartEvents=function(e){e&&((e=i[e.type]).forEach(function(e){n.addEventListener(e,this)},this),this._boundPointerEvents=e)},e._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(e){n.removeEventListener(e,this)},this),delete this._boundPointerEvents)},e.onmousemove=function(e){this._pointerMove(e,e)},e.onpointermove=function(e){e.pointerId==this.pointerIdentifier&&this._pointerMove(e,e)},e.ontouchmove=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerMove(e,t)},e._pointerMove=function(e,t){this.pointerMove(e,t)},e.pointerMove=function(e,t){this.emitEvent("pointerMove",[e,t])},e.onmouseup=function(e){this._pointerUp(e,e)},e.onpointerup=function(e){e.pointerId==this.pointerIdentifier&&this._pointerUp(e,e)},e.ontouchend=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerUp(e,t)},e._pointerUp=function(e,t){this._pointerDone(),this.pointerUp(e,t)},e.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t])},e._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},e._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},e.pointerDone=function(){},e.onpointercancel=function(e){e.pointerId==this.pointerIdentifier&&this._pointerCancel(e,e)},e.ontouchcancel=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerCancel(e,t)},e._pointerCancel=function(e,t){this._pointerDone(),this.pointerCancel(e,t)},e.pointerCancel=function(e,t){this.emitEvent("pointerCancel",[e,t])},t.getPointerPoint=function(e){return{x:e.pageX,y:e.pageY}},t}),((t,i)=>{"function"==typeof define&&define.amd?define("unidragger/unidragger",["unipointer/unipointer"],function(e){return i(t,e)}):"object"==typeof module&&module.exports?module.exports=i(t,require("unipointer")):t.Unidragger=i(t,t.Unipointer)})(window,function(a,e){function t(){}var i=t.prototype=Object.create(e.prototype),n=(i.bindHandles=function(){this._bindHandles(!0)},i.unbindHandles=function(){this._bindHandles(!1)},i._bindHandles=function(e){for(var t=(e=void 0===e||e)?"addEventListener":"removeEventListener",i=e?this._touchActionValue:"",n=0;n<this.handles.length;n++){var r=this.handles[n];this._bindStartEvent(r,e),r[t]("click",this),a.PointerEvent&&(r.style.touchAction=i)}},i._touchActionValue="none",i.pointerDown=function(e,t){this.okayPointerDown(e)&&(this.pointerDownPointer=t,e.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t]))},{TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0}),r={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return i.okayPointerDown=function(e){var t=n[e.target.nodeName],e=r[e.target.type],t=!t||e;return t||this._pointerReset(),t},i.pointerDownBlur=function(){var e=document.activeElement;e&&e.blur&&e!=document.body&&e.blur()},i.pointerMove=function(e,t){var i=this._dragPointerMove(e,t);this.emitEvent("pointerMove",[e,t,i]),this._dragMove(e,t,i)},i._dragPointerMove=function(e,t){var i={x:t.pageX-this.pointerDownPointer.pageX,y:t.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(i)&&this._dragStart(e,t),i},i.hasDragStarted=function(e){return 3<Math.abs(e.x)||3<Math.abs(e.y)},i.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t]),this._dragPointerUp(e,t)},i._dragPointerUp=function(e,t){this.isDragging?this._dragEnd(e,t):this._staticClick(e,t)},i._dragStart=function(e,t){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(e,t)},i.dragStart=function(e,t){this.emitEvent("dragStart",[e,t])},i._dragMove=function(e,t,i){this.isDragging&&this.dragMove(e,t,i)},i.dragMove=function(e,t,i){e.preventDefault(),this.emitEvent("dragMove",[e,t,i])},i._dragEnd=function(e,t){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(e,t)},i.dragEnd=function(e,t){this.emitEvent("dragEnd",[e,t])},i.onclick=function(e){this.isPreventingClicks&&e.preventDefault()},i._staticClick=function(e,t){this.isIgnoringMouseUp&&"mouseup"==e.type||(this.staticClick(e,t),"mouseup"!=e.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},i.staticClick=function(e,t){this.emitEvent("staticClick",[e,t])},t.getPointerPoint=e.getPointerPoint,t}),((n,r)=>{"function"==typeof define&&define.amd?define("flickity/js/drag",["./flickity","unidragger/unidragger","fizzy-ui-utils/utils"],function(e,t,i){return r(n,e,t,i)}):"object"==typeof module&&module.exports?module.exports=r(n,require("./flickity"),require("unidragger"),require("fizzy-ui-utils")):n.Flickity=r(n,n.Flickity,n.Unidragger,n.fizzyUIUtils)})(window,function(i,e,t,a){a.extend(e.defaults,{draggable:">1",dragThreshold:3}),e.createMethods.push("_createDrag");var n=e.prototype,r=(a.extend(n,t.prototype),n._touchActionValue="pan-y","createTouch"in document),s=!1,o=(n._createDrag=function(){this.on("activate",this.onActivateDrag),this.on("uiChange",this._uiChangeDrag),this.on("deactivate",this.onDeactivateDrag),this.on("cellChange",this.updateDraggable),r&&!s&&(i.addEventListener("touchmove",function(){}),s=!0)},n.onActivateDrag=function(){this.handles=[this.viewport],this.bindHandles(),this.updateDraggable()},n.onDeactivateDrag=function(){this.unbindHandles(),this.element.classList.remove("is-draggable")},n.updateDraggable=function(){">1"==this.options.draggable?this.isDraggable=1<this.slides.length:this.isDraggable=this.options.draggable,this.isDraggable?this.element.classList.add("is-draggable"):this.element.classList.remove("is-draggable")},n.bindDrag=function(){this.options.draggable=!0,this.updateDraggable()},n.unbindDrag=function(){this.options.draggable=!1,this.updateDraggable()},n._uiChangeDrag=function(){delete this.isFreeScrolling},n.pointerDown=function(e,t){this.isDraggable?this.okayPointerDown(e)&&(this._pointerDownPreventDefault(e),this.pointerDownFocus(e),document.activeElement!=this.element&&this.pointerDownBlur(),this.dragX=this.x,this.viewport.classList.add("is-pointer-down"),this.pointerDownScroll=l(),i.addEventListener("scroll",this),this._pointerDownDefault(e,t)):this._pointerDownDefault(e,t)},n._pointerDownDefault=function(e,t){this.pointerDownPointer={pageX:t.pageX,pageY:t.pageY},this._bindPostStartEvents(e),this.dispatchEvent("pointerDown",e,[t])},{INPUT:!0,TEXTAREA:!0,SELECT:!0});function l(){return{x:i.pageXOffset,y:i.pageYOffset}}return n.pointerDownFocus=function(e){o[e.target.nodeName]||this.focus()},n._pointerDownPreventDefault=function(e){var t="touchstart"==e.type,i=o[e.target.nodeName];t||"touch"==e.pointerType||i||e.preventDefault()},n.hasDragStarted=function(e){return Math.abs(e.x)>this.options.dragThreshold},n.pointerUp=function(e,t){delete this.isTouchScrolling,this.viewport.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",e,[t]),this._dragPointerUp(e,t)},n.pointerDone=function(){i.removeEventListener("scroll",this),delete this.pointerDownScroll},n.dragStart=function(e,t){this.isDraggable&&(this.dragStartPosition=this.x,this.startAnimation(),i.removeEventListener("scroll",this),this.dispatchEvent("dragStart",e,[t]))},n.pointerMove=function(e,t){var i=this._dragPointerMove(e,t);this.dispatchEvent("pointerMove",e,[t,i]),this._dragMove(e,t,i)},n.dragMove=function(e,t,i){var n,r;this.isDraggable&&(e.preventDefault(),this.previousDragX=this.dragX,n=this.options.rightToLeft?-1:1,this.options.wrapAround&&(i.x=i.x%this.slideableWidth),n=this.dragStartPosition+i.x*n,!this.options.wrapAround&&this.slides.length&&(n=(n=(r=Math.max(-this.slides[0].target,this.dragStartPosition))<n?.5*(n+r):n)<(r=Math.min(-this.getLastSlide().target,this.dragStartPosition))?.5*(n+r):n),this.dragX=n,this.dragMoveTime=new Date,this.dispatchEvent("dragMove",e,[t,i]))},n.dragEnd=function(e,t){var i,n;this.isDraggable&&(this.options.freeScroll&&(this.isFreeScrolling=!0),i=this.dragEndRestingSelect(),this.options.freeScroll&&!this.options.wrapAround?(n=this.getRestingPosition(),this.isFreeScrolling=-n>this.slides[0].target&&-n<this.getLastSlide().target):this.options.freeScroll||i!=this.selectedIndex||(i+=this.dragEndBoostSelect()),delete this.previousDragX,this.isDragSelect=this.options.wrapAround,this.select(i),delete this.isDragSelect,this.dispatchEvent("dragEnd",e,[t]))},n.dragEndRestingSelect=function(){var e=this.getRestingPosition(),t=Math.abs(this.getSlideDistance(-e,this.selectedIndex)),i=this._getClosestResting(e,t,1),e=this._getClosestResting(e,t,-1);return(i.distance<e.distance?i:e).index},n._getClosestResting=function(e,t,i){for(var n=this.selectedIndex,r=1/0,a=this.options.contain&&!this.options.wrapAround?function(e,t){return e<=t}:function(e,t){return e<t};a(t,r)&&(r=t,null!==(t=this.getSlideDistance(-e,n+=i)));)t=Math.abs(t);return{distance:r,index:n-i}},n.getSlideDistance=function(e,t){var i=this.slides.length,n=this.options.wrapAround&&1<i,r=n?a.modulo(t,i):t,r=this.slides[r];return r?(n=n?this.slideableWidth*Math.floor(t/i):0,e-(r.target+n)):null},n.dragEndBoostSelect=function(){var e,t;return void 0===this.previousDragX||!this.dragMoveTime||100<new Date-this.dragMoveTime?0:(e=this.getSlideDistance(-this.dragX,this.selectedIndex),t=this.previousDragX-this.dragX,0<e&&0<t?1:e<0&&t<0?-1:0)},n.staticClick=function(e,t){var i=this.getParentCell(e.target),n=i&&i.element,i=i&&this.cells.indexOf(i);this.dispatchEvent("staticClick",e,[t,n,i])},n.onscroll=function(){var e=l(),t=this.pointerDownScroll.x-e.x,e=this.pointerDownScroll.y-e.y;(3<Math.abs(t)||3<Math.abs(e))&&this._pointerDone()},e}),((e,n)=>{"function"==typeof define&&define.amd?define("flickity/js/prev-next-button",["./flickity","unipointer/unipointer","fizzy-ui-utils/utils"],function(e,t,i){return n(0,e,t,i)}):"object"==typeof module&&module.exports?module.exports=n(0,require("./flickity"),require("unipointer"),require("fizzy-ui-utils")):n(0,e.Flickity,e.Unipointer,e.fizzyUIUtils)})(window,function(e,t,i,n){var r="http://www.w3.org/2000/svg";function a(e,t){this.direction=e,this.parent=t,this._create()}(a.prototype=Object.create(i.prototype))._create=function(){this.isEnabled=!0,this.isPrevious=-1==this.direction;var e=this.parent.options.rightToLeft?1:-1,e=(this.isLeft=this.direction==e,this.element=document.createElement("button")),t=(e.className="flickity-button flickity-prev-next-button",e.className+=this.isPrevious?" previous":" next",e.setAttribute("type","button"),this.disable(),e.setAttribute("aria-label",this.isPrevious?"Previous":"Next"),this.createSVG());e.appendChild(t),this.parent.on("select",this.update.bind(this)),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},a.prototype.activate=function(){this.bindStartEvent(this.element),this.element.addEventListener("click",this),this.parent.element.appendChild(this.element)},a.prototype.deactivate=function(){this.parent.element.removeChild(this.element),this.unbindStartEvent(this.element),this.element.removeEventListener("click",this)},a.prototype.createSVG=function(){var e=document.createElementNS(r,"svg"),t=(e.setAttribute("class","flickity-button-icon"),e.setAttribute("viewBox","0 0 100 100"),document.createElementNS(r,"path")),i="string"!=typeof(i=this.parent.options.arrowShape)?"M "+i.x0+",50 L "+i.x1+","+(i.y1+50)+" L "+i.x2+","+(i.y2+50)+" L "+i.x3+",50  L "+i.x2+","+(50-i.y2)+" L "+i.x1+","+(50-i.y1)+" Z":i;return t.setAttribute("d",i),t.setAttribute("class","arrow"),this.isLeft||t.setAttribute("transform","translate(100, 100) rotate(180) "),e.appendChild(t),e},a.prototype.handleEvent=n.handleEvent,a.prototype.onclick=function(){var e;this.isEnabled&&(this.parent.uiChange(),e=this.isPrevious?"previous":"next",this.parent[e]())},a.prototype.enable=function(){this.isEnabled||(this.element.disabled=!1,this.isEnabled=!0)},a.prototype.disable=function(){this.isEnabled&&(this.element.disabled=!0,this.isEnabled=!1)},a.prototype.update=function(){var e=this.parent.slides;this.parent.options.wrapAround&&1<e.length?this.enable():(e=e.length?e.length-1:0,e=this.isPrevious?0:e,this[this.parent.selectedIndex==e?"disable":"enable"]())},a.prototype.destroy=function(){this.deactivate(),this.allOff()},n.extend(t.defaults,{prevNextButtons:!0,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}}),t.createMethods.push("_createPrevNextButtons");i=t.prototype;return i._createPrevNextButtons=function(){this.options.prevNextButtons&&(this.prevButton=new a(-1,this),this.nextButton=new a(1,this),this.on("activate",this.activatePrevNextButtons))},i.activatePrevNextButtons=function(){this.prevButton.activate(),this.nextButton.activate(),this.on("deactivate",this.deactivatePrevNextButtons)},i.deactivatePrevNextButtons=function(){this.prevButton.deactivate(),this.nextButton.deactivate(),this.off("deactivate",this.deactivatePrevNextButtons)},t.PrevNextButton=a,t}),((e,n)=>{"function"==typeof define&&define.amd?define("flickity/js/page-dots",["./flickity","unipointer/unipointer","fizzy-ui-utils/utils"],function(e,t,i){return n(0,e,t,i)}):"object"==typeof module&&module.exports?module.exports=n(0,require("./flickity"),require("unipointer"),require("fizzy-ui-utils")):n(0,e.Flickity,e.Unipointer,e.fizzyUIUtils)})(window,function(e,t,i,n){function r(e){this.parent=e,this._create()}(r.prototype=Object.create(i.prototype))._create=function(){this.holder=document.createElement("ol"),this.holder.className="flickity-page-dots",this.dots=[],this.handleClick=this.onClick.bind(this),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},r.prototype.activate=function(){this.setDots(),this.holder.addEventListener("click",this.handleClick),this.bindStartEvent(this.holder),this.parent.element.appendChild(this.holder)},r.prototype.deactivate=function(){this.holder.removeEventListener("click",this.handleClick),this.unbindStartEvent(this.holder),this.parent.element.removeChild(this.holder)},r.prototype.setDots=function(){var e=this.parent.slides.length-this.dots.length;0<e?this.addDots(e):e<0&&this.removeDots(-e)},r.prototype.addDots=function(e){for(var t=document.createDocumentFragment(),i=[],n=this.dots.length,r=n+e,a=n;a<r;a++){var s=document.createElement("li");s.className="dot",s.setAttribute("aria-label","Page dot "+(a+1)),t.appendChild(s),i.push(s)}this.holder.appendChild(t),this.dots=this.dots.concat(i)},r.prototype.removeDots=function(e){this.dots.splice(this.dots.length-e,e).forEach(function(e){this.holder.removeChild(e)},this)},r.prototype.updateSelected=function(){this.selectedDot&&(this.selectedDot.className="dot",this.selectedDot.removeAttribute("aria-current")),this.dots.length&&(this.selectedDot=this.dots[this.parent.selectedIndex],this.selectedDot.className="dot is-selected",this.selectedDot.setAttribute("aria-current","step"))},r.prototype.onTap=r.prototype.onClick=function(e){var e=e.target;"LI"==e.nodeName&&(this.parent.uiChange(),e=this.dots.indexOf(e),this.parent.select(e))},r.prototype.destroy=function(){this.deactivate(),this.allOff()},t.PageDots=r,n.extend(t.defaults,{pageDots:!0}),t.createMethods.push("_createPageDots");i=t.prototype;return i._createPageDots=function(){this.options.pageDots&&(this.pageDots=new r(this),this.on("activate",this.activatePageDots),this.on("select",this.updateSelectedPageDots),this.on("cellChange",this.updatePageDots),this.on("resize",this.updatePageDots),this.on("deactivate",this.deactivatePageDots))},i.activatePageDots=function(){this.pageDots.activate()},i.updateSelectedPageDots=function(){this.pageDots.updateSelected()},i.updatePageDots=function(){this.pageDots.setDots()},i.deactivatePageDots=function(){this.pageDots.deactivate()},t.PageDots=r,t}),((e,t)=>{"function"==typeof define&&define.amd?define("flickity/js/player",["ev-emitter/ev-emitter","fizzy-ui-utils/utils","./flickity"],t):"object"==typeof module&&module.exports?module.exports=t(require("ev-emitter"),require("fizzy-ui-utils"),require("./flickity")):t(e.EvEmitter,e.fizzyUIUtils,e.Flickity)})(window,function(e,t,i){function n(e){this.parent=e,this.state="stopped",this.onVisibilityChange=this.visibilityChange.bind(this),this.onVisibilityPlay=this.visibilityPlay.bind(this)}(n.prototype=Object.create(e.prototype)).play=function(){"playing"!=this.state&&(document.hidden?document.addEventListener("visibilitychange",this.onVisibilityPlay):(this.state="playing",document.addEventListener("visibilitychange",this.onVisibilityChange),this.tick()))},n.prototype.tick=function(){var e,t;"playing"==this.state&&(e="number"==typeof(e=this.parent.options.autoPlay)?e:3e3,(t=this).clear(),this.timeout=setTimeout(function(){t.parent.next(!0),t.tick()},e))},n.prototype.stop=function(){this.state="stopped",this.clear(),document.removeEventListener("visibilitychange",this.onVisibilityChange)},n.prototype.clear=function(){clearTimeout(this.timeout)},n.prototype.pause=function(){"playing"==this.state&&(this.state="paused",this.clear())},n.prototype.unpause=function(){"paused"==this.state&&this.play()},n.prototype.visibilityChange=function(){this[document.hidden?"pause":"unpause"]()},n.prototype.visibilityPlay=function(){this.play(),document.removeEventListener("visibilitychange",this.onVisibilityPlay)},t.extend(i.defaults,{pauseAutoPlayOnHover:!0}),i.createMethods.push("_createPlayer");e=i.prototype;return e._createPlayer=function(){this.player=new n(this),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)},e.activatePlayer=function(){this.options.autoPlay&&(this.player.play(),this.element.addEventListener("mouseenter",this))},e.playPlayer=function(){this.player.play()},e.stopPlayer=function(){this.player.stop()},e.pausePlayer=function(){this.player.pause()},e.unpausePlayer=function(){this.player.unpause()},e.deactivatePlayer=function(){this.player.stop(),this.element.removeEventListener("mouseenter",this)},e.onmouseenter=function(){this.options.pauseAutoPlayOnHover&&(this.player.pause(),this.element.addEventListener("mouseleave",this))},e.onmouseleave=function(){this.player.unpause(),this.element.removeEventListener("mouseleave",this)},i.Player=n,i}),((e,i)=>{"function"==typeof define&&define.amd?define("flickity/js/add-remove-cell",["./flickity","fizzy-ui-utils/utils"],function(e,t){return i(0,e,t)}):"object"==typeof module&&module.exports?module.exports=i(0,require("./flickity"),require("fizzy-ui-utils")):i(0,e.Flickity,e.fizzyUIUtils)})(window,function(e,t,n){var i=t.prototype;return i.insert=function(e,t){var i,n,r,a,s,e=this._makeCells(e);e&&e.length&&(i=this.cells.length,t=void 0===t?i:t,a=e,s=document.createDocumentFragment(),a.forEach(function(e){s.appendChild(e.element)}),a=s,(n=t==i)?this.slider.appendChild(a):(r=this.cells[t].element,this.slider.insertBefore(a,r)),0===t?this.cells=e.concat(this.cells):n?this.cells=this.cells.concat(e):(a=this.cells.splice(t,i-t),this.cells=this.cells.concat(e).concat(a)),this._sizeCells(e),this.cellChange(t,!0))},i.append=function(e){this.insert(e,this.cells.length)},i.prepend=function(e){this.insert(e,0)},i.remove=function(e){var i,e=this.getCells(e);e&&e.length&&(i=this.cells.length-1,e.forEach(function(e){e.remove();var t=this.cells.indexOf(e);i=Math.min(t,i),n.removeFrom(this.cells,e)},this),this.cellChange(i,!0))},i.cellSizeChange=function(e){var e=this.getCell(e);e&&(e.getSize(),e=this.cells.indexOf(e),this.cellChange(e))},i.cellChange=function(e,t){var i=this.selectedElement,i=(this._positionCells(e),this._getWrapShiftCells(),this.setGallerySize(),this.getCell(i));i&&(this.selectedIndex=this.getCellSlideIndex(i)),this.selectedIndex=Math.min(this.slides.length-1,this.selectedIndex),this.emitEvent("cellChange",[e]),this.select(this.selectedIndex),t&&this.positionSliderAtSelected()},t}),((e,i)=>{"function"==typeof define&&define.amd?define("flickity/js/lazyload",["./flickity","fizzy-ui-utils/utils"],function(e,t){return i(0,e,t)}):"object"==typeof module&&module.exports?module.exports=i(0,require("./flickity"),require("fizzy-ui-utils")):i(0,e.Flickity,e.fizzyUIUtils)})(window,function(e,t,r){t.createMethods.push("_createLazyload");var i=t.prototype;function n(e,t){this.img=e,this.flickity=t,this.load()}return i._createLazyload=function(){this.on("select",this.lazyLoad)},i.lazyLoad=function(){var t,e=this.options.lazyLoad;e&&(e=this.getAdjacentCellElements("number"==typeof e?e:0),t=[],e.forEach(function(e){e=(e=>{if("IMG"==e.nodeName){var t=e.getAttribute("data-flickity-lazyload"),i=e.getAttribute("data-flickity-lazyload-src"),n=e.getAttribute("data-flickity-lazyload-srcset");if(t||i||n)return[e]}return t=e.querySelectorAll("img[data-flickity-lazyload], img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]"),r.makeArray(t)})(e);t=t.concat(e)}),t.forEach(function(e){new n(e,this)},this))},n.prototype.handleEvent=r.handleEvent,n.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this);var e=this.img.getAttribute("data-flickity-lazyload")||this.img.getAttribute("data-flickity-lazyload-src"),t=this.img.getAttribute("data-flickity-lazyload-srcset");this.img.src=e,t&&this.img.setAttribute("srcset",t),this.img.removeAttribute("data-flickity-lazyload"),this.img.removeAttribute("data-flickity-lazyload-src"),this.img.removeAttribute("data-flickity-lazyload-srcset")},n.prototype.onload=function(e){this.complete(e,"flickity-lazyloaded")},n.prototype.onerror=function(e){this.complete(e,"flickity-lazyerror")},n.prototype.complete=function(e,t){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this);var i=this.flickity.getParentCell(this.img),i=i&&i.element;this.flickity.cellSizeChange(i),this.img.classList.add(t),this.flickity.dispatchEvent("lazyLoad",e,i)},t.LazyLoader=n,t}),(e=>{"function"==typeof define&&define.amd?define("flickity/js/index",["./flickity","./drag","./prev-next-button","./page-dots","./player","./add-remove-cell","./lazyload"],e):"object"==typeof module&&module.exports&&(module.exports=e(require("./flickity"),require("./drag"),require("./prev-next-button"),require("./page-dots"),require("./player"),require("./add-remove-cell"),require("./lazyload")))})((window,function(e){return e})),((e,t)=>{"function"==typeof define&&define.amd?define("flickity-as-nav-for/as-nav-for",["flickity/js/index","fizzy-ui-utils/utils"],t):"object"==typeof module&&module.exports?module.exports=t(require("flickity"),require("fizzy-ui-utils")):e.Flickity=t(e.Flickity,e.fizzyUIUtils)})(window,function(i,n){i.createMethods.push("_createAsNavFor");var e=i.prototype;return e._createAsNavFor=function(){this.on("activate",this.activateAsNavFor),this.on("deactivate",this.deactivateAsNavFor),this.on("destroy",this.destroyAsNavFor);var e,t=this.options.asNavFor;t&&(e=this,setTimeout(function(){e.setNavCompanion(t)}))},e.setNavCompanion=function(e){e=n.getQueryElement(e);var t,e=i.data(e);e&&e!=this&&(this.navCompanion=e,(t=this).onNavCompanionSelect=function(){t.navCompanionSelect()},e.on("select",this.onNavCompanionSelect),this.on("staticClick",this.onNavStaticClick),this.navCompanionSelect(!0))},e.navCompanionSelect=function(e){var t,i,n=this.navCompanion&&this.navCompanion.selectedCells;n&&(t=n[0],t=this.navCompanion.cells.indexOf(t),n=t+n.length-1,i=Math.floor((i=this.navCompanion.cellAlign,(n-t)*i+t)),this.selectCell(i,!1,e),this.removeNavSelectedElements(),i>=this.cells.length||(e=this.cells.slice(t,1+n),this.navSelectedElements=e.map(function(e){return e.element}),this.changeNavSelectedClass("add")))},e.changeNavSelectedClass=function(t){this.navSelectedElements.forEach(function(e){e.classList[t]("is-nav-selected")})},e.activateAsNavFor=function(){this.navCompanionSelect(!0)},e.removeNavSelectedElements=function(){this.navSelectedElements&&(this.changeNavSelectedClass("remove"),delete this.navSelectedElements)},e.onNavStaticClick=function(e,t,i,n){"number"==typeof n&&this.navCompanion.selectCell(n)},e.deactivateAsNavFor=function(){this.removeNavSelectedElements()},e.destroyAsNavFor=function(){this.navCompanion&&(this.navCompanion.off("select",this.onNavCompanionSelect),this.off("staticClick",this.onNavStaticClick),delete this.navCompanion)},i}),((t,i)=>{"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(e){return i(t,e)}):"object"==typeof module&&module.exports?module.exports=i(t,require("ev-emitter")):t.imagesLoaded=i(t,t.EvEmitter)})("undefined"!=typeof window?window:this,function(t,e){var a=t.jQuery,s=t.console;function o(e,t){for(var i in t)e[i]=t[i];return e}var l=Array.prototype.slice;function h(e,t,i){if(!(this instanceof h))return new h(e,t,i);var n,r=e;(r="string"==typeof e?document.querySelectorAll(e):r)?(this.elements=(n=r,Array.isArray(n)?n:"object"==typeof n&&"number"==typeof n.length?l.call(n):[n]),this.options=o({},this.options),"function"==typeof t?i=t:o(this.options,t),i&&this.on("always",i),this.getImages(),a&&(this.jqDeferred=new a.Deferred),setTimeout(this.check.bind(this))):s.error("Bad element for imagesLoaded "+(r||e))}(h.prototype=Object.create(e.prototype)).options={},h.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},h.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&c[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var r=i[n];this.addImage(r)}if("string"==typeof this.options.background)for(var a=e.querySelectorAll(this.options.background),n=0;n<a.length;n++){var s=a[n];this.addElementBackgroundImages(s)}}};var c={1:!0,9:!0,11:!0};function i(e){this.img=e}function n(e,t){this.url=e,this.element=t,this.img=new Image}return h.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var r=n&&n[2];r&&this.addBackground(r,e),n=i.exec(t.backgroundImage)}},h.prototype.addImage=function(e){e=new i(e);this.images.push(e)},h.prototype.addBackground=function(e,t){e=new n(e,t);this.images.push(e)},h.prototype.check=function(){var n=this;function t(e,t,i){setTimeout(function(){n.progress(e,t,i)})}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(e){e.once("progress",t),e.check()}):this.complete()},h.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&s&&s.log("progress: "+i,e,t)},h.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred&&(e=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[e](this))},(i.prototype=Object.create(e.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},i.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},i.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},i.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},i.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},i.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},i.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(n.prototype=Object.create(i.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},n.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},n.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},(h.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((a=e).fn.imagesLoaded=function(e,t){return new h(this,e,t).jqDeferred.promise(a(this))})})(),h}),((e,i)=>{"function"==typeof define&&define.amd?define(["flickity/js/index","imagesloaded/imagesloaded"],function(e,t){return i(0,e,t)}):"object"==typeof module&&module.exports?module.exports=i(0,require("flickity"),require("imagesloaded")):e.Flickity=i(0,e.Flickity,e.imagesLoaded)})(window,function(e,t,n){t.createMethods.push("_createImagesLoaded");var i=t.prototype;return i._createImagesLoaded=function(){this.on("activate",this.imagesLoaded)},i.imagesLoaded=function(){var i;this.options.imagesLoaded&&n((i=this).slider).on("progress",function(e,t){t=i.getParentCell(t.img);i.cellSizeChange(t&&t.element),i.options.freeScroll||i.positionSliderAtSelected()})},t}),((e,t)=>{"function"==typeof define&&define.amd?define(["flickity/js/index"],t):"object"==typeof module&&module.exports?module.exports=t(require("flickity")):t(e.Flickity)})(window,function(e){e.createMethods.push("_createFullscreen");var t=e.prototype,i=(t._createFullscreen=function(){this.isFullscreen=!1,this.options.fullscreen&&(this.viewFullscreenButton=new n("view",this),this.exitFullscreenButton=new n("exit",this),this.on("activate",this._changeFullscreenActive),this.on("deactivate",this._changeFullscreenActive))},t._changeFullscreenActive=function(){var e=this.isActive?"appendChild":"removeChild",e=(this.element[e](this.viewFullscreenButton.element),this.element[e](this.exitFullscreenButton.element),this.isActive?"activate":"deactivate");this.viewFullscreenButton[e](),this.exitFullscreenButton[e]()},t.viewFullscreen=function(){this._changeFullscreen(!0),this.focus()},t.exitFullscreen=function(){this._changeFullscreen(!1)},t._changeFullscreen=function(e){var t;this.isFullscreen!=e&&(t=(this.isFullscreen=e)?"add":"remove",document.documentElement.classList[t]("is-flickity-fullscreen"),this.element.classList[t]("is-fullscreen"),this.resize(),this.isFullscreen&&this.reposition(),this.dispatchEvent("fullscreenChange",null,[e]))},t.toggleFullscreen=function(){this._changeFullscreen(!this.isFullscreen)},t.setGallerySize);function n(e,t){this.name=e,this.createButton(),this.createIcon(),this.onClick=function(){t[e+"Fullscreen"]()},this.clickHandler=this.onClick.bind(this)}t.setGallerySize=function(){this.options.setGallerySize&&(this.isFullscreen?this.viewport.style.height="":i.call(this))},e.keyboardHandlers[27]=function(){this.exitFullscreen()},n.prototype.createButton=function(){var e=this.element=document.createElement("button"),t=(e.className="flickity-button flickity-fullscreen-button flickity-fullscreen-button-"+this.name,e.setAttribute("type","button"),(t=this.name+" full-screen")[0].toUpperCase()+t.slice(1));e.setAttribute("aria-label",t),e.title=t};var r="http://www.w3.org/2000/svg",a={view:"M15,20,7,28h5v4H0V20H4v5l8-8Zm5-5,8-8v5h4V0H20V4h5l-8,8Z",exit:"M32,3l-7,7h5v4H18V2h4V7l7-7ZM3,32l7-7v5h4V18H2v4H7L0,29Z"};return n.prototype.createIcon=function(){var e=document.createElementNS(r,"svg"),t=(e.setAttribute("class","flickity-button-icon"),e.setAttribute("viewBox","0 0 32 32"),document.createElementNS(r,"path")),i=a[this.name];t.setAttribute("d",i),e.appendChild(t),this.element.appendChild(e)},n.prototype.activate=function(){this.element.addEventListener("click",this.clickHandler)},n.prototype.deactivate=function(){this.element.removeEventListener("click",this.clickHandler)},e.FullscreenButton=n,e}),((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).window=e.window||{})})(this,function(e){function h(e){var t,i,n=e.ownerDocument||e;!(v in e.style)&&"msTransform"in e.style&&(N=(v="msTransform")+"Origin");for(;n.parentNode&&(n=n.parentNode););return d=window,g=new y,n&&(D=(c=n).documentElement,p=n.body,(r=c.createElementNS("http://www.w3.org/2000/svg","g")).style.transform="none",e=n.createElement("div"),t=n.createElement("div"),i=n&&(n.body||n.firstElementChild))&&i.appendChild&&(i.appendChild(e),e.appendChild(t),e.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),I=t.offsetParent!==e,i.removeChild(e)),n}function T(){return d.pageYOffset||c.scrollTop||D.scrollTop||p.scrollTop||0}function M(){return d.pageXOffset||c.scrollLeft||D.scrollLeft||p.scrollLeft||0}function w(e){return e.ownerSVGElement||("svg"===(e.tagName+"").toLowerCase()?e:null)}function u(e,t){var i,n,r,a,s,o;if(e.parentNode&&(c||h(e)))return o=(i=w(e))?i.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",n=i?t?"rect":"g":"div",r=2!==t?0:100,a=3===t?100:0,s="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",o=c.createElementNS?c.createElementNS(o.replace(/^https/,"http"),n):c.createElement(n),t&&(i?(m=m||u(e),o.setAttribute("width",.01),o.setAttribute("height",.01),o.setAttribute("transform","translate("+r+","+a+")"),m):(f||((f=u(e)).style.cssText=s),o.style.cssText=s+"width:0.1px;height:0.1px;top:"+a+"px;left:"+r+"px",f)).appendChild(o),o;throw"Need document and parent."}function E(e){var t,i=e.getCTM();return i||(t=e.style[v],e.style[v]="none",e.appendChild(r),i=r.getCTM(),e.removeChild(r),t?e.style[v]=t:e.style.removeProperty(v.replace(/([A-Z])/g,"-$1").toLowerCase())),i||g.clone()}function A(e,t){var i,n,r,a,s=w(e),o=e===s,l=s?O:U,h=e.parentNode,c=h&&!s&&h.shadowRoot&&h.shadowRoot.appendChild?h.shadowRoot:h;if(e===d)return e;if(l.length||l.push(u(e,1),u(e,2),u(e,3)),l=s?m:f,s)o?(r=-(n=E(e)).e/n.a,a=-n.f/n.d,i=g):e.getBBox?(n=e.getBBox(),r=(i=(i=e.transform?e.transform.baseVal:{}).numberOfItems?1<i.numberOfItems?(e=>{for(var t=new y,i=0;i<e.numberOfItems;i++)t.multiply(e.getItem(i).matrix);return t})(i):i.getItem(0).matrix:g).a*n.x+i.c*n.y,a=i.b*n.x+i.d*n.y):(i=new y,r=a=0),t&&"g"===e.tagName.toLowerCase()&&(r=a=0),(o?s:h).appendChild(l),l.setAttribute("transform","matrix("+i.a+","+i.b+","+i.c+","+i.d+","+(i.e+r)+","+(i.f+a)+")");else{if(r=a=0,I)for(i=e.offsetParent,n=e;(n=n&&n.parentNode)&&n!==i&&n.parentNode;)4<(d.getComputedStyle(n)[v]+"").length&&(r=n.offsetLeft,a=n.offsetTop,n=0);if("absolute"!==(t=d.getComputedStyle(e)).position&&"fixed"!==t.position)for(i=e.offsetParent;h&&h!==i;)r+=h.scrollLeft||0,a+=h.scrollTop||0,h=h.parentNode;(n=l.style).top=e.offsetTop-a+"px",n.left=e.offsetLeft-r+"px",n[v]=t[v],n[N]=t[N],n.position="fixed"===t.position?"fixed":"absolute",c.appendChild(l)}return l}function L(e,t,i,n,r,a,s){return e.a=t,e.b=i,e.c=n,e.d=r,e.e=a,e.f=s,e}var c,d,D,p,f,m,g,r,I,v="transform",N=v+"Origin",O=[],U=[],y=((t=n.prototype).inverse=function(){var e=this.a,t=this.b,i=this.c,n=this.d,r=this.e,a=this.f,s=e*n-t*i||1e-10;return L(this,n/s,-t/s,-i/s,e/s,(i*a-n*r)/s,-(e*a-t*r)/s)},t.multiply=function(e){var t=this.a,i=this.b,n=this.c,r=this.d,a=this.e,s=this.f,o=e.a,l=e.c,h=e.b,c=e.d,u=e.e,e=e.f;return L(this,o*t+h*n,o*i+h*r,l*t+c*n,l*i+c*r,a+u*t+e*n,s+u*i+e*r)},t.clone=function(){return new n(this.a,this.b,this.c,this.d,this.e,this.f)},t.equals=function(e){var t=this.a,i=this.b,n=this.c,r=this.d,a=this.e,s=this.f;return t===e.a&&i===e.b&&n===e.c&&r===e.d&&a===e.e&&s===e.f},t.apply=function(e,t){var i=e.x,e=e.y,n=this.a,r=this.b,a=this.c,s=this.d,o=this.e,l=this.f;return(t=void 0===t?{}:t).x=i*n+e*a+o||0,t.y=i*r+e*s+l||0,t},n);function n(e,t,i,n,r,a){L(this,e=void 0===e?1:e,t=void 0===t?0:t,i=void 0===i?0:i,n=void 0===n?1:n,r=void 0===r?0:r,a=void 0===a?0:a)}function K(e,t,i,n){if(!e||!e.parentNode||(c||h(e)).documentElement===e)return new y;var r=(e=>{for(var t,i;e&&e!==p;)(i=e._gsap)&&i.uncache&&i.get(e,"x"),i&&!i.scaleX&&!i.scaleY&&i.renderTransform&&(i.scaleX=i.scaleY=1e-4,i.renderTransform(1,i),t?t.push(i):t=[i]),e=e.parentNode;return t})(e),a=w(e)?O:U,i=A(e,i),s=a[0].getBoundingClientRect(),o=a[1].getBoundingClientRect(),a=a[2].getBoundingClientRect(),l=i.parentNode,n=!n&&function e(t){return"fixed"===d.getComputedStyle(t).position||((t=t.parentNode)&&1===t.nodeType?e(t):void 0)}(e),e=new y((o.left-s.left)/100,(o.top-s.top)/100,(a.left-s.left)/100,(a.top-s.top)/100,s.left+(n?0:M()),s.top+(n?0:T()));if(l.removeChild(i),r)for(s=r.length;s--;)(o=r[s]).scaleX=o.scaleY=0,o.renderTransform(1,o);return t?e.inverse():e}function B(e,t){e.actions.forEach(function(e){return e.vars[t]&&e.vars[t](e)})}function F(e){return"string"==typeof e?e.split(" ").join("").split(","):e}function _(e){return P(e)[0]||console.warn("Element not found:",e)}function C(e){return Math.round(1e4*e)/1e4||0}function se(e,t,i){return e.forEach(function(e){return e.classList[i](t)})}function G(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function Z(e,t){var i,n={};for(i in e)t[i]||(n[i]=e[i]);return n}function oe(e){var t=Se[e]=F(e);return ie[e]=t.concat(ne),t}function J(e,t,i){return e.forEach(function(e){return e.d=function e(t,i,n){void 0===n&&(n=0);for(var r=t.parentNode,a=1e3*Math.pow(10,n)*(i?-1:1),s=i?900*-a:0;t;)s+=a,t=t.previousSibling;return r?s+e(r,i,n+1):s}(i?e.element:e.t,t)}),e.sort(function(e,t){return e.d-t.d}),e}function Q(e,t){for(var i,n,r=e.element.style,a=e.css=e.css||[],s=t.length;s--;)n=r[i=t[s]]||r.getPropertyValue(i),a.push(n?i:ve[i]||(ve[i]=G(i)),n);return r}function x(e){var t=e.css,i=e.element.style,n=0;for(e.cache.uncache=1;n<t.length;n+=2)t[n+1]?i[t[n]]=t[n+1]:i.removeProperty(t[n]);!t[t.indexOf("transform")+1]&&i.translate&&(i.removeProperty("translate"),i.removeProperty("scale"),i.removeProperty("rotate"))}function le(e,t){e.forEach(function(e){return e.a.cache.uncache=1}),t||e.finalStates.forEach(x)}function k(e,t,i){var n,r,a=e.element,s=e.width,o=e.height,l=e.uncache,h=e.getProp,c=a.style,u=4;if("object"!=typeof t&&(t=e),te&&1!==i)te._abs.push({t:a,b:e,a:e,sd:0}),te._final.push(function(){return e.cache.uncache=1,x(e)});else{for(i="none"===h("display"),e.isVisible&&!i||(i&&(Q(e,["display"]).display=t.display),e.matrix=t.matrix,e.width=s=e.width||t.width,e.height=o=e.height||t.height),Q(e,be),r=window.getComputedStyle(a);u--;)c[be[u]]=r[be[u]];c.gridArea="1 / 1 / 1 / 1",c.transition="none",c.position="absolute",c.width=s+"px",c.height=o+"px",c.top||(c.top="0px"),c.left||(c.left="0px"),l?n=new ae(a):((n=Z(e,S)).position="absolute",e.simple?(h=a.getBoundingClientRect(),n.matrix=new y(1,0,0,1,h.left+M(),h.top+T())):n.matrix=K(a,!1,!1,!0)),n=$(n,e,!0),e.x=R(n.x,.01),e.y=R(n.y,.01)}return a}function he(e,t){return!0!==t&&(t=P(t),e=e.filter(function(e){if(-1!==t.indexOf((e.sd<0?e.b:e.a).element))return!0;e.t._gsap.renderTransform(1),e.b.isVisible&&(e.t.style.width=e.b.width+"px",e.t.style.height=e.b.height+"px")})),e}function ce(e){J(e,!0).forEach(function(e){return(e.a.isVisible||e.b.isVisible)&&k(e.sd<0?e.b:e.a,e.b,1)})}function H(e,t){var i,n=e.style||e;for(i in t)n[i]=t[i]}function z(e){return e.map(function(e){return e.element})}function ue(e,t,i){e&&t.length&&i.add(e(z(t),i,new re(t,0,!0)),0)}function V(e,t){return e instanceof re?e:new re(e,t)}function de(e,t,i){var n=e.idLookup[i],e=e.alt[i];return!e.isVisible||(t.getElementState(e.element)||e).isVisible&&n.isVisible?n:e}function pe(e){if(e!==l){var t=o.style,i=o.clientWidth===window.outerWidth,n=o.clientHeight===window.outerHeight,r=4;if(e&&(i||n)){for(;r--;)Te[r]=t[Me[r]];i&&(t.width=o.clientWidth+"px",t.overflowY="hidden"),n&&(t.height=o.clientHeight+"px",t.overflowX="hidden"),l=e}else if(l){for(;r--;)Te[r]?t[Me[r]]=Te[r]:t.removeProperty(G(Me[r]));l=e}}}function W(e,t,r,U){e instanceof re&&t instanceof re||console.warn("Not a valid state object.");var a,s,B,o,l,h,c,u,d,i,n,p,f,F=(r=r||{}).clearProps,G=r.onEnter,k=r.onLeave,m=r.absolute,H=r.absoluteOnLeave,g=r.custom,v=r.delay,z=r.paused,y=r.repeat,V=r.repeatDelay,W=r.yoyo,_=r.toggleClass,x=r.nested,S=r.zIndex,b=r.scale,T=r.fade,M=r.stagger,w=r.spin,X=r.prune,E=("props"in r?r:e).props,A=Z(r,_e),C=ee.timeline({delay:v,paused:z,repeat:y,repeatDelay:V,yoyo:W,data:"isFlip"}),P=A,R=[],L=[],D=[],I=[],j=!0===w?1:w||0,q="function"==typeof w?w:function(){return j},N=e.interrupted||t.interrupted,Y=C[1!==U?"to":"from"];for(s in t.idLookup)n=t.alt[s]?de(t,e,s):t.idLookup[s],l=n.element,i=e.idLookup[s],!e.alt[s]||l!==i.element||!e.alt[s].isVisible&&n.isVisible||(i=e.alt[s]),i?(h={t:l,b:i,a:n,sd:i.element===l?0:n.isVisible?1:-1},D.push(h),h.sd&&(h.sd<0&&(h.b=n,h.a=i),N&&Q(h.b,E?ie[E]:ne),T)&&D.push(h.swap={t:i.element,b:h.b,a:h.a,sd:-h.sd,swap:h}),l._flip=i.element._flip=te?te.timeline:C):n.isVisible&&(D.push({t:l,b:Z(n,{isVisible:1}),a:n,sd:0,entering:1}),l._flip=te?te.timeline:C);E&&(Se[E]||oe(E)).forEach(function(t){return A[t]=function(e){return D[e].a.props[t]}}),D.finalStates=d=[],v=function(){for(J(D),pe(!0),o=0;o<D.length;o++)p=(h=D[o]).a,f=h.b,!X||p.isDifferent(f)||h.entering?(l=h.t,!x||h.sd<0||!o||(p.matrix=K(l,!1,!1,!0)),f.isVisible&&p.isVisible?(h.sd<0?(c=new ae(l,E,e.simple),$(c,p,b,0,0,c),c.matrix=K(l,!1,!1,!0),c.css=h.b.css,h.a=p=c,T&&(l.style.opacity=(N?f:p).opacity),M&&I.push(l)):0<h.sd&&T&&(l.style.opacity=N?p.opacity-f.opacity:"0"),$(p,f,b,E)):f.isVisible!==p.isVisible&&(f.isVisible?p.isVisible||(f.css=p.css,L.push(f),D.splice(o--,1),m&&x&&$(p,f,b,E)):(p.isVisible&&R.push(p),D.splice(o--,1))),b||(l.style.maxWidth=Math.max(p.width,f.width)+"px",l.style.maxHeight=Math.max(p.height,f.height)+"px",l.style.minWidth=Math.min(p.width,f.width)+"px",l.style.minHeight=Math.min(p.height,f.height)+"px"),x&&_&&l.classList.add(_)):D.splice(o--,1),d.push(p);var t,i;if(_&&(t=d.map(function(e){return e.element}),x)&&t.forEach(function(e){return e.classList.remove(_)}),pe(!1),b?(A.scaleX=function(e){return D[e].a.scaleX},A.scaleY=function(e){return D[e].a.scaleY}):(A.width=function(e){return D[e].a.width+"px"},A.height=function(e){return D[e].a.height+"px"},A.autoRound=r.autoRound||!1),A.x=function(e){return D[e].a.x+"px"},A.y=function(e){return D[e].a.y+"px"},A.rotation=function(e){return D[e].a.rotation+(w?360*q(e,u[e],u):0)},A.skewX=function(e){return D[e].a.skewX},u=D.map(function(e){return e.t}),!S&&0!==S||(A.modifiers={zIndex:function(){return S}},A.zIndex=S,A.immediateRender=!1!==r.immediateRender),T&&(A.opacity=function(e){return D[e].sd<0?0:0<D[e].sd?D[e].a.opacity:"+=0"}),I.length&&(M=ee.utils.distribute(M),i=u.slice(I.length),A.stagger=function(e,t){return M(~I.indexOf(t)?u.indexOf(D[e].swap.t):e,t,i)}),ye.forEach(function(e){return r[e]&&C.eventCallback(e,r[e],r[e+"Params"])}),g&&u.length)for(s in P=Z(A,_e),"scale"in g&&(g.scaleX=g.scaleY=g.scale,delete g.scale),g)(a=Z(g[s],xe))[s]=A[s],!("duration"in a)&&"duration"in A&&(a.duration=A.duration),a.stagger=A.stagger,Y.call(C,u,a,0),delete P[s];(u.length||L.length||R.length)&&(_&&C.add(function(){return se(t,_,C._zTime<0?"remove":"add")},0)&&!z&&se(t,_,"add"),u.length)&&Y.call(C,u,P,0),ue(G,R,C),ue(k,L,C);var n=te&&te.timeline;n&&(n.add(C,0),te._final.push(function(){return le(D,!F)})),B=C.duration(),C.call(function(){var e=C.time()>=B;e&&!n&&le(D,!F),_&&se(t,_,e?"remove":"add")})},H&&(m=D.filter(function(e){return!e.sd&&!e.a.isVisible&&e.b.isVisible}).map(function(e){return e.a.element})),te?(m&&(y=te._abs).push.apply(y,he(D,m)),te._run.push(v)):(m&&ce(he(D,m)),v());var O=te?te.timeline:C;return O.revert=function(){return fe(O,1,1)},O}function s(e){for(var t,i=e.idLookup={},n=e.alt={},r=e.elementStates,a=r.length;a--;)i[(t=r[a]).id]?n[t.id]=t:i[t.id]=t}function X(e,t,i,n){return e instanceof ae?e:e instanceof re?(r=e,(n=n)&&r.idLookup[X(n).id]||r.elementStates[0]):new ae("string"==typeof e?_(e)||console.warn(e+" not found"):e,t,i);var r}function $(e,t,i,n,r,a){var s,o,l,h,c,u,d=e.element,p=e.cache,f=e.parent,m=e.x,g=e.y,v=t.width,y=t.height,_=t.scaleX,x=t.scaleY,S=t.rotation,b=t.bounds,T=a&&j&&j(d,"transform,width,height"),M=e,w=(E=t.matrix).e,E=E.f,A=!(b=e.bounds.width!==b.width||e.bounds.height!==b.height||e.scaleX!==_||e.scaleY!==x||e.rotation!==S)&&e.simple&&t.simple&&!r;return A||!f?(_=x=1,S=s=0):(c=(u=(u=(c=f)._gsap||ee.core.getCache(c)).gmCache===ee.ticker.frame?u.gMatrix:(u.gmCache=ee.ticker.frame,u.gMatrix=K(c,!0,!1,!0))).clone().multiply(t.ctm?t.matrix.clone().multiply(t.ctm):t.matrix),S=C(Math.atan2(c.b,c.a)*me),s=C(Math.atan2(c.c,c.d)*me+S)%360,_=Math.sqrt(Math.pow(c.a,2)+Math.pow(c.b,2)),x=Math.sqrt(Math.pow(c.c,2)+Math.pow(c.d,2))*Math.cos(s*ge),r&&(r=P(r)[0],l=ee.getProperty(r),h=r.getBBox&&"function"==typeof r.getBBox&&r.getBBox(),M={scaleX:l("scaleX"),scaleY:l("scaleY"),width:h?h.width:Math.ceil(parseFloat(l("width","px"))),height:h?h.height:parseFloat(l("height","px"))}),p.rotation=S+"deg",p.skewX=s+"deg"),i?(_*=v!==M.width&&M.width?v/M.width:1,x*=y!==M.height&&M.height?y/M.height:1,p.scaleX=_,p.scaleY=x):(v=R(v*_/M.scaleX,0),y=R(y*x/M.scaleY,0),d.style.width=v+"px",d.style.height=y+"px"),n&&H(d,t.props),A||!f?(m+=w-e.matrix.e,g+=E-e.matrix.f):b||f!==t.parent?(p.renderTransform(1,p),c=K(r||d,!1,!1,!0),h=u.apply({x:c.e,y:c.f}),m+=(o=u.apply({x:w,y:E})).x-h.x,g+=o.y-h.y):(u.e=u.f=0,m+=(o=u.apply({x:w-e.matrix.e,y:E-e.matrix.f})).x,g+=o.y),m=R(m,.02),g=R(g,.02),!a||a instanceof ae?(p.x=m+"px",p.y=g+"px",p.renderTransform(1,p)):T&&T.revert(),a&&(a.x=m,a.y=g,a.rotation=S,a.skewX=s,i?(a.scaleX=_,a.scaleY=x):(a.width=v,a.height=y)),a||p}function fe(e,t,i){if(e&&e.progress()<1&&(!e.paused()||i))return t&&(function e(t){t.vars.onInterrupt&&t.vars.onInterrupt.apply(t,t.vars.onInterruptParams||[]),t.getChildren(!0,!1,!0).forEach(e)}(e),t<2&&e.progress(1),e.kill()),!0}var P,ee,te,a,o,R,j,l,q=1,Y={},me=180/Math.PI,ge=Math.PI/180,S={},ve={},ie={},ye=F("onStart,onUpdate,onComplete,onReverseComplete,onInterrupt"),ne=F("transform,transformOrigin,width,height,position,top,left,opacity,zIndex,maxWidth,maxHeight,minWidth,minHeight"),_e={zIndex:1,kill:1,simple:1,spin:1,clearProps:1,targets:1,toggleClass:1,onComplete:1,onUpdate:1,onInterrupt:1,onStart:1,delay:1,repeat:1,repeatDelay:1,yoyo:1,scale:1,fade:1,absolute:1,props:1,onEnter:1,onLeave:1,custom:1,paused:1,nested:1,prune:1,absoluteOnLeave:1},xe={zIndex:1,simple:1,clearProps:1,scale:1,absolute:1,fitChild:1,getVars:1,props:1},Se={},be="paddingTop,paddingRight,paddingBottom,paddingLeft,gridArea,transition".split(","),Te=[],Me="width,height,overflowX,overflowY".split(","),re=((t=we.prototype).update=function(e){var t=this;return this.elementStates=this.targets.map(function(e){return new ae(e,t.props,t.simple)}),s(this),this.interrupt(e),this.recordInlineStyles(),this},t.clear=function(){return this.targets.length=this.elementStates.length=0,s(this),this},t.fit=function(e,t,i){for(var n,r,a=J(this.elementStates.slice(0),!1,!0),s=(e||this).idLookup,o=0;o<a.length;o++)n=a[o],i&&(n.matrix=K(n.element,!1,!1,!0)),(r=s[n.id])&&$(n,r,t,!0,0,n),n.matrix=K(n.element,!1,!1,!0);return this},t.getProperty=function(e,t){e=this.getElementState(e)||S;return(t in e?e:e.props||S)[t]},t.add=function(e){for(var t,i,n=e.targets.length,r=this.idLookup,a=this.alt;n--;)(i=r[(t=e.elementStates[n]).id])&&(t.element===i.element||a[t.id]&&a[t.id].element===t.element)?(i=this.elementStates.indexOf(t.element===i.element?i:a[t.id]),this.targets.splice(i,1,e.targets[n]),this.elementStates.splice(i,1,t)):(this.targets.push(e.targets[n]),this.elementStates.push(t));return e.interrupted&&(this.interrupted=!0),e.simple||(this.simple=!1),s(this),this},t.compare=function(e){function n(e,t,i){return(e.isVisible!==t.isVisible?e.isVisible?m:g:e.isVisible?f:p).push(i)&&v.push(i)}function t(e,t,i){v.indexOf(i)<0&&n(e,t,i)}var i,r,a,s,o,l,h,c,u=e.idLookup,d=this.idLookup,p=[],f=[],m=[],g=[],v=[],y=e.alt,_=this.alt;for(a in u)o=y[a],l=_[a],s=(i=o?de(e,this,a):u[a]).element,r=d[a],l?(c=r.isVisible||!l.isVisible&&s===r.element?r:l,(h=!o||i.isVisible||o.isVisible||c.element!==o.element?i:o).isVisible&&c.isVisible&&h.element!==c.element?((h.isDifferent(c)?f:p).push(h.element,c.element),v.push(h.element,c.element)):n(h,c,h.element),o&&h.element===o.element&&(o=u[a]),t(h.element!==r.element&&o?o:h,r,r.element),t(o&&o.element===l.element?o:h,l,l.element),o&&t(o,l.element===o.element?l:r,o.element)):(r?r.isDifferent(i)?n(i,r,s):p.push(s):m.push(s),o&&t(o,r,o.element));for(a in d)u[a]||(g.push(d[a].element),_[a]&&g.push(_[a].element));return{changed:f,unchanged:p,enter:m,leave:g}},t.recordInlineStyles=function(){for(var e=ie[this.props]||ne,t=this.elementStates.length;t--;)Q(this.elementStates[t],e)},t.interrupt=function(i){var n=this,r=[];this.targets.forEach(function(e){var e=e._flip,t=fe(e,i?0:1);i&&t&&r.indexOf(e)<0&&e.add(function(){return n.updateVisibility()}),t&&r.push(e)}),!i&&r.length&&this.updateVisibility(),this.interrupted||(this.interrupted=!!r.length)},t.updateVisibility=function(){this.elementStates.forEach(function(e){var t=e.element.getBoundingClientRect();e.isVisible=!!(t.width||t.height||t.top||t.left),e.uncache=1})},t.getElementState=function(e){return this.elementStates[this.targets.indexOf(_(e))]},t.makeAbsolute=function(){return J(this.elementStates.slice(0),!0,!0).map(k)},we);function we(e,t,i){this.props=t&&t.props,this.simple=!(!t||!t.simple),i?(this.targets=z(e),this.elementStates=e,s(this)):(this.targets=P(e),i=t&&(!1===t.kill||t.batch&&!t.kill),te&&!i&&te._kill.push(this),this.update(i||!!te))}(t=Ee.prototype).isDifferent=function(e){var t=this.bounds,i=e.bounds;return t.top!==i.top||t.left!==i.left||t.width!==i.width||t.height!==i.height||!this.matrix.equals(e.matrix)||this.opacity!==e.opacity||this.props&&e.props&&JSON.stringify(this.props)!==JSON.stringify(e.props)},t.update=function(e,t){var i,n=this,r=n.element,a=ee.getProperty(r),s=ee.core.getCache(r),o=r.getBoundingClientRect(),l=r.getBBox&&"function"==typeof r.getBBox&&"svg"!==r.nodeName.toLowerCase()&&r.getBBox(),h=t?new y(1,0,0,1,o.left+M(),o.top+T()):K(r,!1,!1,!0);if(s.uncache=1,n.getProp=a,n.element=r,n.id=((i=(c=r).getAttribute("data-flip-id"))||c.setAttribute("data-flip-id",i="auto-"+q++),i),n.matrix=h,n.cache=s,n.bounds=o,n.isVisible=!!(o.width||o.height||o.left||o.top),n.display=a("display"),n.position=a("position"),n.parent=r.parentNode,n.x=a("x"),n.y=a("y"),n.scaleX=s.scaleX,n.scaleY=s.scaleY,n.rotation=a("rotation"),n.skewX=a("skewX"),n.opacity=a("opacity"),n.width=l?l.width:R(a("width","px"),.04),n.height=l?l.height:R(a("height","px"),.04),e){for(var c=n,u=Se[e]||oe(e),d=ee.getProperty(c.element,null,"native"),p=c.props={},f=u.length;f--;)p[u[f]]=(d(u[f])+"").trim();p.zIndex&&(p.zIndex=parseFloat(p.zIndex)||0)}n.ctm=r.getCTM&&"svg"===r.nodeName.toLowerCase()&&E(r).inverse(),n.simple=t||1===C(h.a)&&!C(h.b)&&!C(h.c)&&1===C(h.d),n.uncache=0};var ae=Ee;function Ee(e,t,i){this.element=e,this.update(t,i)}(t=Ce.prototype).getStateById=function(e){for(var t=this.states.length;t--;)if(this.states[t].idLookup[e])return this.states[t]},t.kill=function(){this.batch.remove(this)};var Ae=Ce;function Ce(e,t){this.vars=e,this.batch=t,this.states=[],this.timeline=t.timeline}(t=Re.prototype).add=function(t){var e=this.actions.filter(function(e){return e.vars===t});return e.length?e[0]:(e=new Ae("function"==typeof t?{animate:t}:t,this),this.actions.push(e),e)},t.remove=function(e){e=this.actions.indexOf(e);return 0<=e&&this.actions.splice(e,1),this},t.getState=function(t){var i=this,e=te,n=a;return(te=this).state.clear(),this._kill.length=0,this.actions.forEach(function(e){e.vars.getState&&(e.states.length=0,(a=e).state=e.vars.getState(e)),t&&e.states.forEach(function(e){return i.state.add(e)})}),a=n,te=e,this.killConflicts(),this},t.animate=function(){var e,t,i=this,n=te,r=this.timeline,a=this.actions.length;for(te=this,r.clear(),this._abs.length=this._final.length=this._run.length=0,this.actions.forEach(function(e){e.vars.animate&&e.vars.animate(e);var t,i=e.vars.onEnter,n=e.vars.onLeave,r=e.targets;r&&r.length&&(i||n)&&(t=new re,e.states.forEach(function(e){return t.add(e)}),(e=t.compare(b.getState(r))).enter.length&&i&&i(e.enter),e.leave.length)&&n&&n(e.leave)}),ce(this._abs),this._run.forEach(function(e){return e()}),t=r.duration(),e=this._final.slice(0),r.add(function(){t<=r.time()&&(e.forEach(function(e){return e()}),B(i,"onComplete"))}),te=n;a--;)this.actions[a].vars.once&&this.actions[a].kill();return B(this,"onStart"),r.restart(),this},t.loadState=function(r){r=r||function(){return 0};var a=[];return this.actions.forEach(function(i){var n,e;i.vars.loadState&&(a.push(e=function e(t){t&&(i.targets=t),~(n=a.indexOf(e))&&(a.splice(n,1),a.length||r())}),i.vars.loadState(e))}),a.length||r(),this},t.setState=function(){return this.actions.forEach(function(e){return e.targets=e.vars.setState&&e.vars.setState(e)}),this},t.killConflicts=function(t){return this.state.interrupt(t),this._kill.forEach(function(e){return e.interrupt(t)}),this},t.run=function(e,t){var i=this;return this!==te&&(e||this.getState(t),this.loadState(function(){i._killed||(i.setState(),i.animate())})),this},t.clear=function(e){this.state.clear(),e||(this.actions.length=0)},t.getStateById=function(e){for(var t,i=this.actions.length;i--;)if(t=this.actions[i].getStateById(e))return t;return this.state.idLookup[e]&&this.state},t.kill=function(){this._killed=1,this.clear(),delete Y[this.id]};var t,Pe=Re;function Re(e){this.id=e,this.actions=[],this._kill=[],this._final=[],this._abs=[],this._run=[],this.data={},this.state=new re,this.timeline=ee.timeline()}i.getState=function(e,t){e=V(e,t);return a&&a.states.push(e),t&&t.batch&&i.batch(t.batch).state.add(e),e},i.from=function(e,t){return"clearProps"in(t=t||{})||(t.clearProps=!0),W(e,V(t.targets||e.targets,{props:t.props||e.props,simple:t.simple,kill:!!t.kill}),t,-1)},i.to=function(e,t){return W(e,V(t.targets||e.targets,{props:t.props||e.props,simple:t.simple,kill:!!t.kill}),t,1)},i.fromTo=function(e,t,i){return W(e,t,i)},i.fit=function(e,t,i){var n=i?Z(i,xe):{},r=i||n,a=r.absolute,s=r.scale,o=r.getVars,l=r.props,h=r.runBackwards,c=r.onComplete,r=r.simple,u=i&&i.fitChild&&_(i.fitChild),t=X(t,l,r,e),d=X(e,0,r,t),e=l?ie[l]:ne,r=ee.context();return l&&H(n,t.props),Q(d,e),h&&("immediateRender"in n||(n.immediateRender=!0),n.onComplete=function(){x(d),c&&c.apply(this,arguments)}),a&&k(d,t),n=$(d,t,s||u,!n.duration&&l,u,n.duration||o?n:0),"object"==typeof i&&"zIndex"in i&&(n.zIndex=i.zIndex),r&&!o&&r.add(function(){return function(){return x(d)}}),o?n:n.duration?ee.to(d.element,n):null},i.makeAbsolute=function(e,t){return(e instanceof re?e:new re(e,t)).makeAbsolute()},i.batch=function(e){return Y[e=e||"default"]||(Y[e]=new Pe(e))},i.killFlipsOf=function(e,t){(e instanceof re?e.targets:P(e)).forEach(function(e){return e&&fe(e._flip,!1!==t?1:2)})},i.isFlipping=function(e){e=i.getByTarget(e);return!!e&&e.isActive()},i.getByTarget=function(e){return(_(e)||S)._flip},i.getElementState=function(e,t){return new ae(_(e),t)},i.convertCoordinates=function(e,t,i){t=K(t,!0,!0).multiply(K(e));return i?t.apply(i):t},i.register=function(e){var i;(o="undefined"!=typeof document&&document.body)&&(ee=e,h(o),P=ee.utils.toArray,j=ee.core.getStyleSaver,i=ee.utils.snap(.1),R=function(e,t){return i(parseFloat(e)+t)})};var b=i;function i(){}b.version="3.13.0","undefined"!=typeof window&&window.gsap&&window.gsap.registerPlugin(b),e.Flip=b,e.default=b,"undefined"==typeof window||window!==e?Object.defineProperty(e,"__esModule",{value:!0}):delete e.default}),((e,t)=>{"function"==typeof define&&define.amd?define(["flickity/js/index","fizzy-ui-utils/utils"],t):"object"==typeof module&&module.exports?module.exports=t(require("flickity"),require("fizzy-ui-utils")):t(e.Flickity,e.fizzyUIUtils)})(this,function(e,n){var t=e.Slide,r=t.prototype.updateTarget,t=(t.prototype.updateTarget=function(){var i,n;r.apply(this,arguments),this.parent.options.fade&&(i=this.target-this.x,n=this.cells[0].x,this.cells.forEach(function(e){var t=e.x-n-i;e.renderPosition(t)}))},t.prototype.setOpacity=function(t){this.cells.forEach(function(e){e.element.style.opacity=t})},e.prototype),i=(e.createMethods.push("_createFade"),t._createFade=function(){this.fadeIndex=this.selectedIndex,this.prevSelectedIndex=this.selectedIndex,this.on("select",this.onSelectFade),this.on("dragEnd",this.onDragEndFade),this.on("settle",this.onSettleFade),this.on("activate",this.onActivateFade),this.on("deactivate",this.onDeactivateFade)},t.updateSlides),a=(t.updateSlides=function(){i.apply(this,arguments),this.options.fade&&this.slides.forEach(function(e,t){t=t==this.selectedIndex?1:0;e.setOpacity(t)},this)},t.onSelectFade=function(){this.fadeIndex=Math.min(this.prevSelectedIndex,this.slides.length-1),this.prevSelectedIndex=this.selectedIndex},t.onSettleFade=function(){delete this.didDragEnd,this.options.fade&&(this.selectedSlide.setOpacity(1),this.slides[this.fadeIndex])&&this.fadeIndex!=this.selectedIndex&&this.slides[this.fadeIndex].setOpacity(0)},t.onDragEndFade=function(){this.didDragEnd=!0},t.onActivateFade=function(){this.options.fade&&this.element.classList.add("is-fade")},t.onDeactivateFade=function(){this.options.fade&&(this.element.classList.remove("is-fade"),this.slides.forEach(function(e){e.setOpacity("")}))},t.positionSlider),s=(t.positionSlider=function(){this.options.fade?(this.fadeSlides(),this.dispatchScrollEvent()):a.apply(this,arguments)},t.positionSliderAtSelected),o=(t.positionSliderAtSelected=function(){this.options.fade&&this.setTranslateX(0),s.apply(this,arguments)},t.fadeSlides=function(){var e,t,i,n,r;this.slides.length<2||(e=this.getFadeIndexes(),r=this.slides[e.a],t=this.slides[e.b],i=this.wrapDifference(r.target,t.target),n=this.wrapDifference(r.target,-this.x),r.setOpacity(1-(n/=i)),t.setOpacity(n),r=e.a,this.isDragging&&(r=.5<n?e.a:e.b),null!=this.fadeHideIndex&&this.fadeHideIndex!=r&&this.fadeHideIndex!=e.a&&this.fadeHideIndex!=e.b&&this.slides[this.fadeHideIndex].setOpacity(0),this.fadeHideIndex=r)},t.getFadeIndexes=function(){return this.isDragging||this.didDragEnd?this.options.wrapAround?this.getFadeDragWrapIndexes():this.getFadeDragLimitIndexes():{a:this.fadeIndex,b:this.selectedIndex}},t.getFadeDragWrapIndexes=function(){var e=this.slides.map(function(e,t){return this.getSlideDistance(-this.x,t)},this),t=e.map(function(e){return Math.abs(e)}),i=Math.min.apply(Math,t),t=t.indexOf(i),i=e[t],e=this.slides.length;return{a:t,b:n.modulo(t+(0<=i?1:-1),e)}},t.getFadeDragLimitIndexes=function(){for(var e=0,t=0;t<this.slides.length-1;t++){var i=this.slides[t];if(-this.x<i.target)break;e=t}return{a:e,b:e+1}},t.wrapDifference=function(e,t){var i,t=t-e;return t=this.options.wrapAround&&(e=t+this.slideableWidth,i=t-this.slideableWidth,Math.abs(e)<Math.abs(t)&&(t=e),Math.abs(i)<Math.abs(t))?i:t},t._getWrapShiftCells),l=(t._getWrapShiftCells=function(){this.options.fade||o.apply(this,arguments)},t.shiftWrapCells);return t.shiftWrapCells=function(){this.options.fade||l.apply(this,arguments)},e}),((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).window=e.window||{})})(this,function(e){function i(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return"string"==typeof e}function u(e){return"function"==typeof e}function Q(e){return"number"==typeof e}function a(e){return void 0===e}function A(e){return"object"==typeof e}function o(){return"undefined"!=typeof window}function $(e){return u(e)||G(e)}function n(e){return(Qe=We(e,s))&&m}function ee(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")}function te(e,t){return!t&&console.warn(e)}function g(e,t){return e&&(s[e]=t)&&Qe&&(Qe[e]=t)||s}function v(){return 0}function ie(e){var t,i,n=e[0];if(A(n)||u(n)||(e=[e]),!(t=(n._gsap||{}).harness)){for(i=kt.length;i--&&!kt[i].targetTest(n););t=kt[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new ti(e[i],t)))||e.splice(i,1);return e}function ne(e){return e._gsap||ie(L(e))[0]._gsap}function y(e,t,i){return(i=e[t])&&u(i)?e[t]():a(i)&&e.getAttribute&&e.getAttribute(t)||i}function p(e,t){return(e=e.split(",")).forEach(t)||e}function N(e){return Math.round(1e5*e)/1e5||0}function C(e){return Math.round(1e7*e)/1e7||0}function re(e,t){var i=t.charAt(0),t=parseFloat(t.substr(2));return e=parseFloat(e),"+"===i?e+t:"-"===i?e-t:"*"===i?e*t:e/t}function ae(){var e,t,i=Ut.length,n=Ut.slice(0);for(Bt={},e=Ut.length=0;e<i;e++)(t=n[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)}function S(e){return!!(e._initted||e._startAt||e.add)}function _(e,t,i,n){Ut.length&&!O&&ae(),e.render(t,i,n||!!(O&&t<0&&S(e))),Ut.length&&!O&&ae()}function x(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(Rt).length<2?t:G(e)?e.trim():e}function b(e){return e}function I(e,t){for(var i in t)i in e||(e[i]=t[i]);return e}function T(e,t){for(var i in t)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(e[i]=A(t[i])?T(e[i]||(e[i]={}),t[i]):t[i]);return e}function se(e,t){var i,n={};for(i in e)i in t||(n[i]=e[i]);return n}function oe(e){var n,t=e.parent||U,i=e.keyframes?(n=R(e.keyframes),function(e,t){for(var i in t)i in e||"duration"===i&&n||"ease"===i||(e[i]=t[i])}):I;if(!1!==e.inherit)for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e}function M(e,t,i,n,r){void 0===i&&(i="_first");var a,s=e[n=void 0===n?"_last":n];if(r)for(a=t[r];s&&s[r]>a;)s=s._prev;s?(t._next=s._next,s._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[n]=t,t._prev=s,t.parent=t._dp=e}function w(e,t,i,n){void 0===i&&(i="_first"),void 0===n&&(n="_last");var r=t._prev,a=t._next;r?r._next=a:e[i]===t&&(e[i]=a),a?a._prev=r:e[n]===t&&(e[n]=r),t._next=t._prev=t.parent=null}function le(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0}function E(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e}function he(e,t,i,n){e._startAt&&(O?e._startAt.revert(It):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,n))}function ce(e){return e._repeat?Xe(e._tTime,e=e.duration()+e._rDelay)*e:0}function ue(e,t){return(e-t._start)*t._ts+(0<=t._ts?0:t._dirty?t.totalDuration():t._tDur)}function de(e){e._end=C(e._start+(e._tDur/Math.abs(e._ts||e._rts||F)||0))}function pe(e,t){var i=e._dp;i&&i.smoothChildTiming&&e._ts&&(e._start=C(i._time-(0<e._ts?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),de(e),i._dirty||E(i,e))}function fe(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=ue(e.rawTime(),t),!t._dur||qe(0,t.totalDuration(),i)-t._tTime>F)&&t.render(i,!0),E(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)0<=i.rawTime()&&i.totalTime(i._tTime),i=i._dp;e._zTime=-F}}function P(e,t,i,n){return t.parent&&le(t),t._start=C((Q(i)?i:i||e!==U?h(e,i,t):e._time)+t._delay),t._end=C(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),M(e,t,"_first","_last",e._sort?"_start":0),je(t)||(e._recent=t),n||fe(e,t),e._ts<0&&pe(e,e._tTime),e}function me(e,t){(s.ScrollTrigger||ee("scrollTrigger",t))&&s.ScrollTrigger.create(t,e)}function ge(e,t,i,n,r){return oi(e,t,r),!e._initted||!i&&e._pt&&!O&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&et!==f.frame&&(Ut.push(e),e._lazy=[r,n])}function ve(e,t,i,n){var r=e._repeat,t=C(t)||0,a=e._tTime/e._tDur;return a&&!n&&(e._time*=t/e._dur),e._dur=t,e._tDur=r?r<0?1e10:C(t*(r+1)+e._rDelay*r):t,0<a&&!n&&pe(e,e._tTime=e._tDur*a),e.parent&&de(e),i||E(e.parent,e),e}function ye(e){return e instanceof W?E(e):ve(e,e._dur)}function _e(e,t,i){var n,r,a=Q(t[1]),s=(a?2:1)+(e<2?0:1),o=t[s];if(a&&(o.duration=t[1]),o.parent=i,e){for(n=o,r=i;r&&!("immediateRender"in n);)n=r.vars.defaults||{},r=!1!==r.vars.inherit&&r.parent;o.immediateRender=!1!==n.immediateRender,e<2?o.runBackwards=1:o.startAt=t[s-1]}return new X(t[0],o,t[1+s])}function xe(e,t){return e||0===e?t(e):t}function k(e,t){return G(e)&&(t=Lt.exec(e))?t[1]:""}function Se(e,t){return e&&A(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&A(e[0]))&&!e.nodeType&&e!==c}function be(i){return i=L(i)[0]||te("Invalid scope")||{},function(e){var t=i.current||i.nativeElement||i;return L(e,t.querySelectorAll?t:t===i?te("Invalid scope")||Je.createElement("div"):i)}}function Te(e){return e.sort(function(){return.5-Math.random()})}function Me(e){var p,f,m,g,v,y,_,x,S;return u(e)?e:(f=Qt((p=A(e)?e:{each:e}).ease),m=p.from||0,g=parseFloat(p.base)||0,v={},e=0<m&&m<1,y=isNaN(m)||e,_=p.axis,G(S=x=m)?x=S={center:.5,edges:.5,end:1}[m]||0:!e&&y&&(x=m[0],S=m[1]),function(e,t,i){var n,r,a,s,o,l,h,c,u=(i||p).length,d=v[u];if(!d){if(!(c="auto"===p.grid?0:(p.grid||[1,B])[1])){for(l=-B;l<(l=i[c++].getBoundingClientRect().left)&&c<u;);c<u&&c--}for(d=v[u]=[],n=y?Math.min(c,u)*x-.5:m%c,r=c===B?0:y?u*S/c-.5:m/c|0,h=B,o=l=0;o<u;o++)s=o%c-n,a=r-(o/c|0),d[o]=s=_?Math.abs("y"===_?a:s):St(s*s+a*a),l<s&&(l=s),s<h&&(h=s);"random"===m&&Te(d),d.max=l-h,d.min=h,d.v=u=(parseFloat(p.amount)||parseFloat(p.each)*(u<c?u-1:_?"y"===_?u/c:c:Math.max(c,u/c))||0)*("edges"===m?-1:1),d.b=u<0?g-u:g,d.u=k(p.amount||p.each)||0,f=f&&u<0?Jt(f):f}return u=(d[e]-d.min)/d.max||0,C(d.b+(f?f(u):u)*d.v)+d.u})}function we(i){var n=Math.pow(10,((i+"").split(".")[1]||"").length);return function(e){var t=C(Math.round(parseFloat(e)/i)*i*n);return(t-t%1)/n+(Q(e)?0:k(e))}}function Ee(l,e){var h,c,t=R(l);return!t&&A(l)&&(h=t=l.radius||B,l.values?(l=L(l.values),(c=!Q(l[0]))&&(h*=h)):l=we(l.increment)),xe(e,t?u(l)?function(e){return c=l(e),Math.abs(c-e)<=h?c:e}:function(e){for(var t,i,n=parseFloat(c?e.x:e),r=parseFloat(c?e.y:0),a=B,s=0,o=l.length;o--;)(t=c?(t=l[o].x-n)*t+(i=l[o].y-r)*i:Math.abs(l[o]-n))<a&&(a=t,s=o);return s=!h||a<=h?l[s]:e,c||s===e||Q(e)?s:s+k(e)}:we(l))}function Ae(e,t,i,n){return xe(R(e)?!t:!0===i?!!(i=0):!n,function(){return R(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+.99*i))/i)*i*n)/n})}function Ce(t,i,e){return xe(e,function(e){return t[~~i(e)]})}function Pe(e){for(var t,i,n,r,a=0,s="";~(t=e.indexOf("random(",a));)n=e.indexOf(")",t),r="["===e.charAt(t+7),i=e.substr(t+7,n-t-7).match(r?Rt:wt),s+=e.substr(a,t-a)+Ae(r?i:+i[0],r?0:+i[1],+i[2]||1e-5),a=n+1;return s+e.substr(a,e.length-a)}function Re(e,t,i){var n,r,a,s=e.labels,o=B;for(n in s)(r=s[n]-t)<0==!!i&&r&&o>(r=Math.abs(r))&&(a=n,o=r);return a}function Le(e){return le(e),e.scrollTrigger&&e.scrollTrigger.kill(!!O),e.progress()<1&&V(e,"onInterrupt"),e}function De(e){if(e)if(e=!e.name&&e.default||e,o()||e.headless){var t=e.name,i=t&&!u(e)&&e.init?function(){this._props=[]}:e,n={init:v,render:Mi,add:di,kill:Ei,modifier:wi,rawVars:0},r={targetTest:0,get:0,getSetter:xi,aliases:{},register:0};if(Yt(),e!==i){if(z[t])return;I(i,I(se(e,n),r)),We(i.prototype,We(n,se(e,r))),z[i.prop=t]=i,e.targetTest&&(kt.push(i),Ot[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}g(t,i),e.register&&e.register(m,i,j)}else Wt.push(e)}function Ie(e,t,i){return(6*(e+=e<0?1:1<e?-1:0)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)*d+.5|0}function Ne(e,t,i){var n,r,a,s,o,l,h,c=e?Q(e)?[e>>16,e>>8&d,e&d]:0:Xt.black;if(!c){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),Xt[e])c=Xt[e];else if("#"===e.charAt(0)){if(9===(e=e.length<6?"#"+(n=e.charAt(1))+n+(r=e.charAt(2))+r+(a=e.charAt(3))+a+(5===e.length?e.charAt(4)+e.charAt(4):""):e).length)return[(c=parseInt(e.substr(1,6),16))>>16,c>>8&d,c&d,parseInt(e.substr(7),16)/255];c=[(e=parseInt(e.substr(1),16))>>16,e>>8&d,e&d]}else if("hsl"===e.substr(0,3))if(c=h=e.match(wt),t){if(~e.indexOf("="))return c=e.match(Et),i&&c.length<4&&(c[3]=1),c}else s=+c[0]%360/360,o=c[1]/100,n=2*(l=c[2]/100)-(r=l<=.5?l*(o+1):l+o-l*o),3<c.length&&(c[3]*=1),c[0]=Ie(s+1/3,n,r),c[1]=Ie(s,n,r),c[2]=Ie(s-1/3,n,r);else c=e.match(wt)||Xt.transparent;c=c.map(Number)}return t&&!h&&(n=c[0]/d,r=c[1]/d,a=c[2]/d,l=((e=Math.max(n,r,a))+(t=Math.min(n,r,a)))/2,e===t?s=o=0:(h=e-t,o=.5<l?h/(2-e-t):h/(e+t),s=e===n?(r-a)/h+(r<a?6:0):e===r?(a-n)/h+2:(n-r)/h+4,s*=60),c[0]=~~(s+.5),c[1]=~~(100*o+.5),c[2]=~~(100*l+.5)),i&&c.length<4&&(c[3]=1),c}function Oe(e){var t=[],i=[],n=-1;return e.split(jt).forEach(function(e){e=e.match(At)||[];t.push.apply(t,e),i.push(n+=e.length+1)}),t.c=i,t}function Ue(e,t,i){var n,r,a,s,o="",l=(e+o).match(jt),h=t?"hsla(":"rgba(",c=0;if(!l)return e;if(l=l.map(function(e){return(e=Ne(e,t,1))&&h+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"}),i&&(a=Oe(e),(n=i.c).join(o)!==a.c.join(o)))for(s=(r=e.replace(jt,"1").split(At)).length-1;c<s;c++)o+=r[c]+(~n.indexOf(c)?l.shift()||h+"0,0,0,0)":(a.length?a:l.length?l:i).shift());if(!r)for(s=(r=e.split(jt)).length-1;c<s;c++)o+=r[c]+l[c];return o+r[s]}function Be(e){var t=e.join(" ");if(jt.lastIndex=0,jt.test(t))return t=qt.test(t),e[1]=Ue(e[1],t),e[0]=Ue(e[0],t,Oe(e[1])),!0}function Fe(e){var t,i,n,r=(e+"").split("("),a=D[r[0]];return a&&1<r.length&&a.config?a.config.apply(null,~e.indexOf("{")?[(e=>{for(var t,i,n,r={},a=e.substr(1,e.length-3).split(":"),s=a[0],o=1,l=a.length;o<l;o++)i=a[o],t=o!==l-1?i.lastIndexOf(","):i.length,n=i.substr(0,t),r[s]=isNaN(n)?n.replace(Zt,"").trim():+n,s=i.substr(t+1).trim();return r})(r[1])]:(t=(r=e).indexOf("(")+1,i=r.indexOf(")"),n=r.indexOf("(",t),r.substring(t,~n&&n<i?r.indexOf(")",i+1):i).split(",").map(x))):D._CE&&Kt.test(e)?D._CE("",e):a}function Ge(e,t){for(var i,n=e._first;n;)n instanceof W?Ge(n,t):!n.vars.yoyoEase||n._yoyo&&n._repeat||n._yoyo===t||(n.timeline?Ge(n.timeline,t):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=t)),n=n._next}function ke(e,t,i,n){var r,a={easeIn:t,easeOut:i=void 0===i?function(e){return 1-t(1-e)}:i,easeInOut:n=void 0===n?function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2}:n};p(e,function(e){for(var t in D[e]=s[e]=a,D[r=e.toLowerCase()]=i,a)D[r+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=D[e+"."+t]=a[t]})}function He(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}}function ze(i,e,t){function n(e){return 1===e?1:r*Math.pow(2,-10*e)*Tt((e-a)*s)+1}var r=1<=e?e:1,a=(s=(t||(i?.3:.45))/(e<1?e:1))/yt*(Math.asin(1/r)||0),t="out"===i?n:"in"===i?function(e){return 1-n(1-e)}:He(n),s=yt/s;return t.config=function(e,t){return ze(i,e,t)},t}function Ve(t,i){function n(e){return e?--e*e*((i+1)*e+i)+1:0}void 0===i&&(i=1.70158);var e="out"===t?n:"in"===t?function(e){return 1-n(1-e)}:He(n);return e.config=function(e){return Ve(t,e)},e}function We(e,t){for(var i in t)e[i]=t[i];return e}function Xe(e,t){return t=Math.floor(e=C(e/t)),e&&t===e?t-1:t}function je(e){return"isFromStart"===(e=e.data)||"isStart"===e}function h(e,t,i){var n,r,a,s=e.labels,o=e._recent||zt,l=e.duration()>=B?o.endTime(!1):e._dur;return G(t)&&(isNaN(t)||t in s)?(r=t.charAt(0),a="%"===t.substr(-1),n=t.indexOf("="),"<"===r||">"===r?(0<=n&&(t=t.replace(/=/,"")),("<"===r?o._start:o.endTime(0<=o._repeat))+(parseFloat(t.substr(1))||0)*(a?(n<0?o:i).totalDuration()/100:1)):n<0?(t in s||(s[t]=l),s[t]):(r=parseFloat(t.charAt(n-1)+t.substr(n+1)),a&&i&&(r=r/100*(R(i)?i[0]:i).totalDuration()),1<n?h(e,t.substr(0,n-1),i)+r:l+r)):null==t?l:+t}function qe(e,t,i){return i<e?e:t<i?t:i}function Ye(t,e,i,n,r){var a=e-t,s=n-i;return xe(r,function(e){return i+((e-t)/a*s||0)})}var Ke,O,l,U,c,Ze,Je,Qe,$e,et,tt,it,nt,rt,at,st,ot,lt,ht,ct,ut,dt,pt,ft,mt,gt,H={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},vt={duration:.5,overwrite:!1,delay:0},B=1e8,F=1/B,yt=2*Math.PI,_t=yt/4,xt=0,St=Math.sqrt,bt=Math.cos,Tt=Math.sin,Mt="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},R=Array.isArray,wt=/(?:-?\.?\d|\.)+/gi,Et=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,At=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Ct=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Pt=/[+-]=-?[.\d]+/,Rt=/[^,'"\[\]\s]+/gi,Lt=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,s={},Dt={suppressEvents:!0,isStart:!0,kill:!1},It={suppressEvents:!0,kill:!1},Nt={suppressEvents:!0},Ot={},Ut=[],Bt={},z={},Ft={},Gt=30,kt=[],Ht="",zt={_start:0,endTime:v,totalDuration:v},Vt=[].slice,L=function(e,t,i){return l&&!t&&l.selector?l.selector(e):!G(e)||i||!Ze&&Yt()?R(e)?(n=i,void 0===r&&(r=[]),e.forEach(function(e){return G(e)&&!n||Se(e,1)?r.push.apply(r,L(e)):r.push(e)})||r):Se(e)?Vt.call(e,0):e?[e]:[]:Vt.call((t||Je).querySelectorAll(e),0);var n,r},V=function(e,t,i){var n=e.vars,r=n[t],a=l,s=e._ctx;if(r)return t=n[t+"Params"],n=n.callbackScope||e,i&&Ut.length&&ae(),s&&(l=s),e=t?r.apply(n,t):r.call(n),l=a,e},Wt=[],d=255,Xt={aqua:[0,d,d],lime:[0,d,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,d],navy:[0,0,128],white:[d,d,d],olive:[128,128,0],yellow:[d,d,0],orange:[d,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[d,0,0],pink:[d,192,203],cyan:[0,d,d],transparent:[d,d,d,0]},jt=(()=>{var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in Xt)t+="|"+e+"\\b";return new RegExp(t+")","gi")})(),qt=/hsl[a]?\(/,f=(lt=Date.now,ht=500,ct=33,ut=lt(),dt=ut,ft=pt=1e3/240,at={time:0,frame:0,tick:function(){$t(!0)},deltaRatio:function(e){return st/(1e3/(e||60))},wake:function(){$e&&(!Ze&&o()&&(c=Ze=window,Je=c.document||{},s.gsap=m,(c.gsapVersions||(c.gsapVersions=[])).push(m.version),n(Qe||c.GreenSockGlobals||!c.gsap&&c||{}),Wt.forEach(De)),rt="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,it&&at.sleep(),nt=rt||function(e){return setTimeout(e,ft-1e3*at.time+1|0)},tt=1,$t(2))},sleep:function(){(rt?cancelAnimationFrame:clearTimeout)(it),tt=0,nt=v},lagSmoothing:function(e,t){ht=e||1/0,ct=Math.min(t||33,ht)},fps:function(e){pt=1e3/(e||240),ft=1e3*at.time+pt},add:function(r,e,t){var a=e?function(e,t,i,n){r(e,t,i,n),at.remove(a)}:r;return at.remove(r),mt[t?"unshift":"push"](a),Yt(),a},remove:function(e,t){~(t=mt.indexOf(e))&&mt.splice(t,1)&&t<=ot&&ot--},_listeners:mt=[]}),Yt=function(){return!tt&&f.wake()},D={},Kt=/^[\d.\-M][\d.\-,\s]/,Zt=/["']/g,Jt=function(t){return function(e){return 1-t(1-e)}},Qt=function(e,t){return e&&(u(e)?e:D[e]||Fe(e))||t};function $t(e){var t,i,n,r=lt()-dt,a=!0===e;if((ht<r||r<0)&&(ut+=r-ct),(0<(r=(i=(dt+=r)-ut)-ft)||a)&&(n=++at.frame,st=i-1e3*at.time,at.time=i/=1e3,ft+=r+(pt<=r?4:pt-r),t=1),a||(it=nt($t)),t)for(ot=0;ot<mt.length;ot++)mt[ot](i,st,n,e)}function ei(e){return e<1/2.75?gt*e*e:e<.7272727272727273?gt*Math.pow(e-1.5/2.75,2)+.75:e<.9090909090909092?gt*(e-=2.25/2.75)*e+.9375:gt*Math.pow(e-2.625/2.75,2)+.984375}p("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var i=t<5?t+1:t;ke(e+",Power"+(i-1),t?function(e){return Math.pow(e,i)}:function(e){return e},function(e){return 1-Math.pow(1-e,i)},function(e){return e<.5?Math.pow(2*e,i)/2:1-Math.pow(2*(1-e),i)/2})}),D.Linear.easeNone=D.none=D.Linear.easeIn,ke("Elastic",ze("in"),ze("out"),ze()),gt=7.5625,ke("Bounce",function(e){return 1-ei(1-e)},ei),ke("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)}),ke("Circ",function(e){return-(St(1-e*e)-1)}),ke("Sine",function(e){return 1===e?1:1-bt(e*_t)}),ke("Back",Ve("in"),Ve("out"),Ve()),D.SteppedEase=D.steps=s.SteppedEase={config:function(e,t){var i=1/(e=void 0===e?1:e),n=e+(t?0:1),r=t?1:0;return function(e){return((n*qe(0,.99999999,e)|0)+r)*i}}},vt.ease=D["quad.out"],p("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return Ht+=e+","+e+"Params,"});var ti=function(e,t){this.id=xt++,(e._gsap=this).target=e,this.harness=t,this.get=t?t.get:y,this.set=t?t.getSetter:xi},ii=((t=ni.prototype).delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(0<this._repeat?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,ve(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(Yt(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(pe(this,e),i._dp&&!i.parent&&fe(i,this);i&&i.parent;)i.parent._time!==i._start+(0<=i._ts?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(0<this._ts&&e<this._tDur||this._ts<0&&0<e||!this._tDur&&!e)&&P(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===F||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),_(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+ce(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):0<=this.rawTime()&&this._initted?1:0},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+ce(this),t):this.duration()?Math.min(1,this._time/this._dur):0<this.rawTime()?1:0},t.iteration=function(e,t){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*i,t):this._repeat?Xe(this._tTime,i)+1:1},t.timeScale=function(e,t){if(!arguments.length)return this._rts===-F?0:this._rts;if(this._rts===e)return this;for(var i=this.parent&&this._ts?ue(this.parent._time,this):this._tTime,e=(this._rts=+e||0,this._ts=this._ps||e===-F?0:this._rts,this.totalTime(qe(-Math.abs(this._delay),this.totalDuration(),i),!1!==t),de(this),this),n=e.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return e},t.paused=function(e){return arguments.length?(this._ps!==e&&((this._ps=e)?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Yt(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==F&&(this._tTime-=F)))),this):this._ps},t.startTime=function(e){var t;return arguments.length?(this._start=e,!(t=this.parent||this._dp)||!t._sort&&this.parent||P(t,this,e-this._delay),this):this._start},t.endTime=function(e){return this._start+(!1!==e?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ue(t.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){var t=O;return O=e=void 0===e?Nt:e,S(this)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),O=t,this},t.globalTime=function(e){for(var t=this,i=arguments.length?e:t.rawTime();t;)i=t._start+i/(Math.abs(t._ts)||1),t=t._dp;return!this.parent&&this._sat?this._sat.globalTime(e):i},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,ye(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){var t;return arguments.length?(t=this._time,this._rDelay=e,ye(this),t?this.time(t):this):this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(h(this,e),!1!==t)},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,!1!==t),this._dur||(this._zTime=-F),this},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-F:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-F,this},t.isActive=function(){var e=this.parent||this._dp,t=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(e=e.rawTime(!0))>=t&&e<this.endTime(!0)-F))},t.eventCallback=function(e,t,i){var n=this.vars;return 1<arguments.length?(t?(n[e]=t,i&&(n[e+"Params"]=i),"onUpdate"===e&&(this._onUpdate=t)):delete n[e],this):n[e]},t.then=function(n){var r=this;return new Promise(function(t){function e(){var e=r.then;r.then=null,u(i)&&(i=i(r))&&(i.then||i===r)&&(r.then=e),t(i),r.then=e}var i=u(n)?n:b;r._initted&&1===r.totalProgress()&&0<=r._ts||!r._tTime&&r._ts<0?e():r._prom=e})},ni);function ni(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,ve(this,+e.duration,1,1),this.data=e.data,l&&(this._ctx=l).data.push(this),tt||f.wake()}I(ii.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!(t.kill=function(){Le(this)}),parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-F,_prom:0,_ps:!1,_rts:1});i(ai,ri=ii),(t=ai.prototype).to=function(e,t,i){return _e(0,arguments,this),this},t.from=function(e,t,i){return _e(1,arguments,this),this},t.fromTo=function(e,t,i,n){return _e(2,arguments,this),this},t.set=function(e,t,i){return t.duration=0,t.parent=this,oe(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new X(e,t,h(this,i),1),this},t.call=function(e,t,i){return P(this,X.delayedCall(0,e,t),i)},t.staggerTo=function(e,t,i,n,r,a,s){return i.duration=t,i.stagger=i.stagger||n,i.onComplete=a,i.onCompleteParams=s,i.parent=this,new X(e,i,h(this,r)),this},t.staggerFrom=function(e,t,i,n,r,a,s){return i.runBackwards=1,oe(i).immediateRender=!1!==i.immediateRender,this.staggerTo(e,t,i,n,r,a,s)},t.staggerFromTo=function(e,t,i,n,r,a,s,o){return n.startAt=i,oe(n).immediateRender=!1!==n.immediateRender,this.staggerTo(e,t,n,r,a,s,o)},t.render=function(e,t,i){var n,r,a,s,o,l,h,c,u,d,p=this._time,f=this._dirty?this.totalDuration():this._tDur,m=this._dur,g=e<=0?0:C(e),v=this._zTime<0!=e<0&&(this._initted||!m);if((g=this!==U&&f<g&&0<=e?f:g)!==this._tTime||i||v){if(p!==this._time&&m&&(g+=this._time-p,e+=this._time-p),n=g,c=this._start,o=!(h=this._ts),v&&(m||(p=this._zTime),!e&&t||(this._zTime=e)),this._repeat){if(v=this._yoyo,s=m+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*s+e,t,i);if(n=C(g%s),g===f?(a=this._repeat,n=m):((a=~~(u=C(g/s)))&&a===u&&(n=m,a--),m<n&&(n=m)),u=Xe(this._tTime,s),v&&1&a&&(n=m-n,d=1),a!==(u=!p&&this._tTime&&u!==a&&this._tTime-u*s-this._dur<=0?a:u)&&!this._lock){var y=v&&1&u,v=y===(v&&1&a),p=(y=a<u?!y:y)?0:g%m?m:g;if(this._lock=1,this.render(p||(d?0:C(a*s)),t,!m)._lock=0,this._tTime=g,!t&&this.parent&&V(this,"onRepeat"),this.vars.repeatRefresh&&!d&&(this.invalidate()._lock=1),p&&p!==this._time||o!=!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(m=this._dur,f=this._tDur,v&&(this._lock=2,this.render(p=y?m:-1e-4,!0),this.vars.repeatRefresh)&&!d&&this.invalidate(),this._lock=0,!this._ts&&!o)return this;Ge(this,d)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(l=((e,t,i)=>{var n;if(t<i)for(n=e._first;n&&n._start<=i;){if("isPause"===n.data&&n._start>t)return n;n=n._next}else for(n=e._last;n&&n._start>=i;){if("isPause"===n.data&&n._start<t)return n;n=n._prev}})(this,C(p),C(n)))&&(g-=n-(n=l._start)),this._tTime=g,this._time=n,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,p=0),!p&&g&&!t&&!u&&(V(this,"onStart"),this._tTime!==g))return this;if(p<=n&&0<=e)for(_=this._first;_;){if(r=_._next,(_._act||n>=_._start)&&_._ts&&l!==_){if(_.parent!==this)return this.render(e,t,i);if(_.render(0<_._ts?(n-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(n-_._start)*_._ts,t,i),n!==this._time||!this._ts&&!o){l=0,r&&(g+=this._zTime=-F);break}}_=r}else for(var _=this._last,x=e<0?e:n;_;){if(r=_._prev,(_._act||x<=_._end)&&_._ts&&l!==_){if(_.parent!==this)return this.render(e,t,i);if(_.render(0<_._ts?(x-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(x-_._start)*_._ts,t,i||O&&S(_)),n!==this._time||!this._ts&&!o){l=0,r&&(g+=this._zTime=x?-F:F);break}}_=r}if(l&&!t&&(this.pause(),l.render(p<=n?0:-F)._zTime=p<=n?1:-1,this._ts))return this._start=c,de(this),this.render(e,t,i);this._onUpdate&&!t&&V(this,"onUpdate",!0),!(g===f&&this._tTime>=this.totalDuration()||!g&&p)||c!==this._start&&Math.abs(h)===Math.abs(this._ts)||this._lock||(!e&&m||!(g===f&&0<this._ts||!g&&this._ts<0)||le(this,1),t)||e<0&&!p||!g&&!p&&f||(V(this,g===f&&0<=e?"onComplete":"onReverseComplete",!0),!this._prom)||g<f&&0<this.timeScale()||this._prom()}return this},t.add=function(e,t){var i=this;if(Q(t)||(t=h(this,t,e)),!(e instanceof ii)){if(R(e))return e.forEach(function(e){return i.add(e,t)}),this;if(G(e))return this.addLabel(e,t);if(!u(e))return this;e=X.delayedCall(0,e)}return this!==e?P(this,e,t):this},t.getChildren=function(e,t,i,n){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===n&&(n=-B);for(var r=[],a=this._first;a;)a._start>=n&&(a instanceof X?t&&r.push(a):(i&&r.push(a),e&&r.push.apply(r,a.getChildren(!0,t,i)))),a=a._next;return r},t.getById=function(e){for(var t=this.getChildren(1,1,1),i=t.length;i--;)if(t[i].vars.id===e)return t[i]},t.remove=function(e){return G(e)?this.removeLabel(e):u(e)?this.killTweensOf(e):(e.parent===this&&w(this,e),e===this._recent&&(this._recent=this._last),E(this))},t.totalTime=function(e,t){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=C(f.time-(0<this._ts?e/this._ts:(this.totalDuration()-e)/-this._ts))),ri.prototype.totalTime.call(this,e,t),this._forcing=0,this):this._tTime},t.addLabel=function(e,t){return this.labels[e]=h(this,t),this},t.removeLabel=function(e){return delete this.labels[e],this},t.addPause=function(e,t,i){t=X.delayedCall(0,t||v,i);return t.data="isPause",this._hasPause=1,P(this,t,h(this,e))},t.removePause=function(e){var t=this._first;for(e=h(this,e);t;)t._start===e&&"isPause"===t.data&&le(t),t=t._next},t.killTweensOf=function(e,t,i){for(var n=this.getTweensOf(e,i),r=n.length;r--;)hi!==n[r]&&n[r].kill(e,t);return this},t.getTweensOf=function(e,t){for(var i,n=[],r=L(e),a=this._first,s=Q(t);a;)a instanceof X?((e,t)=>{for(var i=t.length,n=0;e.indexOf(t[n])<0&&++n<i;);return n<i})(a._targets,r)&&(s?(!hi||a._initted&&a._ts)&&a.globalTime(0)<=t&&a.globalTime(a.totalDuration())>t:!t||a.isActive())&&n.push(a):(i=a.getTweensOf(r,t)).length&&n.push.apply(n,i),a=a._next;return n},t.tweenTo=function(e,t){t=t||{};var i,n=this,r=h(n,e),a=t.startAt,s=t.onStart,o=t.onStartParams,e=t.immediateRender,l=X.to(n,I({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:t.duration||Math.abs((r-(a&&"time"in a?a.time:n._time))/n.timeScale())||F,onStart:function(){var e;n.pause(),i||(e=t.duration||Math.abs((r-(a&&"time"in a?a.time:n._time))/n.timeScale()),l._dur!==e&&ve(l,e,0,1).render(l._time,!0,!0),i=1),s&&s.apply(l,o||[])}},t));return e?l.render(0):l},t.tweenFromTo=function(e,t,i){return this.tweenTo(t,I({startAt:{time:h(this,e)}},i))},t.recent=function(){return this._recent},t.nextLabel=function(e){return void 0===e&&(e=this._time),Re(this,h(this,e))},t.previousLabel=function(e){return void 0===e&&(e=this._time),Re(this,h(this,e),1)},t.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+F)},t.shiftChildren=function(e,t,i){void 0===i&&(i=0);for(var n,r=this._first,a=this.labels;r;)r._start>=i&&(r._start+=e,r._end+=e),r=r._next;if(t)for(n in a)a[n]>=i&&(a[n]+=e);return E(this)},t.invalidate=function(e){var t=this._first;for(this._lock=0;t;)t.invalidate(e),t=t._next;return ri.prototype.invalidate.call(this,e)},t.clear=function(e){void 0===e&&(e=!0);for(var t,i=this._first;i;)t=i._next,this.remove(i),i=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),E(this)},t.totalDuration=function(e){var t,i,n,r=0,a=this,s=a._last,o=B;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-e:e));if(a._dirty){for(n=a.parent;s;)t=s._prev,s._dirty&&s.totalDuration(),o<(i=s._start)&&a._sort&&s._ts&&!a._lock?(a._lock=1,P(a,s,i-s._delay,1)._lock=0):o=i,i<0&&s._ts&&(r-=i,(!n&&!a._dp||n&&n.smoothChildTiming)&&(a._start+=i/a._ts,a._time-=i,a._tTime-=i),a.shiftChildren(-i,!1,-1/0),o=0),s._end>r&&s._ts&&(r=s._end),s=t;ve(a,a===U&&a._time>r?a._time:r,1,1),a._dirty=0}return a._tDur},ai.updateRoot=function(e){if(U._ts&&(_(U,ue(e,U)),et=f.frame),f.frame>=Gt){Gt+=H.autoSleep||120;var t=U._first;if((!t||!t._ts)&&H.autoSleep&&f._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||f.sleep()}}};var ri,W=ai;function ai(e,t){var i;return(i=ri.call(this,e=void 0===e?{}:e)||this).labels={},i.smoothChildTiming=!!e.smoothChildTiming,i.autoRemoveChildren=!!e.autoRemoveChildren,i._sort=!1!==e.sortChildren,U&&P(e.parent||U,J(i),t),e.reversed&&i.reverse(),e.paused&&i.paused(!0),e.scrollTrigger&&me(J(i),e.scrollTrigger),i}function si(e,t,i,n,r,a){var s,o,l,h;if(z[e]&&!1!==(s=new z[e]).init(r,s.rawVars?t[e]:((e,t,i,n,r)=>{if(!A(e=u(e)?li(e,r,t,i,n):e)||e.style&&e.nodeType||R(e)||Mt(e))return G(e)?li(e,r,t,i,n):e;var a,s={};for(a in e)s[a]=li(e[a],r,t,i,n);return s})(t[e],n,r,a,i),i,n,a)&&(i._pt=o=new j(i._pt,r,e,0,1,s.render,s,0,s.priority),i!==zi))for(l=i._ptLookup[i._targets.indexOf(r)],h=s._props.length;h--;)l[s._props[h]]=o;return s}I(W.prototype,{_lock:0,_hasPause:0,_forcing:0});function oi(e,t,i){var n,r,a,s,o,l,h,c,u,d,p,f,m,g=e.vars,v=g.ease,y=g.startAt,_=g.immediateRender,x=g.lazy,S=g.onUpdate,b=g.runBackwards,T=g.yoyoEase,M=g.keyframes,w=g.autoRevert,E=e._dur,A=e._startAt,C=e._targets,P=e.parent,R=P&&"nested"===P.data?P.vars.targets:C,L="auto"===e._overwrite&&!Ke,D=e.timeline;if(e._ease=Qt(v=!D||M&&v?v:"none",vt.ease),e._yEase=T?Jt(Qt(!0===T?v:T,vt.ease)):0,T&&e._yoyo&&!e._repeat&&(T=e._yEase,e._yEase=e._ease,e._ease=T),e._from=!D&&!!g.runBackwards,!D||M&&!g.stagger){if(f=(c=C[0]?ne(C[0]).harness:0)&&g[c.prop],n=se(g,Ot),A&&(A._zTime<0&&A.progress(1),t<0&&b&&_&&!w?A.render(-1,!0):A.revert(b&&E?It:Dt),A._lazy=0),y){if(le(e._startAt=X.set(C,I({data:"isStart",overwrite:!1,parent:P,immediateRender:!0,lazy:!A&&!1!==x,startAt:null,delay:0,onUpdate:S&&function(){return V(e,"onUpdate")},stagger:0},y))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(O||!_&&!w)&&e._startAt.revert(It),_&&E&&t<=0&&i<=0)return void(t&&(e._zTime=t))}else if(b&&E&&!A)if(a=I({overwrite:!1,data:"isFromStart",lazy:(_=t?!1:_)&&!A&&!1!==x,immediateRender:_,stagger:0,parent:P},n),f&&(a[c.prop]=f),le(e._startAt=X.set(C,a)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(O?e._startAt.revert(It):e._startAt.render(-1,!0)),e._zTime=t,_){if(!t)return}else oi(e._startAt,F,F);for(x=E&&!1!==x||x&&!E,r=e._pt=e._ptCache=0;r<C.length;r++){if(h=(o=C[r])._gsap||ie(C)[r]._gsap,e._ptLookup[r]=d={},Bt[h.id]&&Ut.length&&ae(),p=R===C?r:R.indexOf(o),c&&!1!==(u=new c).init(o,f||n,e,p,R)&&(e._pt=s=new j(e._pt,o,u.name,0,1,u.render,u,0,u.priority),u._props.forEach(function(e){d[e]=s}),u.priority)&&(l=1),!c||f)for(a in n)z[a]&&(u=si(a,n,e,p,o,R))?u.priority&&(l=1):d[a]=s=di.call(e,o,a,"get",n[a],p,R,0,g.stringFilter);e._op&&e._op[r]&&e.kill(o,e._op[r]),L&&e._pt&&(hi=e,U.killTweensOf(o,d,e.globalTime(t)),m=!e.parent,hi=0),e._pt&&x&&(Bt[h.id]=1)}l&&Ai(e),e._onInit&&e._onInit(e)}e._onUpdate=S,e._initted=(!e._op||e._pt)&&!m,M&&t<=0&&D.render(B,!0,!0)}function li(e,t,i,n,r){return u(e)?e.call(t,i,n,r):G(e)&&~e.indexOf("random(")?Pe(e):e}var hi,ci,ui,di=function(e,t,i,n,r,a,s,o,l,h){u(n)&&(n=n(r||0,e,a));var c,r=e[t],a="get"!==i?i:u(r)?l?e[t.indexOf("set")||!u(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():r,i=u(r)?l?_i:yi:vi;if(!G(n)||"="!==(n=~n.indexOf("random(")?Pe(n):n).charAt(1)||!(c=re(a,n)+(k(a)||0))&&0!==c||(n=c),!h||a!==n||ci)return isNaN(a*n)||""===n?(r||t in e||ee(t,n),function(e,t,i,n,r,a,s){var o,l,h,c,u,d=new j(this._pt,e,t,0,1,Ti,null,r),p=0,f=0;for(d.b=i,d.e=n,i+="",(r=~(n+="").indexOf("random("))&&(n=Pe(n)),a&&(a(a=[i,n],e,t),i=a[0],n=a[1]),o=i.match(Ct)||[];c=Ct.exec(n);)h=c[0],c=n.substring(p,c.index),l?l=(l+1)%5:"rgba("===c.substr(-5)&&(l=1),h!==o[f++]&&(u=parseFloat(o[f-1])||0,d._pt={_next:d._pt,p:c||1===f?c:",",s:u,c:"="===h.charAt(1)?re(u,h)-u:parseFloat(h)-u,m:l&&l<4?Math.round:0},p=Ct.lastIndex);return d.c=p<n.length?n.substring(p,n.length):"",d.fp=s,(Pt.test(n)||r)&&(d.e=0),this._pt=d}.call(this,e,t,a,n,i,o||H.stringFilter,l)):(c=new j(this._pt,e,t,+a||0,n-(a||0),"boolean"==typeof r?bi:Si,0,i),l&&(c.fp=l),s&&c.modifier(s,this,e),this._pt=c)},pi=Ht+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",fi={},X=(p(pi+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return fi[e]=1}),i(r,ui=ii),(t=r.prototype).render=function(e,t,i){var n,r,a,s=this._time,o=this._tDur,l=this._dur,h=e<0,c=o-F<e&&!h?o:e<F?0:e;if(l){if(c!==this._tTime||!e||i||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=h||this._lazy){if(f=c,p=this.timeline,this._repeat){if(u=l+this._rDelay,this._repeat<-1&&h)return this.totalTime(100*u+e,t,i);if(f=C(c%u),c===o?(v=this._repeat,f=l):(v=~~(_=C(c/u)))&&v===_?(f=l,v--):l<f&&(f=l),(r=this._yoyo&&1&v)&&(d=this._yEase,f=l-f),_=Xe(this._tTime,u),f===s&&!i&&this._initted&&v===_)return this._tTime=c,this;v!==_&&(p&&this._yEase&&Ge(p,r),this.vars.repeatRefresh)&&!r&&!this._lock&&f!==u&&this._initted&&(this._lock=i=1,this.render(C(u*v),!0).invalidate()._lock=0)}if(!this._initted){if(ge(this,h?e:f,i,t,c))return this._tTime=0,this;if(!(s===this._time||i&&this.vars.repeatRefresh&&v!==_))return this;if(l!==this._dur)return this.render(e,t,i)}if(this._tTime=c,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=a=(d||this._ease)(f/l),this._from&&(this.ratio=a=1-a),!s&&c&&!t&&!_&&(V(this,"onStart"),this._tTime!==c))return this;for(n=this._pt;n;)n.r(a,n.d),n=n._next;p&&p.render(e<0?e:p._dur*p._ease(f/this._dur),t,i)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(h&&he(this,e,0,i),V(this,"onUpdate")),this._repeat&&v!==_&&this.vars.onRepeat&&!t&&this.parent&&V(this,"onRepeat"),c!==this._tDur&&c||this._tTime!==c||(h&&!this._onUpdate&&he(this,e,0,!0),!e&&l||!(c===this._tDur&&0<this._ts||!c&&this._ts<0)||le(this,1),t)||h&&!s||!(c||s||r)||(V(this,c===o?"onComplete":"onReverseComplete",!0),!this._prom)||c<o&&0<this.timeScale()||this._prom()}}else{var u=this;var d=e;var p=t;var f=i;var m,g,v=u.ratio,y=d<0||!d&&(!u._start&&function e(t){t=t.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||e(t))}(u)&&(u._initted||!je(u))||(u._ts<0||u._dp._ts<0)&&!je(u))?0:1,_=u._rDelay,l=0;if(_&&u._repeat&&(l=qe(0,u._tDur,d),g=Xe(l,_),u._yoyo&&1&g&&(y=1-y),g!==Xe(u._tTime,_))&&(v=1-y,u.vars.repeatRefresh)&&u._initted&&u.invalidate(),y!==v||O||f||u._zTime===F||!d&&u._zTime){if(u._initted||!ge(u,d,f,p,l)){for(g=u._zTime,u._zTime=d||(p?F:0),p=p||d&&!g,u.ratio=y,u._from&&(y=1-y),u._time=0,u._tTime=l,m=u._pt;m;)m.r(y,m.d),m=m._next;d<0&&he(u,d,0,!0),u._onUpdate&&!p&&V(u,"onUpdate"),l&&u._repeat&&!p&&u.parent&&V(u,"onRepeat"),(u._tDur<=d||d<0)&&u.ratio===y&&(y&&le(u,1),p||O||(V(u,y?"onComplete":"onReverseComplete",!0),u._prom&&u._prom()))}}else u._zTime||(u._zTime=d)}return this},t.targets=function(){return this._targets},t.invalidate=function(e){return e&&this.vars.runBackwards||(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(e),ui.prototype.invalidate.call(this,e)},t.resetTo=function(e,t,i,n,r){tt||f.wake(),this._ts||this.play();var a,s=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||oi(this,s),a=this._ease(s/this._dur),((e,t,i,n,r,a,s,o)=>{var l,h,c,u,d=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!d)for(d=e._ptCache[t]=[],c=e._ptLookup,u=e._targets.length;u--;){if((l=c[u][t])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return ci=1,e.vars[t]="+=0",oi(e,s),ci=0,!o||te(t+" not eligible for reset");d.push(l)}for(u=d.length;u--;)(l=(h=d[u])._pt||h).s=!n&&0!==n||r?l.s+(n||0)+a*l.c:n,l.c=i-l.s,h.e&&(h.e=N(i)+k(h.e)),h.b&&(h.b=l.s+k(h.b))})(this,e,t,i,n,a,s,r)?this.resetTo(e,t,i,n,1):(pe(this,0),this.parent||M(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(e,t){if(void 0===t&&(t="all"),e||t&&"all"!==t)if(this.timeline)d=this.timeline.totalDuration(),this.timeline.killTweensOf(e,t,hi&&!0!==hi.vars.overwrite)._first||Le(this),this.parent&&d!==this.timeline.totalDuration()&&ve(this,this._dur*this.timeline._tDur/d,0,1);else{var i,n,r,a,s,o,l,h=this._targets,c=e?L(e):h,u=this._ptLookup,d=this._pt;if((!t||"all"===t)&&((e,t)=>{for(var i=e.length,n=i===t.length;n&&i--&&e[i]===t[i];);return i<0})(h,c))return"all"===t&&(this._pt=0),Le(this);for(i=this._op=this._op||[],"all"!==t&&(G(t)&&(s={},p(t,function(e){return s[e]=1}),t=s),t=((e,t)=>{var i,n,r,a,s=(e=e[0]?ne(e[0]).harness:0)&&e.aliases;if(!s)return t;for(n in i=We({},t),s)if(n in i)for(r=(a=s[n].split(",")).length;r--;)i[a[r]]=i[n];return i})(h,t)),l=h.length;l--;)if(~c.indexOf(h[l]))for(s in n=u[l],"all"===t?(i[l]=t,a=n,r={}):(r=i[l]=i[l]||{},a=t),a)(o=n&&n[s])&&("kill"in o.d&&!0!==o.d.kill(s)||w(this,o,"_pt"),delete n[s]),"all"!==r&&(r[s]=1);this._initted&&!this._pt&&d&&Le(this)}else this._lazy=this._pt=0,this.parent?Le(this):this.scrollTrigger&&this.scrollTrigger.kill(!!O);return this},r.to=function(e,t,i){return new r(e,t,i)},r.from=function(e,t){return _e(1,arguments)},r.delayedCall=function(e,t,i,n){return new r(t,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:t,onReverseComplete:t,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:n})},r.fromTo=function(e,t,i){return _e(2,arguments)},r.set=function(e,t){return t.duration=0,t.repeatDelay||(t.repeat=0),new r(e,t)},r.killTweensOf=function(e,t,i){return U.killTweensOf(e,t,i)},r);function r(e,t,i,n){var r;"number"==typeof t&&(i.duration=t,t=i,i=null);var a,s,o,l,h,c,u,d,n=(r=ui.call(this,n?t:oe(t))||this).vars,p=n.duration,f=n.delay,m=n.immediateRender,g=n.stagger,v=n.overwrite,y=n.keyframes,_=n.defaults,x=n.scrollTrigger,S=n.yoyoEase,n=t.parent||U,b=(R(e)||Mt(e)?Q(e[0]):"length"in t)?[e]:L(e);if(r._targets=b.length?ie(b):te("GSAP target "+e+" not found. https://gsap.com",!H.nullTargetWarn)||[],r._ptLookup=[],r._overwrite=v,y||g||$(p)||$(f)){if(t=r.vars,(a=r.timeline=new W({data:"nested",defaults:_||{},targets:n&&"nested"===n.data?n.vars.targets:b})).kill(),a.parent=a._dp=J(r),a._start=0,g||$(p)||$(f)){if(l=b.length,u=g&&Me(g),A(g))for(h in g)~pi.indexOf(h)&&((d=d||{})[h]=g[h]);for(s=0;s<l;s++)(o=se(t,fi)).stagger=0,S&&(o.yoyoEase=S),d&&We(o,d),c=b[s],o.duration=+li(p,J(r),s,c,b),o.delay=(+li(f,J(r),s,c,b)||0)-r._delay,!g&&1===l&&o.delay&&(r._delay=f=o.delay,r._start+=f,o.delay=0),a.to(c,o,u?u(s,c,b):0),a._ease=D.none;a.duration()?p=f=0:r.timeline=0}else if(y){oe(I(a.vars.defaults,{ease:"none"})),a._ease=Qt(y.ease||t.ease||"none");var T,M,w,E=0;if(R(y))y.forEach(function(e){return a.to(b,e,">")}),a.duration();else{for(h in o={},y)"ease"!==h&&"easeEach"!==h&&((e,i,t,n)=>{var r,a,s=i.ease||n||"power1.inOut";if(R(i))a=t[e]||(t[e]=[]),i.forEach(function(e,t){return a.push({t:t/(i.length-1)*100,v:e,e:s})});else for(r in i)a=t[r]||(t[r]=[]),"ease"!==r&&a.push({t:parseFloat(e),v:i[r],e:s})})(h,y[h],o,y.easeEach);for(h in o)for(T=o[h].sort(function(e,t){return e.t-t.t}),s=E=0;s<T.length;s++)(w={ease:(M=T[s]).e,duration:(M.t-(s?T[s-1].t:0))/100*p})[h]=M.v,a.to(b,w,E),E+=w.duration;a.duration()<p&&a.to({},{duration:p-a.duration()})}}p||r.duration(p=a.duration())}else r.timeline=0;return!0!==v||Ke||(hi=J(r),U.killTweensOf(b),hi=0),P(n,J(r),i),t.reversed&&r.reverse(),t.paused&&r.paused(!0),(m||!p&&!y&&r._start===C(n._time)&&!1!==m&&function e(t){return!t||t._ts&&e(t.parent)}(J(r))&&"nested"!==n.data)&&(r._tTime=-F,r.render(Math.max(0,-f)||0)),x&&me(J(r),x),r}function mi(e,t,i){return e.setAttribute(t,i)}function gi(e,t,i,n){n.mSet(e,t,n.m.call(n.tween,i,n.mt),n)}I(X.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),p("staggerTo,staggerFrom,staggerFromTo",function(i){X[i]=function(){var e=new W,t=Vt.call(arguments,0);return t.splice("staggerFromTo"===i?5:4,0,0),e[i].apply(e,t)}});var vi=function(e,t,i){return e[t]=i},yi=function(e,t,i){return e[t](i)},_i=function(e,t,i,n){return e[t](n.fp,i)},xi=function(e,t){return u(e[t])?yi:a(e[t])&&e.setAttribute?mi:vi},Si=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},bi=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Ti=function(e,t){var i=t._pt,n="";if(!e&&t.b)n=t.b;else if(1===e&&t.e)n=t.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*e):Math.round(1e4*(i.s+i.c*e))/1e4)+n,i=i._next;n+=t.c}t.set(t.t,t.p,n,t)},Mi=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},wi=function(e,t,i,n){for(var r,a=this._pt;a;)r=a._next,a.p===n&&a.modifier(e,t,i),a=r},Ei=function(e){for(var t,i,n=this._pt;n;)i=n._next,n.p===e&&!n.op||n.op===e?w(this,n,"_pt"):n.dep||(t=1),n=i;return!t},Ai=function(e){for(var t,i,n,r,a=e._pt;a;){for(t=a._next,i=n;i&&i.pr>a.pr;)i=i._next;(a._prev=i?i._prev:r)?a._prev._next=a:n=a,(a._next=i)?i._prev=a:r=a,a=t}e._pt=n},j=(Ci.prototype.modifier=function(e,t,i){this.mSet=this.mSet||this.set,this.set=gi,this.m=e,this.mt=i,this.tween=t},Ci);function Ci(e,t,i,n,r,a,s,o,l){this.t=t,this.s=n,this.c=r,this.p=i,this.r=a||Si,this.d=s||this,this.set=o||vi,this.pr=l||0,(this._next=e)&&(e._prev=this)}function Pi(e){(Di[e]||Ii).map(function(e){return e()})}function Ri(){var e=Date.now(),o=[];2<e-Ni&&(Pi("matchMediaInit"),Li.forEach(function(e){var t,i,n,r,a=e.queries,s=e.conditions;for(i in a)(t=c.matchMedia(a[i]).matches)&&(n=1),t!==s[i]&&(s[i]=t,r=1);r&&(e.revert(),n)&&o.push(e)}),Pi("matchMediaRevert"),o.forEach(function(t){return t.onMatch(t,function(e){return t.add(null,e)})}),Ni=e,Pi("matchMedia"))}p(Ht+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return Ot[e]=1}),s.TweenMax=s.TweenLite=X,s.TimelineLite=s.TimelineMax=W,U=new W({sortChildren:!1,defaults:vt,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),H.stringFilter=Be;var Li=[],Di={},Ii=[],Ni=0,Oi=0,Ui=((t=Bi.prototype).add=function(e,n,r){function t(){var e,t=l,i=a.selector;return t&&t!==a&&t.data.push(a),r&&(a.selector=be(r)),l=a,u(e=n.apply(a,arguments))&&a._r.push(e),l=t,a.selector=i,a.isReverted=!1,e}u(e)&&(r=n,n=e,e=u);var a=this;return a.last=t,e===u?t(a,function(e){return a.add(null,e)}):e?a[e]=t:t},t.ignore=function(e){var t=l;l=null,e(this),l=t},t.getTweens=function(){var t=[];return this.data.forEach(function(e){return e instanceof Bi?t.push.apply(t,e.getTweens()):e instanceof X&&!(e.parent&&"nested"===e.parent.data)&&t.push(e)}),t},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(t,e){var i=this;if(t){for(var n,r=i.getTweens(),a=i.data.length;a--;)"isFlip"===(n=i.data[a]).data&&(n.revert(),n.getChildren(!0,!0,!1).forEach(function(e){return r.splice(r.indexOf(e),1)}));for(r.map(function(e){return{g:e._dur||e._delay||e._sat&&!e._sat.vars.immediateRender?e.globalTime(0):-1/0,t:e}}).sort(function(e,t){return t.g-e.g||-1/0}).forEach(function(e){return e.t.revert(t)}),a=i.data.length;a--;)(n=i.data[a])instanceof W?"nested"!==n.data&&(n.scrollTrigger&&n.scrollTrigger.revert(),n.kill()):n instanceof X||!n.revert||n.revert(t);i._r.forEach(function(e){return e(t,i)}),i.isReverted=!0}else this.data.forEach(function(e){return e.kill&&e.kill()});if(this.clear(),e)for(var s=Li.length;s--;)Li[s].id===this.id&&Li.splice(s,1)},t.revert=function(e){this.kill(e||{})},Bi);function Bi(e,t){this.selector=t&&be(t),this.data=[],this._r=[],this.isReverted=!1,this.id=Oi++,e&&this.add(e)}(t=Gi.prototype).add=function(e,t,i){A(e)||(e={matches:e});var n,r,a,s=new Ui(0,i||this.scope),o=s.conditions={};for(r in l&&!s.selector&&(s.selector=l.selector),this.contexts.push(s),t=s.add("onMatch",t),s.queries=e)"all"===r?a=1:(n=c.matchMedia(e[r]))&&(Li.indexOf(s)<0&&Li.push(s),(o[r]=n.matches)&&(a=1),n.addListener?n.addListener(Ri):n.addEventListener("change",Ri));return a&&t(s,function(e){return s.add(null,e)}),this},t.revert=function(e){this.kill(e||{})},t.kill=function(t){this.contexts.forEach(function(e){return e.kill(t,!0)})};var Fi=Gi;function Gi(e){this.contexts=[],this.scope=e,l&&l.data.push(this)}var ki={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(De)},timeline:function(e){return new W(e)},getTweensOf:function(e,t){return U.getTweensOf(e,t)},getProperty:function(n,e,t,i){var r=ne((n=G(n)?L(n)[0]:n)||{}).get,a=t?b:x;return"native"===t&&(t=""),n&&(e?a((z[e]&&z[e].get||r)(n,e,t,i)):function(e,t,i){return a((z[e]&&z[e].get||r)(n,e,t,i))})},quickSetter:function(i,t,n){var r,a;if(1<(i=L(i)).length)return r=i.map(function(e){return m.quickSetter(e,t,n)}),a=r.length,function(e){for(var t=a;t--;)r[t](e)};i=i[0]||{};var s=z[t],o=ne(i),l=o.harness&&(o.harness.aliases||{})[t]||t,h=s?function(e){var t=new s;zi._pt=0,t.init(i,n?e+n:e,zi,0,[i]),t.render(1,t),zi._pt&&Mi(1,zi)}:o.set(i,l);return s?h:function(e){return h(i,l,n?e+n:e,o,1)}},quickTo:function(e,n,t){function i(e,t,i){return r.resetTo(n,e,t,i)}var r=m.to(e,I(((e={})[n]="+=0.1",e.paused=!0,e.stagger=0,e),t||{}));return i.tween=r,i},isTweening:function(e){return 0<U.getTweensOf(e,!0).length},defaults:function(e){return e&&e.ease&&(e.ease=Qt(e.ease,vt.ease)),T(vt,e||{})},config:function(e){return T(H,e||{})},registerEffect:function(e){var n=e.name,r=e.effect,t=e.plugins,a=e.defaults,e=e.extendTimeline;(t||"").split(",").forEach(function(e){return e&&!z[e]&&!s[e]&&te(n+" effect requires "+e+" plugin.")}),Ft[n]=function(e,t,i){return r(L(e),I(t||{},a),i)},e&&(W.prototype[n]=function(e,t,i){return this.add(Ft[n](e,A(t)?t:(i=t)&&{},this),i)})},registerEase:function(e,t){D[e]=Qt(t)},parseEase:function(e,t){return arguments.length?Qt(e,t):D},getById:function(e){return U.getById(e)},exportRoot:function(e,t){var i,n,r=new W(e=void 0===e?{}:e);for(r.smoothChildTiming=!1!==e.smoothChildTiming,U.remove(r),r._dp=0,r._time=r._tTime=U._time,i=U._first;i;)n=i._next,!t&&!i._dur&&i instanceof X&&i.vars.onComplete===i._targets[0]||P(r,i,i._start-i._delay),i=n;return P(U,r,0),r},context:function(e,t){return e?new Ui(e,t):l},matchMedia:function(e){return new Fi(e)},matchMediaRefresh:function(){return Li.forEach(function(e){var t,i,n=e.conditions;for(i in n)n[i]&&(n[i]=!1,t=1);t&&e.revert()})||Ri()},addEventListener:function(e,t){e=Di[e]||(Di[e]=[]);~e.indexOf(t)||e.push(t)},removeEventListener:function(e,t){e=Di[e],t=e&&e.indexOf(t);0<=t&&e.splice(t,1)},utils:{wrap:function e(t,i,n){var r=i-t;return R(t)?Ce(t,e(0,t.length),i):xe(n,function(e){return(r+(e-t)%r)%r+t})},wrapYoyo:function e(t,i,n){var r=i-t,a=2*r;return R(t)?Ce(t,e(0,t.length-1),i):xe(n,function(e){return t+(r<(e=(a+(e-t)%a)%a||0)?a-e:e)})},distribute:Me,random:Ae,snap:Ee,normalize:function(e,t,i){return Ye(e,t,0,1,i)},getUnit:k,clamp:function(t,i,e){return xe(e,function(e){return qe(t,i,e)})},splitColor:Ne,toArray:L,selector:be,mapRange:Ye,pipe:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return t.reduce(function(e,t){return t(e)},e)}},unitize:function(t,i){return function(e){return t(parseFloat(e))+(i||k(e))}},interpolate:function e(t,i,n,r){var a=isNaN(t+i)?0:function(e){return(1-e)*t+e*i};if(!a){var s,o,l,h,c,u=G(t),d={};if(!0===n&&(r=1,n=null),u)t={p:t},i={p:i};else if(R(t)&&!R(i)){for(l=[],h=t.length,c=h-2,o=1;o<h;o++)l.push(e(t[o-1],t[o]));h--,a=function(e){e*=h;var t=Math.min(c,~~e);return l[t](e-t)},n=i}else r||(t=We(R(t)?[]:{},t));if(!l){for(s in i)di.call(d,t,s,"get",i[s]);a=function(e){return Mi(e,d)||(u?t.p:t)}}}return xe(n,a)},shuffle:Te},install:n,effects:Ft,ticker:f,updateRoot:W.updateRoot,plugins:z,globalTimeline:U,core:{PropTween:j,globals:g,Tween:X,Timeline:W,Animation:ii,getCache:ne,_removeLinkedListItem:w,reverting:function(){return O},context:function(e){return e&&l&&(l.data.push(e),e._ctx=l),l},suppressOverwrites:function(e){return Ke=e}}};function Hi(e,c){return{name:e,headless:1,rawVars:1,init:function(e,h,t){t._onInit=function(e){var t,i;if(G(h)&&(t={},p(h,function(e){return t[e]=1}),h=t),c){for(i in t={},h)t[i]=c(h[i]);h=t}var n,r,a,s=e,o=h,l=s._targets;for(n in o)for(r=l.length;r--;)(a=(a=s._ptLookup[r][n])&&a.d)&&(a._pt&&(a=((e,t)=>{for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i})(a,n)),a)&&a.modifier&&a.modifier(o[n],s,l[r],n)}}}}p("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return ki[e]=X[e]}),f.add(W.updateRoot);var zi=ki.to({},{duration:0}),m=ki.registerPlugin({name:"attr",init:function(e,t,i,n,r){var a,s,o;for(a in this.tween=i,t)o=e.getAttribute(a)||"",(s=this.add(e,"setAttribute",(o||0)+"",t[a],n,r,0,0,a)).op=a,s.b=o,this._props.push(a)},render:function(e,t){for(var i=t._pt;i;)O?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",headless:1,init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},Hi("roundProps",we),Hi("modifiers"),Hi("snap",Ee))||ki;function Vi(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)}function Wi(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)}function Xi(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)}function ji(e,t){e=t.s+t.c*e;t.set(t.t,t.p,~~(e+(e<0?-.5:.5))+t.u,t)}function qi(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)}function Yi(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)}function Ki(e,t,i){return e.style[t]=i}function Zi(e,t,i){return e.style.setProperty(t,i)}function Ji(e,t,i){return e._gsap[t]=i}function Qi(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i}function $i(e,t,i,n,r){e=e._gsap;e.scaleX=e.scaleY=i,e.renderTransform(r,e)}function en(e,t,i,n,r){e=e._gsap;e[t]=i,e.renderTransform(r,e)}function tn(e,t){var i=this,n=this.target,r=n.style,a=n._gsap;if(e in qn&&r){if(this.tfm=this.tfm||{},"transform"===e)return Y.transform.split(",").forEach(function(e){return tn.call(i,e,t)});if(~(e=Y[e]||e).indexOf(",")?e.split(",").forEach(function(e){return i.tfm[e]=rr(n,e)}):this.tfm[e]=a.x?a[e]:rr(n,e),e===Z&&(this.tfm.zOrigin=a.zOrigin),0<=this.props.indexOf(K))return;a.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(Z,t,"")),e=K}(r||t)&&this.props.push(e,t,r[e])}function nn(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))}function rn(){for(var e,t=this.props,i=this.target,n=i.style,r=i._gsap,a=0;a<t.length;a+=3)t[a+1]?2===t[a+1]?i[t[a]](t[a+2]):i[t[a]]=t[a+2]:t[a+2]?n[t[a]]=t[a+2]:n.removeProperty("--"===t[a].substr(0,2)?t[a]:t[a].replace(Jn,"-$1").toLowerCase());if(this.tfm){for(e in this.tfm)r[e]=this.tfm[e];r.svg&&(r.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),(a=Cn())&&a.isStart||n[K]||(nn(n),r.zOrigin&&n[Z]&&(n[Z]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}}function an(e,t){var i={target:e,props:[],revert:rn,save:tn};return e._gsap||m.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(e){return i.save(e)}),i}function sn(e,t){t=Tn.createElementNS?Tn.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Tn.createElement(e);return t&&t.style?t:Tn.createElement(e)}function q(e,t,i){var n=getComputedStyle(e);return n[t]||n.getPropertyValue(t.replace(Jn,"-$1").toLowerCase())||n.getPropertyValue(t)||!i&&q(e,tr(t)||t,1)||""}function on(){"undefined"!=typeof window&&window.document&&(Mn=(Tn=window.document).documentElement,En=sn("div")||{style:{}},sn("div"),K=tr(K),Z=K+"Origin",En.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Pn=!!tr("perspective"),Cn=m.core.reverting,wn=1)}function ln(e){var t,i=e.ownerSVGElement,i=sn("svg",i&&i.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=e.cloneNode(!0);n.style.display="block",i.appendChild(n),Mn.appendChild(i);try{t=n.getBBox()}catch(e){}return i.removeChild(n),Mn.removeChild(i),t}function hn(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])}function cn(t){var i,n;try{i=t.getBBox()}catch(e){i=ln(t),n=1}return!(i=i&&(i.width||i.height)||n?i:ln(t))||i.width||i.x||i.y?i:{x:+hn(t,["x","cx","x1"])||0,y:+hn(t,["y","cy","y1"])||0,width:0,height:0}}function un(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!cn(e))}function dn(e,t){var i;t&&(e=e.style,t in qn&&t!==Z&&(t=K),e.removeProperty?("ms"!==(i=t.substr(0,2))&&"webkit"!==t.substr(0,6)||(t="-"+t),e.removeProperty("--"===i?t:t.replace(Jn,"-$1").toLowerCase())):e.removeAttribute(t))}function pn(e,t,i,n,r,a){t=new j(e._pt,t,i,0,1,a?Yi:qi);(e._pt=t).b=n,t.e=r,e._props.push(i)}function fn(e,t,i,n){var r,a,s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",l=En.style,h=Qn.test(t),c="svg"===e.tagName.toLowerCase(),u=(c?"client":"offset")+(h?"Width":"Height"),d="px"===n,p="%"===n;return n===o||!s||ir[n]||ir[o]?s:("px"===o||d||(s=fn(e,t,i,"px")),i=e.getCTM&&un(e),!p&&"%"!==o||!qn[t]&&!~t.indexOf("adius")?(l[h?"width":"height"]=100+(d?o:n),c="rem"!==n&&~t.indexOf("adius")||"em"===n&&e.appendChild&&!c?e:e.parentNode,(a=(c=(c=i?(e.ownerSVGElement||{}).parentNode:c)&&c!==Tn&&c.appendChild?c:Tn.body)._gsap)&&p&&a.width&&h&&a.time===f.time&&!a.uncache?N(s/a.width*100):(!p||"height"!==t&&"width"!==t?(!p&&"%"!==o||nr[q(c,"display")]||(l.position=q(e,"position")),c===e&&(l.position="static"),c.appendChild(En),r=En[u],c.removeChild(En),l.position="absolute"):(o=e.style[t],e.style[t]=100+n,r=e[u],o?e.style[t]=o:dn(e,t)),h&&p&&((a=ne(c)).time=f.time,a.width=c[u]),N(d?r*s/100:r&&s?100/r*s:0))):(r=i?e.getBBox()[h?"width":"height"]:e[u],N(p?s/r*100:s/100*r)))}function mn(e,t,i,n){var r;i&&"none"!==i||((r=(a=tr(t,e,1))&&q(e,a,1))&&r!==i?(t=a,i=r):"borderColor"===t&&(i=q(e,"borderTopColor")));var a,s,o,l,h,c,u,d,p,f=new j(this._pt,e.style,t,0,1,Ti),m=0,g=0;if(f.b=i,f.e=n,i+="","auto"===(n="var(--"===(n+="").substring(0,6)?q(e,n.substring(4,n.indexOf(")"))):n)&&(h=e.style[t],e.style[t]=n,n=q(e,t)||n,h?e.style[t]=h:dn(e,t)),Be(a=[i,n]),n=a[1],s=(i=a[0]).match(At)||[],(n.match(At)||[]).length){for(;u=At.exec(n);)d=u[0],u=n.substring(m,u.index),l?l=(l+1)%5:"rgba("!==u.substr(-5)&&"hsla("!==u.substr(-5)||(l=1),d!==(h=s[g++]||"")&&(o=parseFloat(h)||0,p=h.substr((o+"").length),"="===d.charAt(1)&&(d=re(o,d)+p),c=parseFloat(d),d=d.substr((c+"").length),m=At.lastIndex-d.length,d||(d=d||H.units[t]||p,m===n.length&&(n+=d,f.e+=d)),p!==d&&(o=fn(e,t,h,d)||0),f._pt={_next:f._pt,p:u||1===g?u:",",s:o,c:c-o,m:l&&l<4||"zIndex"===t?Math.round:0});f.c=m<n.length?n.substring(m,n.length):""}else f.r="display"===t&&"none"===n?Yi:qi;return Pt.test(n)&&(f.e=0),this._pt=f}function gn(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i,n,r,a=t.t,s=a.style,o=t.u,t=a._gsap;if("all"===o||!0===o)s.cssText="",n=1;else for(r=(o=o.split(",")).length;-1<--r;)i=o[r],qn[i]&&(n=1,i="transformOrigin"===i?Z:K),dn(a,i);n&&(dn(a,K),t)&&(t.svg&&a.removeAttribute("transform"),s.scale=s.rotate=s.translate="none",hr(a,1),t.uncache=1,nn(s))}}function vn(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e}function yn(e){e=q(e,K);return vn(e)?or:e.substr(7).match(Et).map(N)}function _n(e,t){var i,n,r,a=e._gsap||ne(e),s=e.style,o=yn(e);return a.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(o=[(n=e.transform.baseVal.consolidate().matrix).a,n.b,n.c,n.d,n.e,n.f]).join(",")?or:o:(o!==or||e.offsetParent||e===Mn||a.svg||(n=s.display,s.display="block",(a=e.parentNode)&&(e.offsetParent||e.getBoundingClientRect().width)||(r=1,i=e.nextElementSibling,Mn.appendChild(e)),o=yn(e),n?s.display=n:dn(e,"display"),r&&(i?a.insertBefore(e,i):a?a.appendChild(e):Mn.removeChild(e))),t&&6<o.length?[o[0],o[1],o[4],o[5],o[12],o[13]]:o)}function xn(e,t,i,n,r,a){var s,o=e._gsap,r=r||_n(e,!0),l=o.xOrigin||0,h=o.yOrigin||0,c=o.xOffset||0,u=o.yOffset||0,d=r[0],p=r[1],f=r[2],m=r[3],g=r[4],v=r[5],y=t.split(" "),_=parseFloat(y[0])||0,x=parseFloat(y[1])||0;i?r!==or&&(r=d*m-p*f)&&(s=_*(-p/r)+x*(d/r)-(d*v-p*g)/r,_=_*(m/r)+x*(-f/r)+(f*v-m*g)/r,x=s):(_=(r=cn(e)).x+(~y[0].indexOf("%")?_/100*r.width:_),x=r.y+(~(y[1]||y[0]).indexOf("%")?x/100*r.height:x)),n||!1!==n&&o.smooth?(o.xOffset=c+((g=_-l)*d+(v=x-h)*f)-g,o.yOffset=u+(g*p+v*m)-v):o.xOffset=o.yOffset=0,o.xOrigin=_,o.yOrigin=x,o.smooth=!!n,o.origin=t,o.originIsAbsolute=!!i,e.style[Z]="0px 0px",a&&(pn(a,o,"xOrigin",l,_),pn(a,o,"yOrigin",h,x),pn(a,o,"xOffset",c,o.xOffset),pn(a,o,"yOffset",u,o.yOffset)),e.setAttribute("data-svg-origin",_+" "+x)}function Sn(e,t,i){var n=k(t);return N(parseFloat(t)+parseFloat(fn(e,"x",i+"px",n)))+n}function bn(e,t){for(var i in t)e[i]=t[i];return e}X.version=W.version=m.version="3.13.0",$e=1,o()&&Yt();var Tn,Mn,wn,En,An,Cn,Pn,t=D.Power0,Rn=D.Power1,Ln=D.Power2,Dn=D.Power3,In=D.Power4,Nn=D.Linear,On=D.Quad,Un=D.Cubic,Bn=D.Quart,Fn=D.Quint,Gn=D.Strong,kn=D.Elastic,Hn=D.Back,zn=D.SteppedEase,Vn=D.Bounce,Wn=D.Sine,Xn=D.Expo,jn=D.Circ,qn={},Yn=180/Math.PI,Kn=Math.PI/180,Zn=Math.atan2,Jn=/([A-Z])/g,Qn=/(left|right|width|margin|padding|x)/i,$n=/[\s,\(]\S/,Y={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},K="transform",Z=K+"Origin",er="O,Moz,ms,Ms,Webkit".split(","),tr=function(e,t,i){var n=(t||En).style,r=5;if(e in n&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);r--&&!(er[r]+e in n););return r<0?null:(3===r?"ms":0<=r?er[r]:"")+e},ir={deg:1,rad:1,turn:1},nr={grid:1,flex:1},rr=function(e,t,i,n){var r;return wn||on(),t in Y&&"transform"!==t&&~(t=Y[t]).indexOf(",")&&(t=t.split(",")[0]),qn[t]&&"transform"!==t?(r=hr(e,n),r="transformOrigin"!==t?r[t]:r.svg?r.origin:cr(q(e,Z))+" "+r.zOrigin+"px"):(r=e.style[t])&&"auto"!==r&&!n&&!~(r+"").indexOf("calc(")||(r=sr[t]&&sr[t](e,t,i)||q(e,t)||y(e,t)||("opacity"===t?1:0)),i&&!~(r+"").trim().indexOf(" ")?fn(e,t,r,i)+i:r},ar={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},sr={clearProps:function(e,t,i,n,r){if("isFromStart"!==r.data)return(t=e._pt=new j(e._pt,t,i,0,0,gn)).u=n,t.pr=-10,t.tween=r,e._props.push(i),1}},or=[1,0,0,1,0,0],lr={},hr=function(e,t){var i,n,r,a,s,o,l,h,c,u,d,p,f,m,g,v,y,_,x,S,b,T,M,w,E,A,C,P,R,L,D,I=e._gsap||new ti(e);return"x"in I&&!t&&!I.uncache||(A=e.style,C=I.scaleX<0,P=getComputedStyle(e),R=q(e,Z)||"0",L=i=n=a=s=o=l=h=0,D=r=1,I.svg=!(!e.getCTM||!un(e)),P.translate&&("none"===P.translate&&"none"===P.scale&&"none"===P.rotate||(A[K]=("none"!==P.translate?"translate3d("+(P.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==P.rotate?"rotate("+P.rotate+") ":"")+("none"!==P.scale?"scale("+P.scale.split(" ").join(",")+") ":"")+("none"!==P[K]?P[K]:"")),A.scale=A.rotate=A.translate="none"),P=_n(e,I.svg),I.svg&&(y=I.uncache?(_=e.getBBox(),R=I.xOrigin-_.x+"px "+(I.yOrigin-_.y)+"px",""):!t&&e.getAttribute("data-svg-origin"),xn(e,y||R,!!y||I.originIsAbsolute,!1!==I.smooth,P)),E=I.xOrigin||0,M=I.yOrigin||0,P!==or&&(d=P[0],p=P[1],f=P[2],m=P[3],L=g=P[4],i=v=P[5],6===P.length?(D=Math.sqrt(d*d+p*p),r=Math.sqrt(m*m+f*f),a=d||p?Zn(p,d)*Yn:0,(l=f||m?Zn(f,m)*Yn+a:0)&&(r*=Math.abs(Math.cos(l*Kn))),I.svg&&(L-=E-(E*d+M*f),i-=M-(E*p+M*m))):(E=P[6],M=P[7],S=P[8],b=P[9],T=P[10],w=P[11],L=P[12],i=P[13],n=P[14],s=(P=Zn(E,T))*Yn,P&&(y=g*(c=Math.cos(-P))+S*(u=Math.sin(-P)),_=v*c+b*u,x=E*c+T*u,S=g*-u+S*c,b=v*-u+b*c,T=E*-u+T*c,w=M*-u+w*c,g=y,v=_,E=x),o=(P=Zn(-f,T))*Yn,P&&(c=Math.cos(-P),w=m*(u=Math.sin(-P))+w*c,d=y=d*c-S*u,p=_=p*c-b*u,f=x=f*c-T*u),a=(P=Zn(p,d))*Yn,P&&(y=d*(c=Math.cos(P))+p*(u=Math.sin(P)),_=g*c+v*u,p=p*c-d*u,v=v*c-g*u,d=y,g=_),s&&359.9<Math.abs(s)+Math.abs(a)&&(s=a=0,o=180-o),D=N(Math.sqrt(d*d+p*p+f*f)),r=N(Math.sqrt(v*v+E*E)),P=Zn(g,v),l=2e-4<Math.abs(P)?P*Yn:0,h=w?1/(w<0?-w:w):0),I.svg)&&(y=e.getAttribute("transform"),I.forceCSS=e.setAttribute("transform","")||!vn(q(e,K)),y)&&e.setAttribute("transform",y),90<Math.abs(l)&&Math.abs(l)<270&&(C?(D*=-1,l+=a<=0?180:-180,a+=a<=0?180:-180):(r*=-1,l+=l<=0?180:-180)),t=t||I.uncache,I.x=L-((I.xPercent=L&&(!t&&I.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-L)?-50:0)))?e.offsetWidth*I.xPercent/100:0)+"px",I.y=i-((I.yPercent=i&&(!t&&I.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-i)?-50:0)))?e.offsetHeight*I.yPercent/100:0)+"px",I.z=n+"px",I.scaleX=N(D),I.scaleY=N(r),I.rotation=N(a)+"deg",I.rotationX=N(s)+"deg",I.rotationY=N(o)+"deg",I.skewX=l+"deg",I.skewY="0deg",I.transformPerspective=h+"px",(I.zOrigin=parseFloat(R.split(" ")[2])||!t&&I.zOrigin||0)&&(A[Z]=cr(R)),I.xOffset=I.yOffset=0,I.force3D=H.force3D,I.renderTransform=I.svg?fr:Pn?pr:ur,I.uncache=0),I},cr=function(e){return(e=e.split(" "))[0]+" "+e[1]},ur=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,pr(e,t)},dr="0deg",pr=function(e,t){var i,n,t=t||this,r=t.xPercent,a=t.yPercent,s=t.x,o=t.y,l=t.z,h=t.rotation,c=t.rotationY,u=t.rotationX,d=t.skewX,p=t.skewY,f=t.scaleX,m=t.scaleY,g=t.transformPerspective,v=t.force3D,y=t.target,t=t.zOrigin,_="",e="auto"===v&&e&&1!==e||!0===v;!t||u===dr&&c===dr||(v=parseFloat(c)*Kn,n=Math.sin(v),i=Math.cos(v),v=parseFloat(u)*Kn,s=Sn(y,s,n*(n=Math.cos(v))*-t),o=Sn(y,o,-Math.sin(v)*-t),l=Sn(y,l,i*n*-t+t)),"0px"!==g&&(_+="perspective("+g+") "),(r||a)&&(_+="translate("+r+"%, "+a+"%) "),!e&&"0px"===s&&"0px"===o&&"0px"===l||(_+="0px"!==l||e?"translate3d("+s+", "+o+", "+l+") ":"translate("+s+", "+o+") "),h!==dr&&(_+="rotate("+h+") "),c!==dr&&(_+="rotateY("+c+") "),u!==dr&&(_+="rotateX("+u+") "),d===dr&&p===dr||(_+="skew("+d+", "+p+") "),1===f&&1===m||(_+="scale("+f+", "+m+") "),y.style[K]=_||"translate(0, 0)"},fr=function(e,t){var i,n,r,a,s,t=t||this,o=t.xPercent,l=t.yPercent,h=t.x,c=t.y,u=t.rotation,d=t.skewX,p=t.skewY,f=t.scaleX,m=t.scaleY,g=t.target,v=t.xOrigin,y=t.yOrigin,_=t.xOffset,x=t.yOffset,t=t.forceCSS,S=parseFloat(h),b=parseFloat(c),u=parseFloat(u),d=parseFloat(d);(p=parseFloat(p))&&(d+=p=parseFloat(p),u+=p),u||d?(u*=Kn,d*=Kn,i=Math.cos(u)*f,n=Math.sin(u)*f,r=Math.sin(u-d)*-m,a=Math.cos(u-d)*m,d&&(p*=Kn,s=Math.tan(d-p),r*=s=Math.sqrt(1+s*s),a*=s,p)&&(s=Math.tan(p),i*=s=Math.sqrt(1+s*s),n*=s),i=N(i),n=N(n),r=N(r),a=N(a)):(i=f,a=m,n=r=0),(S&&!~(h+"").indexOf("px")||b&&!~(c+"").indexOf("px"))&&(S=fn(g,"x",h,"px"),b=fn(g,"y",c,"px")),(v||y||_||x)&&(S=N(S+v-(v*i+y*r)+_),b=N(b+y-(v*n+y*a)+x)),(o||l)&&(S=N(S+o/100*(s=g.getBBox()).width),b=N(b+l/100*s.height)),g.setAttribute("transform",s="matrix("+i+","+n+","+r+","+a+","+S+","+b+")"),t&&(g.style[K]=s)};p("padding,margin,Width,Radius",function(t,i){var e="Bottom",o=(i<3?["Top","Right",e,"Left"]:["TopLeft","TopRight",e+"Right",e+"Left"]).map(function(e){return i<2?t+e:"border"+e+t});sr[1<i?"border"+t:t]=function(t,e,i,n,r){var a,s;if(arguments.length<4)return a=o.map(function(e){return rr(t,e,i)}),5===(s=a.join(" ")).split(a[0]).length?a[0]:s;a=(n+"").split(" "),s={},o.forEach(function(e,t){return s[e]=a[t]=a[t]||a[(t-1)/2|0]}),t.init(e,s,r)}});var mr,gr={name:"css",register:on,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,n,r){var a,s,o,l,h,c,u,d,p,U,f,m,B,g,v,y,_,x,S,b,F=this._props,T=e.style,M=i.vars.startAt;for(h in wn||on(),this.styles=this.styles||an(e),g=this.styles.props,this.tween=i,t)if("autoRound"!==h&&(s=t[h],!z[h]||!si(h,t,i,n,e,r)))if(O=typeof s,l=sr[h],"function"===O&&(O=typeof(s=s.call(i,n,e,r))),"string"===O&&~s.indexOf("random(")&&(s=Pe(s)),l)l(this,e,h,s,i)&&(B=1);else if("--"===h.substr(0,2))a=(getComputedStyle(e).getPropertyValue(h)+"").trim(),s+="",jt.lastIndex=0,jt.test(a)||(c=k(a),u=k(s)),u?c!==u&&(a=fn(e,h,a,u)+u):c&&(s+=c),this.add(T,"setProperty",a,s,n,r,0,0,h),F.push(h),g.push(h,0,T[h]);else if("undefined"!==O){if(M&&h in M&&(k((a=G(a="function"==typeof M[h]?M[h].call(i,n,e,r):M[h])&&~a.indexOf("random(")?Pe(a):a)+"")||"auto"===a||(a+=H.units[h]||k(rr(e,h))||""),"="!==(a+"").charAt(1))||(a=rr(e,h)),l=parseFloat(a),(d="string"===O&&"="===s.charAt(1)&&s.substr(0,2))&&(s=s.substr(2)),o=parseFloat(s),p=(h=h in Y&&("autoAlpha"===h&&(1===l&&"hidden"===rr(e,"visibility")&&o&&(l=0),g.push("visibility",0,T.visibility),pn(this,T,"visibility",l?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==h)&&"transform"!==h&&~(h=Y[h]).indexOf(",")?h.split(",")[0]:h)in qn)if(this.styles.save(h),"string"===O&&"var(--"===s.substring(0,6)&&(s=q(e,s.substring(4,s.indexOf(")"))),o=parseFloat(s)),U||((f=e._gsap).renderTransform&&!t.parseTransform||hr(e,t.parseTransform),m=!1!==t.smoothOrigin&&f.smooth,(U=this._pt=new j(this._pt,T,K,0,1,f.renderTransform,f,0,-1)).dep=1),"scale"===h)this._pt=new j(this._pt,f,"scaleY",f.scaleY,(d?re(f.scaleY,d+o):o)-f.scaleY||0,Vi),this._pt.u=0,F.push("scaleY",h),h+="X";else{if("transformOrigin"===h){g.push(Z,0,T[Z]),b=S=O=void 0,O=(x=s).split(" "),S=O[0],b=O[1]||"50%","top"!==S&&"bottom"!==S&&"left"!==b&&"right"!==b||(x=S,S=b,b=x),O[0]=ar[S]||S,O[1]=ar[b]||b,s=O.join(" "),f.svg?xn(e,s,0,m,0,this):((u=parseFloat(s.split(" ")[2])||0)!==f.zOrigin&&pn(this,f,"zOrigin",f.zOrigin,u),pn(this,T,h,cr(a),cr(s)));continue}if("svgOrigin"===h){xn(e,s,1,m,0,this);continue}if(h in lr){x=this,S=f,b=h,O=l,v=d?re(l,d+s):s,_=y=D=void 0,D=G(v),y=parseFloat(v)*(D&&~v.indexOf("rad")?Yn:1)-O,_=O+y+"deg",D&&("short"===(D=v.split("_")[1])&&(y%=360)!=y%180&&(y+=y<0?360:-360),"cw"===D&&y<0?y=(y+36e9)%360-360*~~(y/360):"ccw"===D&&0<y&&(y=(y-36e9)%360-360*~~(y/360))),x._pt=v=new j(x._pt,S,b,O,y,Wi),v.e=_,v.u="deg",x._props.push(b);continue}if("smoothOrigin"===h){pn(this,f,"smooth",f.smooth,s);continue}if("force3D"===h){f[h]=s;continue}if("transform"===h){O=N=R=C=P=A=E=w=I=D=L=void 0;var w,E,A,C,P,R,L=this,D=s,I=e,N=bn({},I._gsap),O=I.style;for(E in N.svg?(A=I.getAttribute("transform"),I.setAttribute("transform",""),O[K]=D,w=hr(I,1),dn(I,K),I.setAttribute("transform",A)):(A=getComputedStyle(I)[K],O[K]=D,w=hr(I,1),O[K]=A),qn)(A=N[E])!==(P=w[E])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(E)<0&&(C=k(A)!==(R=k(P))?fn(I,E,A,R):parseFloat(A),P=parseFloat(P),L._pt=new j(L._pt,w,E,C,P-C,Vi),L._pt.u=R||0,L._props.push(E));bn(w,N);continue}}else h in T||(h=tr(h)||h);if(p||(o||0===o)&&(l||0===l)&&!$n.test(s)&&h in T)o=o||0,(c=(a+"").substr((l+"").length))!==(u=k(s)||(h in H.units?H.units[h]:c))&&(l=fn(e,h,a,u)),this._pt=new j(this._pt,p?f:T,h,l,(d?re(l,d+o):o)-l,p||"px"!==u&&"zIndex"!==h||!1===t.autoRound?Vi:ji),this._pt.u=u||0,c!==u&&"%"!==u&&(this._pt.b=a,this._pt.r=Xi);else if(h in T)mn.call(this,e,h,a,d?d+s:s);else if(h in e)this.add(e,h,a||e[h],d?d+s:s,n,r);else if("parseTransform"!==h){ee(h,s);continue}p||(h in T?g.push(h,0,T[h]):"function"==typeof e[h]?g.push(h,2,e[h]()):g.push(h,1,a||e[h])),F.push(h)}B&&Ai(this)},render:function(e,t){if(t.tween._time||!Cn())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:rr,aliases:Y,getSetter:function(e,t,i){var n=Y[t];return(t=n&&n.indexOf(",")<0?n:t)in qn&&t!==Z&&(e._gsap.x||rr(e,"x"))?i&&An===i?"scale"===t?Qi:Ji:(An=i||{})&&("scale"===t?$i:en):e.style&&!a(e.style[t])?Ki:~t.indexOf("-")?Zi:xi(e,t)},core:{_removeProperty:dn,_getMatrix:_n}},vr=(m.utils.checkPrefix=tr,m.core.getStyleSaver=an,mr=p("x,y,z,scale,scaleX,scaleY,xPercent,yPercent"+","+(vr="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(e){qn[e]=1}),p(vr,function(e){H.units[e]="deg",lr[e]=1}),Y[mr[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+vr,p("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(e){e=e.split(":");Y[e[1]]=mr[e[0]]}),p("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){H.units[e]="px"}),m.registerPlugin(gr),m.registerPlugin(gr)||m),yr=vr.core.Tween;e.Back=Hn,e.Bounce=Vn,e.CSSPlugin=gr,e.Circ=jn,e.Cubic=Un,e.Elastic=kn,e.Expo=Xn,e.Linear=Nn,e.Power0=t,e.Power1=Rn,e.Power2=Ln,e.Power3=Dn,e.Power4=In,e.Quad=On,e.Quart=Bn,e.Quint=Fn,e.Sine=Wn,e.SteppedEase=zn,e.Strong=Gn,e.TimelineLite=W,e.TimelineMax=W,e.TweenLite=X,e.TweenMax=yr,e.default=vr,e.gsap=vr,"undefined"==typeof window||window!==e?Object.defineProperty(e,"__esModule",{value:!0}):delete e.default}),((e,t)=>{"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()})("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){var i;if(e&&t)return-1==(i=(i=this._events=this._events||{})[e]=i[e]||[]).indexOf(t)&&i.push(t),this},t.once=function(e,t){var i;if(e&&t)return this.on(e,t),((i=this._onceEvents=this._onceEvents||{})[e]=i[e]||{})[t]=!0,this},t.off=function(e,t){e=this._events&&this._events[e];if(e&&e.length)return-1!=(t=e.indexOf(t))&&e.splice(t,1),this},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],r=0;r<i.length;r++){var a=i[r];n&&n[a]&&(this.off(e,a),delete n[a]),a.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),((t,i)=>{"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(e){return i(t,e)}):"object"==typeof module&&module.exports?module.exports=i(t,require("ev-emitter")):t.imagesLoaded=i(t,t.EvEmitter)})("undefined"!=typeof window?window:this,function(t,e){function a(e,t){for(var i in t)e[i]=t[i];return e}function s(e,t,i){var n,r;return this instanceof s?(n="string"==typeof(n=e)?document.querySelectorAll(e):n)?(this.elements=(r=n,Array.isArray(r)?r:"object"==typeof r&&"number"==typeof r.length?h.call(r):[r]),this.options=a({},this.options),"function"==typeof t?i=t:a(this.options,t),i&&this.on("always",i),this.getImages(),o&&(this.jqDeferred=new o.Deferred),void setTimeout(this.check.bind(this))):void l.error("Bad element for imagesLoaded "+(n||e)):new s(e,t,i)}function i(e){this.img=e}function n(e,t){this.url=e,this.element=t,this.img=new Image}var o=t.jQuery,l=t.console,h=Array.prototype.slice,c=((s.prototype=Object.create(e.prototype)).options={},s.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},s.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&c[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var r=i[n];this.addImage(r)}if("string"==typeof this.options.background)for(var a=e.querySelectorAll(this.options.background),n=0;n<a.length;n++){var s=a[n];this.addElementBackgroundImages(s)}}},{1:!0,9:!0,11:!0});return s.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var r=n&&n[2];r&&this.addBackground(r,e),n=i.exec(t.backgroundImage)}},s.prototype.addImage=function(e){e=new i(e);this.images.push(e)},s.prototype.addBackground=function(e,t){e=new n(e,t);this.images.push(e)},s.prototype.check=function(){function t(e,t,i){setTimeout(function(){n.progress(e,t,i)})}var n=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},s.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&l&&l.log("progress: "+i,e,t)},s.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred&&(e=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[e](this))},(i.prototype=Object.create(e.prototype)).check=function(){return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},i.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},i.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},i.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},i.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},i.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},i.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(n.prototype=Object.create(i.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},n.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},n.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},(s.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((o=e).fn.imagesLoaded=function(e,t){return new s(this,e,t).jqDeferred.promise(o(this))})})(),s});var e=class{isRunning=!1;value=0;from=0;to=0;currentTime=0;lerp;duration;easing;onUpdate;advance(i){if(this.isRunning){let e=!1;var n,r,a;this.duration&&this.easing?(this.currentTime+=i,n=t(0,this.currentTime/this.duration,1),n=(e=1<=n)?1:this.easing(n),this.value=this.from+(this.to-this.from)*n):this.lerp&&(this.value=(n=this.value,r=this.to,a=60*this.lerp,n=n,r=r,(1-(a=1-Math.exp(-a*i)))*n+a*r),Math.round(this.value)!==this.to)||(this.value=this.to,e=!0),e&&this.stop(),this.onUpdate?.(this.value,e)}}stop(){this.isRunning=!1}fromTo(e,t,{lerp:i,duration:n,easing:r,onStart:a,onUpdate:s}){this.from=this.value=e,this.to=t,this.lerp=i,this.duration=n,this.easing=r,this.currentTime=0,this.isRunning=!0,a?.(),this.onUpdate=s}},i=class{constructor(e,t,{autoResize:i=!0,debounce:n=250}={}){this.wrapper=e,this.content=t,i&&(this.debouncedResize=((i,n)=>{let r;return function(...e){let t=this;clearTimeout(r),r=setTimeout(()=>{r=void 0,i.apply(t,e)},n)}})(this.resize,n),this.wrapper instanceof Window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}width=0;height=0;scrollHeight=0;scrollWidth=0;debouncedResize;wrapperResizeObserver;contentResizeObserver;destroy(){this.wrapperResizeObserver?.disconnect(),this.contentResizeObserver?.disconnect(),this.wrapper===window&&this.debouncedResize&&window.removeEventListener("resize",this.debouncedResize,!1)}resize=()=>{this.onWrapperResize(),this.onContentResize()};onWrapperResize=()=>{this.wrapper instanceof Window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)};onContentResize=()=>{this.wrapper instanceof Window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)};get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}},s=class{events={};emit(e,...i){var n=this.events[e]||[];for(let e=0,t=n.length;e<t;e++)n[e]?.(...i)}on(e,t){return this.events[e]?.push(t)||(this.events[e]=[t]),()=>{this.events[e]=this.events[e]?.filter(e=>t!==e)}}off(e,t){this.events[e]=this.events[e]?.filter(e=>t!==e)}destroy(){this.events={}}},o=100/6,n={passive:!1},r=class{constructor(e,t={wheelMultiplier:1,touchMultiplier:1}){this.element=e,this.options=t,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,n),this.element.addEventListener("touchstart",this.onTouchStart,n),this.element.addEventListener("touchmove",this.onTouchMove,n),this.element.addEventListener("touchend",this.onTouchEnd,n)}touchStart={x:0,y:0};lastDelta={x:0,y:0};window={width:0,height:0};emitter=new s;on(e,t){return this.emitter.on(e,t)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,n),this.element.removeEventListener("touchstart",this.onTouchStart,n),this.element.removeEventListener("touchmove",this.onTouchMove,n),this.element.removeEventListener("touchend",this.onTouchEnd,n)}onTouchStart=e=>{var{clientX:t,clientY:i}=e.targetTouches?e.targetTouches[0]:e;this.touchStart.x=t,this.touchStart.y=i,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:e})};onTouchMove=e=>{var{clientX:t,clientY:i}=e.targetTouches?e.targetTouches[0]:e,n=-(t-this.touchStart.x)*this.options.touchMultiplier,r=-(i-this.touchStart.y)*this.options.touchMultiplier;this.touchStart.x=t,this.touchStart.y=i,this.lastDelta={x:n,y:r},this.emitter.emit("scroll",{deltaX:n,deltaY:r,event:e})};onTouchEnd=e=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:e})};onWheel=e=>{var{deltaX:t,deltaY:i,deltaMode:n}=e;t*=1===n?o:2===n?this.window.width:1,i*=1===n?o:2===n?this.window.height:1,t*=this.options.wheelMultiplier,i*=this.options.wheelMultiplier,this.emitter.emit("scroll",{deltaX:t,deltaY:i,event:e})};onWindowResize=()=>{this.window={width:window.innerWidth,height:window.innerHeight}}},l=e=>Math.min(1,1.001-Math.pow(2,-10*e)),Lenis=class{_isScrolling=!1;_isStopped=!1;_isLocked=!1;_preventNextNativeScrollEvent=!1;_resetVelocityTimeout=null;__rafID=null;isTouching;time=0;userData={};lastVelocity=0;velocity=0;direction=0;options;targetScroll;animatedScroll;animate=new e;emitter=new s;dimensions;virtualScroll;constructor({wrapper:e=window,content:t=document.documentElement,eventsTarget:n=e,smoothWheel:a=!0,syncTouch:s=!1,syncTouchLerp:o=.075,touchInertiaExponent:h=1.7,duration:c,easing:u,lerp:d=.1,infinite:p=!1,orientation:f="vertical",gestureOrientation:m="vertical",touchMultiplier:g=1,wheelMultiplier:v=1,autoResize:y=!0,prevent:_,virtualScroll:x,overscroll:S=!0,autoRaf:b=!1,anchors:T=!1,autoToggle:M=!1,allowNestedScroll:w=!1,__experimental__naiveDimensions:E=!1}={}){window.lenisVersion="1.3.8",e&&e!==document.documentElement||(e=window),"number"==typeof c&&"function"!=typeof u?u=l:"function"==typeof u&&"number"!=typeof c&&(c=1),this.options={wrapper:e,content:t,eventsTarget:n,smoothWheel:a,syncTouch:s,syncTouchLerp:o,touchInertiaExponent:h,duration:c,easing:u,lerp:d,infinite:p,gestureOrientation:m,orientation:f,touchMultiplier:g,wheelMultiplier:v,autoResize:y,prevent:_,virtualScroll:x,overscroll:S,autoRaf:b,anchors:T,autoToggle:M,allowNestedScroll:w,__experimental__naiveDimensions:E},this.dimensions=new i(e,t,{autoResize:y}),this.updateClassName(),this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.addEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.addEventListener("click",this.onClick,!1),this.options.wrapper.addEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll=new r(n,{touchMultiplier:g,wheelMultiplier:v}),this.virtualScroll.on("scroll",this.onVirtualScroll),this.options.autoToggle&&this.rootElement.addEventListener("transitionend",this.onTransitionEnd,{passive:!0}),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.removeEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.wrapper.removeEventListener("pointerdown",this.onPointerDown,!1),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.removeEventListener("click",this.onClick,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.cleanUpClassName(),this.__rafID&&cancelAnimationFrame(this.__rafID)}on(e,t){return this.emitter.on(e,t)}off(e,t){return this.emitter.off(e,t)}onScrollEnd=e=>{e instanceof CustomEvent||"smooth"!==this.isScrolling&&!1!==this.isScrolling||e.stopPropagation()};dispatchScrollendEvent=()=>{this.options.wrapper.dispatchEvent(new CustomEvent("scrollend",{bubbles:this.options.wrapper===window,detail:{lenisScrollEnd:!0}}))};onTransitionEnd=e=>{if(e.propertyName.includes("overflow")){let e=this.isHorizontal?"overflow-x":"overflow-y",t=getComputedStyle(this.rootElement)[e];["hidden","clip"].includes(t)?this.internalStop():this.internalStart()}};setScroll(e){this.isHorizontal?this.options.wrapper.scrollTo({left:e,behavior:"instant"}):this.options.wrapper.scrollTo({top:e,behavior:"instant"})}onClick=e=>{let t=e.composedPath().find(e=>e instanceof HTMLAnchorElement&&(e.getAttribute("href")?.startsWith("#")||e.getAttribute("href")?.startsWith("/#")||e.getAttribute("href")?.startsWith("./#")));if(t){let i=t.getAttribute("href");if(i){let e="object"==typeof this.options.anchors&&this.options.anchors?this.options.anchors:void 0,t="#"+i.split("#")[1];["#","/#","./#","#top","/#top","./#top"].includes(i)&&(t=0),this.scrollTo(t,e)}}};onPointerDown=e=>{1===e.button&&this.reset()};onVirtualScroll=o=>{if("function"!=typeof this.options.virtualScroll||!1!==this.options.virtualScroll(o)){let{deltaX:r,deltaY:a,event:s}=o;if(this.emitter.emit("virtual-scroll",{deltaX:r,deltaY:a,event:s}),!s.ctrlKey&&!s.lenisStopPropagation){let i=s.type.includes("touch"),n=s.type.includes("wheel");this.isTouching="touchstart"===s.type||"touchmove"===s.type;o=0===r&&0===a;if(this.options.syncTouch&&i&&"touchstart"===s.type&&o&&!this.isStopped&&!this.isLocked)this.reset();else{var l="vertical"===this.options.gestureOrientation&&0===a||"horizontal"===this.options.gestureOrientation&&0===r;if(!o&&!l){let e=s.composedPath(),t=(e=e.slice(0,e.indexOf(this.rootElement)),this.options.prevent);if(!e.find(e=>e instanceof HTMLElement&&("function"==typeof t&&t?.(e)||e.hasAttribute?.("data-lenis-prevent")||i&&e.hasAttribute?.("data-lenis-prevent-touch")||n&&e.hasAttribute?.("data-lenis-prevent-wheel")||this.options.allowNestedScroll&&this.checkNestedScroll(e,{deltaX:r,deltaY:a}))))if(this.isStopped||this.isLocked)s.cancelable&&s.preventDefault();else if(this.options.syncTouch&&i||this.options.smoothWheel&&n){let e=a;"both"===this.options.gestureOrientation?e=Math.abs(a)>Math.abs(r)?a:r:"horizontal"===this.options.gestureOrientation&&(e=r),(!this.options.overscroll||this.options.infinite||this.options.wrapper!==window&&(0<this.animatedScroll&&this.animatedScroll<this.limit||0===this.animatedScroll&&0<a||this.animatedScroll===this.limit&&a<0))&&(s.lenisStopPropagation=!0),s.cancelable&&s.preventDefault();o=i&&this.options.syncTouch,l=i&&"touchend"===s.type;l&&(e=Math.sign(this.velocity)*Math.pow(Math.abs(this.velocity),this.options.touchInertiaExponent)),this.scrollTo(this.targetScroll+e,{programmatic:!1,...o?{lerp:l?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}})}else this.isScrolling="native",this.animate.stop(),s.lenisStopPropagation=!0}}}}};resize(){this.dimensions.resize(),this.animatedScroll=this.targetScroll=this.actualScroll,this.emit()}emit(){this.emitter.emit("scroll",this)}onNativeScroll=()=>{var e;null!==this._resetVelocityTimeout&&(clearTimeout(this._resetVelocityTimeout),this._resetVelocityTimeout=null),this._preventNextNativeScrollEvent?this._preventNextNativeScrollEvent=!1:!1!==this.isScrolling&&"native"!==this.isScrolling||(e=this.animatedScroll,this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity,this.velocity=this.animatedScroll-e,this.direction=Math.sign(this.animatedScroll-e),this.isStopped||(this.isScrolling="native"),this.emit(),0!==this.velocity&&(this._resetVelocityTimeout=setTimeout(()=>{this.lastVelocity=this.velocity,this.velocity=0,this.isScrolling=!1,this.emit()},400)))};reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.options.autoToggle?this.rootElement.style.removeProperty("overflow"):this.internalStart())}internalStart(){this.isStopped&&(this.reset(),this.isStopped=!1,this.emit())}stop(){this.isStopped||(this.options.autoToggle?this.rootElement.style.setProperty("overflow","clip"):this.internalStop())}internalStop(){this.isStopped||(this.reset(),this.isStopped=!0,this.emit())}raf=e=>{var t=e-(this.time||e);this.time=e,this.animate.advance(.001*t),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))};scrollTo(i,{offset:n=0,immediate:e=!1,lock:r=!1,duration:a=this.options.duration,easing:s=this.options.easing,lerp:o=this.options.lerp,onStart:h,onComplete:c,force:u=!1,programmatic:d=!0,userData:p}={}){if(!this.isStopped&&!this.isLocked||u){if("string"==typeof i&&["top","left","start"].includes(i))i=0;else if("string"==typeof i&&["bottom","right","end"].includes(i))i=this.limit;else{let t;if("string"==typeof i?t=document.querySelector(i):i instanceof HTMLElement&&i?.nodeType&&(t=i),t){if(this.options.wrapper!==window){let e=this.rootElement.getBoundingClientRect();n-=this.isHorizontal?e.left:e.top}let e=t.getBoundingClientRect();i=(this.isHorizontal?e.left:e.top)+this.animatedScroll}}if("number"==typeof i){if(i+=n,i=Math.round(i),this.options.infinite){if(d){this.targetScroll=this.animatedScroll=this.scroll;let e=i-this.animatedScroll;e>this.limit/2?i-=this.limit:e<-this.limit/2&&(i+=this.limit)}}else i=t(0,i,this.limit);i===this.targetScroll?(h?.(this),c?.(this)):(this.userData=p??{},e?(this.animatedScroll=this.targetScroll=i,this.setScroll(this.scroll),this.reset(),this.preventNextNativeScrollEvent(),this.emit(),c?.(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()})):(d||(this.targetScroll=i),"number"==typeof a&&"function"!=typeof s?s=l:"function"==typeof s&&"number"!=typeof a&&(a=1),this.animate.fromTo(this.animatedScroll,i,{duration:a,easing:s,lerp:o,onStart:()=>{r&&(this.isLocked=!0),this.isScrolling="smooth",h?.(this)},onUpdate:(e,t)=>{this.isScrolling="smooth",this.lastVelocity=this.velocity,this.velocity=e-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=e,this.setScroll(this.scroll),d&&(this.targetScroll=e),t||this.emit(),t&&(this.reset(),this.emit(),c?.(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()}),this.preventNextNativeScrollEvent())}})))}}}preventNextNativeScrollEvent(){this._preventNextNativeScrollEvent=!0,requestAnimationFrame(()=>{this._preventNextNativeScrollEvent=!1})}checkNestedScroll(n,{deltaX:e,deltaY:t}){let i=Date.now(),r=n._lenis??={},a,s,o,l,h,c,u,d;var p=this.options.gestureOrientation;if(2e3<i-(r.time??0)){r.time=Date.now();let e=window.getComputedStyle(n),t=(r.computedStyle=e).overflowX,i=e.overflowY;if(a=["auto","overlay","scroll"].includes(t),s=["auto","overlay","scroll"].includes(i),r.hasOverflowX=a,r.hasOverflowY=s,!a&&!s)return!1;if("vertical"===p&&!s)return!1;if("horizontal"===p&&!a)return!1;h=n.scrollWidth,c=n.scrollHeight,u=n.clientWidth,d=n.clientHeight,o=h>u,l=c>d,r.isScrollableX=o,r.isScrollableY=l,r.scrollWidth=h,r.scrollHeight=c,r.clientWidth=u,r.clientHeight=d}else o=r.isScrollableX,l=r.isScrollableY,a=r.hasOverflowX,s=r.hasOverflowY,h=r.scrollWidth,c=r.scrollHeight,u=r.clientWidth,d=r.clientHeight;if(!a&&!s||!o&&!l)return!1;if(!("vertical"!==p||s&&l))return!1;if(!("horizontal"!==p||a&&o))return!1;let f,m,g,v,y,_;if("horizontal"===p?f="x":("vertical"===p||(0!==e&&a&&o&&(f="x"),0!==t&&s&&l))&&(f="y"),!f)return!1;if("x"===f)m=n.scrollLeft,g=h-u,v=e,y=a,_=o;else{if("y"!==f)return!1;m=n.scrollTop,g=c-d,v=t,y=s,_=l}return(0<v?m<g:0<m)&&y&&_}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return"horizontal"===this.options.orientation}get actualScroll(){var e=this.options.wrapper;return this.isHorizontal?e.scrollX??e.scrollLeft:e.scrollY??e.scrollTop}get scroll(){return this.options.infinite?(this.animatedScroll%(e=this.limit)+e)%e:this.animatedScroll;var e}get progress(){return 0===this.limit?1:this.scroll/this.limit}get isScrolling(){return this._isScrolling}set isScrolling(e){this._isScrolling!==e&&(this._isScrolling=e,this.updateClassName())}get isStopped(){return this._isStopped}set isStopped(e){this._isStopped!==e&&(this._isStopped=e,this.updateClassName())}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this.updateClassName())}get isSmooth(){return"smooth"===this.isScrolling}get className(){let e="lenis";return this.options.autoToggle&&(e+=" lenis-autoToggle"),this.isStopped&&(e+=" lenis-stopped"),this.isLocked&&(e+=" lenis-locked"),this.isScrolling&&(e+=" lenis-scrolling"),"smooth"===this.isScrolling&&(e+=" lenis-smooth"),e}updateClassName(){this.cleanUpClassName(),this.rootElement.className=(this.rootElement.className+" "+this.className).trim()}cleanUpClassName(){this.rootElement.className=this.rootElement.className.replace(/lenis(-\w+)?/g,"").trim()}};globalThis.Lenis=Lenis,globalThis.Lenis.prototype=Lenis.prototype,(f=>{(function(){if(typeof module!=="undefined"&&module.exports)return function(e){module.exports=e()};else if(typeof define==="function"&&define.amd)return define;else if(typeof window!=="undefined")return function(e){window.MobileDetect=e()};else throw new Error("unknown environment")})()(function(){var o={mobileDetectRules:{phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+|\\b(BBA100|BBB100|BBD100|BBE100|BBF100|STH100)\\b-[0-9]+",Pixel:"; \\bPixel\\b",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 5X|Nexus 6",Dell:"Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052",Samsung:"\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F|SM-G610F|SM-G981B|SM-G892A|SM-A530F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)|LM-G710",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533|SOV34|601SO|F8332",Asus:"Asus.*Galaxy|PadFone.*Mobile",Xiaomi:"^(?!.*\\bx11\\b).*xiaomi.*$|POCOPHONE F1|MI 8|Redmi Note 9S|Redmi Note 5A Prime|N2G47H|M2001J2G|M2001J2I|M1805E10A|M2004J11G|M1902F1G|M2002J9G|M2004J19G|M2003J6A1G",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo (3DS|Switch)",Amoi:"Amoi",INQ:"INQ",OnePlus:"ONEPLUS",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",GoogleTablet:"Android.*Pixel C",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-T830|SM-T837V|SM-T720|SM-T510|SM-T387V|SM-P610|SM-T290|SM-T515|SM-T590|SM-T595|SM-T725|SM-T817P|SM-P585N0|SM-T395|SM-T295|SM-T865|SM-P610N|SM-P615|SM-T970|SM-T380|SM-T5950|SM-T905|SM-T231|SM-T500|SM-T860",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30|A3-A40",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304X|TB-X304F|TB-X304L|TB-X505F|TB-X505L|TB-X505X|TB-X605F|TB-X605L|TB-8703F|TB-8703X|TB-8703N|TB-8704N|TB-8704F|TB-8704X|TB-8704V|TB-7304F|TB-7304I|TB-7304X|Tab2A7-10F|Tab2A7-20F|TB2-X30L|YT3-X50L|YT3-X50F|YT3-X50M|YT-X705F|YT-X703F|YT-X703L|YT-X705L|YT-X705X|TB2-X30F|TB2-X30L|TB2-X30M|A2107A-F|A2107A-H|TB3-730F|TB3-730M|TB3-730X|TB-7504F|TB-7504X|TB-X704F|TB-X104F|TB3-X70F|TB-X705F|TB-8504F|TB3-X70L|TB3-710F|TB-X704L",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|SGP612|SGP712",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*\\b(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))\\b|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-L09|CMR-AL19",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z930|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android [0-9.]+; [a-z-]+; \\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497|VFD 1400",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9|TECNO DP8D",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",VerizonTablet:"QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+|V10 \\b4G\\b",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Windows Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia",iPadOS:"CPU OS 13",SailfishOS:"Sailfish",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+$|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"\\bEdgiOS\\b|Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version((?!\\bEdgiOS\\b).)*Mobile.*Safari|Safari.*Mobile|MobileSafari",WeChat:"\\bMicroMessenger\\b",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]",UCBrowser:["UCWEB[VER]","UC.*Browser/[VER]"],MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",SailfishBrowser:"SailfishBrowser/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",Sailfish:"Sailfish [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|Google-AMPHTML|s~amp-validator|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom|contentkingapp|AspiegelBot",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},detectMobileBrowsers:{fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i}},l=Object.prototype.hasOwnProperty;function t(e,t){return null!=e&&null!=t&&e.toLowerCase()===t.toLowerCase()}function i(e,t){var i,n,r=e.length;if(r&&t)for(i=t.toLowerCase(),n=0;n<r;++n)if(i===e[n].toLowerCase())return!0;return!1}function e(e){for(var t in e)l.call(e,t)&&(e[t]=new RegExp(e[t],"i"))}o.FALLBACK_PHONE="UnknownPhone",o.FALLBACK_TABLET="UnknownTablet",o.FALLBACK_MOBILE="UnknownMobile";var n,r,a,s,h,c,u="isArray"in Array?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},d=o.mobileDetectRules;for(n in d.props)if(l.call(d.props,n)){for(r=d.props[n],h=(r=u(r)?r:[r]).length,s=0;s<h;++s)0<=(c=(a=r[s]).indexOf("[VER]"))&&(a=a.substring(0,c)+"([\\w._\\+]+)"+a.substring(c+5)),r[s]=new RegExp(a,"i");d.props[n]=r}function p(e,t){this.ua=(e||"").substr(0,500),this._cache={},this.maxPhoneWidth=t||600}return e(d.oss),e(d.phones),e(d.tablets),e(d.uas),e(d.utils),d.oss0={WindowsPhoneOS:d.oss.WindowsPhoneOS,WindowsMobileOS:d.oss.WindowsMobileOS},o.findMatch=function(e,t){for(var i in e)if(l.call(e,i)&&e[i].test(t))return i;return null},o.findMatches=function(e,t){var i,n=[];for(i in e)l.call(e,i)&&e[i].test(t)&&n.push(i);return n},o.getVersionStr=function(e,t){var i,n,r,a,s=o.mobileDetectRules.props;if(l.call(s,e))for(r=(i=s[e]).length,n=0;n<r;++n)if(null!==(a=i[n].exec(t)))return a[1];return null},o.getVersion=function(e,t){e=o.getVersionStr(e,t);return e?o.prepareVersionNo(e):NaN},o.prepareVersionNo=function(e){var t=e.split(/[a-z._ \/\-]/i);return 1===t.length&&(e=t[0]),1<t.length&&(e=t[0]+".",t.shift(),e+=t.join("")),Number(e)},o.isMobileFallback=function(e){return o.detectMobileBrowsers.fullPattern.test(e)||o.detectMobileBrowsers.shortPattern.test(e.substr(0,4))},o.isTabletFallback=function(e){return o.detectMobileBrowsers.tabletPattern.test(e)},o.prepareDetectionCache=function(e,t,i){var n;e.mobile===f&&((n=o.findMatch(o.mobileDetectRules.tablets,t))?(e.mobile=e.tablet=n,e.phone=null):(n=o.findMatch(o.mobileDetectRules.phones,t))?(e.mobile=e.phone=n,e.tablet=null):o.isMobileFallback(t)?(n=p.isPhoneSized(i))===f?(e.mobile=o.FALLBACK_MOBILE,e.tablet=e.phone=null):n?(e.mobile=e.phone=o.FALLBACK_PHONE,e.tablet=null):(e.mobile=e.tablet=o.FALLBACK_TABLET,e.phone=null):o.isTabletFallback(t)?(e.mobile=e.tablet=o.FALLBACK_TABLET,e.phone=null):e.mobile=e.tablet=e.phone=null)},o.mobileGrade=function(e){var t=null!==e.mobile();return e.os("iOS")&&4.3<=e.version("iPad")||e.os("iOS")&&3.1<=e.version("iPhone")||e.os("iOS")&&3.1<=e.version("iPod")||2.1<e.version("Android")&&e.is("Webkit")||7<=e.version("Windows Phone OS")||e.is("BlackBerry")&&6<=e.version("BlackBerry")||e.match("Playbook.*Tablet")||1.4<=e.version("webOS")&&e.match("Palm|Pre|Pixi")||e.match("hp.*TouchPad")||e.is("Firefox")&&12<=e.version("Firefox")||e.is("Chrome")&&e.is("AndroidOS")&&4<=e.version("Android")||e.is("Skyfire")&&4.1<=e.version("Skyfire")&&e.is("AndroidOS")&&2.3<=e.version("Android")||e.is("Opera")&&11<e.version("Opera Mobi")&&e.is("AndroidOS")||e.is("MeeGoOS")||e.is("Tizen")||e.is("Dolfin")&&2<=e.version("Bada")||(e.is("UC Browser")||e.is("Dolfin"))&&2.3<=e.version("Android")||e.match("Kindle Fire")||e.is("Kindle")&&3<=e.version("Kindle")||e.is("AndroidOS")&&e.is("NookTablet")||11<=e.version("Chrome")&&!t||5<=e.version("Safari")&&!t||4<=e.version("Firefox")&&!t||7<=e.version("MSIE")&&!t||10<=e.version("Opera")&&!t?"A":e.os("iOS")&&e.version("iPad")<4.3||e.os("iOS")&&e.version("iPhone")<3.1||e.os("iOS")&&e.version("iPod")<3.1||e.is("Blackberry")&&5<=e.version("BlackBerry")&&e.version("BlackBerry")<6||5<=e.version("Opera Mini")&&e.version("Opera Mini")<=6.5&&(2.3<=e.version("Android")||e.is("iOS"))||e.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||11<=e.version("Opera Mobi")&&e.is("SymbianOS")?"B":(e.version("BlackBerry")<5||e.match("MSIEMobile|Windows CE.*Mobile")||e.version("Windows Mobile"),"C")},o.detectOS=function(e){return o.findMatch(o.mobileDetectRules.oss0,e)||o.findMatch(o.mobileDetectRules.oss,e)},o.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height},p.prototype={constructor:p,mobile:function(){return o.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return o.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return o.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===f&&(this._cache.userAgent=o.findMatch(o.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===f&&(this._cache.userAgents=o.findMatches(o.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===f&&(this._cache.os=o.detectOS(this.ua)),this._cache.os},version:function(e){return o.getVersion(e,this.ua)},versionStr:function(e){return o.getVersionStr(e,this.ua)},is:function(e){return i(this.userAgents(),e)||t(e,this.os())||t(e,this.phone())||t(e,this.tablet())||i(o.findMatches(o.mobileDetectRules.utils,this.ua),e)},match:function(e){return(e=e instanceof RegExp?e:new RegExp(e,"i")).test(this.ua)},isPhoneSized:function(e){return p.isPhoneSized(e||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===f&&(this._cache.grade=o.mobileGrade(this)),this._cache.grade}},"undefined"!=typeof window&&window.screen?p.isPhoneSized=function(e){return e<0?f:o.getDeviceSmallerSide()<=e}:p.isPhoneSized=function(){},p._impl=o,p.version="1.4.5 2021-03-13",p})})(),((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).window=e.window||{})})(this,function(e){function r(e){return"string"==typeof e}function k(e){return Math.round(1e10*e)/1e10||0}function H(e,t,i,n){var r=e[t],a=1===n?6:D(r,i,n);return(a||!n)&&a+i+2<r.length&&(e.splice(t,0,r.slice(0,i+a+2)),r.splice(0,i+a),1)}function l(e){return"number"==typeof e}function z(e,t){return t.totalLength=e.totalLength,e.samples?(t.samples=e.samples.slice(0),t.lookup=e.lookup.slice(0),t.minLength=e.minLength,t.resolution=e.resolution):e.totalPoints&&(t.totalPoints=e.totalPoints),t}var V=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,W=/(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,X=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,a=/(^[#\.][a-z]|[a-y][a-z])/i,j=Math.PI/180,q=180/Math.PI,I=Math.sin,N=Math.cos,O=Math.abs,U=Math.sqrt,Y=Math.atan2,R=1e8,K={},Z={},t=1e5,J=function(e){return Math.round((e+R)%1*t)/t||(e<0?0:1)},S=function(e){return Math.round(e*t)/t||0},Q=function(e,t,i){var n=e.length,r=~~(i*n);if(t<e[r]){for(;--r&&e[r]>t;);r<0&&(r=0)}else for(;e[++r]<t&&r<n;);return r<n?r:n-1};function m(e){var t,i=(e=r(e)&&a.test(e)&&document.querySelector(e)||e).getAttribute?e:0;return i&&(e=e.getAttribute("d"))?(i._gsPath||(i._gsPath={}),(t=i._gsPath[e])&&!t._dirty?t:i._gsPath[e]=b(e)):e?r(e)?b(e):l(e[0])?[e]:e:console.warn("Expecting a <path> element or an SVG path data string")}var $={rect:"rx,ry,x,y,width,height",circle:"r,cx,cy",ellipse:"rx,ry,cx,cy",line:"x1,x2,y1,y2"};function s(e,t){var i,n,r,a,s,o,l,h,c,u,d,p,f,m,g,v,y,_=e.tagName.toLowerCase(),x=.552284749831;return"path"!==_&&e.getBBox?(s=((e,t)=>{var i,n=document.createElementNS("http://www.w3.org/2000/svg","path"),r=[].slice.call(e.attributes),a=r.length;for(t=","+t+",";-1<--a;)i=r[a].nodeName.toLowerCase(),t.indexOf(","+i+",")<0&&n.setAttributeNS(null,i,r[a].nodeValue);return n})(e,"x,y,width,height,cx,cy,rx,ry,r,x1,x2,y1,y2,points"),y=((e,t)=>{for(var i=t?t.split(","):[],n={},r=i.length;-1<--r;)n[i[r]]=+e.getAttribute(i[r])||0;return n})(e,$[_]),"rect"===_?(r=y.rx,a=y.ry||r,i=y.x,n=y.y,o=y.width-2*r,l=y.height-2*a,g=r||a?"M"+(p=(u=(c=i+r)+o)+r)+","+(f=n+a)+" V"+(m=f+l)+" C"+[p,g=m+a*x,d=u+r*x,v=m+a,u,v,u-(u-c)/3,v,c+(u-c)/3,v,c,v,h=i+r*(1-x),v,i,g,i,m,i,m-(m-f)/3,i,f+(m-f)/3,i,f,i,v=n+a*(1-x),h,n,c,n,c+(u-c)/3,n,u-(u-c)/3,n,u,n,d,n,p,v,p,f].join(",")+"z":"M"+(i+o)+","+n+" v"+l+" h"+-o+" v"+-l+" h"+o+"z"):"circle"===_||"ellipse"===_?(m="circle"===_?(r=a=y.r)*x:(r=y.rx,(a=y.ry)*x),g="M"+((i=y.cx)+r)+","+(n=y.cy)+" C"+[i+r,n+m,i+(h=r*x),n+a,i,n+a,i-h,n+a,i-r,n+m,i-r,n,i-r,n-m,i-h,n-a,i,n-a,i+h,n-a,i+r,n-m,i+r,n].join(",")+"z"):"line"===_?g="M"+y.x1+","+y.y1+" L"+y.x2+","+y.y2:"polyline"!==_&&"polygon"!==_||(g="M"+(i=(c=(e.getAttribute("points")+"").match(W)||[]).shift())+","+(n=c.shift())+" L"+c.join(","),"polygon"===_&&(g+=","+i+","+n+"z")),s.setAttribute("d",ae(s._gsRawPath=b(g))),t&&e.parentNode&&(e.parentNode.insertBefore(s,e),e.parentNode.removeChild(e)),s):e}function ee(e,t,i){var n=e[t],r=e[t+2],a=e[t+4],n=(n+=(r-n)*i)+((r+=(a-r)*i)-n)*i,s=r+(a+(e[t+6]-a)*i-r)*i-n;return n=e[t+1],n=(n+=((r=e[t+3])-n)*i)+((r+=((a=e[t+5])-r)*i)-n)*i,S(Y(r+(a+(e[t+7]-a)*i-r)*i-n,s)*q)}function te(e,t,i){i=void 0===i?1:k(i)||0,t=k(t)||0;var n=Math.max(0,~~(O(i-t)-1e-8)),r=(e=>{for(var t=[],i=0;i<e.length;i++)t[i]=z(e[i],e[i].slice(0));return z(e,t)})(e);if(i<t){t=1-t,i=1-i;var a=r,e=void 0,s=a.length;for(e||a.reverse();s--;)if(!a[s].reversed){o=void 0;l=void 0;h=void 0;var o=a[s];var l,h=0;for(o.reverse();h<o.length;h+=2)l=o[h],o[h]=o[h+1],o[h+1]=l;o.reversed=!o.reversed}r.totalLength=0}(t<0||i<0)&&(t+=e=Math.abs(~~Math.min(t,i))+1,i+=e),r.totalLength||L(r);var c,u,d,p,f,m,g,v,y,_,e=1<i,x=ie(r,t,K,!0),S=ie(r,i,Z),b=S.segment,T=x.segment,M=S.segIndex,w=x.segIndex,E=S.i,A=x.i,C=w===M,P=E===A&&C;if(e||n){for(e=M<w||C&&E<A||P&&S.t<x.t,H(r,w,A,x.t)&&(w++,e||(M++,P?(S.t=(S.t-x.t)/(1-x.t),E=0):C&&(E-=A))),Math.abs(1-(i-t))<1e-5?M=w-1:!S.t&&M?M--:H(r,M,E,S.t)&&e&&w++,1===x.t&&(w=(w+1)%r.length),u=[],p=1+(d=r.length)*n,p+=(d-(f=w)+M)%d,c=0;c<p;c++)m=u,g=r[f++%d],_=y=v=void 0,v=m.length,_=(y=m[v-1]||[]).length,v&&g[0]===y[_-2]&&g[1]===y[_-1]&&(g=y.concat(g.slice(2)),v--),m[v]=g;r=u}else if(e=1===S.t?6:D(b,E,S.t),t!==i)for(n=D(T,A,P?x.t/S.t:x.t),C&&(e+=n),b.splice(E+e+2),(n||A)&&T.splice(0,A+n),c=r.length;c--;)(c<w||M<c)&&r.splice(c,1);else b.angle=ee(b,E+e,0),x=b[E+=e],S=b[E+1],b.length=b.totalLength=0,b.totalPoints=r.totalPoints=8,b.push(x,S,x,S,x,S,x,S);return r.totalLength=0,r}function L(e,t){for(var i,n,r=i=n=0;r<e.length;r++)e[r].resolution=~~t||12,n+=e[r].length,i+=((e,t,i)=>{t=t||0,e.samples||(e.samples=[],e.lookup=[]);var n,r,a,s,o,l,h,c,u,d,p,f,m,g,v,y,_=~~e.resolution||12,x=1/_,S=i?t+6*i+1:e.length,b=e[t],T=e[t+1],M=t?t/6*_:0,w=e.samples,E=e.lookup,A=(t?e.minLength:R)||R,C=w[M+i*_-1],P=t?w[M-1]:0;for(w.length=E.length=0,r=t+2;r<S;r+=6){if(a=e[r+4]-b,s=e[r+2]-b,o=e[r]-b,c=e[r+5]-T,u=e[r+3]-T,d=e[r+1]-T,h=p=0,O(a)<.01&&O(c)<.01&&O(o)+O(d)<.01)8<e.length&&(e.splice(r,6),r-=6,S-=6);else for(n=1;n<=_;n++)l=h-(h=((m=x*n)*m*a+3*(f=1-m)*(m*s+f*o))*m),f=p-(p=(m*m*c+3*f*(m*u+f*d))*m),(v=U(f*f+l*l))<A&&(A=v),P+=v,w[M++]=P;b+=a,T+=c}if(C)for(C-=P;M<w.length;M++)w[M]+=C;if(w.length&&A){if(e.totalLength=y=w[w.length-1]||0,y/(e.minLength=A)<9999)for(n=v=g=0;n<y;n+=A)E[v++]=w[g]<n?++g:g}else e.totalLength=w[0]=0;return t?P-w[t/2-1]:P})(e[r]);return e.totalPoints=n,e.totalLength=i,e}function D(e,t,i){var n,r,a,s,o,l,h,c;return i<=0||1<=i?0:(o=(n=(n=e[t])+((r=e[t+2])-n)*i)+((r=r+((h=e[t+4])-r)*i)-n)*i,l=(a=(a=e[t+1])+((s=e[t+3])-a)*i)+((s=s+((c=e[t+5])-s)*i)-a)*i,r+=((h=h+(e[t+6]-h)*i)-r)*i,s+=((c=c+(e[t+7]-c)*i)-s)*i,e.splice(t+2,4,S(n),S(a),S(o),S(l),S(o+(r-o)*i),S(l+(s-l)*i),S(r),S(s),S(h),S(c)),e.samples&&e.samples.splice(t/6*e.resolution|0,0,0,0,0,0,0,0),6)}function ie(e,t,i,n){i=i||{},e.totalLength||L(e),(t<0||1<t)&&(t=J(t));var r,a,s,o,l,h,c,u=0,d=e[0];if(t)if(1===t)h=(d=e[u=e.length-(c=1)]).length-8;else{if(1<e.length){for(s=e.totalLength*t,l=h=0;(l+=e[h++].totalLength)<s;)u=h;t=(s-(o=l-(d=e[u]).totalLength))/(l-o)||0}r=d.samples,a=d.resolution,s=d.totalLength*t,o=(h=d.lookup.length?d.lookup[~~(s/d.minLength)]||0:Q(r,s,t))?r[h-1]:0,(l=r[h])<s&&(o=l,l=r[++h]),c=1/a*((s-o)/(l-o)+h%a),h=6*~~(h/a),n&&1===c&&(h+6<d.length?(h+=6,c=0):u+1<e.length&&(h=c=0,d=e[++u]))}else d=e[c=h=u=0];return i.t=c,i.i=h,i.path=e,i.segment=d,i.segIndex=u,i}function ne(e,t,i,n){var r,a,s,o,l,h,c=e[0],n=n||{};if((t<0||1<t)&&(t=J(t)),c.lookup||L(e),1<e.length){for(a=e.totalLength*t,s=o=0;(s+=e[o++].totalLength)<a;)c=e[o];t=(a-(l=s-c.totalLength))/(s-l)||0}return h=c.samples,r=c.resolution,a=c.totalLength*t,l=(o=c.lookup.length?c.lookup[t<1?~~(a/c.minLength):c.lookup.length-1]||0:Q(h,a,t))?h[o-1]:0,(s=h[o])<a&&(l=s,s=h[++o]),h=1-(t=1/r*((a-l)/(s-l)+o%r)||0),l=c[o=6*~~(o/r)],n.x=S((t*t*(c[o+6]-l)+3*h*(t*(c[o+4]-l)+h*(c[o+2]-l)))*t+l),n.y=S((t*t*(c[o+7]-(l=c[o+1]))+3*h*(t*(c[o+5]-l)+h*(c[o+3]-l)))*t+l),i&&(n.angle=c.totalLength?ee(c,o,1<=t?1-1e-9:t||1e-9):c.angle||0),n}function u(e,t,i,n,r,a,s){for(var o,l,h,c,u,d=e.length;-1<--d;)for(l=(o=e[d]).length,h=0;h<l;h+=2)c=o[h],u=o[h+1],o[h]=c*t+u*n+a,o[h+1]=c*i+u*r+s;return e._dirty=1,e}function b(e){function t(e,t,i,n){c=(i-e)/3,u=(n-t)/3,o.push(e+c,t+u,i-c,n-u,i,n)}var i,n,r,a,s,o,l,h,c,u,d,p,f,m=(e+"").replace(X,function(e){e=+e;return e<1e-4&&-1e-4<e?0:e}).match(V)||[],g=[],v=0,y=0,_=m.length,x=0,S="ERROR: malformed path: "+e;if(e&&isNaN(m[0])&&!isNaN(m[1])){for(i=0;i<_;i++)if(p=a,isNaN(m[i])?s=(a=m[i].toUpperCase())!==m[i]:i--,f=+m[i+1],r=+m[i+2],s&&(f+=v,r+=y),i||(l=f,h=r),"M"===a)o&&(o.length<8?--g.length:x+=o.length),v=l=f,y=h=r,o=[f,r],g.push(o),i+=2,a="L";else if("C"===a)s||(v=y=0),(o=o||[0,0]).push(f,r,v+ +m[i+3],y+ +m[i+4],v+=+m[i+5],y+=+m[i+6]),i+=6;else if("S"===a)c=v,u=y,"C"!==p&&"S"!==p||(c+=v-o[o.length-4],u+=y-o[o.length-3]),s||(v=y=0),o.push(c,u,f,r,v+=+m[i+3],y+=+m[i+4]),i+=4;else if("Q"===a)c=v+2/3*(f-v),u=y+2/3*(r-y),s||(v=y=0),v+=+m[i+3],y+=+m[i+4],o.push(c,u,v+2/3*(f-v),y+2/3*(r-y),v,y),i+=4;else if("T"===a)c=v-o[o.length-4],u=y-o[o.length-3],o.push(v+c,y+u,f+2/3*(v+1.5*c-f),r+2/3*(y+1.5*u-r),v=f,y=r),i+=2;else if("H"===a)t(v,y,v=f,y),i+=1;else if("V"===a)t(v,y,v,y=f+(s?y-v:0)),i+=1;else if("L"===a||"Z"===a)"Z"===a&&(f=l,r=h,o.closed=!0),("L"===a||.5<O(v-f)||.5<O(y-r))&&(t(v,y,f,r),"L"===a)&&(i+=2),v=f,y=r;else if("A"===a){if(p=m[i+4],f=m[i+5],c=m[i+6],u=m[i+7],n=7,1<p.length&&(p.length<3?(u=c,c=f,n--):(u=f,c=p.substr(2),n-=2),f=p.charAt(1),p=p.charAt(0)),d=((e,t,i,n,r,a,s,o,l)=>{if(e!==o||t!==l){i=O(i),n=O(n);var h=r%360*j,c=N(h),h=I(h),u=Math.PI,d=2*u,p=(e-o)/2,f=(t-l)/2,m=c*p+h*f,g=-h*p+c*f,p=m*m,f=g*g,v=p/(i*i)+f/(n*n),v=(1<v&&(i=U(v)*i,n=U(v)*n),i*i),y=n*n,v=(v*y-v*f-y*p)/(v*f+y*p),f=(a===s?-1:1)*U(v=v<0?0:v),y=i*g/n*f,p=-n*m/i*f,_=c*y-h*p+(e+o)/2,x=h*y+c*p+(t+l)/2,S=(m-y)/i,b=(g-p)/n,a=(-m-y)/i,v=(-g-p)/n,f=S*S+b*b,T=(b<0?-1:1)*Math.acos(S/U(f)),e=(S*v-b*a<0?-1:1)*Math.acos((S*a+b*v)/U(f*(a*a+v*v)));isNaN(e)&&(e=u),!s&&0<e?e-=d:s&&e<0&&(e+=d),T%=d,e%=d;for(var M=Math.ceil(O(e)/(d/4)),w=[],E=e/M,A=4/3*I(E/2)/(1+N(E/2)),C=c*i,P=h*i,R=h*-n,L=c*n,D=0;D<M;D++)m=N(r=T+D*E),g=I(r),S=N(r+=E),b=I(r),w.push(m-A*g,g+A*m,S+A*b,b-A*S,S,b);for(D=0;D<w.length;D+=2)w[D]=(m=w[D])*C+(g=w[D+1])*R+_,w[D+1]=m*P+g*L+x;return w[D-2]=o,w[D-1]=l,w}})(v,y,+m[i+1],+m[i+2],+m[i+3],+p,+f,(s?v:0)+ +c,(s?y:0)+ +u),i+=n,d)for(n=0;n<d.length;n++)o.push(d[n]);v=o[o.length-2],y=o[o.length-1]}else console.log(S);(i=o.length)<6?(g.pop(),i=0):o[0]===o[i-2]&&o[1]===o[i-1]&&(o.closed=!0),g.totalPoints=x+i}else console.log(S);return g}function re(e,t){void 0===t&&(t=1);for(var i=e[0],n=0,r=[i,n],a=2;a<e.length;a+=2)r.push(i,n,e[a],n=(e[a]-i)*t/2,i=e[a],-n);return r}function h(e,t){var i,n,r,a,s,o,l,h,c,u,d=(e=O(e[0]-e[2])<1e-4&&O(e[1]-e[3])<1e-4?e.slice(2):e).length-2,p=+e[0],f=+e[1],m=+e[2],g=+e[3],v=[p,f,p,f],y=m-p,_=g-f,x=Math.abs(e[d]-p)<.001&&Math.abs(e[d+1]-f)<.001;for(x&&(e.push(m,g),m=p,g=f,p=e[d-2],f=e[d-1],e.unshift(p,f),d+=4),t=t||0===t?+t:1,r=2;r<d;r+=2)i=p,n=f,p=m,f=g,m=+e[r+2],g=+e[r+3],p===m&&f===g||(c=y,s=_,y=m-p,_=g-f,c=((u=U(c*c+s*s))+(a=U(y*y+_*_)))*t*.25/U(Math.pow(y/a+c/u,2)+Math.pow(_/a+s/u,2)),l=p-((s=p-(p-i)*(u?c/u:0))+(((o=p+(m-p)*(a?c/a:0))-s)*(3*u/(u+a)+.5)/4||0)),u=f-((h=f-(f-n)*(u?c/u:0))+(((c=f+(g-f)*(a?c/a:0))-h)*(3*u/(u+a)+.5)/4||0)),p===i&&f===n)||v.push(S(s+l),S(h+u),S(p),S(f),S(o+l),S(c+u));return p!==m||f!==g||v.length<4?v.push(S(m),S(g),S(m),S(g)):v.length-=2,2===v.length?v.push(p,f,p,f,p,f):x&&(v.splice(0,6),v.length=v.length-6),v}function ae(e){for(var t,i,n,r="",a=(e=l(e[0])?[e]:e).length,s=0;s<a;s++){for(n=e[s],r+="M"+S(n[0])+","+S(n[1])+" C",t=n.length,i=2;i<t;i++)r+=S(n[i++])+","+S(n[i++])+" "+S(n[i++])+","+S(n[i++])+" "+S(n[i++])+","+S(n[i])+" ";n.closed&&(r+="z")}return r}function se(e){var t,i,n=e.ownerDocument||e;!(w in e.style)&&"msTransform"in e.style&&(E=(w="msTransform")+"Origin");for(;n.parentNode&&(n=n.parentNode););return v=window,T=new A,n&&(p=(c=n).documentElement,y=n.body,(M=c.createElementNS("http://www.w3.org/2000/svg","g")).style.transform="none",e=n.createElement("div"),t=n.createElement("div"),i=n&&(n.body||n.firstElementChild))&&i.appendChild&&(i.appendChild(e),e.appendChild(t),e.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),le=t.offsetParent!==e,i.removeChild(e)),n}function f(e){return e.ownerSVGElement||("svg"===(e.tagName+"").toLowerCase()?e:null)}function g(e,t){var i,n,r,a,s,o;if(e.parentNode&&(c||se(e)))return o=(i=f(e))?i.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",n=i?t?"rect":"g":"div",r=2!==t?0:100,a=3===t?100:0,s="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",o=c.createElementNS?c.createElementNS(o.replace(/^https/,"http"),n):c.createElement(n),t&&(i?(x=x||g(e),o.setAttribute("width",.01),o.setAttribute("height",.01),o.setAttribute("transform","translate("+r+","+a+")"),x):(_||((_=g(e)).style.cssText=s),o.style.cssText=s+"width:0.1px;height:0.1px;top:"+a+"px;left:"+r+"px",_)).appendChild(o),o;throw"Need document and parent."}function oe(e,t){var i,n,r,a,s,o,l,h=f(e),c=e===h,u=h?he:ce,d=e.parentNode,p=d&&!h&&d.shadowRoot&&d.shadowRoot.appendChild?d.shadowRoot:d;if(e===v)return e;if(u.length||u.push(g(e,1),g(e,2),g(e,3)),u=h?x:_,h)c?((l=(s=e).getCTM())||(o=s.style[w],s.style[w]="none",s.appendChild(M),l=M.getCTM(),s.removeChild(M),o?s.style[w]=o:s.style.removeProperty(w.replace(/([A-Z])/g,"-$1").toLowerCase())),r=-(n=l||T.clone()).e/n.a,a=-n.f/n.d,i=T):e.getBBox?(n=e.getBBox(),r=(i=(i=e.transform?e.transform.baseVal:{}).numberOfItems?1<i.numberOfItems?(e=>{for(var t=new A,i=0;i<e.numberOfItems;i++)t.multiply(e.getItem(i).matrix);return t})(i):i.getItem(0).matrix:T).a*n.x+i.c*n.y,a=i.b*n.x+i.d*n.y):(i=new A,r=a=0),t&&"g"===e.tagName.toLowerCase()&&(r=a=0),(c?h:d).appendChild(u),u.setAttribute("transform","matrix("+i.a+","+i.b+","+i.c+","+i.d+","+(i.e+r)+","+(i.f+a)+")");else{if(r=a=0,le)for(i=e.offsetParent,n=e;(n=n&&n.parentNode)&&n!==i&&n.parentNode;)4<(v.getComputedStyle(n)[w]+"").length&&(r=n.offsetLeft,a=n.offsetTop,n=0);if("absolute"!==(o=v.getComputedStyle(e)).position&&"fixed"!==o.position)for(i=e.offsetParent;d&&d!==i;)r+=d.scrollLeft||0,a+=d.scrollTop||0,d=d.parentNode;(n=u.style).top=e.offsetTop-a+"px",n.left=e.offsetLeft-r+"px",n[w]=o[w],n[E]=o[E],n.position="fixed"===o.position?"fixed":"absolute",p.appendChild(u)}return u}function d(e,t,i,n,r,a,s){return e.a=t,e.b=i,e.c=n,e.d=r,e.e=a,e.f=s,e}var c,v,p,y,_,x,T,M,le,w="transform",E=w+"Origin",he=[],ce=[],A=((n=i.prototype).inverse=function(){var e=this.a,t=this.b,i=this.c,n=this.d,r=this.e,a=this.f,s=e*n-t*i||1e-10;return d(this,n/s,-t/s,-i/s,e/s,(i*a-n*r)/s,-(e*a-t*r)/s)},n.multiply=function(e){var t=this.a,i=this.b,n=this.c,r=this.d,a=this.e,s=this.f,o=e.a,l=e.c,h=e.b,c=e.d,u=e.e,e=e.f;return d(this,o*t+h*n,o*i+h*r,l*t+c*n,l*i+c*r,a+u*t+e*n,s+u*i+e*r)},n.clone=function(){return new i(this.a,this.b,this.c,this.d,this.e,this.f)},n.equals=function(e){var t=this.a,i=this.b,n=this.c,r=this.d,a=this.e,s=this.f;return t===e.a&&i===e.b&&n===e.c&&r===e.d&&a===e.e&&s===e.f},n.apply=function(e,t){var i=e.x,e=e.y,n=this.a,r=this.b,a=this.c,s=this.d,o=this.e,l=this.f;return(t=void 0===t?{}:t).x=i*n+e*a+o||0,t.y=i*r+e*s+l||0,t},i);function i(e,t,i,n,r,a){d(this,e=void 0===e?1:e,t=void 0===t?0:t,i=void 0===i?0:i,n=void 0===n?1:n,r=void 0===r?0:r,a=void 0===a?0:a)}function o(e,t,i,n){if(!e||!e.parentNode||(c||se(e)).documentElement===e)return new A;var r=(e=>{for(var t,i;e&&e!==y;)(i=e._gsap)&&i.uncache&&i.get(e,"x"),i&&!i.scaleX&&!i.scaleY&&i.renderTransform&&(i.scaleX=i.scaleY=1e-4,i.renderTransform(1,i),t?t.push(i):t=[i]),e=e.parentNode;return t})(e),a=f(e)?he:ce,i=oe(e,i),s=a[0].getBoundingClientRect(),o=a[1].getBoundingClientRect(),a=a[2].getBoundingClientRect(),l=i.parentNode,n=!n&&function e(t){return"fixed"===v.getComputedStyle(t).position||((t=t.parentNode)&&1===t.nodeType?e(t):void 0)}(e),e=new A((o.left-s.left)/100,(o.top-s.top)/100,(a.left-s.left)/100,(a.top-s.top)/100,s.left+(!n&&(v.pageXOffset||c.scrollLeft||p.scrollLeft||y.scrollLeft)||0),s.top+(!n&&(v.pageYOffset||c.scrollTop||p.scrollTop||y.scrollTop)||0));if(l.removeChild(i),r)for(s=r.length;s--;)(o=r[s]).scaleX=o.scaleY=0,o.renderTransform(1,o);return t?e.inverse():e}function C(e,t,i,n){for(var r=t.length,a=2===n?0:n,s=0;s<r;s++)e[a]=parseFloat(t[s][i]),2===n&&(e[a+1]=0),a+=2;return e}function P(e,t,i){return parseFloat(e._gsap.get(e,t,i||"px"))||0}function ue(e){for(var t=e[0],i=e[1],n=2;n<e.length;n+=2)t=e[n]+=t,i=e[n+1]+=i}function de(e,t,i,n,r,a,s,o,l){return t="cubic"===s.type?[t]:(!1!==s.fromCurrent&&t.unshift(P(i,n,o),r?P(i,r,l):0),s.relative&&ue(t),[(r?h:re)(t,s.curviness)]),t=a(ge(t,i,s)),B(e,i,n,t,"x",o),r&&B(e,i,r,t,"y",l),L(t,s.resolution||(0===s.curviness?20:12))}function pe(e){return e}function fe(e,t,i){var n,r=o(e),a=0,s=0;return"svg"===(e.tagName+"").toLowerCase()?(n=e.viewBox.baseVal).width||(n={width:+e.getAttribute("width"),height:+e.getAttribute("height")}):n=t&&e.getBBox&&e.getBBox(),t&&"auto"!==t&&(a=t.push?t[0]*(n?n.width:e.offsetWidth||0):t.x,s=t.push?t[1]*(n?n.height:e.offsetHeight||0):t.y),i.apply(a||s?r.apply({x:a,y:s}):{x:r.e,y:r.f})}function me(e,t,i,n){var r,a=o(e.parentNode,!0,!0),s=a.clone().multiply(o(t)),e=fe(e,i,a),i=fe(t,n,a),a=i.x,i=i.y;return s.e=s.f=0,"auto"===n&&t.getTotalLength&&"path"===t.tagName.toLowerCase()&&(r=t.getAttribute("d").match(Me)||[],a+=(r=s.apply({x:+r[0],y:+r[1]})).x,i+=r.y),r&&(a-=(r=s.apply(t.getBBox())).x,i-=r.y),s.e=a-e.x,s.f=i-e.y,s}function ge(e,t,i){var n=i.align,r=i.matrix,a=i.offsetX,s=i.offsetY,i=i.alignOrigin,o=e[0][0],l=e[0][1],h=P(t,"x"),c=P(t,"y");return e&&e.length?(n&&("self"===n||(n=ye(n)[0]||t)===t?u(e,1,0,0,1,h-o,c-l):(i&&!1!==i[2]?F.set(t,{transformOrigin:100*i[0]+"% "+100*i[1]+"%"}):i=[P(t,"xPercent")/-100,P(t,"yPercent")/-100],n=(t=me(t,n,i,"auto")).apply({x:o,y:l}),u(e,t.a,t.b,t.c,t.d,h+t.e-(n.x-t.e),c+t.f-(n.y-t.f)))),r?u(e,r.a,r.b,r.c,r.d,r.e,r.f):(a||s)&&u(e,1,0,0,1,a||0,s||0),e):m("M0,0L0,0")}function B(e,t,i,n,r,a){var s=t._gsap,o=(o=(o=s.harness)&&o.aliases&&o.aliases[i])&&o.indexOf(",")<0?o:i;(i=e._pt=new ve(e._pt,t,o,0,0,pe,0,s.set(t,o,e))).u=G(s.get(t,o,a))||0,i.path=n,i.pp=r,e._props.push(o)}var F,ve,G,ye,_e,xe,Se="x,translateX,left,marginLeft,xPercent".split(","),be="y,translateY,top,marginTop,yPercent".split(","),Te=Math.PI/180,Me=/[-+\.]*\d+\.?(?:e-|e\+)?\d*/g,n={version:"3.13.0",name:"motionPath",register:function(e,t,i){G=(F=e).utils.getUnit,ye=F.utils.toArray,_e=F.core.getStyleSaver,xe=F.core.reverting||function(){},ve=i},init:function(e,t,i){if(!F)return console.warn("Please gsap.registerPlugin(MotionPathPlugin)"),!1;var n,r,a,s=[],o=(t="object"==typeof t&&!t.style&&t.path?t:{path:t}).path,l=t.autoRotate,h=t.unitX,c=t.unitY,u=t.x,d=t.y,p=o[0],f=(r=t.start,a="end"in t?t.end:1,function(e){return r||1!==a?te(e,r,a):e});if(this.rawPaths=s,this.target=e,this.tween=i,this.styles=_e&&_e(e,"transform"),(this.rotate=l||0===l)&&(this.rOffset=parseFloat(l)||0,this.radians=!!t.useRadians,this.rProp=t.rotation||"rotation",this.rSet=e._gsap.set(e,this.rProp,this),this.ru=G(e._gsap.get(e,this.rProp))||0),!Array.isArray(o)||"closed"in o||"number"==typeof p)L(l=f(ge(m(t.path),e,t)),t.resolution),s.push(l),B(this,e,t.x||"x",l,"x",t.unitX||"px"),B(this,e,t.y||"y",l,"y",t.unitY||"px");else{for(n in p)!u&&~Se.indexOf(n)?u=n:!d&&~be.indexOf(n)&&(d=n);for(n in u&&d?s.push(de(this,C(C([],o,u,0),o,d,1),e,u,d,f,t,h||G(o[0][u]),c||G(o[0][d]))):u=d=0,p)n!==u&&n!==d&&s.push(de(this,C([],o,n,2),e,n,0,f,t,G(o[0][n])))}i.vars.immediateRender&&this.render(i.progress(),this)},render:function(e,t){var i=t.rawPaths,n=i.length,r=t._pt;if(t.tween._time||!xe()){for(1<e?e=1:e<0&&(e=0);n--;)ne(i[n],e,!n&&t.rotate,i[n]);for(;r;)r.set(r.t,r.p,r.path[r.pp]+r.u,r.d,e),r=r._next;t.rotate&&t.rSet(t.target,t.rProp,i[0].angle*(t.radians?Te:1)+t.rOffset+t.ru,t,e)}else t.styles.revert()},getLength:function(e){return L(m(e)).totalLength},sliceRawPath:te,getRawPath:m,pointsToSegment:h,stringToRawPath:b,rawPathToString:ae,transformRawPath:u,getGlobalMatrix:o,getPositionOnPath:ne,cacheRawPathMeasurements:L,convertToPath:function(e,t){return ye(e).map(function(e){return s(e,!1!==t)})},convertCoordinates:function(e,t,i){t=o(t,!0,!0).multiply(o(e));return i?t.apply(i):t},getAlignMatrix:me,getRelativePosition:function(e,t,i,n){e=me(e,t,i,n);return{x:e.e,y:e.f}},arrayToRawPath:function(e,t){e=C(C([],e,(t=t||{}).x||"x",0),e,t.y||"y",1);return t.relative&&ue(e),["cubic"===t.type?e:h(e,t.curviness)]}};(F||"undefined"!=typeof window&&(F=window.gsap)&&F.registerPlugin&&F)&&F.registerPlugin(n),e.MotionPathPlugin=n,e.default=n,"undefined"==typeof window||window!==e?Object.defineProperty(e,"__esModule",{value:!0}):delete e.default}),((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).window=e.window||{})})(this,function(e){function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(){return Ce||"undefined"!=typeof window&&(Ce=window.gsap)&&Ce.registerPlugin&&Ce}function ot(e,t){return~Ue.indexOf(e)&&Ue[Ue.indexOf(e)+1][t]}function Le(e){return!!~a.indexOf(e)}function Ee(e,t,i,n,r){e.addEventListener(t,i,{passive:!1!==n,capture:!!r})}function Ae(e,t,i,n){e.removeEventListener(t,i,!!n)}function De(){return xt&&xt.isPressed||Oe.cache++}function s(i,n){function r(e){var t;return e||0===e?(c&&(Pe.history.scrollRestoration="manual"),t=xt&&xt.isPressed,e=r.v=Math.round(e)||(xt&&xt.iOS?1:0),i(e),r.cacheID=Oe.cache,t&&u("ss",e)):(n||Oe.cache!==r.cacheID||u("ref"))&&(r.cacheID=Oe.cache,r.v=i()),r.v+r.offset}return r.offset=0,i&&r}function Ne(e,t){return(t&&t._ctx&&t._ctx.selector||Ce.utils.toArray)(e)[0]||("string"==typeof e&&!1!==Ce.config().nullTargetWarn?console.warn("Element not found:",e):null)}function lt(t,e){var i=e.s,e=e.sc,n=(Le(t)&&(t=ft.scrollingElement||mt),Oe.indexOf(t)),r=e===Fe.sc?1:2,a=(~n||(n=Oe.push(t)-1),Oe[n+r]||Ee(t,"scroll",De),Oe[n+r]),n=a||(Oe[n+r]=s(ot(t,i),!0)||(Le(t)?e:s(function(e){return arguments.length?t[i]=e:t[i]})));return n.target=t,a||(n.smooth="smooth"===Ce.getProperty(t,"scrollBehavior")),n}function Ie(e,t,r){function a(e,t){var i=Tt();t||n<i-l?(o=s,s=e,h=l,l=i):r?s+=e:s=o+(e-o)/(i-h)*(l-h)}var s=e,o=e,l=Tt(),h=l,n=t||50,c=Math.max(500,3*n);return{update:a,reset:function(){o=s=r?0:s,h=l=0},getVelocity:function(e){var t=h,i=o,n=Tt();return!e&&0!==e||e===s||a(e),l===h||c<n-h?0:(s+(r?i:-i))/((r?n:l)-t)*1e3}}}function ht(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e}function ct(e){var t=Math.max.apply(Math,e),e=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(e)?t:e}function ut(){var e,i,t;(_t=Ce.core.globals().ScrollTrigger)&&_t.core&&(e=_t.core,i=e.bridge||{},t=e._scrollers,e=e._proxies,t.push.apply(t,Oe),e.push.apply(e,Ue),Oe=t,Ue=e,u=function(e,t){return i[e](t)})}function dt(e){return Ce=e||r(),!pt&&Ce&&"undefined"!=typeof document&&document.body&&(Pe=window,mt=(ft=document).documentElement,a=[Pe,ft,mt,gt=ft.body],Ce.utils.clamp,St=Ce.core.context||function(){},yt="onpointerenter"in gt?"pointer":"mouse",vt=P.isTouch=Pe.matchMedia&&Pe.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Pe||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints?2:0,Re=P.eventTypes=("ontouchstart"in mt?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in mt?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return c=0},500),ut(),pt=1),pt}var Ce,pt,Pe,ft,mt,gt,vt,yt,_t,a,xt,Re,St,o,l,h,c=1,bt=[],Oe=[],Ue=[],Tt=Date.now,u=function(e,t){return t},d="scrollLeft",p="scrollTop",Be={s:d,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:s(function(e){return arguments.length?Pe.scrollTo(e,Fe.sc()):Pe.pageXOffset||ft[d]||mt[d]||gt[d]||0})},Fe={s:p,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Be,sc:s(function(e){return arguments.length?Pe.scrollTo(Be.sc(),e):Pe.pageYOffset||ft[p]||mt[p]||gt[p]||0})},P=(Be.op=Fe,Oe.cache=0,f.prototype.init=function(e){pt||dt(Ce)||console.warn("Please gsap.registerPlugin(Observer)"),_t||ut();var a,r=e.tolerance,s=e.dragMinimum,t=e.type,U=e.lineHeight,n=e.debounce,o=e.preventDefault,l=e.onStop,B=e.onStopDelay,i=e.ignore,F=e.wheelSpeed,G=e.event,k=e.onDragStart,H=e.onDragEnd,z=e.onDrag,V=e.onPress,W=e.onRelease,X=e.onRight,j=e.onLeft,q=e.onUp,Y=e.onDown,K=e.onChangeX,Z=e.onChangeY,J=e.onChange,Q=e.onToggleX,$=e.onToggleY,ee=e.onHover,te=e.onHoverEnd,h=e.onMove,ie=e.ignoreCheck,c=e.isNormalizer,ne=e.onGestureStart,re=e.onGestureEnd,ae=e.onWheel,se=e.onEnable,oe=e.onDisable,le=e.onClick,u=e.scrollSpeed,d=e.capture,he=e.allowClicks,ce=e.lockAxis,ue=e.onLockAxis;function de(){return Me=Tt()}function p(e,t){return(b.event=e)&&i&&((e,t)=>{for(var i=t.length;i--;)if(t[i]===e||t[i].contains(e))return!0;return!1})(e.target,i)||t&&Te&&"touch"!==e.pointerType||ie&&ie(e,t)}function f(){var e=b.deltaX=ct(D),t=b.deltaY=ct(I),i=Math.abs(e)>=r,n=Math.abs(t)>=r;J&&(i||n)&&J(b,e,t,D,I),i&&(X&&0<b.deltaX&&X(b),j&&b.deltaX<0&&j(b),K&&K(b),Q&&b.deltaX<0!=T<0&&Q(b),T=b.deltaX,D[0]=D[1]=D[2]=0),n&&(Y&&0<b.deltaY&&Y(b),q&&b.deltaY<0&&q(b),Z&&Z(b),$&&b.deltaY<0!=M<0&&$(b),M=b.deltaY,I[0]=I[1]=I[2]=0),(y||v)&&(h&&h(b),v&&(k&&1===v&&k(b),z&&z(b),v=0),y=!1),x&&(x=!1,ue)&&ue(b),_&&(ae(b),_=!1),g=0}function pe(e,t,i){D[i]+=e,I[i]+=t,b._vx.update(e),b._vy.update(t),n?g=g||requestAnimationFrame(f):f()}function fe(e,t){ce&&!S&&(b.axis=S=Math.abs(e)>Math.abs(t)?"x":"y",x=!0),"y"!==S&&(D[2]+=e,b._vx.update(e,!0)),"x"!==S&&(I[2]+=t,b._vy.update(t,!0)),n?g=g||requestAnimationFrame(f):f()}function m(e){var t,i,n,r;!p(e,1)&&(i=(t=(e=ht(e,o)).clientX)-b.x,n=(e=e.clientY)-b.y,r=b.isDragging,b.x=t,b.y=e,r||(i||n)&&(Math.abs(b.startX-t)>=s||Math.abs(b.startY-e)>=s))&&(v=r?2:1,r||(b.isDragging=!0),fe(i,n))}function me(e){return e.touches&&1<e.touches.length&&(b.isGesturing=!0,ne(e,b.isDragging))}function ge(){return b.isGesturing=!1,re(b)}function ve(e){var t;p(e)||(e=E(),t=A(),pe((e-C)*u,(t-P)*u,1),C=e,P=t,l&&O.restart(!0))}function ye(e){var t;p(e)||(e=ht(e,o),ae&&(_=!0),t=(1===e.deltaMode?U:2===e.deltaMode?Pe.innerHeight:1)*F,pe(e.deltaX*t,e.deltaY*t,0),l&&!c&&O.restart(!0))}function _e(e){var t,i,n;!p(e)&&(i=(t=e.clientX)-b.x,n=(e=e.clientY)-b.y,b.x=t,b.y=e,y=!0,l&&O.restart(!0),i||n)&&fe(i,n)}function xe(e){b.event=e,ee(b)}function Se(e){b.event=e,te(b)}function be(e){return p(e)||ht(e,o)&&le(b)}this.target=a=Ne(e.target)||mt,this.vars=e;var g,v,y,_,x,S,i=i&&Ce.utils.toArray(i),r=r||1e-9,s=s||0,F=F||1,u=u||1,t=t||"wheel,touch,pointer",n=!1!==n,U=U||parseFloat(Pe.getComputedStyle(gt).lineHeight)||22,b=this,T=0,M=0,w=e.passive||!o&&!1!==e.passive,E=lt(a,Be),A=lt(a,Fe),C=E(),P=A(),Te=~t.indexOf("touch")&&!~t.indexOf("pointer")&&"pointerdown"===Re[0],R=Le(a),L=a.ownerDocument||ft,D=[0,0,0],I=[0,0,0],Me=0,we=b.onPress=function(e){p(e,1)||e&&e.button||(b.axis=S=null,O.pause(),b.isPressed=!0,e=ht(e),T=M=0,b.startX=b.x=e.clientX,b.startY=b.y=e.clientY,b._vx.reset(),b._vy.reset(),Ee(c?a:L,Re[1],m,w,!0),b.deltaX=b.deltaY=0,V&&V(b))},N=b.onRelease=function(t){var e,i,n,r;p(t,1)||(Ae(c?a:L,Re[1],m,!0),e=!isNaN(b.y-b.startY),n=(i=b.isDragging)&&(3<Math.abs(b.x-b.startX)||3<Math.abs(b.y-b.startY)),r=ht(t),!n&&e&&(b._vx.reset(),b._vy.reset(),o)&&he&&Ce.delayedCall(.08,function(){var e;300<Tt()-Me&&!t.defaultPrevented&&(t.target.click?t.target.click():L.createEvent&&((e=L.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,Pe,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(e)))}),b.isDragging=b.isGesturing=b.isPressed=!1,l&&i&&!c&&O.restart(!0),v&&f(),H&&i&&H(b),W&&W(b,n))},O=b._dc=Ce.delayedCall(B||.25,function(){b._vx.reset(),b._vy.reset(),O.pause(),l&&l(b)}).pause();b.deltaX=b.deltaY=0,b._vx=Ie(0,50,!0),b._vy=Ie(0,50,!0),b.scrollX=E,b.scrollY=A,b.isDragging=b.isGesturing=b.isPressed=!1,St(this),b.enable=function(e){return b.isEnabled||(Ee(R?L:a,"scroll",De),0<=t.indexOf("scroll")&&Ee(R?L:a,"scroll",ve,w,d),0<=t.indexOf("wheel")&&Ee(a,"wheel",ye,w,d),(0<=t.indexOf("touch")&&vt||0<=t.indexOf("pointer"))&&(Ee(a,Re[0],we,w,d),Ee(L,Re[2],N),Ee(L,Re[3],N),he&&Ee(a,"click",de,!0,!0),le&&Ee(a,"click",be),ne&&Ee(L,"gesturestart",me),re&&Ee(L,"gestureend",ge),ee&&Ee(a,yt+"enter",xe),te&&Ee(a,yt+"leave",Se),h)&&Ee(a,yt+"move",_e),b.isEnabled=!0,b.isDragging=b.isGesturing=b.isPressed=y=v=!1,b._vx.reset(),b._vy.reset(),C=E(),P=A(),e&&e.type&&we(e),se&&se(b)),b},b.disable=function(){b.isEnabled&&(bt.filter(function(e){return e!==b&&Le(e.target)}).length||Ae(R?L:a,"scroll",De),b.isPressed&&(b._vx.reset(),b._vy.reset(),Ae(c?a:L,Re[1],m,!0)),Ae(R?L:a,"scroll",ve,d),Ae(a,"wheel",ye,d),Ae(a,Re[0],we,d),Ae(L,Re[2],N),Ae(L,Re[3],N),Ae(a,"click",de,!0),Ae(a,"click",be),Ae(L,"gesturestart",me),Ae(L,"gestureend",ge),Ae(a,yt+"enter",xe),Ae(a,yt+"leave",Se),Ae(a,yt+"move",_e),b.isEnabled=b.isPressed=b.isDragging=!1,oe)&&oe(b)},b.kill=b.revert=function(){b.disable();var e=bt.indexOf(b);0<=e&&bt.splice(e,1),xt===b&&(xt=0)},bt.push(b),c&&Le(a)&&(xt=b),b.enable(G)},o=f,(l=[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}])&&t(o.prototype,l),h&&t(o,h),f);function f(e){this.init(e)}function Mt(e,t,i){var n=tt(e)&&("clamp("===e.substr(0,6)||-1<e.indexOf("max"));return(i["_"+t+"Clamp"]=n)?e.substr(6,e.length-7):e}function wt(e,t){return!t||tt(e)&&"clamp("===e.substr(0,6)?e:"clamp("+e+")"}function m(){return ti=1}function g(){return ti=0}function Ge(e){return e}function Et(e){return Math.round(1e5*e)/1e5||0}function v(){return"undefined"!=typeof window}function y(){return Xe||v()&&(Xe=window.gsap)&&Xe.registerPlugin&&Xe}function At(e){return!!~N.indexOf(e)}function Ct(e){return("Height"===e?K:je["inner"+e])||Ye["client"+e]||Ke["client"+e]}function Pt(e){return ot(e,"getBoundingClientRect")||(At(e)?function(){return bi.width=je.innerWidth,bi.height=K,bi}:function(){return Kt(e)})}function ke(e,t){t.s;var i,n=t.d2,r=t.d,t=t.a;return Math.max(0,(i="scroll"+n)&&(t=ot(e,i))?t()-Pt(e)()[r]:At(e)?(Ye[i]||Ke[i])-Ct(n):e[i]-e["offset"+n])}function _(e,t){for(var i=0;i<k.length;i+=3)t&&!~t.indexOf(k[i+1])||e(k[i],k[i+1],k[i+2])}function He(e){return"function"==typeof e}function Rt(e){return"number"==typeof e}function Lt(e){return"object"==typeof e}function Dt(e,t,i){e&&e.progress(t?0:1)&&i&&e.pause()}function It(e,t){var i;e.enabled&&(i=e._ctx?e._ctx.add(function(){return t(e)}):t(e))&&i.totalTime&&(e.callbackAnimation=i)}function ze(e){return je.getComputedStyle(e)}function Nt(e,t){for(var i in t)i in e||(e[i]=t[i]);return e}function Ot(e,t){t=t.d2;return e["offset"+t]||e["client"+t]||0}function Ut(e){var t,i=[],n=e.labels,r=e.duration();for(t in n)i.push(n[t]/r);return i}function Bt(r){var a=Xe.utils.snap(r),s=Array.isArray(r)&&r.slice(0).sort(function(e,t){return e-t});return s?function(e,t,i){var n;if(void 0===i&&(i=.001),!t)return a(e);if(0<t){for(e-=i,n=0;n<s.length;n++)if(s[n]>=e)return s[n];return s[n-1]}for(n=s.length,e+=i;n--;)if(s[n]<=e)return s[n];return s[0]}:function(e,t,i){void 0===i&&(i=.001);var n=a(e);return!t||Math.abs(n-e)<i||n-e<0==t<0?n:a(t<0?e-r:e+r)}}function x(t,i,e,n){e.split(",").forEach(function(e){return t(i,e,n)})}function Ve(e,t,i,n,r){return e.addEventListener(t,i,{passive:!n,capture:!!r})}function We(e,t,i,n){return e.removeEventListener(t,i,!!n)}function S(e,t,i){(i=i&&i.wheelHandler)&&(e(t,"wheel",i),e(t,"touchmove",i))}function Ft(e,t){var i,n;return tt(e)&&(n=~(i=e.indexOf("="))?(e.charAt(i-1)+1)*parseFloat(e.substr(i+1)):0,~i&&(e.indexOf("%")>i&&(n*=t/100),e=e.substr(0,i-1)),e=n+(e in ee?ee[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)),e}function Gt(e,t,i,n,r,a,s,o){var l=r.startColor,h=r.endColor,c=r.fontSize,u=r.indent,r=r.fontWeight,d=qe.createElement("div"),p=At(i)||"fixed"===ot(i,"pinType"),f=-1!==e.indexOf("scroller"),i=p?Ke:i,m=-1!==e.indexOf("start"),l=m?l:h,h="border-color:"+l+";font-size:"+c+";color:"+l+";font-weight:"+r+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return h+="position:"+((f||o)&&p?"fixed;":"absolute;"),!f&&!o&&p||(h+=(n===Fe?"right":$)+":"+(a+parseFloat(u))+"px;"),s&&(h+="box-sizing:border-box;text-align:left;width:"+s.offsetWidth+"px;"),d._isStart=m,d.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),d.style.cssText=h,d.innerText=t||0===t?e+"-"+t:e,i.children[0]?i.insertBefore(d,i.children[0]):i.appendChild(d),d._offset=d["offset"+n.op.d2],D(d,0,n,m),d}function b(){return 34<$e()-et&&(J=J||requestAnimationFrame(ae))}function kt(){i&&i.isPressed&&!(i.startX>Ke.clientWidth)||(Oe.cache++,i?J=J||requestAnimationFrame(ae):ae(),et||ne("scrollStart"),et=$e())}function T(){W=je.innerWidth,V=je.innerHeight}function Ht(e){Oe.cache++,!0!==e&&(Ze||H||qe.fullscreenElement||qe.webkitFullscreenElement||z&&W===je.innerWidth&&!(Math.abs(je.innerHeight-V)>.25*je.innerHeight))||O.restart(!0)}function zt(){return We(R,"scrollEnd",zt)||Zt(!0)}function M(e){for(var t=0;t<n.length;t+=5)(!e||n[t+4]&&n[t+4].query===e)&&(n[t].style.cssText=n[t+1],n[t].getBBox&&n[t].setAttribute("transform",n[t+2]||""),n[t+3].uncache=1)}function w(e,t){var i;for(Je=0;Je<at.length;Je++)!(i=at[Je])||t&&i._ctx!==t||(e?i.kill(1):i.revert(!0,!0));Z=!0,t&&M(t),t||ne("revert")}function E(e,t){Oe.cache++,!t&&Qe||Oe.forEach(function(e){return He(e)&&e.cacheID++&&(e.rec=0)}),tt(e)&&(je.history.scrollRestoration=q=e)}function A(){Ke.appendChild(Y),K=!i&&Y.offsetHeight||je.innerHeight,Ke.removeChild(Y)}function C(t){Qt(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(e){return e.style.display=t?"none":"block"})}function Vt(e,t,i,n){if(!e._gsap.swappedIn){for(var r,a=se.length,s=t.style,o=e.style;a--;)s[r=se[a]]=i[r];s.position="absolute"===i.position?"absolute":"relative","inline"===i.display&&(s.display="inline-block"),o[$]=o.right="auto",s.flexBasis=i.flexBasis||"auto",s.overflow="visible",s.boxSizing="border-box",s[ui]=Ot(e,Be)+rt,s[di]=Ot(e,Fe)+rt,s[it]=o[nt]=o.top=o.left="0",Jt(n),o[ui]=o.maxWidth=i[ui],o[di]=o.maxHeight=i[di],o[it]=i[it],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}}function Wt(e){for(var t=oe.length,i=e.style,n=[],r=0;r<t;r++)n.push(oe[r],i[oe[r]]);return n.t=e,n}function Xt(e,t,i,n,r,a,s,o,l,h,c,u,d,p){He(e)&&(e=e(o)),tt(e)&&"max"===e.substr(0,3)&&(e=u+("="===e.charAt(4)?Ft("0"+e.substr(3),i):0));var f,m,g,v,y=d?d.time():0;return d&&d.seek(0),Rt(e=isNaN(e)?e:+e)?(d&&(e=Xe.utils.mapRange(d.scrollTrigger.start,d.scrollTrigger.end,0,u,e)),s&&D(s,i,n,!0)):(He(t)&&(t=t(o)),m=(e||"0").split(" "),g=Ne(t,o)||Ke,(t=Kt(g)||{})&&(t.left||t.top)||"none"!==ze(g).display||(f=g.style.display,g.style.display="block",t=Kt(g),f?g.style.display=f:g.style.removeProperty("display")),f=Ft(m[0],t[n.d]),m=Ft(m[1]||"0",i),e=t[n.p]-l[n.p]-h+f+r-m,s&&D(s,m,n,i-m<20||s._isStart&&20<m),i-=i-m),p&&(o[p]=e||-.001,e<0)&&(e=0),a&&(t=a._isStart,v="scroll"+n.d2,D(a,h=e+i,n,t&&20<h||!t&&(c?Math.max(Ke[v],Ye[v]):a.parentNode[v])<=h+1),c)&&(l=Kt(s),c)&&(a.style[n.op.p]=l[n.op.p]-n.op.m-a._offset+rt),d&&g&&(v=Kt(g),d.seek(u),f=Kt(g),d._caScrollDist=v[n.p]-f[n.p],e=e/d._caScrollDist*u),d&&d.seek(y),d?e:Math.round(e)}function jt(e,t,i,n){if(e.parentNode!==t){var r,a,s=e.style;if(t===Ke){for(r in e._stOrig=s.cssText,a=ze(e))+r||he.test(r)||!a[r]||"string"!=typeof s[r]||"0"===r||(s[r]=a[r]);s.top=i,s.left=n}else s.cssText=e._stOrig;Xe.core.getCache(e).uncache=1,t.appendChild(e)}}function L(i,e,n){var r=e,a=r;return function(e){var t=Math.round(i());return t!==r&&t!==a&&3<Math.abs(t-r)&&3<Math.abs(t-a)&&(e=t,n)&&n(),a=r,r=Math.round(e)}}function qt(e,t,i){var n={};n[t.p]="+="+i,Xe.set(e,n)}function Yt(l,e){function h(e,t,i,n,r){var a=h.tween,s=t.onComplete,o=(i=i||c(),L(c,i,function(){a.kill(),h.tween=0}));return r=n&&r||0,n=n||e-i,a&&a.kill(),t[u]=e,t.inherit=!1,(t.modifiers={})[u]=function(){return o(i+n*a.ratio+r*a.ratio*a.ratio)},t.onUpdate=function(){Oe.cache++,h.tween&&ae()},t.onComplete=function(){h.tween=0,s&&s.call(a)},a=h.tween=Xe.to(l,t)}var c=lt(l,e),u="_scroll"+e.p2;return(l[u]=c).wheelHandler=function(){return h.tween&&h.tween.kill()&&(h.tween=0)},Ve(l,"wheel",c.wheelHandler),R.isTouch&&Ve(l,"touchmove",c.wheelHandler),h}P.version="3.13.0",P.create=function(e){return new P(e)},P.register=dt,P.getAll=function(){return bt.slice()},P.getById=function(t){return bt.filter(function(e){return e.vars.id===t})[0]},r()&&Ce.registerPlugin(P);function Kt(e,t){return t=t&&"matrix(1, 0, 0, 1, 0, 0)"!==ze(e)[B]&&Xe.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),e=e.getBoundingClientRect(),t&&t.progress(0).kill(),e}function D(e,t,i,n){var r={display:"block"},a=i[n?"os2":"p2"],s=i[n?"p2":"os2"];e._isFlipped=n,r[i.a+"Percent"]=n?-100:0,r[i.a]=n?"1px":0,r["border"+a+gi]=1,r["border"+s+gi]=0,r[i.p]=t+"px",Xe.set(e,r)}function Zt(e,t){Ye=qe.documentElement,Ke=qe.body,N=[je,qe,Ye,Ke],!et||e||Z?(A(),Qe=R.isRefreshing=!0,Oe.forEach(function(e){return He(e)&&++e.cacheID&&(e.rec=e())}),e=ne("refreshInit"),ii&&R.sort(),t||w(),Oe.forEach(function(e){He(e)&&(e.smooth&&(e.target.style.scrollBehavior="auto"),e(0))}),at.slice(0).forEach(function(e){return e.refresh()}),Z=!1,at.forEach(function(e){var t,i;e._subPinOffset&&e.pin&&(t=e.vars.horizontal?"offsetWidth":"offsetHeight",i=e.pin[t],e.revert(!0,1),e.adjustPinSpacing(e.pin[t]-i),e.refresh())}),ri=1,C(!0),at.forEach(function(e){var t=ke(e.scroller,e._dir),i="max"===e.vars.end||e._endClamp&&e.end>t,n=e._startClamp&&e.start>=t;(i||n)&&e.setPositions(n?t-1:e.start,i?Math.max(n?t:e.start+1,t):e.end,!0)}),C(!1),ri=0,e.forEach(function(e){return e&&e.render&&e.render(-1)}),Oe.forEach(function(e){He(e)&&(e.smooth&&requestAnimationFrame(function(){return e.target.style.scrollBehavior="smooth"}),e.rec)&&e(e.rec)}),E(q,1),O.pause(),xi++,ae(Qe=2),at.forEach(function(e){return He(e.vars.onRefresh)&&e.vars.onRefresh(e)}),Qe=R.isRefreshing=!1,ne("refresh")):Ve(R,"scrollEnd",zt)}function Jt(e){if(e){var t,i,n=e.t.style,r=e.length,a=0;for((e.t._gsap||Xe.core.getCache(e.t)).uncache=1;a<r;a+=2)i=e[a+1],t=e[a],i?n[t]=i:n[t]&&n.removeProperty(t.replace(le,"-$1").toLowerCase())}}var Xe,I,je,qe,Ye,Ke,N,O,Qt,$t,ei,U,Ze,ti,B,Je,F,G,k,ii,ni,H,i,z,V,W,X,j,q,Y,K,Z,ri,ai,J,Qe,si,oi,li=1,$e=Date.now,Q=$e(),et=0,hi=0,tt=function(e){return"string"==typeof e},ci=Math.abs,$="bottom",ui="width",di="height",pi="Right",fi="Left",mi="Bottom",it="padding",nt="margin",gi="Width",rt="px",vi={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},yi={toggleActions:"play",anticipatePin:0},ee={top:0,left:0,center:.5,bottom:1,right:1},at=[],_i={},te={},ie=[],ne=function(e){return te[e]&&te[e].map(function(e){return e()})||ie},n=[],xi=0,re=0,Si=1,ae=function(e){if(2===e||!Qe&&!Z){R.isUpdating=!0,oi&&oi.update(0);var t=at.length,e=$e(),i=50<=e-Q,n=t&&at[0].scroll();if(Si=n<re?-1:1,Qe||(re=n),i&&(et&&!ti&&200<e-et&&(et=0,ne("scrollEnd")),ei=Q,Q=e),Si<0){for(Je=t;0<Je--;)at[Je]&&at[Je].update(0,i);Si=1}else for(Je=0;Je<t;Je++)at[Je]&&at[Je].update(0,i);R.isUpdating=!1}J=0},se=["left","top",$,"right",nt+mi,nt+pi,nt+"Top",nt+fi,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],oe=se.concat([ui,di,"boxSizing","max"+gi,"maxHeight","position",nt,it,it+"Top",it+pi,it+mi,it+fi]),le=/([A-Z])/g,bi={left:0,top:0},he=/(webkit|moz|length|cssText|inset)/i,R=(st.prototype.init=function(b,T){var M,n,g,w,K,E,A,Z,C,J,Q,$,P,ee,v,te,ie,y,R,_,ne,x,S,re,L,a,d,D,I,ae,se,p,f,r,oe,le,he,N,O,U,ce,ue,s,de,pe,m,fe,B,me,ge,F,G,k,H,z,ve,ye,_e,xe,V,Se,be,Te,Me,we,W,X,j,q,e,Y,Ee,o,l,h,c,u,t,Ae,Ce,Pe,Re,i,Le,De,Ie;this.progress=this.start=0,this.vars&&this.kill(!0,!0),hi?(p=(b=Nt(tt(b)||Rt(b)||b.nodeType?{trigger:b}:b,yi)).onUpdate,f=b.toggleClass,r=b.id,oe=b.onToggle,le=b.onRefresh,he=b.scrub,N=b.trigger,O=b.pin,U=b.pinSpacing,ce=b.invalidateOnRefresh,ue=b.anticipatePin,s=b.onScrubComplete,de=b.onSnapComplete,pe=b.once,m=b.snap,fe=b.pinReparent,t=b.pinSpacer,B=b.containerAnimation,me=b.fastScrollEnd,ge=b.preventOverlaps,F=b.horizontal||b.containerAnimation&&!1!==b.horizontal?Be:Fe,G=!he&&0!==he,k=Ne(b.scroller||je),e=Xe.core.getCache(k),H=At(k),z="fixed"===("pinType"in b?b.pinType:ot(k,"pinType")||H&&"fixed"),ve=[b.onEnter,b.onLeave,b.onEnterBack,b.onLeaveBack],ye=G&&b.toggleActions.split(" "),_e=("markers"in b?b:yi).markers,xe=!H&&parseFloat(ze(k)["border"+F.p2+gi])||0,V=this,Se=b.onRefreshInit&&function(){return b.onRefreshInit(V)},Pe=k,Re=H,Le=(i=F).d,De=i.d2,Ie=i.a,be=(Ie=ot(Pe,"getBoundingClientRect"))?function(){return Ie()[Le]}:function(){return(Re?Ct(De):Pe["client"+De])||0},i=k,Te=!H||~Ue.indexOf(i)?Pt(i):function(){return bi},W=we=Me=0,X=lt(k,F),V._startClamp=V._endClamp=!1,V._dir=F,ue*=45,V.scroller=k,V.scroll=B?B.time.bind(B):X,w=X(),V.vars=b,T=T||b.animation,"refreshPriority"in b&&(ii=1,-9999===b.refreshPriority)&&(oi=V),e.tweenScroll=e.tweenScroll||{top:Yt(k,Fe),left:Yt(k,Be)},V.tweenTo=M=e.tweenScroll[F.p],V.scrubDuration=function(e){(a=Rt(e)&&e)?L?L.duration(e):L=Xe.to(T,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:a,paused:!0,onComplete:function(){return s&&s(V)}}):(L&&L.progress(1).kill(),L=0)},T&&(T.vars.lazy=!1,T._initted&&!V.isReverted||!1!==T.vars.immediateRender&&!1!==b.immediateRender&&T.duration()&&T.render(0,!0,!0),V.animation=T.pause(),(T.scrollTrigger=V).scrubDuration(he),S=0,r=r||T.vars.id),m&&(Lt(m)&&!m.push||(m={snapTo:m}),"scrollBehavior"in Ke.style&&Xe.set(H?[Ke,Ye]:k,{scrollBehavior:"auto"}),Oe.forEach(function(e){return He(e)&&e.target===(H?qe.scrollingElement||Ye:k)&&(e.smooth=!1)}),g=He(m.snapTo)?m.snapTo:"labels"===m.snapTo?(Ce=T,function(e){return Xe.utils.snap(Ut(Ce),e)}):"labelsDirectional"===m.snapTo?(Ae=T,function(e,t){return Bt(Ut(Ae))(e,t.direction)}):!1!==m.directional?function(e,t){return Bt(m.snapTo)(e,$e()-we<500?0:t.direction)}:Xe.utils.snap(m.snapTo),d=Lt(d=m.duration||{min:.1,max:2})?$t(d.min,d.max):$t(d,d),D=Xe.delayedCall(m.delay||a/2||.1,function(){var e,t,i,n,r,a,s,o,l,h=X(),c=$e()-we<500,u=M.tween;!(c||Math.abs(V.getVelocity())<10)||u||ti||Me===h?V.isActive&&Me!==h&&D.restart(!0):(i=(h-E)/C,n=T&&!G?T.totalProgress():i,c=!c&&(n-re)/($e()-ei)*1e3||0,r=Xe.utils.clamp(-i,1-i,ci(c/2)*c/.185),a=i+(!1===m.inertia?0:r),s=m.onStart,o=m.onInterrupt,l=m.onComplete,Rt(e=g(a,V))||(e=a),t=Math.max(0,Math.round(E+e*C)),h<=A&&E<=h&&t!==h&&(u&&!u._initted&&u.data<=ci(t-h)||(!1===m.inertia&&(r=e-i),M(t,{duration:d(ci(.185*Math.max(ci(a-n),ci(e-n))/c/.05||0)),ease:m.ease||"power3",data:ci(t-h),onInterrupt:function(){return D.restart(!0)&&o&&o(V)},onComplete:function(){V.update(),Me=X(),T&&!G&&(L?L.resetTo("totalProgress",e,T._tTime/T._tDur):T.progress(e)),S=re=T&&!G?T.totalProgress():V.progress,de&&de(V),l&&l(V)}},h,r*C,t-h-r*C),s&&s(V,M.tween))))}).pause()),r&&(_i[r]=V),i=(i=(N=V.trigger=Ne(N||!0!==O&&O))&&N._gsap&&N._gsap.stRevert)&&i(V),O=!0===O?N:Ne(O),tt(f)&&(f={targets:N,className:f}),O&&(!1!==U&&U!==nt&&(U=!(!U&&O.parentNode&&O.parentNode.style&&"flex"===ze(O.parentNode).display)&&it),V.pin=O,(n=Xe.core.getCache(O)).spacer?J=n.pinState:(t&&((t=Ne(t))&&!t.nodeType&&(t=t.current||t.nativeElement),n.spacerIsNative=!!t,t)&&(n.spacerState=Wt(t)),n.spacer=P=t||qe.createElement("div"),P.classList.add("pin-spacer"),r&&P.classList.add("pin-spacer-"+r),n.pinState=J=Wt(O)),!1!==b.force3D&&Xe.set(O,{force3D:!0}),V.spacer=P=n.spacer,e=ze(O),y=e[U+F.os2],ee=Xe.getProperty(O),v=Xe.quickSetter(O,F.a,rt),Vt(O,P,e),$=Wt(O)),_e&&(t=Lt(_e)?Nt(_e,vi):vi,j=Gt("scroller-start",r,k,F,t,0),q=Gt("scroller-end",r,k,F,t,0,j),e=j["offset"+F.op.d2],u=Ne(ot(k,"content")||k),Y=this.markerStart=Gt("start",r,u,F,t,e,0,B),Ee=this.markerEnd=Gt("end",r,u,F,t,e,0,B),B&&(se=Xe.quickSetter([Y,Ee],F.a,rt)),z||Ue.length&&!0===ot(k,"fixedMarkers")||(t=ze(u=H?Ke:k).position,u.style.position="absolute"===t||"fixed"===t?t:"relative",Xe.set([j,q],{force3D:!0}),_=Xe.quickSetter(j,F.a,rt),x=Xe.quickSetter(q,F.a,rt))),B&&(o=B.vars.onUpdate,l=B.vars.onUpdateParams,B.eventCallback("onUpdate",function(){V.update(0,0,1),o&&o.apply(B,l||[])})),V.previous=function(){return at[at.indexOf(V)-1]},V.next=function(){return at[at.indexOf(V)+1]},V.revert=function(e,t){if(!t)return V.kill(!0);var i,n,r=!1!==e||!V.enabled,t=Ze;r!==V.isReverted&&(r&&(I=Math.max(X(),V.scroll.rec||0),W=V.progress,ae=T&&T.progress()),Y&&[Y,Ee,j,q].forEach(function(e){return e.style.display=r?"none":"block"}),r&&(Ze=V).update(r),!O||fe&&V.isActive||(r?(e=O,i=P,Jt(n=J),(n=e._gsap).spacerIsNative?Jt(n.spacerState):e._gsap.swappedIn&&(n=i.parentNode)&&(n.insertBefore(e,i),n.removeChild(i)),e._gsap.swappedIn=!1):Vt(O,P,ze(O),R)),r||V.update(r),Ze=t,V.isReverted=r)},V.refresh=function(e,t,i,n){if(!Ze&&V.enabled||t)if(O&&e&&et)Ve(st,"scrollEnd",zt);else{!Qe&&Se&&Se(V),Ze=V,M.tween&&!i&&(M.tween.kill(),M.tween=0),L&&L.pause(),ce&&T&&(T.revert({kill:!1}).invalidate(),T.getChildren)&&T.getChildren(!0,!0,!1).forEach(function(e){return e.vars.immediateRender&&e.render(0,!0,!0)}),V.isReverted||V.revert(!0,!0),V._subPinOffset=!1;var r,a,s,o,l,h,c,u,t=be(),e=Te(),d=B?B.duration():ke(k,F),p=C<=.01||!C,f=0,m=n||0,g=(Lt(i)?i:b).end,v=b.endTrigger||N,y=Lt(i)?i.start:b.start||(0!==b.start&&N?O?"0 0":"0 100%":0),_=V.pinnedContainer=b.pinnedContainer&&Ne(b.pinnedContainer,V),x=N&&Math.max(0,at.indexOf(V))||0,S=x;for(_e&&Lt(i)&&(c=Xe.getProperty(j,F.p),u=Xe.getProperty(q,F.p));0<S--;)(s=at[S]).end||s.refresh(0,1)||(Ze=V),!(o=s.pin)||o!==N&&o!==O&&o!==_||s.isReverted||((l=l||[]).unshift(s),s.revert(!0,!0)),s!==at[S]&&(x--,S--);for(y=Mt(y=He(y)?y(V):y,"start",V),E=Xt(y,N,t,F,X(),Y,j,V,e,xe,z,d,B,V._startClamp&&"_startClamp")||(O?-.001:0),He(g)&&(g=g(V)),tt(g)&&!g.indexOf("+=")&&(~g.indexOf(" ")?g=(tt(y)?y.split(" ")[0]:"")+g:(f=Ft(g.substr(2),t),g=tt(y)?y:(B?Xe.utils.mapRange(0,B.duration(),B.scrollTrigger.start,B.scrollTrigger.end,E):E)+f,v=N)),g=Mt(g,"end",V),A=Math.max(E,Xt(g||(v?"100% 0":d),v,t,F,X()+f,Ee,q,V,e,xe,z,d,B,V._endClamp&&"_endClamp"))||-.001,f=0,S=x;S--;)(o=(s=at[S]).pin)&&s.start-s._pinPush<=E&&!B&&0<s.end&&(r=s.end-(V._startClamp?Math.max(0,s.start):s.start),(o===N&&s.start-s._pinPush<E||o===_)&&isNaN(y)&&(f+=r*(1-s.progress)),o===O)&&(m+=r);if(E+=f,A+=f,V._startClamp&&(V._startClamp+=f),V._endClamp&&!Qe&&(V._endClamp=A||-.001,A=Math.min(A,ke(k,F))),C=A-E||(E-=.01)&&.001,p&&(W=Xe.utils.clamp(0,1,Xe.utils.normalize(E,A,I))),V._pinPush=m,Y&&f&&((r={})[F.a]="+="+f,_&&(r[F.p]="-="+X()),Xe.set([Y,Ee],r)),!O||ri&&V.end>=ke(k,F)){if(N&&X()&&!B)for(a=N.parentNode;a&&a!==Ke;)a._pinOffset&&(E-=a._pinOffset,A-=a._pinOffset),a=a.parentNode}else r=ze(O),i=F===Fe,g=X(),te=parseFloat(ee(F.a))+m,!d&&1<A&&(h={style:h=(H?qe.scrollingElement||Ye:k).style,value:h["overflow"+F.a.toUpperCase()]},H)&&"scroll"!==ze(Ke)["overflow"+F.a.toUpperCase()]&&(h.style["overflow"+F.a.toUpperCase()]="scroll"),Vt(O,P,r),$=Wt(O),a=Kt(O,!0),v=z&&lt(k,i?Be:Fe)(),U?((R=[U+F.os2,C+m+rt]).t=P,(S=U===it?Ot(O,F)+C+m:0)&&(R.push(F.d,S+rt),"auto"!==P.style.flexBasis)&&(P.style.flexBasis=S+rt),Jt(R),_&&at.forEach(function(e){e.pin===_&&!1!==e.vars.pinSpacing&&(e._subPinOffset=!0)}),z&&X(I)):(S=Ot(O,F))&&"auto"!==P.style.flexBasis&&(P.style.flexBasis=S+rt),z&&((t={top:a.top+(i?g-E:v)+rt,left:a.left+(i?v:g-E)+rt,boxSizing:"border-box",position:"fixed"})[ui]=t.maxWidth=Math.ceil(a.width)+rt,t[di]=t.maxHeight=Math.ceil(a.height)+rt,t[nt]=t.marginTop=t[nt+pi]=t[nt+mi]=t[nt+fi]="0",t[it]=r[it],t.paddingTop=r.paddingTop,t[it+pi]=r[it+pi],t[it+mi]=r[it+mi],t[it+fi]=r[it+fi],Q=((e,t,i)=>{for(var n,r=[],a=e.length,s=i?8:0;s<a;s+=2)n=e[s],r.push(n,n in t?t[n]:e[s+1]);return r.t=e.t,r})(J,t,fe),Qe)&&X(0),T?(e=T._initted,ni(1),T.render(T.duration(),!0,!0),ie=ee(F.a)-te+C+m,ne=1<Math.abs(C-ie),z&&ne&&Q.splice(Q.length-2,2),T.render(0,!0,!0),e||T.invalidate(!0),T.parent||T.totalTime(T.totalTime()),ni(0)):ie=C,h&&(h.value?h.style["overflow"+F.a.toUpperCase()]=h.value:h.style.removeProperty("overflow-"+F.a));l&&l.forEach(function(e){return e.revert(!1,!0)}),V.start=E,V.end=A,w=K=Qe?I:X(),B||Qe||(w<I&&X(I),V.scroll.rec=0),V.revert(!1,!0),we=$e(),D&&(Me=-1,D.restart(!0)),Ze=0,T&&G&&(T._initted||ae)&&T.progress()!==ae&&T.progress(ae||0,!0).render(T.time(),!0,!0),(p||W!==V.progress||B||ce||T&&!T._initted)&&(T&&!G&&(T._initted||W||!1!==T.vars.immediateRender)&&T.totalProgress(B&&E<-.001&&!W?Xe.utils.normalize(E,A,0):W,!0),V.progress=p||(w-E)/C===W?0:W),O&&U&&(P._pinOffset=Math.round(V.progress*ie)),L&&L.invalidate(),isNaN(c)||(c-=Xe.getProperty(j,F.p),u-=Xe.getProperty(q,F.p),qt(j,F,c),qt(Y,F,c-(n||0)),qt(q,F,u),qt(Ee,F,u-(n||0))),p&&!Qe&&V.update(),!le||Qe||Z||(Z=!0,le(V),Z=!1)}},V.getVelocity=function(){return(X()-K)/($e()-ei)*1e3||0},V.endAnimation=function(){Dt(V.callbackAnimation),T&&(L?L.progress(1):T.paused()?G||Dt(T,V.direction<0,1):Dt(T,T.reversed()))},V.labelToScroll=function(e){return T&&T.labels&&(E||V.refresh()||E)+T.labels[e]/T.duration()*C||0},V.getTrailing=function(t){var e=at.indexOf(V),e=0<V.direction?at.slice(0,e).reverse():at.slice(e+1);return(tt(t)?e.filter(function(e){return e.vars.preventOverlaps===t}):e).filter(function(e){return 0<V.direction?e.end<=E:e.start>=A})},V.update=function(e,t,i){var n,r,a,s,o,l,h,c,u;(!B||i||e)&&(i=!0===Qe?I:V.scroll(),o=(o=e?0:(i-E)/C)<0?0:1<o?1:o||0,h=V.progress,t&&(K=w,w=B?X():i,m)&&(re=S,S=T&&!G?T.totalProgress():o),ue&&O&&!Ze&&!li&&et&&(!o&&E<i+(i-K)/($e()-ei)*ue?o=1e-4:1===o&&A>i+(i-K)/($e()-ei)*ue&&(o=.9999)),o!==h&&V.enabled&&(c=(t=(n=V.isActive=!!o&&o<1)!=(!!h&&h<1))||!!o!=!!h,V.direction=h<o?1:-1,V.progress=o,c&&!Ze&&(r=o&&!h?0:1===o?1:1===h?2:3,G)&&(a=!t&&"none"!==ye[r+1]&&ye[r+1]||ye[r],s=T&&("complete"===a||"reset"===a||a in T)),ge&&(t||s)&&(s||he||!T)&&(He(ge)?ge(V):V.getTrailing(ge).forEach(function(e){return e.endAnimation()})),G||(!L||Ze||li?T&&T.totalProgress(o,!(!Ze||!we&&!e)):(L._dp._time-L._start!==L._time&&L.render(L._dp._time-L._start),L.resetTo?L.resetTo("totalProgress",o,T._tTime/T._tDur):(L.vars.totalProgress=o,L.invalidate().restart()))),O&&(e&&U&&(P.style[U+F.os2]=y),z?c&&(h=!e&&h<o&&i<A+1&&i+1>=ke(k,F),fe&&(e||!n&&!h?jt(O,P):(u=Kt(O,!0),l=i-E,jt(O,Ke,u.top+(F===Fe?l:0)+rt,u.left+(F===Fe?0:l)+rt))),Jt(n||h?Q:$),ne&&o<1&&n||v(te+(1!==o||h?0:ie))):v(Et(te+ie*o))),!m||M.tween||Ze||li||D.restart(!0),f&&(t||pe&&o&&(o<1||!ai))&&Qt(f.targets).forEach(function(e){return e.classList[n||pe?"add":"remove"](f.className)}),!p||G||e||p(V),c&&!Ze?(G&&(s&&("complete"===a?T.pause().totalProgress(1):"reset"===a?T.restart(!0).pause():"restart"===a?T.restart(!0):T[a]()),p)&&p(V),!t&&ai||(oe&&t&&It(V,oe),ve[r]&&It(V,ve[r]),pe&&(1===o?V.kill(!1,1):ve[r]=0),t)||ve[r=1===o?1:3]&&It(V,ve[r]),me&&!n&&Math.abs(V.getVelocity())>(Rt(me)?me:2500)&&(Dt(V.callbackAnimation),L?L.progress(1):Dt(T,"reverse"===a?1:!o,1))):G&&p&&!Ze&&p(V)),x&&(u=B?i/B.duration()*(B._caScrollDist||0):i,_(u+(j._isFlipped?1:0)),x(u)),se)&&se(-i/B.duration()*(B._caScrollDist||0))},V.enable=function(e,t){V.enabled||(V.enabled=!0,Ve(k,"resize",Ht),H||Ve(k,"scroll",kt),Se&&Ve(st,"refreshInit",Se),!1!==e&&(V.progress=W=0,w=K=Me=X()),!1!==t&&V.refresh())},V.getTween=function(e){return e&&M?M.tween:L},V.setPositions=function(e,t,i,n){var r,a,s;B&&(r=B.scrollTrigger,a=B.duration(),s=r.end-r.start,e=r.start+s*e/a,t=r.start+s*t/a),V.refresh(!1,!1,{start:wt(e,i&&!!V._startClamp),end:wt(t,i&&!!V._endClamp)},n),V.update()},V.adjustPinSpacing=function(e){var t;R&&e&&(t=R.indexOf(F.d)+1,R[t]=parseFloat(R[t])+e+rt,R[1]=parseFloat(R[1])+e+rt,Jt(R))},V.disable=function(e,t){if(V.enabled&&(!1!==e&&V.revert(!0,!0),V.enabled=V.isActive=!1,t||L&&L.pause(),I=0,n&&(n.uncache=1),Se&&We(st,"refreshInit",Se),D&&(D.pause(),M.tween)&&M.tween.kill()&&(M.tween=0),!H)){for(var i=at.length;i--;)if(at[i].scroller===k&&at[i]!==V)return;We(k,"resize",Ht),H||We(k,"scroll",kt)}},V.kill=function(e,t){V.disable(e,t),L&&!t&&L.kill(),r&&delete _i[r];var i=at.indexOf(V);0<=i&&at.splice(i,1),i===Je&&0<Si&&Je--,i=0,at.forEach(function(e){return e.scroller===V.scroller&&(i=1)}),i||Qe||(V.scroll.rec=0),T&&(T.scrollTrigger=null,e&&T.revert({kill:!1}),t||T.kill()),Y&&[Y,Ee,j,q].forEach(function(e){return e.parentNode&&e.parentNode.removeChild(e)}),oi===V&&(oi=0),O&&(n&&(n.uncache=1),i=0,at.forEach(function(e){return e.pin===O&&i++}),i||(n.spacer=0)),b.onKill&&b.onKill(V)},at.push(V),V.enable(!1,!1),i&&i(V),T&&T.add&&!C?(h=V.update,V.update=function(){V.update=h,Oe.cache++,E||A||V.refresh()},Xe.delayedCall(.01,V.update),C=.01,E=A=0):V.refresh(),O&&si!==xi&&(c=si=xi,requestAnimationFrame(function(){return c===xi&&Zt(!0)}))):this.update=this.refresh=this.kill=Ge},st.register=function(e){return I||(Xe=e||y(),v()&&window.document&&st.enable(),I=hi),I},st.defaults=function(e){if(e)for(var t in e)yi[t]=e[t];return yi},st.disable=function(t,i){hi=0,at.forEach(function(e){return e[i?"kill":"disable"](t)}),We(je,"wheel",kt),We(qe,"scroll",kt),clearInterval(U),We(qe,"touchcancel",Ge),We(Ke,"touchstart",Ge),x(We,qe,"pointerdown,touchstart,mousedown",m),x(We,qe,"pointerup,touchend,mouseup",g),O.kill(),_(We);for(var e=0;e<Oe.length;e+=3)S(We,Oe[e],Oe[e+1]),S(We,Oe[e],Oe[e+2])},st.enable=function(){if(je=window,qe=document,Ye=qe.documentElement,Ke=qe.body,Xe&&(Qt=Xe.utils.toArray,$t=Xe.utils.clamp,j=Xe.core.context||Ge,ni=Xe.core.suppressOverwrites||Ge,q=je.history.scrollRestoration||"auto",re=je.pageYOffset||0,Xe.core.globals("ScrollTrigger",st),Ke)){hi=1,(Y=document.createElement("div")).style.height="100vh",Y.style.position="absolute",A(),function e(){return hi&&requestAnimationFrame(e)}(),P.register(Xe),st.isTouch=P.isTouch,X=P.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),z=1===P.isTouch,Ve(je,"wheel",kt),N=[je,qe,Ye,Ke],Xe.matchMedia?(st.matchMedia=function(e){var t,i=Xe.matchMedia();for(t in e)i.add(t,e[t]);return i},Xe.addEventListener("matchMediaInit",function(){return w()}),Xe.addEventListener("matchMediaRevert",function(){return M()}),Xe.addEventListener("matchMedia",function(){Zt(0,1),ne("matchMedia")}),Xe.matchMedia().add("(orientation: portrait)",function(){return T(),T})):console.warn("Requires GSAP 3.11.0 or later"),T(),Ve(qe,"scroll",kt);var e,t=Ke.hasAttribute("style"),i=Ke.style,n=i.borderTopStyle,r=Xe.core.Animation.prototype;for(r.revert||Object.defineProperty(r,"revert",{value:function(){return this.time(-.01,!0)}}),i.borderTopStyle="solid",r=Kt(Ke),Fe.m=Math.round(r.top+Fe.sc())||0,Be.m=Math.round(r.left+Be.sc())||0,n?i.borderTopStyle=n:i.removeProperty("border-top-style"),t||(Ke.setAttribute("style",""),Ke.removeAttribute("style")),U=setInterval(b,250),Xe.delayedCall(.5,function(){return li=0}),Ve(qe,"touchcancel",Ge),Ve(Ke,"touchstart",Ge),x(Ve,qe,"pointerdown,touchstart,mousedown",m),x(Ve,qe,"pointerup,touchend,mouseup",g),B=Xe.utils.checkPrefix("transform"),oe.push(B),I=$e(),O=Xe.delayedCall(.2,Zt).pause(),k=[qe,"visibilitychange",function(){var e=je.innerWidth,t=je.innerHeight;qe.hidden?(F=e,G=t):F===e&&G===t||Ht()},qe,"DOMContentLoaded",Zt,je,"load",Zt,je,"resize",Ht],_(Ve),at.forEach(function(e){return e.enable(0,1)}),e=0;e<Oe.length;e+=3)S(We,Oe[e],Oe[e+1]),S(We,Oe[e],Oe[e+2])}},st.config=function(e){"limitCallbacks"in e&&(ai=!!e.limitCallbacks);var t=e.syncInterval;t&&clearInterval(U)||(U=t)&&setInterval(b,t),"ignoreMobileResize"in e&&(z=1===st.isTouch&&e.ignoreMobileResize),"autoRefreshEvents"in e&&(_(We),_(Ve,e.autoRefreshEvents||"none"),H=-1===(e.autoRefreshEvents+"").indexOf("resize"))},st.scrollerProxy=function(e,t){var e=Ne(e),i=Oe.indexOf(e),n=At(e);~i&&Oe.splice(i,n?6:2),t&&(n?Ue.unshift(je,t,Ke,t,Ye,t):Ue.unshift(e,t))},st.clearMatchMedia=function(t){at.forEach(function(e){return e._ctx&&e._ctx.query===t&&e._ctx.kill(!0,!0)})},st.isInViewport=function(e,t,i){e=(tt(e)?Ne(e):e).getBoundingClientRect(),t=e[i?ui:di]*t||0;return i?0<e.right-t&&e.left+t<je.innerWidth:0<e.bottom-t&&e.top+t<je.innerHeight},st.positionInViewport=function(e,t,i){var e=(e=tt(e)?Ne(e):e).getBoundingClientRect(),n=e[i?ui:di],n=null==t?n/2:t in ee?ee[t]*n:~t.indexOf("%")?parseFloat(t)*n/100:parseFloat(t)||0;return i?(e.left+n)/je.innerWidth:(e.top+n)/je.innerHeight},st.killAll=function(e){at.slice(0).forEach(function(e){return"ScrollSmoother"!==e.vars.id&&e.kill()}),!0!==e&&(e=te.killAll||[],te={},e.forEach(function(e){return e()}))},st);function st(e,t){I||st.register(Xe)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),j(this),this.init(e,t)}function ce(e,t,i,n){return n<t?e(n):t<0&&e(0),n<i?(n-t)/(i-t):i<0?t/(t-i):1}function ue(e,t){!0===t?e.style.removeProperty("touch-action"):e.style.touchAction=!0===t?"auto":t?"pan-"+t+(P.isTouch?" pinch-zoom":""):"none",e===Ye&&ue(Ke,t)}function de(e){var t,i=e.event,n=e.target,e=e.axis,r=(i.changedTouches?i.changedTouches[0]:i).target,a=r._gsap||Xe.core.getCache(r),s=$e();if(!a._isScrollT||2e3<s-a._isScrollT){for(;r&&r!==Ke&&(r.scrollHeight<=r.clientHeight&&r.scrollWidth<=r.clientWidth||!ge[(t=ze(r)).overflowY]&&!ge[t.overflowX]);)r=r.parentNode;a._isScroll=r&&r!==n&&!At(r)&&(ge[(t=ze(r)).overflowY]||ge[t.overflowX]),a._isScrollT=s}!a._isScroll&&"x"!==e||(i.stopPropagation(),i._gsapAllow=!0)}function pe(e,t,i,n){return P.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:n=n&&de,onPress:n,onDrag:n,onScroll:n,onEnable:function(){return i&&Ve(qe,P.eventTypes[0],ye,!1,!0)},onDisable:function(){return We(qe,P.eventTypes[0],ye,!0)}})}function fe(e){function i(){return h=!1}function a(){o=ke(v,Fe),C=$t(X?1:0,o),f&&(A=$t(0,ke(v,Be))),l=xi}function s(){_._gsap.y=Et(parseFloat(_._gsap.y)+x.offset)+"px",_.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(_._gsap.y)+", 0, 1)",x.offset=x.cacheID=0}function r(){a(),c.isActive()&&c.vars.scrollY>o&&(x()>o?c.progress(1)&&x(o):c.resetTo("scrollY",o))}(e=Lt(e)?e:{}).preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var n,o,l,h,c,u,d,p,f=e.normalizeScrollX,t=e.momentum,m=e.allowNestedScroll,g=e.onRelease,v=Ne(e.target)||Ye,y=Xe.core.globals().ScrollSmoother,y=y&&y.get(),_=X&&(e.content&&Ne(e.content)||y&&!1!==e.content&&!y.smooth()&&y.content()),x=lt(v,Fe),S=lt(v,Be),b=1,T=(P.isTouch&&je.visualViewport?je.visualViewport.scale*je.visualViewport.width:je.outerWidth)/je.innerWidth,M=0,w=He(t)?function(){return t(n)}:function(){return t||2.8},E=pe(v,e.type,!0,m),A=Ge,C=Ge;return _&&Xe.set(_,{y:"+=0"}),e.ignoreCheck=function(e){return X&&"touchmove"===e.type&&(h?(requestAnimationFrame(i),t=Et(n.deltaY/2),t=C(x.v-t),_&&t!==x.v+x.offset&&(x.offset=t-x.v,t=Et((parseFloat(_&&_._gsap.y)||0)-x.offset),_.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+t+", 0, 1)",_._gsap.y=t+"px",x.cacheID=Oe.cache,ae()),!0):(x.offset&&s(),void(h=!0)))||1.05<b&&"touchstart"!==e.type||n.isGesturing||e.touches&&1<e.touches.length;var t},e.onPress=function(){h=!1;var e=b;b=Et((je.visualViewport&&je.visualViewport.scale||1)/T),c.pause(),e!==b&&ue(v,1.01<b||!f&&"x"),u=S(),d=x(),a(),l=xi},e.onRelease=e.onGestureStart=function(e,t){var i,n;x.offset&&s(),t?(Oe.cache++,t=w(),f&&(n=(i=S())+.05*t*-e.velocityX/.227,t*=ce(S,i,n,ke(v,Be)),c.vars.scrollX=A(n)),n=(i=x())+.05*t*-e.velocityY/.227,t*=ce(x,i,n,ke(v,Fe)),c.vars.scrollY=C(n),c.invalidate().duration(t).play(.01),(X&&c.vars.scrollY>=o||o-1<=i)&&Xe.to({},{onUpdate:r,duration:t})):p.restart(!0),g&&g(e)},e.onWheel=function(){c._ts&&c.pause(),1e3<$e()-M&&(l=0,M=$e())},e.onChange=function(e,t,i,n,r){xi!==l&&a(),t&&f&&S(A(n[2]===t?u+(e.startX-e.x):S()+t-n[1])),i&&(x.offset&&s(),e=(n=r[2]===i)?d+e.startY-e.y:x()+i-r[1],r=C(e),n&&e!==r&&(d+=r-e),x(r)),(i||t)&&ae()},e.onEnable=function(){ue(v,!f&&"x"),R.addEventListener("refresh",r),Ve(je,"resize",r),x.smooth&&(x.target.style.scrollBehavior="auto",x.smooth=S.smooth=!1),E.enable()},e.onDisable=function(){ue(v,!0),We(je,"resize",r),R.removeEventListener("refresh",r),E.kill()},e.lockAxis=!1!==e.lockAxis,((n=new P(e)).iOS=X)&&!x()&&x(1),X&&Xe.ticker.add(Ge),p=n._dc,c=Xe.to(n,{ease:"power4",paused:!0,inherit:!1,scrollX:f?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:L(x,x(),function(){return c.pause()})},onUpdate:ae,onComplete:p.vars.onComplete}),n}R.version="3.13.0",R.saveStyles=function(e){return e?Qt(e).forEach(function(e){var t;e&&e.style&&(0<=(t=n.indexOf(e))&&n.splice(t,5),n.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),Xe.core.getCache(e),j()))}):n},R.revert=function(e,t){return w(!e,t)},R.create=function(e,t){return new R(e,t)},R.refresh=function(e){return e?Ht(!0):(I||R.register())&&Zt(!0)},R.update=function(e){return++Oe.cache&&ae(!0===e?2:0)},R.clearScrollMemory=E,R.maxScroll=function(e,t){return ke(e,t?Be:Fe)},R.getScrollFunc=function(e,t){return lt(Ne(e),t?Be:Fe)},R.getById=function(e){return _i[e]},R.getAll=function(){return at.filter(function(e){return"ScrollSmoother"!==e.vars.id})},R.isScrolling=function(){return!!et},R.snapDirectional=Bt,R.addEventListener=function(e,t){e=te[e]||(te[e]=[]);~e.indexOf(t)||e.push(t)},R.removeEventListener=function(e,t){e=te[e],t=e&&e.indexOf(t);0<=t&&e.splice(t,1)},R.batch=function(e,t){var i,n=[],r={},a=t.interval||.016,s=t.batchMax||1e9;for(i in t)r[i]="on"===i.substr(0,2)&&He(t[i])&&"onRefreshInit"!==i?(e=>{var t=[],i=[],n=Xe.delayedCall(a,function(){e(t,i),t=[],i=[]}).pause();return function(e){t.length||n.restart(!0),t.push(e.trigger),i.push(e),s<=t.length&&n.progress(1)}})(t[i]):t[i];return He(s)&&(s=s(),Ve(R,"refresh",function(){return s=t.batchMax()})),Qt(e).forEach(function(e){var t={};for(i in r)t[i]=r[i];t.trigger=e,n.push(R.create(t))}),n};var me,ge={auto:1,scroll:1},ve=/(input|label|select|textarea)/i,ye=function(e){var t=ve.test(e.target.tagName);(t||me)&&(e._gsapAllow=!0,me=t)};R.sort=function(e){var t;return He(e)?at.sort(e):(t=je.pageYOffset||0,R.getAll().forEach(function(e){return e._sortY=e.trigger?t+e.trigger.getBoundingClientRect().top:e.start+je.innerHeight}),at.sort(e||function(e,t){return-1e6*(e.vars.refreshPriority||0)+(e.vars.containerAnimation?1e6:e._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+-1e6*(t.vars.refreshPriority||0))}))},R.observe=function(e){return new P(e)},R.normalizeScroll=function(e){var t;return void 0===e?i:!0===e&&i?i.enable():!1!==e?(t=e instanceof P?e:fe(e),i&&i.target===t.target&&i.kill(),At(t.target)&&(i=t),t):(i&&i.kill(),void(i=e))},R.core={_getVelocityProp:Ie,_inputObserver:pe,_scrollers:Oe,_proxies:Ue,bridge:{ss:function(){et||ne("scrollStart"),et=$e()},ref:function(){return Ze}}},y()&&Xe.registerPlugin(R),e.ScrollTrigger=R,e.default=R,"undefined"==typeof window||window!==e?Object.defineProperty(e,"__esModule",{value:!0}):delete e.default}),((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).window=e.window||{})})(this,function(e){let t,l,a,G="undefined"!=typeof Intl?new Intl.Segmenter:0,T=e=>"string"==typeof e?T(document.querySelectorAll(e)):"length"in e?Array.from(e):[e],h=e=>T(e).filter(e=>e instanceof HTMLElement),k=[],s=function(){},H=/\s+/g,c=new RegExp("\\p{RI}\\p{RI}|\\p{Emoji}(\\p{EMod}|\\u{FE0F}\\u{20E3}?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?(\\u{200D}\\p{Emoji}(\\p{EMod}|\\u{FE0F}\\u{20E3}?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?)*|.","gu"),M={left:0,top:0,width:0,height:0},z=(s,o)=>{if(o){let e=new Set(s.join("").match(o)||k),t=s.length,i,n,r,a;if(e.size)for(;-1<--t;){n=s[t];for(r of e)if(r.startsWith(n)&&r.length>n.length){for(i=0,a=n;r.startsWith(a+=s[t+ ++i])&&a.length<r.length;);if(i&&a.length===r.length){s[t]=r,s.splice(t+1,i);break}}}}return s},V=e=>"inline"===window.getComputedStyle(e).display&&(e.style.display="inline-block"),W=(e,t,i)=>t.insertBefore("string"==typeof e?document.createTextNode(e):e,i),w=(n,e,r)=>{let a=e[n+"sClass"]||"",{tag:s="div",aria:o="auto",propIndex:l=!1}=e,h="line"===n?"block":"inline-block",c=-1<a.indexOf("++"),t=e=>{var t=document.createElement(s),i=r.length+1;return a&&(t.className=a+(c?" "+a+i:"")),l&&t.style.setProperty("--"+n,i+""),"none"!==o&&t.setAttribute("aria-hidden","true"),"span"!==s&&(t.style.position="relative",t.style.display=h),t.textContent=e,r.push(t),t};return c&&(a=a.replace("++","")),t.collection=r,t},X=(e,t,i,n,r,a,s,o,l,h)=>{let c,u=Array.from(e.childNodes),d=0,{wordDelimiter:p,reduceWhiteSpace:f=!0,prepareText:m}=t,g=e.getBoundingClientRect(),v=g,U=!f&&"pre"===window.getComputedStyle(e).whiteSpace.substring(0,3),y=0,_=i.collection,x,S,b,T,M,w,E,B,A,C,P,R,L,F,D,I,N,O;for(x=" "!==(S="object"==typeof p?(b=p.delimiter||p,p.replaceWith||""):""===p?"":p||" ");d<u.length;d++)if(3===(T=u[d]).nodeType){for(D=T.textContent||"",f?D=D.replace(H," "):U&&(D=D.replace(/\n/g,S+`
`)),m&&(D=m(D,e)),T.textContent=D,M=S||b?D.split(b||S):D.match(o)||k,N=M[M.length-1],B=x?" "===N.slice(-1):!N,N||M.pop(),v=g,(E=x?" "===M[0].charAt(0):!M[0])&&W(" ",e,T),M[0]||M.shift(),z(M,l),a&&h||(T.textContent=""),A=1;A<=M.length;A++)if(I=M[A-1],!f&&U&&I.charAt(0)===`
`&&(null!=(c=T.previousSibling)&&c.remove(),W(document.createElement("br"),e,T),I=I.slice(1)),f||""!==I)if(" "===I)e.insertBefore(document.createTextNode(" "),T);else{if(x&&" "===I.charAt(0)&&W(" ",e,T),y&&1===A&&!E&&-1<_.indexOf(y.parentNode)?(w=_[_.length-1]).appendChild(document.createTextNode(n?"":I)):(w=i(n?"":I),W(w,e,T),y&&1===A&&!E&&w.insertBefore(y,w.firstChild)),n)for(P=G?z([...G.segment(I)].map(e=>e.segment),l):I.match(o)||k,O=0;O<P.length;O++)w.appendChild(" "===P[O]?document.createTextNode(" "):n(P[O]));if(a&&h){if(D=T.textContent=D.substring(I.length+1,D.length),(C=w.getBoundingClientRect()).top>v.top&&C.left<=v.left){for(R=e.cloneNode(),L=e.childNodes[0];L&&L!==w;)L=(F=L).nextSibling,R.appendChild(F);e.parentNode.insertBefore(R,e),r&&V(R)}v=C}(A<M.length||B)&&W(A>=M.length?" ":x&&" "===I.slice(-1)?" "+S:S,e,T)}else W(S,e,T);e.removeChild(T),y=0}else 1===T.nodeType&&(y=s&&-1<s.indexOf(T)?(-1<_.indexOf(T.previousSibling)&&_[_.length-1].appendChild(T),T):(X(T,t,i,n,r,a,s,o,l,!0),0),r)&&V(T)};var i=class n{constructor(e,t){this.isSplit=!1,a||o.register(window.gsap),this.elements=h(e),this.chars=[],this.words=[],this.lines=[],this.masks=[],this.vars=t,this._split=()=>this.isSplit&&this.split(this.vars);let n=[],i,r=()=>{let e=n.length,t;for(;e--;){var i=(t=n[e]).element.offsetWidth;if(i!==t.width)return t.width=i,void this._split()}};this._data={orig:n,obs:"undefined"!=typeof ResizeObserver&&new ResizeObserver(()=>{clearTimeout(i),i=setTimeout(r,200)})},s(this),this.split(t)}split(u){this.isSplit&&this.revert(),this.vars=u=u||this.vars||{};let{type:e="chars,words,lines",aria:d="auto",deepSlice:p=!0,smartWrap:f,onSplit:t,autoSplit:i=!1,specialChars:n,mask:r}=this.vars,m=-1<e.indexOf("lines"),g=-1<e.indexOf("chars"),v=-1<e.indexOf("words"),y=g&&!v&&!m,_=n&&("push"in n?new RegExp("(?:"+n.join("|")+")","gu"):n),x=_?new RegExp(_.source+"|"+c.source,"gu"):c,S=!!u.ignore&&h(u.ignore),{orig:b,animTime:a,obs:s}=this._data,o;return(g||v||m)&&(this.elements.forEach((o,e)=>{b[e]={element:o,html:o.innerHTML,ariaL:o.getAttribute("aria-label"),ariaH:o.getAttribute("aria-hidden")},"auto"===d?o.setAttribute("aria-label",(o.textContent||"").trim()):"hidden"===d&&o.setAttribute("aria-hidden","true");let t=[],i=[],l=[],n=g?w("char",u,t):null,r=w("word",u,i),h,a,s,c;if(X(o,u,r,n,y,p&&(m||y),S,x,_,!1),m){let e=T(o.childNodes),t=((n,r,e,t)=>{let a=w("line",e,t),s=window.getComputedStyle(n).textAlign||"left";return(e,t)=>{var i=a("");for(i.style.textAlign=s,n.insertBefore(i,r[e]);e<t;e++)i.appendChild(r[e]);i.normalize()}})(o,e,u,l),i,n=[],r=0,a=e.map(e=>1===e.nodeType?e.getBoundingClientRect():M),s=M;for(h=0;h<e.length;h++)1===(i=e[h]).nodeType&&(s="BR"===i.nodeName?(n.push(i),t(r,h+1),a[r=h+1]):(h&&a[h].top>s.top&&a[h].left<=s.left&&(t(r,h),r=h),a[h]));r<h&&t(r,h),n.forEach(e=>{var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})}if(!v){for(h=0;h<i.length;h++)if(a=i[h],g||!a.nextSibling||3!==a.nextSibling.nodeType)if(f&&!m){for((s=document.createElement("span")).style.whiteSpace="nowrap";a.firstChild;)s.appendChild(a.firstChild);a.replaceWith(s)}else a.replaceWith(...a.childNodes);else(c=a.nextSibling)&&3===c.nodeType&&(c.textContent=(a.textContent||"")+(c.textContent||""),a.remove());i.length=0,o.normalize()}this.lines.push(...l),this.words.push(...i),this.chars.push(...t)}),r)&&this[r]&&this.masks.push(...this[r].map(e=>{var t=e.cloneNode();return e.replaceWith(t),t.appendChild(e),e.className&&(t.className=e.className.replace(/(\b\w+\b)/g,"$1-mask")),t.style.overflow="clip",t})),this.isSplit=!0,l&&(i?l.addEventListener("loadingdone",this._split):"loading"===l.status&&console.warn("SplitText called before fonts loaded")),(o=t&&t(this))&&o.totalTime&&(this._data.anim=a?o.totalTime(a):o),m&&i&&this.elements.forEach((e,t)=>{b[t].width=e.offsetWidth,s&&s.observe(e)}),this}revert(){var{orig:e,anim:t,obs:i}=this._data;return i&&i.disconnect(),e.forEach(({element:e,html:t,ariaL:i,ariaH:n})=>{e.innerHTML=t,i?e.setAttribute("aria-label",i):e.removeAttribute("aria-label"),n?e.setAttribute("aria-hidden",n):e.removeAttribute("aria-hidden")}),this.chars.length=this.words.length=this.lines.length=e.length=this.masks.length=0,this.isSplit=!1,null!=l&&l.removeEventListener("loadingdone",this._split),t&&(this._data.animTime=t.totalTime(),t.revert()),null!=(e=(i=this.vars).onRevert)&&e.call(i,this),this}static create(e,t){return new n(e,t)}static register(e){(t=t||e||window.gsap)&&(T=t.utils.toArray,s=t.core.context||s),!a&&0<window.innerWidth&&(l=document.fonts,a=!0)}};i.version="3.13.0";let o=i;e.SplitText=o,e.default=o,Object.defineProperty(e,"__esModule",{value:!0})}),console.warn('Scripts "build/three.js" and "build/three.min.js" are deprecated with r150+, and will be removed with r160. Please use ES Modules or alternatives: https://threejs.org/docs/index.html#manual/en/introduction/Installation'),((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).THREE={})})(this,function(e){let Ve="158",L=1,D=2,I=3,We=0,Ue=1,Z=100,J=204,Q=205,O=0,U=1,B=2,Xe=0,G=1,k=2,H=3,z=4,V=5,v="attached",j=301,q=302,_=303,x=304,ge=306,Y=1e3,K=1001,$=1002,W=1003,ee=1004,te=1005,X=1006,ie=1007,je=1008,qe=1009,Ye=1012,ne=1013,Ke=1014,Ze=1015,Je=1016,Qe=1017,$e=1018,et=1020,tt=1023,re=1026,ae=1027,it=1029,nt=1031,rt=1033,b=33776,T=33777,M=33778,w=33779,E=35840,se=35841,oe=35842,le=35843,he=37492,ce=37496,ue=37808,de=37809,pe=37810,ve=37811,ye=37812,_e=37813,xe=37814,Se=37815,be=37816,Te=37817,Me=37818,we=37819,Ee=37820,Ae=37821,Ce=36492,Pe=36494,Re=36495,Le=36284,De=36285,Ie=36286,Ne="",Be="srgb",at="srgb-linear",Oe="display-p3",st="display-p3-linear",ot="linear",fe="srgb",lt="rec709",ht="p3",ct="300 es",ut=1035;class dt{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){var i;return void 0!==this._listeners&&void 0!==(i=this._listeners)[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0!==this._listeners){var i=this._listeners[e];if(void 0!==i){let e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}dispatchEvent(i){if(void 0!==this._listeners){var e=this._listeners[i.type];if(void 0!==e){i.target=this;var n=e.slice(0);for(let e=0,t=n.length;e<t;e++)n[e].call(this,i);i.target=null}}}}let r=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],pt=1234567,ft=Math.PI/180,mt=180/Math.PI;function gt(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(r[255&e]+r[e>>8&255]+r[e>>16&255]+r[e>>24&255]+"-"+r[255&t]+r[t>>8&255]+"-"+r[t>>16&15|64]+r[t>>24&255]+"-"+r[63&i|128]+r[i>>8&255]+"-"+r[i>>16&255]+r[i>>24&255]+r[255&n]+r[n>>8&255]+r[n>>16&255]+r[n>>24&255]).toLowerCase()}function y(e,t,i){return Math.max(t,Math.min(i,e))}function vt(e,t){return(e%t+t)%t}function yt(e,t,i){return(1-i)*e+i*t}function _t(e){return 0==(e&e-1)&&0!==e}function xt(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function St(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function bt(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function a(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var Tt={DEG2RAD:ft,RAD2DEG:mt,generateUUID:gt,clamp:y,euclideanModulo:vt,mapLinear:function(e,t,i,n,r){return n+(e-t)*(r-n)/(i-t)},inverseLerp:function(e,t,i){return e!==t?(i-e)/(t-e):0},lerp:yt,damp:function(e,t,i,n){return yt(e,t,1-Math.exp(-i*n))},pingpong:function(e,t=1){return t-Math.abs(vt(e,2*t)-t)},smoothstep:function(e,t,i){return e<=t?0:i<=e?1:(e=(e-t)/(i-t))*e*(3-2*e)},smootherstep:function(e,t,i){return e<=t?0:i<=e?1:(e=(e-t)/(i-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(pt=e);e=pt+=1831565813,e=Math.imul(e^e>>>15,1|e);return(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/4294967296},degToRad:function(e){return e*ft},radToDeg:function(e){return e*mt},isPowerOfTwo:_t,ceilPowerOfTwo:xt,floorPowerOfTwo:St,setQuaternionFromProperEuler:function(e,t,i,n,r){var a=Math.cos,s=Math.sin,o=a(i/2),l=s(i/2),h=a((t+n)/2),c=s((t+n)/2),u=a((t-n)/2),d=s((t-n)/2),p=a((n-t)/2),f=s((n-t)/2);switch(r){case"XYX":e.set(o*c,l*u,l*d,o*h);break;case"YZY":e.set(l*d,o*c,l*u,o*h);break;case"ZXZ":e.set(l*u,l*d,o*c,o*h);break;case"XZX":e.set(o*c,l*f,l*p,o*h);break;case"YXY":e.set(l*p,o*c,l*f,o*h);break;case"ZYZ":e.set(l*f,l*p,o*c,o*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:a,denormalize:bt};class Fe{constructor(e=0,t=0){Fe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){var t=this.x,i=this.y,e=e.elements;return this.x=e[0]*t+e[3]*i+e[6],this.y=e[1]*t+e[4]*i+e[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());return 0===t?Math.PI/2:(e=this.dot(e)/t,Math.acos(y(e,-1,1)))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){var t=this.x-e.x,e=this.y-e.y;return t*t+e*e}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){var i=Math.cos(t),t=Math.sin(t),n=this.x-e.x,r=this.y-e.y;return this.x=n*i-r*t+e.x,this.y=n*t+r*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class g{constructor(e,t,i,n,r,a,s,o,l){g.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,n,r,a,s,o,l)}set(e,t,i,n,r,a,s,o,l){var h=this.elements;return h[0]=e,h[1]=n,h[2]=s,h[3]=t,h[4]=r,h[5]=o,h[6]=i,h[7]=a,h[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){var t=this.elements,e=e.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){e=e.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){var e=e.elements,t=t.elements,i=this.elements,n=e[0],r=e[3],a=e[6],s=e[1],o=e[4],l=e[7],h=e[2],c=e[5],e=e[8],u=t[0],d=t[3],p=t[6],f=t[1],m=t[4],g=t[7],v=t[2],y=t[5],t=t[8];return i[0]=n*u+r*f+a*v,i[3]=n*d+r*m+a*y,i[6]=n*p+r*g+a*t,i[1]=s*u+o*f+l*v,i[4]=s*d+o*m+l*y,i[7]=s*p+o*g+l*t,i[2]=h*u+c*f+e*v,i[5]=h*d+c*m+e*y,i[8]=h*p+c*g+e*t,this}multiplyScalar(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){var e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],e=e[8];return t*a*e-t*s*l-i*r*e+i*s*o+n*r*l-n*a*o}invert(){var e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],h=e[8],c=h*a-s*l,u=s*o-h*r,d=l*r-a*o,p=t*c+i*u+n*d;return 0==p?this.set(0,0,0,0,0,0,0,0,0):(e[0]=c*(c=1/p),e[1]=(n*l-h*i)*c,e[2]=(s*i-n*a)*c,e[3]=u*c,e[4]=(h*t-n*o)*c,e[5]=(n*r-s*t)*c,e[6]=d*c,e[7]=(i*o-l*t)*c,e[8]=(a*t-i*r)*c,this)}transpose(){var e=this.elements,t=e[1];return e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,n,r,a,s){var o=Math.cos(r),r=Math.sin(r);return this.set(i*o,i*r,-i*(o*a+r*s)+a+e,-n*r,n*o,-n*(-r*a+o*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(Mt.makeScale(e,t)),this}rotate(e){return this.premultiply(Mt.makeRotation(-e)),this}translate(e,t){return this.premultiply(Mt.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){var t=Math.cos(e),e=Math.sin(e);return this.set(t,-e,0,e,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){var t=this.elements,i=e.elements;for(let e=0;e<9;e++)if(t[e]!==i[e])return!1;return!0}fromArray(t,i=0){for(let e=0;e<9;e++)this.elements[e]=t[e+i];return this}toArray(e=[],t=0){var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}let Mt=new g;function wt(t){for(let e=t.length-1;0<=e;--e)if(65535<=t[e])return 1}let Et={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function At(e,t){return new Et[e](t)}function Ct(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Pt(){var e=Ct("canvas");return e.style.display="block",e}let Rt={};function Lt(e){e in Rt||(Rt[e]=!0,console.warn(e))}let Dt=(new g).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),It=(new g).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Nt={[at]:{transfer:ot,primaries:lt,toReference:e=>e,fromReference:e=>e},[Be]:{transfer:fe,primaries:lt,toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[st]:{transfer:ot,primaries:ht,toReference:e=>e.applyMatrix3(It),fromReference:e=>e.applyMatrix3(Dt)},[Oe]:{transfer:fe,primaries:ht,toReference:e=>e.convertSRGBToLinear().applyMatrix3(It),fromReference:e=>e.applyMatrix3(Dt).convertLinearToSRGB()}},Ot=new Set([at,st]),me={enabled:!0,_workingColorSpace:at,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(e){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!e},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!Ot.has(e))throw new Error(`Unsupported working color space, "${e}".`);this._workingColorSpace=e},convert:function(e,t,i){return!1!==this.enabled&&t!==i&&t&&i?(t=Nt[t].toReference,(0,Nt[i].fromReference)(t(e))):e},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return Nt[e].primaries},getTransfer:function(e){return e===Ne?ot:Nt[e].transfer}};function Ut(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Bt(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let Ft;class Gt{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;var i;return 2048<(t=e instanceof HTMLCanvasElement?e:((Ft=void 0===Ft?Ct("canvas"):Ft).width=e.width,Ft.height=e.height,i=Ft.getContext("2d"),e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),Ft)).width||2048<t.height?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var t=Ct("canvas"),i=(t.width=e.width,t.height=e.height,t.getContext("2d")),n=(i.drawImage(e,0,0,e.width,e.height),i.getImageData(0,0,e.width,e.height)),r=n.data;for(let e=0;e<r.length;e++)r[e]=255*Ut(r[e]/255);return i.putImageData(n,0,0),t}if(e.data){var a=e.data.slice(0);for(let e=0;e<a.length;e++)a instanceof Uint8Array||a instanceof Uint8ClampedArray?a[e]=Math.floor(255*Ut(a[e]/255)):a[e]=Ut(a[e]);return{data:a,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let kt=0;class Ht{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:kt++}),this.uuid=gt(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let i;if(Array.isArray(r)){i=[];for(let e=0,t=r.length;e<t;e++)r[e].isDataTexture?i.push(zt(r[e].image)):i.push(zt(r[e]))}else i=zt(r);n.url=i}return t||(e.images[this.uuid]=n),n}}function zt(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?Gt.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Vt=0;class c extends dt{constructor(e=c.DEFAULT_IMAGE,t=c.DEFAULT_MAPPING,i=1001,n=1001,r=1006,a=1008,s=1023,o=1009,l=c.DEFAULT_ANISOTROPY,h=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Vt++}),this.uuid=gt(),this.name="",this.source=new Ht(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=n,this.magFilter=r,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new Fe(0,0),this.repeat=new Fe(1,1),this.center=new Fe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new g,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof h?this.colorSpace=h:(Lt("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=3001===h?Be:Ne),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){var t,i=void 0===e||"string"==typeof e;return i||void 0===e.textures[this.uuid]?(t={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment},0<Object.keys(this.userData).length&&(t.userData=this.userData),i||(e.textures[this.uuid]=t),t):e.textures[this.uuid]}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300===this.mapping){if(e.applyMatrix3(this.matrix),e.x<0||1<e.x)switch(this.wrapS){case Y:e.x=e.x-Math.floor(e.x);break;case K:e.x=e.x<0?0:1;break;case $:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||1<e.y)switch(this.wrapT){case Y:e.y=e.y-Math.floor(e.y);break;case K:e.y=e.y<0?0:1;break;case $:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}return e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Lt("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Be?3001:3e3}set encoding(e){Lt("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=3001===e?Be:Ne}}c.DEFAULT_IMAGE=null,c.DEFAULT_MAPPING=300,c.DEFAULT_ANISOTROPY=1;class Ge{constructor(e=0,t=0,i=0,n=1){Ge.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){var t=this.x,i=this.y,n=this.z,r=this.w,e=e.elements;return this.x=e[0]*t+e[4]*i+e[8]*n+e[12]*r,this.y=e[1]*t+e[5]*i+e[9]*n+e[13]*r,this.z=e[2]*t+e[6]*i+e[10]*n+e[14]*r,this.w=e[3]*t+e[7]*i+e[11]*n+e[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let s,o,l,h,t=e.elements,c=t[0],u=t[4],d=t[8],p=t[1],f=t[5],m=t[9],g=t[2],v=t[6],y=t[10];if(Math.abs(u-p)<.01&&Math.abs(d-g)<.01&&Math.abs(m-v)<.01)if(Math.abs(u+p)<.1&&Math.abs(d+g)<.1&&Math.abs(m+v)<.1&&Math.abs(c+f+y-3)<.1)this.set(1,0,0,0);else{s=Math.PI;let e=(c+1)/2,t=(f+1)/2,i=(y+1)/2,n=(u+p)/4,r=(d+g)/4,a=(m+v)/4;e>t&&e>i?h=e<.01?(o=0,l=.707106781):(o=Math.sqrt(e),l=n/o,r/o):t>i?h=t<.01?(o=.707106781,l=0,.707106781):(l=Math.sqrt(t),o=n/l,a/l):i<.01?(o=.707106781,l=.707106781,h=0):(h=Math.sqrt(i),o=r/h,l=a/h),this.set(o,l,h,s)}else{let e=Math.sqrt((v-m)*(v-m)+(d-g)*(d-g)+(p-u)*(p-u));Math.abs(e)<.001&&(e=1),this.x=(v-m)/e,this.y=(d-g)/e,this.z=(p-u)/e,this.w=Math.acos((c+f+y-1)/2)}return this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Wt extends dt{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ge(0,0,e,t),this.scissorTest=!1,this.viewport=new Ge(0,0,e,t);e={width:e,height:t,depth:1};void 0!==i.encoding&&(Lt("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=3001===i.encoding?Be:Ne),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:X,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new c(e,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(e,t,i=1){this.width===e&&this.height===t&&this.depth===i||(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;var t=Object.assign({},e.texture.image);return this.texture.source=new Ht(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Xt extends Wt{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class jt extends c{constructor(e=null,t=1,i=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=W,this.minFilter=W,this.wrapR=K,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class qt extends c{constructor(e=null,t=1,i=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=W,this.minFilter=W,this.wrapR=K,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Yt{constructor(e=0,t=0,i=0,n=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=n}static slerpFlat(e,t,i,n,r,s,o){let l=i[n+0],h=i[n+1],c=i[n+2],u=i[n+3];var d=r[s+0],p=r[s+1],f=r[s+2],s=r[s+3];if(0===o)e[t+0]=l,e[t+1]=h,e[t+2]=c,e[t+3]=u;else if(1===o)e[t+0]=d,e[t+1]=p,e[t+2]=f,e[t+3]=s;else{if(u!==s||l!==d||h!==p||c!==f){let i=1-o,n=l*d+h*p+c*f+u*s,r=0<=n?1:-1,a=1-n*n;if(a>Number.EPSILON){let e=Math.sqrt(a),t=Math.atan2(e,n*r);i=Math.sin(i*t)/e,o=Math.sin(o*t)/e}let e=o*r;if(l=l*i+d*e,h=h*i+p*e,c=c*i+f*e,u=u*i+s*e,i===1-o){let e=1/Math.sqrt(l*l+h*h+c*c+u*u);l*=e,h*=e,c*=e,u*=e}}e[t]=l,e[t+1]=h,e[t+2]=c,e[t+3]=u}}static multiplyQuaternionsFlat(e,t,i,n,r,a){var s=i[n],o=i[n+1],l=i[n+2],i=i[n+3],n=r[a],h=r[a+1],c=r[a+2],r=r[a+3];return e[t]=s*r+i*n+o*c-l*h,e[t+1]=o*r+i*h+l*n-s*c,e[t+2]=l*r+i*c+s*h-o*n,e[t+3]=i*r-s*n-o*h-l*c,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){var i=e._x,n=e._y,r=e._z,a=e._order,e=Math.cos,s=Math.sin,o=e(i/2),l=e(n/2),h=e(r/2),c=s(i/2),u=s(n/2),d=s(r/2);switch(a){case"XYZ":this._x=c*l*h+o*u*d,this._y=o*u*h-c*l*d,this._z=o*l*d+c*u*h,this._w=o*l*h-c*u*d;break;case"YXZ":this._x=c*l*h+o*u*d,this._y=o*u*h-c*l*d,this._z=o*l*d-c*u*h,this._w=o*l*h+c*u*d;break;case"ZXY":this._x=c*l*h-o*u*d,this._y=o*u*h+c*l*d,this._z=o*l*d+c*u*h,this._w=o*l*h-c*u*d;break;case"ZYX":this._x=c*l*h-o*u*d,this._y=o*u*h+c*l*d,this._z=o*l*d-c*u*h,this._w=o*l*h+c*u*d;break;case"YZX":this._x=c*l*h+o*u*d,this._y=o*u*h+c*l*d,this._z=o*l*d-c*u*h,this._w=o*l*h-c*u*d;break;case"XZY":this._x=c*l*h-o*u*d,this._y=o*u*h-c*l*d,this._z=o*l*d+c*u*h,this._w=o*l*h+c*u*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){var t=t/2,i=Math.sin(t);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(t),this._onChangeCallback(),this}setFromRotationMatrix(e){var e=e.elements,t=e[0],i=e[4],n=e[8],r=e[1],a=e[5],s=e[9],o=e[2],l=e[6],h=e[10],c=t+a+h;if(0<c){let e=.5/Math.sqrt(c+1);this._w=.25/e,this._x=(l-s)*e,this._y=(n-o)*e,this._z=(r-i)*e}else if(a<t&&h<t){let e=2*Math.sqrt(1+t-a-h);this._w=(l-s)/e,this._x=.25*e,this._y=(i+r)/e,this._z=(n+o)/e}else if(h<a){let e=2*Math.sqrt(1+a-t-h);this._w=(n-o)/e,this._x=(i+r)/e,this._y=.25*e,this._z=(s+l)/e}else{let e=2*Math.sqrt(1+h-t-a);this._w=(r-i)/e,this._x=(n+o)/e,this._y=(s+l)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0):(this._x=0,this._y=-e.z,this._z=e.y)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x),this._w=i,this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(y(this.dot(e),-1,1)))}rotateTowards(e,t){var i=this.angleTo(e);return 0!==i&&(t=Math.min(1,t/i),this.slerp(e,t)),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(e=1/e),this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){var i=e._x,n=e._y,r=e._z,e=e._w,a=t._x,s=t._y,o=t._z,t=t._w;return this._x=i*t+e*a+n*o-r*s,this._y=n*t+e*s+r*a-i*o,this._z=r*t+e*o+i*s-n*a,this._w=e*t-i*a-n*s-r*o,this._onChangeCallback(),this}slerp(t,i){if(0!==i){if(1===i)return this.copy(t);var n=this._x,r=this._y,a=this._z,s=this._w;let e=s*t._w+n*t._x+r*t._y+a*t._z;if(e<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,e=-e):this.copy(t),1<=e)this._w=s,this._x=n,this._y=r,this._z=a;else{t=1-e*e;if(t<=Number.EPSILON){let e=1-i;this._w=e*s+i*this._w,this._x=e*n+i*this._x,this._y=e*r+i*this._y,this._z=e*a+i*this._z,this.normalize()}else{var t=Math.sqrt(t),o=Math.atan2(t,e),l=Math.sin((1-i)*o)/t,i=Math.sin(i*o)/t;this._w=s*l+this._w*i,this._x=n*l+this._x*i,this._y=r*l+this._y*i,this._z=a*l+this._z*i}this._onChangeCallback()}}return this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){var e=Math.random(),t=Math.sqrt(1-e),e=Math.sqrt(e),i=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(t*Math.cos(i),e*Math.sin(n),e*Math.cos(n),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ke{constructor(e=0,t=0,i=0){ke.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Zt.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Zt.setFromAxisAngle(e,t))}applyMatrix3(e){var t=this.x,i=this.y,n=this.z,e=e.elements;return this.x=e[0]*t+e[3]*i+e[6]*n,this.y=e[1]*t+e[4]*i+e[7]*n,this.z=e[2]*t+e[5]*i+e[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){var t=this.x,i=this.y,n=this.z,e=e.elements,r=1/(e[3]*t+e[7]*i+e[11]*n+e[15]);return this.x=(e[0]*t+e[4]*i+e[8]*n+e[12])*r,this.y=(e[1]*t+e[5]*i+e[9]*n+e[13])*r,this.z=(e[2]*t+e[6]*i+e[10]*n+e[14])*r,this}applyQuaternion(e){var t=this.x,i=this.y,n=this.z,r=e.x,a=e.y,s=e.z,e=e.w,o=2*(a*n-s*i),l=2*(s*t-r*n),h=2*(r*i-a*t);return this.x=t+e*o+a*h-s*l,this.y=i+e*l+s*o-r*h,this.z=n+e*h+r*l-a*o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){var t=this.x,i=this.y,n=this.z,e=e.elements;return this.x=e[0]*t+e[4]*i+e[8]*n,this.y=e[1]*t+e[5]*i+e[9]*n,this.z=e[2]*t+e[6]*i+e[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){var i=e.x,n=e.y,e=e.z,r=t.x,a=t.y,t=t.z;return this.x=n*t-e*a,this.y=e*r-i*t,this.z=i*a-n*r,this}projectOnVector(e){var t=e.lengthSq();return 0===t?this.set(0,0,0):(t=e.dot(this)/t,this.copy(e).multiplyScalar(t))}projectOnPlane(e){return Kt.copy(this).projectOnVector(e),this.sub(Kt)}reflect(e){return this.sub(Kt.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());return 0===t?Math.PI/2:(e=this.dot(e)/t,Math.acos(y(e,-1,1)))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){var t=this.x-e.x,i=this.y-e.y,e=this.z-e.z;return t*t+i*i+e*e}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){var n=Math.sin(t)*e;return this.x=n*Math.sin(i),this.y=Math.cos(t)*e,this.z=n*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){e=e.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(e){var t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),e=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=e,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}let Kt=new ke,Zt=new Yt;class Jt{constructor(e=new ke(1/0,1/0,1/0),t=new ke(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(i){this.makeEmpty();for(let e=0,t=i.length;e<t;e+=3)this.expandByPoint($t.fromArray(i,e));return this}setFromBufferAttribute(i){this.makeEmpty();for(let e=0,t=i.count;e<t;e++)this.expandByPoint($t.fromBufferAttribute(i,e));return this}setFromPoints(i){this.makeEmpty();for(let e=0,t=i.length;e<t;e++)this.expandByPoint(i[e]);return this}setFromCenterAndSize(e,t){t=$t.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(t),this.max.copy(e).add(t),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(n,r=!1){n.updateWorldMatrix(!1,!1);var e=n.geometry;if(void 0!==e){let i=e.getAttribute("position");if(!0===r&&void 0!==i&&!0!==n.isInstancedMesh)for(let e=0,t=i.count;e<t;e++)!0===n.isMesh?n.getVertexPosition(e,$t):$t.fromBufferAttribute(i,e),$t.applyMatrix4(n.matrixWorld),this.expandByPoint($t);else void 0!==n.boundingBox?(null===n.boundingBox&&n.computeBoundingBox(),ei.copy(n.boundingBox)):(null===e.boundingBox&&e.computeBoundingBox(),ei.copy(e.boundingBox)),ei.applyMatrix4(n.matrixWorld),this.union(ei)}let i=n.children;for(let e=0,t=i.length;e<t;e++)this.expandByObject(i[e],r);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,$t),$t.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return i=0<e.normal.x?(t=e.normal.x*this.min.x,e.normal.x*this.max.x):(t=e.normal.x*this.max.x,e.normal.x*this.min.x),0<e.normal.y?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){return!this.isEmpty()&&(this.getCenter(oi),li.subVectors(this.max,oi),ti.subVectors(e.a,oi),ii.subVectors(e.b,oi),ni.subVectors(e.c,oi),ri.subVectors(ii,ti),ai.subVectors(ni,ii),si.subVectors(ti,ni),!!ui([0,-ri.z,ri.y,0,-ai.z,ai.y,0,-si.z,si.y,ri.z,0,-ri.x,ai.z,0,-ai.x,si.z,0,-si.x,-ri.y,ri.x,0,-ai.y,ai.x,0,-si.y,si.x,0],ti,ii,ni,li))&&!!ui([1,0,0,0,1,0,0,0,1],ti,ii,ni,li)&&(hi.crossVectors(ri,ai),ui([hi.x,hi.y,hi.z],ti,ii,ni,li))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,$t).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize($t).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Qt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Qt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Qt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Qt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Qt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Qt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Qt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Qt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Qt)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}let Qt=[new ke,new ke,new ke,new ke,new ke,new ke,new ke,new ke],$t=new ke,ei=new Jt,ti=new ke,ii=new ke,ni=new ke,ri=new ke,ai=new ke,si=new ke,oi=new ke,li=new ke,hi=new ke,ci=new ke;function ui(i,n,r,a,s){for(let e=0,t=i.length-3;e<=t;e+=3){ci.fromArray(i,e);var o=s.x*Math.abs(ci.x)+s.y*Math.abs(ci.y)+s.z*Math.abs(ci.z),l=n.dot(ci),h=r.dot(ci),c=a.dot(ci);if(Math.max(-Math.max(l,h,c),Math.min(l,h,c))>o)return!1}return!0}let di=new Jt,pi=new ke,fi=new ke;class mi{constructor(e=new ke,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(i,e){var n=this.center;void 0!==e?n.copy(e):di.setFromPoints(i).getCenter(n);let r=0;for(let e=0,t=i.length;e<t;e++)r=Math.max(r,n.distanceToSquared(i[e]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){var i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?e.makeEmpty():(e.set(this.center,this.center),e.expandByScalar(this.radius)),e}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())this.center.copy(e),this.radius=0;else{pi.subVectors(e,this.center);var i=pi.lengthSq();if(i>this.radius*this.radius){let e=Math.sqrt(i),t=.5*(e-this.radius);this.center.addScaledVector(pi,t/e),this.radius+=t}}return this}union(e){return e.isEmpty()||(this.isEmpty()?this.copy(e):!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(fi.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(pi.copy(e.center).add(fi)),this.expandByPoint(pi.copy(e.center).sub(fi)))),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}let gi=new ke,vi=new ke,yi=new ke,_i=new ke,xi=new ke,Si=new ke,bi=new ke;class Ti{constructor(e=new ke,t=new ke(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,gi)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);e=t.dot(this.direction);return e<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,e)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){var t=gi.subVectors(e,this.origin).dot(this.direction);return(t<0?this.origin:(gi.copy(this.origin).addScaledVector(this.direction,t),gi)).distanceToSquared(e)}distanceSqToSegment(e,t,i,n){vi.copy(e).add(t).multiplyScalar(.5),yi.copy(t).sub(e).normalize(),_i.copy(this.origin).sub(vi);var e=.5*e.distanceTo(t),t=-this.direction.dot(yi),r=_i.dot(this.direction),a=-_i.dot(yi),s=_i.lengthSq(),o=Math.abs(1-t*t);let l,h,c,u;if(0<o)if(l=t*a-r,h=t*r-a,u=e*o,0<=l)if(h>=-u)if(h<=u){let e=1/o;l*=e,h*=e,c=l*(l+t*h+2*r)+h*(t*l+h+2*a)+s}else h=e,l=Math.max(0,-(t*h+r)),c=-l*l+h*(h+2*a)+s;else h=-e,l=Math.max(0,-(t*h+r)),c=-l*l+h*(h+2*a)+s;else c=h<=-u?(l=Math.max(0,-(-t*e+r)),h=0<l?-e:Math.min(Math.max(-e,-a),e),-l*l+h*(h+2*a)+s):h<=u?(l=0,(h=Math.min(Math.max(-e,-a),e))*(h+2*a)+s):(l=Math.max(0,-(t*e+r)),h=0<l?e:Math.min(Math.max(-e,-a),e),-l*l+h*(h+2*a)+s);else h=0<t?-e:e,l=Math.max(0,-(t*h+r)),c=-l*l+h*(h+2*a)+s;return i&&i.copy(this.origin).addScaledVector(this.direction,l),n&&n.copy(vi).addScaledVector(yi,h),c}intersectSphere(e,t){gi.subVectors(e.center,this.origin);var i=gi.dot(this.direction),n=gi.dot(gi)-i*i,e=e.radius*e.radius;return e<n||(n=i-(e=Math.sqrt(e-n)),(i=i+e)<0)?null:n<0?this.at(i,t):this.at(n,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){var t=e.normal.dot(this.direction);return 0===t?0===e.distanceToPoint(this.origin)?0:null:0<=(e=-(this.origin.dot(e.normal)+e.constant)/t)?e:null}intersectPlane(e,t){e=this.distanceToPlane(e);return null===e?null:this.at(e,t)}intersectsPlane(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,n,r,a,s,o;var l=1/this.direction.x,h=1/this.direction.y,c=1/this.direction.z,u=this.origin;return n=0<=l?(i=(e.min.x-u.x)*l,(e.max.x-u.x)*l):(i=(e.max.x-u.x)*l,(e.min.x-u.x)*l),a=0<=h?(r=(e.min.y-u.y)*h,(e.max.y-u.y)*h):(r=(e.max.y-u.y)*h,(e.min.y-u.y)*h),i>a||r>n||((r>i||isNaN(i))&&(i=r),(a<n||isNaN(n))&&(n=a),o=0<=c?(s=(e.min.z-u.z)*c,(e.max.z-u.z)*c):(s=(e.max.z-u.z)*c,(e.min.z-u.z)*c),i>o)||s>n||((s>i||i!=i)&&(i=s),(n=o<n||n!=n?o:n)<0)?null:this.at(0<=i?i:n,t)}intersectsBox(e){return null!==this.intersectBox(e,gi)}intersectTriangle(e,t,i,n,r){xi.subVectors(t,e),Si.subVectors(i,e),bi.crossVectors(xi,Si);let a,s=this.direction.dot(bi);if(0<s){if(n)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}_i.subVectors(this.origin,e);t=a*this.direction.dot(Si.crossVectors(_i,Si));return t<0||(i=a*this.direction.dot(xi.cross(_i)))<0||t+i>s||(n=-a*_i.dot(bi))<0?null:this.at(n/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class He{constructor(e,t,i,n,r,a,s,o,l,h,c,u,d,p,f,m){He.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,n,r,a,s,o,l,h,c,u,d,p,f,m)}set(e,t,i,n,r,a,s,o,l,h,c,u,d,p,f,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=n,g[1]=r,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=h,g[10]=c,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new He).fromArray(this.elements)}copy(e){var t=this.elements,e=e.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],this}copyPosition(e){var t=this.elements,e=e.elements;return t[12]=e[12],t[13]=e[13],t[14]=e[14],this}setFromMatrix3(e){e=e.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){var t=this.elements,i=e.elements,n=1/Mi.setFromMatrixColumn(e,0).length(),r=1/Mi.setFromMatrixColumn(e,1).length(),e=1/Mi.setFromMatrixColumn(e,2).length();return t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*e,t[9]=i[9]*e,t[10]=i[10]*e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let r=this.elements,t=e.x,i=e.y,n=e.z,a=Math.cos(t),s=Math.sin(t),o=Math.cos(i),l=Math.sin(i),h=Math.cos(n),c=Math.sin(n);if("XYZ"===e.order){let e=a*h,t=a*c,i=s*h,n=s*c;r[0]=o*h,r[4]=-o*c,r[8]=l,r[1]=t+i*l,r[5]=e-n*l,r[9]=-s*o,r[2]=n-e*l,r[6]=i+t*l,r[10]=a*o}else if("YXZ"===e.order){let e=o*h,t=o*c,i=l*h,n=l*c;r[0]=e+n*s,r[4]=i*s-t,r[8]=a*l,r[1]=a*c,r[5]=a*h,r[9]=-s,r[2]=t*s-i,r[6]=n+e*s,r[10]=a*o}else if("ZXY"===e.order){let e=o*h,t=o*c,i=l*h,n=l*c;r[0]=e-n*s,r[4]=-a*c,r[8]=i+t*s,r[1]=t+i*s,r[5]=a*h,r[9]=n-e*s,r[2]=-a*l,r[6]=s,r[10]=a*o}else if("ZYX"===e.order){let e=a*h,t=a*c,i=s*h,n=s*c;r[0]=o*h,r[4]=i*l-t,r[8]=e*l+n,r[1]=o*c,r[5]=n*l+e,r[9]=t*l-i,r[2]=-l,r[6]=s*o,r[10]=a*o}else if("YZX"===e.order){let e=a*o,t=a*l,i=s*o,n=s*l;r[0]=o*h,r[4]=n-e*c,r[8]=i*c+t,r[1]=c,r[5]=a*h,r[9]=-s*h,r[2]=-l*h,r[6]=t*c+i,r[10]=e-n*c}else if("XZY"===e.order){let e=a*o,t=a*l,i=s*o,n=s*l;r[0]=o*h,r[4]=-c,r[8]=l*h,r[1]=e*c+n,r[5]=a*h,r[9]=t*c-i,r[2]=i*c-t,r[6]=s*h,r[10]=n*c+e}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ei,e,Ai)}lookAt(e,t,i){var n=this.elements;return Ri.subVectors(e,t),0===Ri.lengthSq()&&(Ri.z=1),Ri.normalize(),Ci.crossVectors(i,Ri),0===Ci.lengthSq()&&(1===Math.abs(i.z)?Ri.x+=1e-4:Ri.z+=1e-4,Ri.normalize(),Ci.crossVectors(i,Ri)),Ci.normalize(),Pi.crossVectors(Ri,Ci),n[0]=Ci.x,n[4]=Pi.x,n[8]=Ri.x,n[1]=Ci.y,n[5]=Pi.y,n[9]=Ri.y,n[2]=Ci.z,n[6]=Pi.z,n[10]=Ri.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){var e=e.elements,t=t.elements,i=this.elements,n=e[0],r=e[4],a=e[8],s=e[12],o=e[1],l=e[5],h=e[9],c=e[13],u=e[2],d=e[6],p=e[10],f=e[14],m=e[3],g=e[7],v=e[11],e=e[15],y=t[0],_=t[4],x=t[8],S=t[12],b=t[1],T=t[5],M=t[9],w=t[13],E=t[2],A=t[6],C=t[10],P=t[14],R=t[3],L=t[7],D=t[11],t=t[15];return i[0]=n*y+r*b+a*E+s*R,i[4]=n*_+r*T+a*A+s*L,i[8]=n*x+r*M+a*C+s*D,i[12]=n*S+r*w+a*P+s*t,i[1]=o*y+l*b+h*E+c*R,i[5]=o*_+l*T+h*A+c*L,i[9]=o*x+l*M+h*C+c*D,i[13]=o*S+l*w+h*P+c*t,i[2]=u*y+d*b+p*E+f*R,i[6]=u*_+d*T+p*A+f*L,i[10]=u*x+d*M+p*C+f*D,i[14]=u*S+d*w+p*P+f*t,i[3]=m*y+g*b+v*E+e*R,i[7]=m*_+g*T+v*A+e*L,i[11]=m*x+g*M+v*C+e*D,i[15]=m*S+g*w+v*P+e*t,this}multiplyScalar(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){var e=this.elements,t=e[0],i=e[4],n=e[8],r=e[12],a=e[1],s=e[5],o=e[9],l=e[13],h=e[2],c=e[6],u=e[10],d=e[14];return e[3]*(+r*o*c-n*l*c-r*s*u+i*l*u+n*s*d-i*o*d)+e[7]*(+t*o*d-t*l*u+r*a*u-n*a*d+n*l*h-r*o*h)+e[11]*(+t*l*c-t*s*d-r*a*c+i*a*d+r*s*h-i*l*h)+e[15]*(-n*s*h-t*o*c+t*s*u+n*a*c-i*a*u+i*o*h)}transpose(){var e=this.elements,t=e[1];return e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){var n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=i),this}invert(){var e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],h=e[8],c=e[9],u=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=c*m*l-f*u*l+f*o*d-s*m*d-c*o*g+s*u*g,y=p*u*l-h*m*l-p*o*d+a*m*d+h*o*g-a*u*g,_=h*f*l-p*c*l+p*s*d-a*f*d-h*s*g+a*c*g,x=p*c*o-h*f*o-p*s*u+a*f*u+h*s*m-a*c*m,S=t*v+i*y+n*_+r*x;return 0==S?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(e[0]=v*(v=1/S),e[1]=(f*u*r-c*m*r-f*n*d+i*m*d+c*n*g-i*u*g)*v,e[2]=(s*m*r-f*o*r+f*n*l-i*m*l-s*n*g+i*o*g)*v,e[3]=(c*o*r-s*u*r-c*n*l+i*u*l+s*n*d-i*o*d)*v,e[4]=y*v,e[5]=(h*m*r-p*u*r+p*n*d-t*m*d-h*n*g+t*u*g)*v,e[6]=(p*o*r-a*m*r-p*n*l+t*m*l+a*n*g-t*o*g)*v,e[7]=(a*u*r-h*o*r+h*n*l-t*u*l-a*n*d+t*o*d)*v,e[8]=_*v,e[9]=(p*c*r-h*f*r-p*i*d+t*f*d+h*i*g-t*c*g)*v,e[10]=(a*f*r-p*s*r+p*i*l-t*f*l-a*i*g+t*s*g)*v,e[11]=(h*s*r-a*c*r-h*i*l+t*c*l+a*i*d-t*s*d)*v,e[12]=x*v,e[13]=(h*f*n-p*c*n+p*i*u-t*f*u-h*i*m+t*c*m)*v,e[14]=(p*s*n-a*f*n-p*i*o+t*f*o+a*i*m-t*s*m)*v,e[15]=(a*c*n-h*s*n+h*i*o-t*c*o-a*i*u+t*s*u)*v,this)}scale(e){var t=this.elements,i=e.x,n=e.y,e=e.z;return t[0]*=i,t[4]*=n,t[8]*=e,t[1]*=i,t[5]*=n,t[9]*=e,t[2]*=i,t[6]*=n,t[10]*=e,t[3]*=i,t[7]*=n,t[11]*=e,this}getMaxScaleOnAxis(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];return Math.sqrt(Math.max(t,e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){var t=Math.cos(e),e=Math.sin(e);return this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this}makeRotationY(e){var t=Math.cos(e),e=Math.sin(e);return this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this}makeRotationZ(e){var t=Math.cos(e),e=Math.sin(e);return this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){var i=Math.cos(t),t=Math.sin(t),n=1-i,r=e.x,a=e.y,e=e.z,s=n*r,o=n*a;return this.set(s*r+i,s*a-t*e,s*e+t*a,0,s*a+t*e,o*a+i,o*e-t*r,0,s*e-t*a,o*e+t*r,n*e*e+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,n,r,a){return this.set(1,i,r,0,e,1,a,0,t,n,1,0,0,0,0,1),this}compose(e,t,i){var n=this.elements,r=t._x,a=t._y,s=t._z,t=t._w,o=r+r,l=a+a,h=s+s,c=r*o,u=r*l,r=r*h,d=a*l,a=a*h,s=s*h,o=t*o,l=t*l,t=t*h,h=i.x,p=i.y,i=i.z;return n[0]=(1-(d+s))*h,n[1]=(u+t)*h,n[2]=(r-l)*h,n[3]=0,n[4]=(u-t)*p,n[5]=(1-(c+s))*p,n[6]=(a+o)*p,n[7]=0,n[8]=(r+l)*i,n[9]=(a-o)*i,n[10]=(1-(c+d))*i,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,i){var n=this.elements;let r=Mi.set(n[0],n[1],n[2]).length();var a=Mi.set(n[4],n[5],n[6]).length(),s=Mi.set(n[8],n[9],n[10]).length(),e=(this.determinant()<0&&(r=-r),e.x=n[12],e.y=n[13],e.z=n[14],wi.copy(this),1/r),n=1/a,o=1/s;return wi.elements[0]*=e,wi.elements[1]*=e,wi.elements[2]*=e,wi.elements[4]*=n,wi.elements[5]*=n,wi.elements[6]*=n,wi.elements[8]*=o,wi.elements[9]*=o,wi.elements[10]*=o,t.setFromRotationMatrix(wi),i.x=r,i.y=a,i.z=s,this}makePerspective(e,t,i,n,r,a,s=2e3){var o=this.elements,l=2*r/(t-e),h=2*r/(i-n),t=(t+e)/(t-e),e=(i+n)/(i-n);let c,u;if(2e3===s)c=-(a+r)/(a-r),u=-2*a*r/(a-r);else{if(2001!==s)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);c=-a/(a-r),u=-a*r/(a-r)}return o[0]=l,o[4]=0,o[8]=t,o[12]=0,o[1]=0,o[5]=h,o[9]=e,o[13]=0,o[2]=0,o[6]=0,o[10]=c,o[14]=u,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,i,n,r,a,s=2e3){var o=this.elements,l=1/(t-e),h=1/(i-n),c=1/(a-r),t=(t+e)*l,e=(i+n)*h;let u,d;if(2e3===s)u=(a+r)*c,d=-2*c;else{if(2001!==s)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);u=r*c,d=-1*c}return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-t,o[1]=0,o[5]=2*h,o[9]=0,o[13]=-e,o[2]=0,o[6]=0,o[10]=d,o[14]=-u,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){var t=this.elements,i=e.elements;for(let e=0;e<16;e++)if(t[e]!==i[e])return!1;return!0}fromArray(t,i=0){for(let e=0;e<16;e++)this.elements[e]=t[e+i];return this}toArray(e=[],t=0){var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}let Mi=new ke,wi=new He,Ei=new ke(0,0,0),Ai=new ke(1,1,1),Ci=new ke,Pi=new ke,Ri=new ke,Li=new He,Di=new Yt;class Ii{constructor(e=0,t=0,i=0,n=Ii.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,n=this._order){return this._x=e,this._y=t,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){var e=e.elements,n=e[0],r=e[4],a=e[8],s=e[1],o=e[5],l=e[9],h=e[2],c=e[6],u=e[10];switch(t){case"XYZ":this._y=Math.asin(y(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,u),this._z=Math.atan2(-r,n)):(this._x=Math.atan2(c,o),this._z=0);break;case"YXZ":this._x=Math.asin(-y(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,u),this._z=Math.atan2(s,o)):(this._y=Math.atan2(-h,n),this._z=0);break;case"ZXY":this._x=Math.asin(y(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(-h,u),this._z=Math.atan2(-r,o)):(this._y=0,this._z=Math.atan2(s,n));break;case"ZYX":this._y=Math.asin(-y(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(c,u),this._z=Math.atan2(s,n)):(this._x=0,this._z=Math.atan2(-r,o));break;case"YZX":this._z=Math.asin(y(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,o),this._y=Math.atan2(-h,n)):(this._x=0,this._y=Math.atan2(a,u));break;case"XZY":this._z=Math.asin(-y(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(c,o),this._y=Math.atan2(a,n)):(this._x=Math.atan2(-l,u),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===i&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return Li.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Li,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Di.setFromEuler(this),this.setFromQuaternion(Di,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ii.DEFAULT_ORDER="XYZ";class Ni{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let Oi=0,Ui=new ke,Bi=new Yt,Fi=new He,Gi=new ke,ki=new ke,Hi=new ke,zi=new Yt,Vi=new ke(1,0,0),Wi=new ke(0,1,0),Xi=new ke(0,0,1),ji={type:"added"},qi={type:"removed"};class p extends dt{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Oi++}),this.uuid=gt(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=p.DEFAULT_UP.clone();let e=new ke,t=new Ii,i=new Yt,n=new ke(1,1,1);t._onChange(function(){i.setFromEuler(t,!1)}),i._onChange(function(){t.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new He},normalMatrix:{value:new g}}),this.matrix=new He,this.matrixWorld=new He,this.matrixAutoUpdate=p.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=p.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Ni,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Bi.setFromAxisAngle(e,t),this.quaternion.multiply(Bi),this}rotateOnWorldAxis(e,t){return Bi.setFromAxisAngle(e,t),this.quaternion.premultiply(Bi),this}rotateX(e){return this.rotateOnAxis(Vi,e)}rotateY(e){return this.rotateOnAxis(Wi,e)}rotateZ(e){return this.rotateOnAxis(Xi,e)}translateOnAxis(e,t){return Ui.copy(e).applyQuaternion(this.quaternion),this.position.add(Ui.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Vi,e)}translateY(e){return this.translateOnAxis(Wi,e)}translateZ(e){return this.translateOnAxis(Xi,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Fi.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Gi.copy(e):Gi.set(e,t,i);e=this.parent;this.updateWorldMatrix(!0,!1),ki.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fi.lookAt(ki,Gi,this.up):Fi.lookAt(Gi,ki,this.up),this.quaternion.setFromRotationMatrix(Fi),e&&(Fi.extractRotation(e.matrixWorld),Bi.setFromRotationMatrix(Fi),this.quaternion.premultiply(Bi.invert()))}add(e){if(1<arguments.length)for(let e=0;e<arguments.length;e++)this.add(arguments[e]);else e===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",e):e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),(e.parent=this).children.push(e),e.dispatchEvent(ji)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e);return this}remove(e){if(1<arguments.length)for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);else{var t=this.children.indexOf(e);-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(qi))}return this}removeFromParent(){var e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Fi.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Fi.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fi),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(i,n){if(this[i]===n)return this;for(let e=0,t=this.children.length;e<t;e++){var r=this.children[e].getObjectByProperty(i,n);if(void 0!==r)return r}}getObjectsByProperty(i,n){let r=[];this[i]===n&&r.push(this);for(let e=0,t=this.children.length;e<t;e++){var a=this.children[e].getObjectsByProperty(i,n);0<a.length&&(r=r.concat(a))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ki,e,Hi),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ki,zi,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(i){i(this);var n=this.children;for(let e=0,t=n.length;e<t;e++)n[e].traverse(i)}traverseVisible(i){if(!1!==this.visible){i(this);var n=this.children;for(let e=0,t=n.length;e<t;e++)n[e].traverseVisible(i)}}traverseAncestors(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(i){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||i)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),i=!(this.matrixWorldNeedsUpdate=!1));var n=this.children;for(let e=0,t=n.length;e<t;e++){var r=n[e];!0!==r.matrixWorldAutoUpdate&&!0!==i||r.updateMatrixWorld(i)}}updateWorldMatrix(e,t){let i=this.parent;if(!0===e&&null!==i&&!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){let i=this.children;for(let t=0,e=i.length;t<e;t++){let e=i[t];!0===e.matrixWorldAutoUpdate&&e.updateWorldMatrix(!1,!0)}}}toJSON(l){let e=void 0===l||"string"==typeof l,h={},n=(e&&(l={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},h.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"}),{});function r(e,t){return void 0===e[t.uuid]&&(e[t.uuid]=t.toJSON(l)),t.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),0<Object.keys(this.userData).length&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),n.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor)&&(n.instanceColor=this.instanceColor.toJSON()),this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(l).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(n.environment=this.environment.toJSON(l).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=r(l.geometries,this.geometry);let e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){let i=e.shapes;if(Array.isArray(i))for(let t=0,e=i.length;t<e;t++){let e=i[t];r(l.shapes,e)}else r(l.shapes,i)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton)&&(r(l.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid),void 0!==this.material)if(Array.isArray(this.material)){let i=[];for(let e=0,t=this.material.length;e<t;e++)i.push(r(l.materials,this.material[e]));n.material=i}else n.material=r(l.materials,this.material);if(0<this.children.length){n.children=[];for(let e=0;e<this.children.length;e++)n.children.push(this.children[e].toJSON(l).object)}if(0<this.animations.length){n.animations=[];for(let t=0;t<this.animations.length;t++){let e=this.animations[t];n.animations.push(r(l.animations,e))}}if(e){let e=c(l.geometries),t=c(l.materials),i=c(l.textures),n=c(l.images),r=c(l.shapes),a=c(l.skeletons),s=c(l.animations),o=c(l.nodes);0<e.length&&(h.geometries=e),0<t.length&&(h.materials=t),0<i.length&&(h.textures=i),0<n.length&&(h.images=n),0<r.length&&(h.shapes=r),0<a.length&&(h.skeletons=a),0<s.length&&(h.animations=s),0<o.length&&(h.nodes=o)}return h.object=n,h;function c(e){var t,i=[];for(t in e){var n=e[t];delete n.metadata,i.push(n)}return i}}clone(e){return(new this.constructor).copy(this,e)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){var i=t.children[e];this.add(i.clone())}return this}}p.DEFAULT_UP=new ke(0,1,0),p.DEFAULT_MATRIX_AUTO_UPDATE=!0,p.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;let Yi=new ke,Ki=new ke,Zi=new ke,Ji=new ke,Qi=new ke,$i=new ke,en=new ke,tn=new ke,nn=new ke,rn=new ke,an=!1;class sn{constructor(e=new ke,t=new ke,i=new ke){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,n){n.subVectors(i,t),Yi.subVectors(e,t),n.cross(Yi);i=n.lengthSq();return 0<i?n.multiplyScalar(1/Math.sqrt(i)):n.set(0,0,0)}static getBarycoord(e,t,i,n,r){Yi.subVectors(n,t),Ki.subVectors(i,t),Zi.subVectors(e,t);var n=Yi.dot(Yi),i=Yi.dot(Ki),e=Yi.dot(Zi),t=Ki.dot(Ki),a=Ki.dot(Zi),s=n*t-i*i;return 0==s?r.set(-2,-1,-1):r.set(1-(t=(t*e-i*a)*(r=1/s))-(s=(n*a-i*e)*r),s,t)}static containsPoint(e,t,i,n){return this.getBarycoord(e,t,i,n,Ji),0<=Ji.x&&0<=Ji.y&&Ji.x+Ji.y<=1}static getUV(e,t,i,n,r,a,s,o){return!1===an&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),an=!0),this.getInterpolation(e,t,i,n,r,a,s,o)}static getInterpolation(e,t,i,n,r,a,s,o){return this.getBarycoord(e,t,i,n,Ji),o.setScalar(0),o.addScaledVector(r,Ji.x),o.addScaledVector(a,Ji.y),o.addScaledVector(s,Ji.z),o}static isFrontFacing(e,t,i,n){return Yi.subVectors(i,t),Ki.subVectors(e,t),Yi.cross(Ki).dot(n)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this}setFromAttributeAndIndices(e,t,i,n){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Yi.subVectors(this.c,this.b),Ki.subVectors(this.a,this.b),.5*Yi.cross(Ki).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return sn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return sn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,n,r){return!1===an&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),an=!0),sn.getInterpolation(e,this.a,this.b,this.c,t,i,n,r)}getInterpolation(e,t,i,n,r){return sn.getInterpolation(e,this.a,this.b,this.c,t,i,n,r)}containsPoint(e){return sn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return sn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){var i=this.a,n=this.b,r=this.c;let a,s;Qi.subVectors(n,i),$i.subVectors(r,i),tn.subVectors(e,i);var o=Qi.dot(tn),l=$i.dot(tn);if(o<=0&&l<=0)return t.copy(i);nn.subVectors(e,n);var h=Qi.dot(nn),c=$i.dot(nn);if(0<=h&&c<=h)return t.copy(n);var u=o*c-h*l;if(u<=0&&0<=o&&h<=0)return a=o/(o-h),t.copy(i).addScaledVector(Qi,a);rn.subVectors(e,r);var e=Qi.dot(rn),d=$i.dot(rn);return 0<=d&&e<=d?t.copy(r):(o=e*l-o*d)<=0&&0<=l&&d<=0?(s=l/(l-d),t.copy(i).addScaledVector($i,s)):(l=h*d-e*c)<=0&&0<=c-h&&0<=e-d?(en.subVectors(r,n),s=(c-h)/(c-h+(e-d)),t.copy(n).addScaledVector(en,s)):(r=1/(l+o+u),a=o*r,s=u*r,t.copy(i).addScaledVector(Qi,a).addScaledVector($i,s))}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let on={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ln={h:0,s:0,l:0},hn={h:0,s:0,l:0};function cn(e,t,i){return i<0&&(i+=1),1<i&&--i,i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e}class ze{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(t,e,i){if(void 0===e&&void 0===i){let e=t;e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e)}else this.setRGB(t,e,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Be){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,me.toWorkingColorSpace(this,t),this}setRGB(e,t,i,n=me.workingColorSpace){return this.r=e,this.g=t,this.b=i,me.toWorkingColorSpace(this,n),this}setHSL(i,n,r,e=me.workingColorSpace){if(i=vt(i,1),n=y(n,0,1),r=y(r,0,1),0===n)this.r=this.g=this.b=r;else{let e=r<=.5?r*(1+n):r+n-r*n,t=2*r-e;this.r=cn(t,e,i+1/3),this.g=cn(t,e,i),this.b=cn(t,e,i-1/3)}return me.toWorkingColorSpace(this,e),this}setStyle(i,n=Be){function t(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+i+" will be ignored.")}var r;if(r=/^(\w+)\(([^\)]*)\)/.exec(i)){let e;var a=r[1],s=r[2];switch(a){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return t(e[4]),this.setRGB(Math.min(255,parseInt(e[1],10))/255,Math.min(255,parseInt(e[2],10))/255,Math.min(255,parseInt(e[3],10))/255,n);if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return t(e[4]),this.setRGB(Math.min(100,parseInt(e[1],10))/100,Math.min(100,parseInt(e[2],10))/100,Math.min(100,parseInt(e[3],10))/100,n);break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return t(e[4]),this.setHSL(parseFloat(e[1])/360,parseFloat(e[2])/100,parseFloat(e[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+i)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(i)){let e=r[1],t=e.length;if(3===t)return this.setRGB(parseInt(e.charAt(0),16)/15,parseInt(e.charAt(1),16)/15,parseInt(e.charAt(2),16)/15,n);if(6===t)return this.setHex(parseInt(e,16),n);console.warn("THREE.Color: Invalid hex color "+i)}else if(i&&0<i.length)return this.setColorName(i,n);return this}setColorName(e,t=Be){var i=on[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ut(e.r),this.g=Ut(e.g),this.b=Ut(e.b),this}copyLinearToSRGB(e){return this.r=Bt(e.r),this.g=Bt(e.g),this.b=Bt(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Be){return me.fromWorkingColorSpace(h.copy(this),e),65536*Math.round(y(255*h.r,0,255))+256*Math.round(y(255*h.g,0,255))+Math.round(y(255*h.b,0,255))}getHexString(e=Be){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=me.workingColorSpace){me.fromWorkingColorSpace(h.copy(this),t);var i=h.r,n=h.g,r=h.b,t=Math.max(i,n,r),a=Math.min(i,n,r);let s,o;var l=(a+t)/2;if(a===t)s=0,o=0;else{let e=t-a;switch(o=l<=.5?e/(t+a):e/(2-t-a),t){case i:s=(n-r)/e+(n<r?6:0);break;case n:s=(r-i)/e+2;break;case r:s=(i-n)/e+4}s/=6}return e.h=s,e.s=o,e.l=l,e}getRGB(e,t=me.workingColorSpace){return me.fromWorkingColorSpace(h.copy(this),t),e.r=h.r,e.g=h.g,e.b=h.b,e}getStyle(e=Be){me.fromWorkingColorSpace(h.copy(this),e);var t=h.r,i=h.g,n=h.b;return e!==Be?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${n.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*n)})`}offsetHSL(e,t,i){return this.getHSL(ln),this.setHSL(ln.h+e,ln.s+t,ln.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(ln),e.getHSL(hn);var e=yt(ln.h,hn.h,t),i=yt(ln.s,hn.s,t),t=yt(ln.l,hn.l,t);return this.setHSL(e,i,t),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){var t=this.r,i=this.g,n=this.b,e=e.elements;return this.r=e[0]*t+e[3]*i+e[6]*n,this.g=e[1]*t+e[4]*i+e[7]*n,this.b=e[2]*t+e[5]*i+e[8]*n,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let h=new ze,un=(ze.NAMES=on,0);class t extends dt{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:un++}),this.uuid=gt(),this.name="",this.type="Material",this.blending=1,this.side=We,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=J,this.blendDst=Q,this.blendEquation=Z,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ze(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){0<this._alphaTest!=0<e&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(var t in e){var i,n=e[t];void 0===n?console.warn(`THREE.Material: parameter '${t}' has value of undefined.`):void 0!==(i=this[t])?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(i){let e=void 0===i||"string"==typeof i;e&&(i={textures:{},images:{}});var n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){var t,i=[];for(t in e){var n=e[t];delete n.metadata,i.push(n)}return i}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(i).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(i).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(i).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(i).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(i).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(i).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(i).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(i).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(i).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(i).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(i).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(i).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(i).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(i).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(i).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(i).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(i).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(i).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(i).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(i).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(i).uuid,void 0!==this.combine)&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(i).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(i).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(i).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),this.side!==We&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==J&&(n.blendSrc=this.blendSrc),this.blendDst!==Q&&(n.blendDst=this.blendDst),this.blendEquation!==Z&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),7680!==this.stencilFail&&(n.stencilFail=this.stencilFail),7680!==this.stencilZFail&&(n.stencilZFail=this.stencilZFail),7680!==this.stencilZPass&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),0<this.alphaTest&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),0<Object.keys(this.userData).length&&(n.userData=this.userData),e){let e=r(i.textures),t=r(i.images);0<e.length&&(n.textures=e),0<t.length&&(n.images=t)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var i=e.clippingPlanes;let n=null;if(null!==i){let t=i.length;n=new Array(t);for(let e=0;e!==t;++e)n[e]=i[e].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class dn extends t{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=O,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}let pn=(()=>{let e=new ArrayBuffer(4),t=new Float32Array(e),i=new Uint32Array(e),n=new Uint32Array(512),r=new Uint32Array(512);for(let t=0;t<256;++t){let e=t-127;e<-27?(n[t]=0,n[256|t]=32768,r[t]=24,r[256|t]=24):e<-14?(n[t]=1024>>-e-14,n[256|t]=1024>>-e-14|32768,r[t]=-e-1,r[256|t]=-e-1):e<=15?(n[t]=15+e<<10,n[256|t]=15+e<<10|32768,r[t]=13,r[256|t]=13):e<128?(n[t]=31744,n[256|t]=64512,r[t]=24,r[256|t]=24):(n[t]=31744,n[256|t]=64512,r[t]=13,r[256|t]=13)}var a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let i=1;i<1024;++i){let e=i<<13,t=0;for(;0==(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,a[i]=e|t}for(let e=1024;e<2048;++e)a[e]=939524096+(e-1024<<13);for(let e=1;e<31;++e)s[e]=e<<23;s[31]=1199570944,s[32]=2147483648;for(let e=33;e<63;++e)s[e]=2147483648+(e-32<<23);s[63]=3347054592;for(let e=1;e<64;++e)32!==e&&(o[e]=1024);return{floatView:t,uint32View:i,baseTable:n,shiftTable:r,mantissaTable:a,exponentTable:s,offsetTable:o}})();function fn(e){65504<Math.abs(e)&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=y(e,-65504,65504),pn.floatView[0]=e;var e=pn.uint32View[0],t=e>>23&511;return pn.baseTable[t]+((8388607&e)>>pn.shiftTable[t])}function mn(e){var t=e>>10;return pn.uint32View[0]=pn.mantissaTable[pn.offsetTable[t]+(1023&e)]+pn.exponentTable[t],pn.floatView[0]}let gn={toHalfFloat:fn,fromHalfFloat:mn},n=new ke,vn=new Fe;class A{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=35044,this.updateRange={offset:0,count:-1},this.gpuType=Ze,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(i,n,r){i*=this.itemSize,r*=n.itemSize;for(let e=0,t=this.itemSize;e<t;e++)this.array[i+e]=n.array[r+e];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(i){if(2===this.itemSize)for(let e=0,t=this.count;e<t;e++)vn.fromBufferAttribute(this,e),vn.applyMatrix3(i),this.setXY(e,vn.x,vn.y);else if(3===this.itemSize)for(let e=0,t=this.count;e<t;e++)n.fromBufferAttribute(this,e),n.applyMatrix3(i),this.setXYZ(e,n.x,n.y,n.z);return this}applyMatrix4(i){for(let e=0,t=this.count;e<t;e++)n.fromBufferAttribute(this,e),n.applyMatrix4(i),this.setXYZ(e,n.x,n.y,n.z);return this}applyNormalMatrix(i){for(let e=0,t=this.count;e<t;e++)n.fromBufferAttribute(this,e),n.applyNormalMatrix(i),this.setXYZ(e,n.x,n.y,n.z);return this}transformDirection(i){for(let e=0,t=this.count;e<t;e++)n.fromBufferAttribute(this,e),n.transformDirection(i),this.setXYZ(e,n.x,n.y,n.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return i=this.normalized?bt(i,this.array):i}setComponent(e,t,i){return this.normalized&&(i=a(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return t=this.normalized?bt(t,this.array):t}setX(e,t){return this.normalized&&(t=a(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return t=this.normalized?bt(t,this.array):t}setY(e,t){return this.normalized&&(t=a(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return t=this.normalized?bt(t,this.array):t}setZ(e,t){return this.normalized&&(t=a(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return t=this.normalized?bt(t,this.array):t}setW(e,t){return this.normalized&&(t=a(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=a(t,this.array),i=a(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,n){return e*=this.itemSize,this.normalized&&(t=a(t,this.array),i=a(i,this.array),n=a(n,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this}setXYZW(e,t,i,n,r){return e*=this.itemSize,this.normalized&&(t=a(t,this.array),i=a(i,this.array),n=a(n,this.array),r=a(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}class yn extends A{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class _n extends A{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class F extends A{constructor(e,t,i){super(new Float32Array(e),t,i)}}let xn=0,Sn=new He,bn=new p,Tn=new ke,Mn=new Jt,wn=new Jt,u=new ke;class C extends dt{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:xn++}),this.uuid=gt(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(wt(e)?_n:yn)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(t){let e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);var i=this.attributes.normal;if(void 0!==i){let e=(new g).getNormalMatrix(t);i.applyNormalMatrix(e),i.needsUpdate=!0}i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Sn.makeRotationFromQuaternion(e),this.applyMatrix4(Sn),this}rotateX(e){return Sn.makeRotationX(e),this.applyMatrix4(Sn),this}rotateY(e){return Sn.makeRotationY(e),this.applyMatrix4(Sn),this}rotateZ(e){return Sn.makeRotationZ(e),this.applyMatrix4(Sn),this}translate(e,t,i){return Sn.makeTranslation(e,t,i),this.applyMatrix4(Sn),this}scale(e,t,i){return Sn.makeScale(e,t,i),this.applyMatrix4(Sn),this}lookAt(e){return bn.lookAt(e),bn.updateMatrix(),this.applyMatrix4(bn.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Tn).negate(),this.translate(Tn.x,Tn.y,Tn.z),this}setFromPoints(i){var n=[];for(let e=0,t=i.length;e<t;e++){var r=i[e];n.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new F(n,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Jt);var e=this.attributes.position,i=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ke(-1/0,-1/0,-1/0),new ke(1/0,1/0,1/0));else{if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),i)for(let e=0,t=i.length;e<t;e++){var n=i[e];Mn.setFromBufferAttribute(n),this.morphTargetsRelative?(u.addVectors(this.boundingBox.min,Mn.min),this.boundingBox.expandByPoint(u),u.addVectors(this.boundingBox.max,Mn.max),this.boundingBox.expandByPoint(u)):(this.boundingBox.expandByPoint(Mn.min),this.boundingBox.expandByPoint(Mn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new mi);var n=this.attributes.position,r=this.morphAttributes.position;if(n&&n.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ke,1/0);else if(n){var a=this.boundingSphere.center;if(Mn.setFromBufferAttribute(n),r)for(let e=0,t=r.length;e<t;e++){var s=r[e];wn.setFromBufferAttribute(s),this.morphTargetsRelative?(u.addVectors(Mn.min,wn.min),Mn.expandByPoint(u),u.addVectors(Mn.max,wn.max),Mn.expandByPoint(u)):(Mn.expandByPoint(wn.min),Mn.expandByPoint(wn.max))}Mn.getCenter(a);let i=0;for(let e=0,t=n.count;e<t;e++)u.fromBufferAttribute(n,e),i=Math.max(i,a.distanceToSquared(u));if(r)for(let e=0,t=r.length;e<t;e++){var o=r[e],l=this.morphTargetsRelative;for(let e=0,t=o.count;e<t;e++)u.fromBufferAttribute(o,e),l&&(Tn.fromBufferAttribute(n,e),u.add(Tn)),i=Math.max(i,a.distanceToSquared(u))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,b=this.attributes;if(null===e||void 0===b.position||void 0===b.normal||void 0===b.uv)console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");else{let r=e.array,a=b.position.array,i=b.normal.array,s=b.uv.array,t=a.length/3,n=(!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new A(new Float32Array(4*t),4)),this.getAttribute("tangent").array),o=[],l=[];for(let e=0;e<t;e++)o[e]=new ke,l[e]=new ke;let h=new ke,c=new ke,u=new ke,d=new Fe,p=new Fe,f=new Fe,m=new ke,g=new ke,v=this.groups;for(let e=0,t=(v=0===v.length?[{start:0,count:r.length}]:v).length;e<t;++e){let i=v[e],n=i.start;for(let e=n,t=n+i.count;e<t;e+=3)T(r[e+0],r[e+1],r[e+2])}let y=new ke,_=new ke,x=new ke,S=new ke;for(let e=0,t=v.length;e<t;++e){let i=v[e],n=i.start;for(let e=n,t=n+i.count;e<t;e+=3)M(r[e+0]),M(r[e+1]),M(r[e+2])}function T(e,t,i){h.fromArray(a,3*e),c.fromArray(a,3*t),u.fromArray(a,3*i),d.fromArray(s,2*e),p.fromArray(s,2*t),f.fromArray(s,2*i),c.sub(h),u.sub(h),p.sub(d),f.sub(d);var n=1/(p.x*f.y-f.x*p.y);isFinite(n)&&(m.copy(c).multiplyScalar(f.y).addScaledVector(u,-p.y).multiplyScalar(n),g.copy(u).multiplyScalar(p.x).addScaledVector(c,-f.x).multiplyScalar(n),o[e].add(m),o[t].add(m),o[i].add(m),l[e].add(g),l[t].add(g),l[i].add(g))}function M(e){x.fromArray(i,3*e),S.copy(x);var t=o[e],t=(y.copy(t),y.sub(x.multiplyScalar(x.dot(t))).normalize(),_.crossVectors(S,t),_.dot(l[e])<0?-1:1);n[4*e]=y.x,n[4*e+1]=y.y,n[4*e+2]=y.z,n[4*e+3]=t}}}computeVertexNormals(){var n=this.index,r=this.getAttribute("position");if(void 0!==r){let i=this.getAttribute("normal");if(void 0===i)i=new A(new Float32Array(3*r.count),3),this.setAttribute("normal",i);else for(let e=0,t=i.count;e<t;e++)i.setXYZ(e,0,0,0);var a=new ke,s=new ke,o=new ke,l=new ke,h=new ke,c=new ke,u=new ke,d=new ke;if(n)for(let e=0,t=n.count;e<t;e+=3){var p=n.getX(e+0),f=n.getX(e+1),m=n.getX(e+2);a.fromBufferAttribute(r,p),s.fromBufferAttribute(r,f),o.fromBufferAttribute(r,m),u.subVectors(o,s),d.subVectors(a,s),u.cross(d),l.fromBufferAttribute(i,p),h.fromBufferAttribute(i,f),c.fromBufferAttribute(i,m),l.add(u),h.add(u),c.add(u),i.setXYZ(p,l.x,l.y,l.z),i.setXYZ(f,h.x,h.y,h.z),i.setXYZ(m,c.x,c.y,c.z)}else for(let e=0,t=r.count;e<t;e+=3)a.fromBufferAttribute(r,e+0),s.fromBufferAttribute(r,e+1),o.fromBufferAttribute(r,e+2),u.subVectors(o,s),d.subVectors(a,s),u.cross(d),i.setXYZ(e+0,u.x,u.y,u.z),i.setXYZ(e+1,u.x,u.y,u.z),i.setXYZ(e+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){var i=this.attributes.normal;for(let e=0,t=i.count;e<t;e++)u.fromBufferAttribute(i,e),u.normalize(),i.setXYZ(e,u.x,u.y,u.z)}toNonIndexed(){function r(i,n){var r=i.array,a=i.itemSize,e=i.normalized,s=new r.constructor(n.length*a);let o=0,l=0;for(let e=0,t=n.length;e<t;e++){o=i.isInterleavedBufferAttribute?n[e]*i.data.stride+i.offset:n[e]*a;for(let e=0;e<a;e++)s[l++]=r[o++]}return new A(s,a,e)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let a=new C,s=this.index.array,i=this.attributes;for(let t in i){let e=r(i[t],s);a.setAttribute(t,e)}let t=this.morphAttributes;for(let e in t){let i=[],n=t[e];for(let t=0,e=n.length;t<e;t++){let e=r(n[t],s);i.push(e)}a.morphAttributes[e]=i}a.morphTargetsRelative=this.morphTargetsRelative;let n=this.groups;for(let t=0,e=n.length;t<e;t++){let e=n[t];a.addGroup(e.start,e.count,e.materialIndex)}return a}toJSON(){var a={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),0<Object.keys(this.userData).length&&(a.userData=this.userData),void 0!==this.parameters){let t=this.parameters;for(let e in t)void 0!==t[e]&&(a[e]=t[e])}else{a.data={attributes:{}};let e=this.index,i=(null!==e&&(a.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)}),this.attributes);for(let t in i){let e=i[t];a.data.attributes[t]=e.toJSON(a.data)}let t={},r=!1;for(let e in this.morphAttributes){let i=this.morphAttributes[e],n=[];for(let t=0,e=i.length;t<e;t++){let e=i[t];n.push(e.toJSON(a.data))}0<n.length&&(t[e]=n,r=!0)}r&&(a.data.morphAttributes=t,a.data.morphTargetsRelative=this.morphTargetsRelative);let n=this.groups;0<n.length&&(a.data.groups=JSON.parse(JSON.stringify(n)));var s=this.boundingSphere;null!==s&&(a.data.boundingSphere={center:s.center.toArray(),radius:s.radius})}return a}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let r={},t=(this.name=e.name,e.index),i=(null!==t&&this.setIndex(t.clone(r)),e.attributes);for(let t in i){let e=i[t];this.setAttribute(t,e.clone(r))}var a=e.morphAttributes;for(let e in a){let i=[],n=a[e];for(let e=0,t=n.length;e<t;e++)i.push(n[e].clone(r));this.morphAttributes[e]=i}this.morphTargetsRelative=e.morphTargetsRelative;var n=e.groups;for(let t=0,e=n.length;t<e;t++){let e=n[t];this.addGroup(e.start,e.count,e.materialIndex)}var s=e.boundingBox,s=(null!==s&&(this.boundingBox=s.clone()),e.boundingSphere);return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}let En=new He,An=new Ti,Cn=new mi,Pn=new ke,Rn=new ke,Ln=new ke,Dn=new ke,In=new ke,Nn=new ke,On=new Fe,Un=new Fe,Bn=new Fe,Fn=new ke,Gn=new ke,kn=new ke,Hn=new ke,zn=new ke;class P extends p{constructor(e=new C,t=new dn){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(0<t.length){var i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=i.length;t<e;t++){let e=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(n,r){let e=this.geometry,t=e.attributes.position,a=e.morphAttributes.position,s=e.morphTargetsRelative;r.fromBufferAttribute(t,n);var o=this.morphTargetInfluences;if(a&&o){Nn.set(0,0,0);for(let i=0,e=a.length;i<e;i++){let e=o[i],t=a[i];0!==e&&(In.fromBufferAttribute(t,n),s?Nn.addScaledVector(In,e):Nn.addScaledVector(In.sub(r),e))}r.add(Nn)}return r}raycast(e,t){var i=this.geometry,n=this.material,r=this.matrixWorld;if(void 0!==n){if(null===i.boundingSphere&&i.computeBoundingSphere(),Cn.copy(i.boundingSphere),Cn.applyMatrix4(r),An.copy(e.ray).recast(e.near),!1===Cn.containsPoint(An.origin)){if(null===An.intersectSphere(Cn,Pn))return;if(An.origin.distanceToSquared(Pn)>(e.far-e.near)**2)return}En.copy(r).invert(),An.copy(e.ray).applyMatrix4(En),null!==i.boundingBox&&!1===An.intersectsBox(i.boundingBox)||this._computeIntersections(e,t,An)}}_computeIntersections(r,a,s){let o,e=this.geometry,l=this.material,h=e.index,c=e.attributes.position,u=e.attributes.uv,d=e.attributes.uv1,p=e.attributes.normal,f=e.groups,m=e.drawRange;if(null!==h)if(Array.isArray(l))for(let e=0,t=f.length;e<t;e++){let i=f[e],n=l[i.materialIndex];for(let e=Math.max(i.start,m.start),t=Math.min(h.count,Math.min(i.start+i.count,m.start+m.count));e<t;e+=3)(o=Vn(this,n,r,s,u,d,p,h.getX(e),h.getX(e+1),h.getX(e+2)))&&(o.faceIndex=Math.floor(e/3),o.face.materialIndex=i.materialIndex,a.push(o))}else for(let e=Math.max(0,m.start),t=Math.min(h.count,m.start+m.count);e<t;e+=3)(o=Vn(this,l,r,s,u,d,p,h.getX(e),h.getX(e+1),h.getX(e+2)))&&(o.faceIndex=Math.floor(e/3),a.push(o));else if(void 0!==c)if(Array.isArray(l))for(let e=0,t=f.length;e<t;e++){let i=f[e],n=l[i.materialIndex];for(let e=Math.max(i.start,m.start),t=Math.min(c.count,Math.min(i.start+i.count,m.start+m.count));e<t;e+=3)(o=Vn(this,n,r,s,u,d,p,e,e+1,e+2))&&(o.faceIndex=Math.floor(e/3),o.face.materialIndex=i.materialIndex,a.push(o))}else for(let e=Math.max(0,m.start),t=Math.min(c.count,m.start+m.count);e<t;e+=3)(o=Vn(this,l,r,s,u,d,p,e,e+1,e+2))&&(o.faceIndex=Math.floor(e/3),a.push(o))}}function Vn(e,t,i,n,r,a,s,o,l,h){e.getVertexPosition(o,Rn),e.getVertexPosition(l,Ln),e.getVertexPosition(h,Dn);t=((e,t,i,n,r,a,s,o)=>null===(t.side===Ue?n.intersectTriangle(s,a,r,!0,o):n.intersectTriangle(r,a,s,t.side===We,o))||(zn.copy(o),zn.applyMatrix4(e.matrixWorld),(n=i.ray.origin.distanceTo(zn))<i.near)||n>i.far?null:{distance:n,point:zn.clone(),object:e})(e,t,i,n,Rn,Ln,Dn,Hn);if(t){r&&(On.fromBufferAttribute(r,o),Un.fromBufferAttribute(r,l),Bn.fromBufferAttribute(r,h),t.uv=sn.getInterpolation(Hn,Rn,Ln,Dn,On,Un,Bn,new Fe)),a&&(On.fromBufferAttribute(a,o),Un.fromBufferAttribute(a,l),Bn.fromBufferAttribute(a,h),t.uv1=sn.getInterpolation(Hn,Rn,Ln,Dn,On,Un,Bn,new Fe),t.uv2=t.uv1),s&&(Fn.fromBufferAttribute(s,o),Gn.fromBufferAttribute(s,l),kn.fromBufferAttribute(s,h),t.normal=sn.getInterpolation(Hn,Rn,Ln,Dn,Fn,Gn,kn,new ke),0<t.normal.dot(n.direction))&&t.normal.multiplyScalar(-1);let e={a:o,b:l,c:h,normal:new ke,materialIndex:0};sn.getNormal(Rn,Ln,Dn,e.normal),t.face=e}return t}class Wn extends C{constructor(e=1,t=1,i=1,n=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:a};let b=this,T=(n=Math.floor(n),r=Math.floor(r),a=Math.floor(a),[]),M=[],w=[],E=[],A=0,C=0;function s(r,a,s,o,l,e,t,h,c,u,i){var d=e/c,p=t/u,f=e/2,m=t/2,g=h/2,v=c+1,y=u+1;let _=0,x=0;var S=new ke;for(let n=0;n<y;n++){let i=n*p-m;for(let t=0;t<v;t++){let e=t*d-f;S[r]=e*o,S[a]=i*l,S[s]=g,M.push(S.x,S.y,S.z),S[r]=0,S[a]=0,S[s]=0<h?1:-1,w.push(S.x,S.y,S.z),E.push(t/c),E.push(1-n/u),_+=1}}for(let a=0;a<u;a++)for(let r=0;r<c;r++){let e=A+r+v*a,t=A+r+v*(a+1),i=A+(r+1)+v*(a+1),n=A+(r+1)+v*a;T.push(e,t,n),T.push(t,i,n),x+=6}b.addGroup(C,x,i),C+=x,A+=_}s("z","y","x",-1,-1,i,t,e,a,r,0),s("z","y","x",1,-1,i,t,-e,a,r,1),s("x","z","y",1,1,e,i,t,n,a,2),s("x","z","y",1,-1,e,i,-t,n,a,3),s("x","y","z",1,-1,e,t,i,n,r,4),s("x","y","z",-1,-1,e,t,-i,n,r,5),this.setIndex(T),this.setAttribute("position",new F(M,3)),this.setAttribute("normal",new F(w,3)),this.setAttribute("uv",new F(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wn(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Xn(e){var t,i={};for(t in e)for(var n in i[t]={},e[t]){var r=e[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),i[t][n]=null):i[t][n]=r.clone():Array.isArray(r)?i[t][n]=r.slice():i[t][n]=r}return i}function i(t){var i={};for(let e=0;e<t.length;e++){var n=Xn(t[e]);for(let e in n)i[e]=n[e]}return i}function jn(e){return null===e.getRenderTarget()?e.outputColorSpace:me.workingColorSpace}let qn={clone:Xn,merge:i};class Yn extends t{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Xn(e.uniforms),this.uniformsGroups=(t=>{var i=[];for(let e=0;e<t.length;e++)i.push(t[e].clone());return i})(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(t){var i=super.toJSON(t);i.glslVersion=this.glslVersion,i.uniforms={};for(let e in this.uniforms){var n=this.uniforms[e].value;n&&n.isTexture?i.uniforms[e]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?i.uniforms[e]={type:"c",value:n.getHex()}:n&&n.isVector2?i.uniforms[e]={type:"v2",value:n.toArray()}:n&&n.isVector3?i.uniforms[e]={type:"v3",value:n.toArray()}:n&&n.isVector4?i.uniforms[e]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?i.uniforms[e]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?i.uniforms[e]={type:"m4",value:n.toArray()}:i.uniforms[e]={value:n}}0<Object.keys(this.defines).length&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader,i.lights=this.lights,i.clipping=this.clipping;let r={};for(let e in this.extensions)!0===this.extensions[e]&&(r[e]=!0);return 0<Object.keys(r).length&&(i.extensions=r),i}}class Kn extends p{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new He,this.projectionMatrix=new He,this.projectionMatrixInverse=new He,this.coordinateSystem=2e3}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class N extends Kn{constructor(e=50,t=1,i=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){e=.5*this.getFilmHeight()/e;this.fov=2*mt*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){var e=Math.tan(.5*ft*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*mt*Math.atan(Math.tan(.5*ft*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,n,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,i=e*Math.tan(.5*ft*this.fov)/this.zoom,n=2*i,r=this.aspect*n,a=-.5*r;var s=this.view;if(null!==this.view&&this.view.enabled){let e=s.fullWidth,t=s.fullHeight;a+=s.offsetX*r/e,i-=s.offsetY*n/t,r*=s.width/e,n*=s.height/t}let t=this.filmOffset;0!==t&&(a+=e*t/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,i,i-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){e=super.toJSON(e);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}class Zn extends p{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;i=new N(-90,1,e,t),i.layers=this.layers,this.add(i),i=new N(-90,1,e,t),i.layers=this.layers,this.add(i),i=new N(-90,1,e,t),i.layers=this.layers,this.add(i),i=new N(-90,1,e,t),i.layers=this.layers,this.add(i),i=new N(-90,1,e,t),i.layers=this.layers,this.add(i),i=new N(-90,1,e,t);i.layers=this.layers,this.add(i)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[i,n,r,a,s,o]=t;for(let e of t)this.remove(e);if(2e3===e)i.up.set(0,1,0),i.lookAt(1,0,0),n.up.set(0,1,0),n.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),o.up.set(0,1,0);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);i.up.set(0,-1,0),i.lookAt(-1,0,0),n.up.set(0,-1,0),n.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),o.up.set(0,-1,0)}o.lookAt(0,0,-1);for(let e of t)this.add(e),e.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();var{renderTarget:i,activeMipmapLevel:n}=this,[r,a,s,o,l,h]=(this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem()),this.children),c=e.getRenderTarget(),u=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.xr.enabled,f=(e.xr.enabled=!1,i.texture.generateMipmaps);i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,n),e.render(t,r),e.setRenderTarget(i,1,n),e.render(t,a),e.setRenderTarget(i,2,n),e.render(t,s),e.setRenderTarget(i,3,n),e.render(t,o),e.setRenderTarget(i,4,n),e.render(t,l),i.texture.generateMipmaps=f,e.setRenderTarget(i,5,n),e.render(t,h),e.setRenderTarget(c,u,d),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class Jn extends c{constructor(e,t,i,n,r,a,s,o,l,h){super(e=void 0!==e?e:[],t=void 0!==t?t:j,i,n,r,a,s,o,l,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Qn extends Xt{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;e={width:e,height:e,depth:1},e=[e,e,e,e,e,e];void 0!==t.encoding&&(Lt("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=3001===t.encoding?Be:Ne),this.texture=new Jn(e,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:X}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={tEquirect:{value:null}},n="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new Wn(5,5,5),s=new Yn({name:"CubemapFromEquirect",uniforms:Xn(i),vertexShader:n,fragmentShader:r,side:Ue,blending:0});s.uniforms.tEquirect.value=t;var o=new P(a,s),l=t.minFilter;return t.minFilter===je&&(t.minFilter=X),new Zn(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(t,i,n,r){var e=t.getRenderTarget();for(let e=0;e<6;e++)t.setRenderTarget(this,e),t.clear(i,n,r);t.setRenderTarget(e)}}let $n=new ke,er=new ke,tr=new g;class ir{constructor(e=new ke(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){i=$n.subVectors(i,t).cross(er.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){var i=e.delta($n),n=this.normal.dot(i);return 0===n?0===this.distanceToPoint(e.start)?t.copy(e.start):null:(n=-(e.start.dot(this.normal)+this.constant)/n)<0||1<n?null:t.copy(e.start).addScaledVector(i,n)}intersectsLine(e){var t=this.distanceToPoint(e.start),e=this.distanceToPoint(e.end);return t<0&&0<e||e<0&&0<t}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){t=t||tr.getNormalMatrix(e),e=this.coplanarPoint($n).applyMatrix4(e),t=this.normal.applyMatrix3(t).normalize();return this.constant=-e.dot(t),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}let nr=new mi,rr=new ke;class ar{constructor(e=new ir,t=new ir,i=new ir,n=new ir,r=new ir,a=new ir){this.planes=[e,t,i,n,r,a]}set(e,t,i,n,r,a){var s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(i),s[3].copy(n),s[4].copy(r),s[5].copy(a),this}copy(t){var i=this.planes;for(let e=0;e<6;e++)i[e].copy(t.planes[e]);return this}setFromProjectionMatrix(e,t=2e3){var i=this.planes,e=e.elements,n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],l=e[5],h=e[6],c=e[7],u=e[8],d=e[9],p=e[10],f=e[11],m=e[12],g=e[13],v=e[14],e=e[15];if(i[0].setComponents(s-n,c-o,f-u,e-m).normalize(),i[1].setComponents(s+n,c+o,f+u,e+m).normalize(),i[2].setComponents(s+r,c+l,f+d,e+g).normalize(),i[3].setComponents(s-r,c-l,f-d,e-g).normalize(),i[4].setComponents(s-a,c-h,f-p,e-v).normalize(),2e3===t)i[5].setComponents(s+a,c+h,f+p,e+v).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(a,h,p,v).normalize()}return this}intersectsObject(e){var t;return(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),nr.copy(e.boundingSphere)):(null===(t=e.geometry).boundingSphere&&t.computeBoundingSphere(),nr.copy(t.boundingSphere))).applyMatrix4(e.matrixWorld),this.intersectsSphere(nr)}intersectsSprite(e){return nr.center.set(0,0,0),nr.radius=.7071067811865476,nr.applyMatrix4(e.matrixWorld),this.intersectsSphere(nr)}intersectsSphere(e){var t=this.planes,i=e.center,n=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(i)<n)return!1;return!0}intersectsBox(t){var i=this.planes;for(let e=0;e<6;e++){var n=i[e];if(rr.x=(0<n.normal.x?t.max:t.min).x,rr.y=(0<n.normal.y?t.max:t.min).y,rr.z=(0<n.normal.z?t.max:t.min).z,n.distanceToPoint(rr)<0)return!1}return!0}containsPoint(t){var i=this.planes;for(let e=0;e<6;e++)if(i[e].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function sr(){let i=null,e=!1,n=null,r=null;function a(e,t){n(e,t),r=i.requestAnimationFrame(a)}return{start:function(){!0!==e&&null!==n&&(r=i.requestAnimationFrame(a),e=!0)},stop:function(){i.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(e){n=e},setContext:function(e){i=e}}}function or(o,e){let l=e.isWebGL2,h=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),h.get(e)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var t=h.get(e);t&&(o.deleteBuffer(t.buffer),h.delete(e))},update:function(t,e){if(t.isGLBufferAttribute){let e=h.get(t);void((!e||e.version<t.version)&&h.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}else{t.isInterleavedBufferAttribute&&(t=t.data);var i,n,r,a,s=h.get(t);void 0===s?h.set(t,((e,t)=>{var i=e.array,n=e.usage,r=o.createBuffer();let a;if(o.bindBuffer(t,r),o.bufferData(t,i,n),e.onUploadCallback(),i instanceof Float32Array)a=o.FLOAT;else if(i instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!l)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");a=o.HALF_FLOAT}else a=o.UNSIGNED_SHORT;else if(i instanceof Int16Array)a=o.SHORT;else if(i instanceof Uint32Array)a=o.UNSIGNED_INT;else if(i instanceof Int32Array)a=o.INT;else if(i instanceof Int8Array)a=o.BYTE;else{if(!(i instanceof Uint8Array||i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);a=o.UNSIGNED_BYTE}return{buffer:r,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}})(t,e)):s.version<t.version&&(i=s.buffer,e=e,r=(n=t).array,a=n.updateRange,o.bindBuffer(e,i),-1===a.count?o.bufferSubData(e,0,r):(l?o.bufferSubData(e,a.offset*r.BYTES_PER_ELEMENT,r,a.offset,a.count):o.bufferSubData(e,a.offset*r.BYTES_PER_ELEMENT,r.subarray(a.offset,a.offset+a.count)),a.count=-1),n.onUploadCallback(),s.version=t.version)}}}}class lr extends C{constructor(e=1,t=1,i=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};let r=e/2,a=t/2,s=Math.floor(i),o=Math.floor(n),l=s+1,h=o+1,c=e/s,u=t/o,d=[],p=[],f=[],m=[];for(let n=0;n<h;n++){let i=n*u-a;for(let t=0;t<l;t++){let e=t*c-r;p.push(e,-i,0),f.push(0,0,1),m.push(t/s),m.push(1-n/o)}}for(let a=0;a<o;a++)for(let r=0;r<s;r++){let e=r+l*a,t=r+l*(a+1),i=r+1+l*(a+1),n=r+1+l*a;d.push(e,t,n),d.push(t,i,n)}this.setIndex(d),this.setAttribute("position",new F(p,3)),this.setAttribute("normal",new F(f,3)),this.setAttribute("uv",new F(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lr(e.width,e.height,e.widthSegments,e.heightSegments)}}let R={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},s={common:{diffuse:{value:new ze(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new g},alphaMap:{value:null},alphaMapTransform:{value:new g},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new g}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new g}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new g}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new g},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new g},normalScale:{value:new Fe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new g},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new g}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new g}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new g}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ze(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ze(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new g},alphaTest:{value:0},uvTransform:{value:new g}},sprite:{diffuse:{value:new ze(16777215)},opacity:{value:1},center:{value:new Fe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new g},alphaMap:{value:null},alphaMapTransform:{value:new g},alphaTest:{value:0}}},hr={basic:{uniforms:i([s.common,s.specularmap,s.envmap,s.aomap,s.lightmap,s.fog]),vertexShader:R.meshbasic_vert,fragmentShader:R.meshbasic_frag},lambert:{uniforms:i([s.common,s.specularmap,s.envmap,s.aomap,s.lightmap,s.emissivemap,s.bumpmap,s.normalmap,s.displacementmap,s.fog,s.lights,{emissive:{value:new ze(0)}}]),vertexShader:R.meshlambert_vert,fragmentShader:R.meshlambert_frag},phong:{uniforms:i([s.common,s.specularmap,s.envmap,s.aomap,s.lightmap,s.emissivemap,s.bumpmap,s.normalmap,s.displacementmap,s.fog,s.lights,{emissive:{value:new ze(0)},specular:{value:new ze(1118481)},shininess:{value:30}}]),vertexShader:R.meshphong_vert,fragmentShader:R.meshphong_frag},standard:{uniforms:i([s.common,s.envmap,s.aomap,s.lightmap,s.emissivemap,s.bumpmap,s.normalmap,s.displacementmap,s.roughnessmap,s.metalnessmap,s.fog,s.lights,{emissive:{value:new ze(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:R.meshphysical_vert,fragmentShader:R.meshphysical_frag},toon:{uniforms:i([s.common,s.aomap,s.lightmap,s.emissivemap,s.bumpmap,s.normalmap,s.displacementmap,s.gradientmap,s.fog,s.lights,{emissive:{value:new ze(0)}}]),vertexShader:R.meshtoon_vert,fragmentShader:R.meshtoon_frag},matcap:{uniforms:i([s.common,s.bumpmap,s.normalmap,s.displacementmap,s.fog,{matcap:{value:null}}]),vertexShader:R.meshmatcap_vert,fragmentShader:R.meshmatcap_frag},points:{uniforms:i([s.points,s.fog]),vertexShader:R.points_vert,fragmentShader:R.points_frag},dashed:{uniforms:i([s.common,s.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:R.linedashed_vert,fragmentShader:R.linedashed_frag},depth:{uniforms:i([s.common,s.displacementmap]),vertexShader:R.depth_vert,fragmentShader:R.depth_frag},normal:{uniforms:i([s.common,s.bumpmap,s.normalmap,s.displacementmap,{opacity:{value:1}}]),vertexShader:R.meshnormal_vert,fragmentShader:R.meshnormal_frag},sprite:{uniforms:i([s.sprite,s.fog]),vertexShader:R.sprite_vert,fragmentShader:R.sprite_frag},background:{uniforms:{uvTransform:{value:new g},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:R.background_vert,fragmentShader:R.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:R.backgroundCube_vert,fragmentShader:R.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:R.cube_vert,fragmentShader:R.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:R.equirect_vert,fragmentShader:R.equirect_frag},distanceRGBA:{uniforms:i([s.common,s.displacementmap,{referencePosition:{value:new ke},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:R.distanceRGBA_vert,fragmentShader:R.distanceRGBA_frag},shadow:{uniforms:i([s.lights,s.fog,{color:{value:new ze(0)},opacity:{value:1}}]),vertexShader:R.shadow_vert,fragmentShader:R.shadow_frag}},cr=(hr.physical={uniforms:i([hr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new g},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new g},clearcoatNormalScale:{value:new Fe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new g},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new g},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new g},sheen:{value:0},sheenColor:{value:new ze(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new g},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new g},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new g},transmissionSamplerSize:{value:new Fe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new g},attenuationDistance:{value:0},attenuationColor:{value:new ze(0)},specularColor:{value:new ze(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new g},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new g},anisotropyVector:{value:new Fe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new g}}]),vertexShader:R.meshphysical_vert,fragmentShader:R.meshphysical_frag},{r:0,b:0,g:0});function ur(a,s,o,l,h,e,c){let u=new ze(0),d,p,f=!0===e?0:1,m=null,g=0,v=null;function y(e,t){e.getRGB(cr,jn(a)),l.buffers.color.setClear(cr.r,cr.g,cr.b,t,c)}return{getClearColor:function(){return u},setClearColor:function(e,t=1){u.set(e),f=t,y(u,f)},getClearAlpha:function(){return f},setClearAlpha:function(e){f=e,y(u,f)},render:function(e,t){let i=!1,n=!0===t.isScene?t.background:null;null===(n=n&&n.isTexture?(0<t.backgroundBlurriness?o:s).get(n):n)?y(u,f):n&&n.isColor&&(y(n,1),i=!0);var r=a.xr.getEnvironmentBlendMode();"additive"===r?l.buffers.color.setClear(0,0,0,1,c):"alpha-blend"===r&&l.buffers.color.setClear(0,0,0,0,c),(a.autoClear||i)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil),n&&(n.isCubeTexture||n.mapping===ge)?(void 0===p&&((p=new P(new Wn(1,1,1),new Yn({name:"BackgroundCubeMaterial",uniforms:Xn(hr.backgroundCube.uniforms),vertexShader:hr.backgroundCube.vertexShader,fragmentShader:hr.backgroundCube.fragmentShader,side:Ue,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(e,t,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),h.update(p)),p.material.uniforms.envMap.value=n,p.material.uniforms.flipEnvMap.value=n.isCubeTexture&&!1===n.isRenderTargetTexture?-1:1,p.material.uniforms.backgroundBlurriness.value=t.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=t.backgroundIntensity,p.material.toneMapped=me.getTransfer(n.colorSpace)!==fe,m===n&&g===n.version&&v===a.toneMapping||(p.material.needsUpdate=!0,m=n,g=n.version,v=a.toneMapping),p.layers.enableAll(),e.unshift(p,p.geometry,p.material,0,0,null)):n&&n.isTexture&&(void 0===d&&((d=new P(new lr(2,2),new Yn({name:"BackgroundMaterial",uniforms:Xn(hr.background.uniforms),vertexShader:hr.background.vertexShader,fragmentShader:hr.background.fragmentShader,side:We,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),h.update(d)),d.material.uniforms.t2D.value=n,d.material.uniforms.backgroundIntensity.value=t.backgroundIntensity,d.material.toneMapped=me.getTransfer(n.colorSpace)!==fe,!0===n.matrixAutoUpdate&&n.updateMatrix(),d.material.uniforms.uvTransform.value.copy(n.matrix),m===n&&g===n.version&&v===a.toneMapping||(d.material.needsUpdate=!0,m=n,g=n.version,v=a.toneMapping),d.layers.enableAll(),e.unshift(d,d.geometry,d.material,0,0,null))}}}function dr(f,m,g,v){let r=f.getParameter(f.MAX_VERTEX_ATTRIBS),y=v.isWebGL2?null:m.get("OES_vertex_array_object"),e=v.isWebGL2||null!==y,_={},t=T(null),x=t,S=!1;function b(e){v.isWebGL2?f.bindVertexArray(e):y.bindVertexArrayOES(e)}function a(e){v.isWebGL2?f.deleteVertexArray(e):y.deleteVertexArrayOES(e)}function T(e){var t=[],i=[],n=[];for(let e=0;e<r;e++)t[e]=0,i[e]=0,n[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:i,attributeDivisors:n,object:e,attributes:{},index:null}}function M(){var i=x.newAttributes;for(let e=0,t=i.length;e<t;e++)i[e]=0}function w(e){E(e,0)}function E(e,t){var i=x.newAttributes,n=x.enabledAttributes,r=x.attributeDivisors;i[e]=1,0===n[e]&&(f.enableVertexAttribArray(e),n[e]=1),r[e]!==t&&((v.isWebGL2?f:m.get("ANGLE_instanced_arrays"))[v.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](e,t),r[e]=t)}function A(){var i=x.newAttributes,n=x.enabledAttributes;for(let e=0,t=n.length;e<t;e++)n[e]!==i[e]&&(f.disableVertexAttribArray(e),n[e]=0)}function C(e,t,i,n,r,a,s){!0===s?f.vertexAttribIPointer(e,t,i,r,a):f.vertexAttribPointer(e,t,i,n,r,a)}function s(){i(),S=!0,x!==t&&b((x=t).object)}function i(){t.geometry=null,t.program=null,t.wireframe=!1}return{setup:function(t,s,i,r,a){let n=!1;if(e){let e=((e,t)=>{var i=!0===s.wireframe;let n=_[e.id],r=(void 0===n&&(n={},_[e.id]=n),n[t.id]),a=(void 0===r&&(r={},n[t.id]=r),r[i]);return void 0===a&&(a=T(v.isWebGL2?f.createVertexArray():y.createVertexArrayOES()),r[i]=a),a})(r,i);if(x!==e&&b((x=e).object),n=((n,e,t,i)=>{var r=x.attributes,a=e.attributes;let s=0;var o=t.getAttributes();for(let i in o)if(0<=o[i].location){let e=r[i],t=a[i];if(void 0===t&&("instanceMatrix"===i&&n.instanceMatrix&&(t=n.instanceMatrix),"instanceColor"===i)&&n.instanceColor&&(t=n.instanceColor),void 0===e)return!0;if(e.attribute!==t)return!0;if(t&&e.data!==t.data)return!0;s++}return x.attributesNum!==s||x.index!==i})(t,r,i,a)){var o=t;var l=r;var h=i;var c=a;var u={},d=l.attributes;let n=0;var p=h.getAttributes();for(let i in p)if(0<=p[i].location){let e=d[i],t=(void 0===e&&("instanceMatrix"===i&&o.instanceMatrix&&(e=o.instanceMatrix),"instanceColor"===i)&&o.instanceColor&&(e=o.instanceColor),{});(t.attribute=e)&&e.data&&(t.data=e.data),u[i]=t,n++}x.attributes=u,x.attributesNum=n,x.index=c}}else{let e=!0===s.wireframe;x.geometry===r.id&&x.program===i.id&&x.wireframe===e||(x.geometry=r.id,x.program=i.id,x.wireframe=e,n=!0)}null!==a&&g.update(a,f.ELEMENT_ARRAY_BUFFER),(n||S)&&(S=!1,((u,t,r,d)=>{if(!1!==v.isWebGL2||!u.isInstancedMesh&&!d.isInstancedBufferGeometry||null!==m.get("ANGLE_instanced_arrays")){M();let e=d.attributes,i=r.getAttributes(),n=t.defaultAttributeValues;for(let t in i){let c=i[t];if(0<=c.location){let h=e[t];if(void 0!==(h=void 0===h&&("instanceMatrix"===t&&u.instanceMatrix&&(h=u.instanceMatrix),"instanceColor"===t)&&u.instanceColor?u.instanceColor:h)){let o=h.normalized,l=h.itemSize,t=g.get(h);if(void 0!==t){let e=t.buffer,r=t.type,a=t.bytesPerElement,s=!0===v.isWebGL2&&(r===f.INT||r===f.UNSIGNED_INT||h.gpuType===ne);if(h.isInterleavedBufferAttribute){let t=h.data,i=t.stride,n=h.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<c.locationSize;e++)E(c.location+e,t.meshPerAttribute);!0!==u.isInstancedMesh&&void 0===d._maxInstanceCount&&(d._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<c.locationSize;e++)w(c.location+e);f.bindBuffer(f.ARRAY_BUFFER,e);for(let e=0;e<c.locationSize;e++)C(c.location+e,l/c.locationSize,r,o,i*a,(n+l/c.locationSize*e)*a,s)}else{if(h.isInstancedBufferAttribute){for(let e=0;e<c.locationSize;e++)E(c.location+e,h.meshPerAttribute);!0!==u.isInstancedMesh&&void 0===d._maxInstanceCount&&(d._maxInstanceCount=h.meshPerAttribute*h.count)}else for(let e=0;e<c.locationSize;e++)w(c.location+e);f.bindBuffer(f.ARRAY_BUFFER,e);for(let e=0;e<c.locationSize;e++)C(c.location+e,l/c.locationSize,r,o,l*a,l/c.locationSize*e*a,s)}}}else if(void 0!==n){let e=n[t];if(void 0!==e)switch(e.length){case 2:f.vertexAttrib2fv(c.location,e);break;case 3:f.vertexAttrib3fv(c.location,e);break;case 4:f.vertexAttrib4fv(c.location,e);break;default:f.vertexAttrib1fv(c.location,e)}}}}A()}})(t,s,i,r),null!==a)&&f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,g.get(a).buffer)},reset:s,resetDefaultState:i,dispose:function(){for(var e in s(),_){var t,i=_[e];for(t in i){var n,r=i[t];for(n in r)a(r[n].object),delete r[n];delete i[t]}delete _[e]}},releaseStatesOfGeometry:function(e){if(void 0!==_[e.id]){var t=_[e.id];for(let e in t){var i=t[e];for(let e in i)a(i[e].object),delete i[e];delete t[e]}delete _[e.id]}},releaseStatesOfProgram:function(e){for(var t in _){t=_[t];if(void 0!==t[e.id]){var i=t[e.id];for(let e in i)a(i[e].object),delete i[e];delete t[e.id]}}},initAttributes:M,enableAttribute:w,disableUnusedAttributes:A}}function pr(a,s,o,e){let l=e.isWebGL2,h;this.setMode=function(e){h=e},this.render=function(e,t){a.drawArrays(h,e,t),o.update(t,h,1)},this.renderInstances=function(i,n,r){if(0!==r){let e,t;if(l)e=a,t="drawArraysInstanced";else if(e=s.get("ANGLE_instanced_arrays"),t="drawArraysInstancedANGLE",null===e)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");e[t](h,i,n,r),o.update(n,h,r)}}}function fr(t,i,e){let n;function r(e){if("highp"===e){if(0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision)return"highp";e="mediump"}return"mediump"===e&&0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision?"mediump":"lowp"}var a="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===t.constructor.name;let s=void 0!==e.precision?e.precision:"highp";var o=r(s),o=(o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o),a||i.has("WEBGL_draw_buffers")),e=!0===e.logarithmicDepthBuffer,l=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),c=t.getParameter(t.MAX_TEXTURE_SIZE),u=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),d=t.getParameter(t.MAX_VERTEX_ATTRIBS),p=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),f=t.getParameter(t.MAX_VARYING_VECTORS),m=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),g=0<h,v=a||i.has("OES_texture_float");return{isWebGL2:a,drawBuffers:o,getMaxAnisotropy:function(){var e;return n=void 0===n?!0===i.has("EXT_texture_filter_anisotropic")?(e=i.get("EXT_texture_filter_anisotropic"),t.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT)):0:n},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:e,maxTextures:l,maxVertexTextures:h,maxTextureSize:c,maxCubemapSize:u,maxAttributes:d,maxVertexUniforms:p,maxVaryings:f,maxFragmentUniforms:m,vertexTextures:g,floatFragmentTextures:v,floatVertexTextures:g&&v,maxSamples:a?t.getParameter(t.MAX_SAMPLES):0}}function mr(t){let l=this,h=null,c=0,u=!1,d=!1,o=new ir,p=new g,f={value:null,needsUpdate:!1};function m(n,t,r,e){var a=null!==n?n.length:0;let s=null;if(0!==a){if(s=f.value,!0!==e||null===s){let e=r+4*a,i=t.matrixWorldInverse;p.getNormalMatrix(i),(null===s||s.length<e)&&(s=new Float32Array(e));for(let e=0,t=r;e!==a;++e,t+=4)o.copy(n[e]).applyMatrix4(i,p),o.normal.toArray(s,t),s[t+3]=o.constant}f.value=s,f.needsUpdate=!0}return l.numPlanes=a,l.numIntersection=0,s}this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){var i=0!==e.length||t||0!==c||u;return u=t,c=e.length,i},this.beginShadows=function(){d=!0,m(null)},this.endShadows=function(){d=!1},this.setGlobalState=function(e,t){h=m(e,t,0)},this.setState=function(i,n,r){var a=i.clippingPlanes,s=i.clipIntersection,e=i.clipShadows,i=t.get(i);if(!u||null===a||0===a.length||d&&!e)d?m(null):(f.value!==h&&(f.value=h,f.needsUpdate=0<c),l.numPlanes=c,l.numIntersection=0);else{let e=d?0:c,t=4*e;var o=i.clippingState||null;f.value=o,o=m(a,n,t,r);for(let e=0;e!==t;++e)o[e]=h[e];i.clippingState=o,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=e}}}function gr(i){let n=new WeakMap;function r(e,t){return t===_?e.mapping=j:t===x&&(e.mapping=q),e}function a(e){var e=e.target,t=(e.removeEventListener("dispose",a),n.get(e));void 0!==t&&(n.delete(e),t.dispose())}return{get:function(e){if(e&&e.isTexture&&!1===e.isRenderTargetTexture){var t=e.mapping;if(t===_||t===x)return n.has(e)?r(n.get(e).texture,e.mapping):(t=e.image)&&0<t.height?((t=new Qn(t.height/2)).fromEquirectangularTexture(i,e),n.set(e,t),e.addEventListener("dispose",a),r(t.texture,e.mapping)):null}return e},dispose:function(){n=new WeakMap}}}class vr extends Kn{constructor(e=-1,t=1,i=1,n=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=n,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,n,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-e,a=i+e,s=n+t,o=n-t;if(null!==this.view&&this.view.enabled){let e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,a=r+e*this.view.width,s-=t*this.view.offsetY,o=s-t*this.view.height}this.projectionMatrix.makeOrthographic(r,a,s,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){e=super.toJSON(e);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}let yr=[.125,.215,.35,.446,.526,.582],_r=new vr,xr=new ze,Sr=null,br=0,Tr=0,Mr=(1+Math.sqrt(5))/2,wr=1/Mr,Er=[new ke(1,1,1),new ke(-1,1,1),new ke(1,1,-1),new ke(-1,1,-1),new ke(0,Mr,wr),new ke(0,Mr,-wr),new ke(wr,0,Mr),new ke(-wr,0,Mr),new ke(Mr,wr,0),new ke(-Mr,wr,0)];class Ar{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,n=100){Sr=this._renderer.getRenderTarget(),br=this._renderer.getActiveCubeFace(),Tr=this._renderer.getActiveMipmapLevel(),this._setSize(256);var r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,i,n,r),0<t&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Lr(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Rr(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Sr,br,Tr),e.scissorTest=!1,Pr(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===j||e.mapping===q?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Sr=this._renderer.getRenderTarget(),br=this._renderer.getActiveCubeFace(),Tr=this._renderer.getActiveMipmapLevel();t=t||this._allocateTargets();return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(){let t=3*Math.max(this._cubeSize,112),i=4*this._cubeSize,n={magFilter:X,minFilter:X,generateMipmaps:!1,type:Je,format:tt,colorSpace:at,depthBuffer:!1},e=Cr(t,i,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==i){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Cr(t,i,n);let e=this._lodMax;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=(n=>{let r=[],a=[],s=[],o=n,e=n-4+1+yr.length;for(let i=0;i<e;i++){let e=Math.pow(2,o),t=(a.push(e),1/e);i>n-4?t=yr[i-n+4-1]:0===i&&(t=0),s.push(t);var l=1/(e-2),h=-l,l=1+l,c=[h,h,l,h,l,l,h,h,l,l,h,l],u=new Float32Array(108),d=new Float32Array(72),p=new Float32Array(36);for(let r=0;r<6;r++){let e=r%3*2/3-1,t=2<r?0:-1,i=[e,t,0,e+2/3,t,0,e+2/3,1+t,0,e,t,0,e+2/3,1+t,0,e,1+t,0],n=(u.set(i,18*r),d.set(c,12*r),[r,r,r,r,r,r]);p.set(n,6*r)}h=new C;h.setAttribute("position",new A(u,3)),h.setAttribute("uv",new A(d,2)),h.setAttribute("faceIndex",new A(p,1)),r.push(h),4<o&&o--}return{lodPlanes:r,sizeLods:a,sigmas:s}})(e)),this._blurMaterial=(r=e,a=t,s=i,o=new Float32Array(20),l=new ke(0,1,0),new Yn({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/a,CUBEUV_TEXEL_HEIGHT:1/s,CUBEUV_MAX_MIP:r+".0"},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:o},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:l}},vertexShader:Dr(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1}))}var r,a,s,o,l;return e}_compileMaterial(e){e=new P(this._lodPlanes[0],e);this._renderer.compile(e,_r)}_sceneToCubeUV(n,e,t,r){var a=new N(90,1,e,t),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],l=this._renderer,e=l.autoClear,t=l.toneMapping,i=(l.getClearColor(xr),l.toneMapping=Xe,l.autoClear=!1,new dn({name:"PMREM.Background",side:Ue,depthWrite:!1,depthTest:!1})),h=new P(new Wn,i);let c=!1;var u=n.background;u?u.isColor&&(i.color.copy(u),n.background=null,c=!0):(i.color.copy(xr),c=!0);for(let i=0;i<6;i++){let e=i%3,t=(0==e?(a.up.set(0,s[i],0),a.lookAt(o[i],0,0)):1==e?(a.up.set(0,0,s[i]),a.lookAt(0,o[i],0)):(a.up.set(0,s[i],0),a.lookAt(0,0,o[i])),this._cubeSize);Pr(r,e*t,2<i?t:0,t,t),l.setRenderTarget(r),c&&l.render(h,a),l.render(n,a)}h.geometry.dispose(),h.material.dispose(),l.toneMapping=t,l.autoClear=e,n.background=u}_textureToCubeUV(e,t){var i=this._renderer,n=e.mapping===j||e.mapping===q,n=(n?(null===this._cubemapMaterial&&(this._cubemapMaterial=Lr()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Rr()),n?this._cubemapMaterial:this._equirectMaterial),r=new P(this._lodPlanes[0],n),n=(n.uniforms.envMap.value=e,this._cubeSize);Pr(t,0,0,3*n,2*n),i.setRenderTarget(t),i.render(r,_r)}_applyPMREM(n){let e=this._renderer,t=e.autoClear;e.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){let e=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),t=Er[(i-1)%Er.length];this._blur(n,i-1,i,e,t)}e.autoClear=t}_blur(e,t,i,n,r){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,n,"latitudinal",r),this._halfBlur(a,e,i,i,n,"longitudinal",r)}_halfBlur(e,t,i,n,r,a,s){var o=this._renderer,l=this._blurMaterial,h=("latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!"),new P(this._lodPlanes[n],l)),l=l.uniforms,c=this._sizeLods[i]-1,c=isFinite(r)?Math.PI/(2*c):2*Math.PI/39,u=r/c,d=isFinite(r)?1+Math.floor(3*u):20,p=(20<d&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${d} samples when the maximum is set to 20`),[]);let f=0;for(let i=0;i<20;++i){let e=i/u,t=Math.exp(-e*e/2);p.push(t),0===i?f+=t:i<d&&(f+=2*t)}for(let e=0;e<p.length;e++)p[e]=p[e]/f;l.envMap.value=e.texture,l.samples.value=d,l.weights.value=p,l.latitudinal.value="latitudinal"===a,s&&(l.poleAxis.value=s);r=this._lodMax,l.dTheta.value=c,l.mipInt.value=r-i,e=this._sizeLods[n];Pr(t,3*e*(r-4<n?n-r+4:0),4*(this._cubeSize-e),3*e,2*e),o.setRenderTarget(t),o.render(h,_r)}}function Cr(e,t,i){e=new Xt(e,t,i);return e.texture.mapping=ge,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function Pr(e,t,i,n,r){e.viewport.set(t,i,n,r),e.scissor.set(t,i,n,r)}function Rr(){return new Yn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Dr(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Lr(){return new Yn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Dr(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Dr(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Ir(r){let a=new WeakMap,s=null;function o(e){var e=e.target,t=(e.removeEventListener("dispose",o),a.get(e));void 0!==t&&(a.delete(e),t.dispose())}return{get:function(e){if(e&&e.isTexture){var t,i=e.mapping,n=i===_||i===x,i=i===j||i===q;if(n||i)return e.isRenderTargetTexture&&!0===e.needsPMREMUpdate?(e.needsPMREMUpdate=!1,t=a.get(e),null===s&&(s=new Ar(r)),t=n?s.fromEquirectangular(e,t):s.fromCubemap(e,t),a.set(e,t),t.texture):a.has(e)?a.get(e).texture:(t=e.image,n&&t&&0<t.height||i&&t&&(t=>{let i=0;for(let e=0;e<6;e++)void 0!==t[e]&&i++;return 6===i})(t)?(null===s&&(s=new Ar(r)),i=n?s.fromEquirectangular(e):s.fromCubemap(e),a.set(e,i),e.addEventListener("dispose",o),i.texture):null)}return e},dispose:function(){a=new WeakMap,null!==s&&(s.dispose(),s=null)}}}function Nr(i){let n={};function r(e){if(void 0!==n[e])return n[e];let t;switch(e){case"WEBGL_depth_texture":t=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":t=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":t=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":t=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:t=i.getExtension(e)}return n[e]=t}return{has:function(e){return null!==r(e)},init:function(e){e.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture")},get:function(e){var t=r(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Or(r,o,i,n){let a={},l=new WeakMap;function s(e){var t=e.target;null!==t.index&&o.remove(t.index);for(let e in t.attributes)o.remove(t.attributes[e]);for(let e in t.morphAttributes){let i=t.morphAttributes[e];for(let e=0,t=i.length;e<t;e++)o.remove(i[e])}t.removeEventListener("dispose",s),delete a[t.id];e=l.get(t);e&&(o.remove(e),l.delete(t)),n.releaseStatesOfGeometry(t),!0===t.isInstancedBufferGeometry&&delete t._maxInstanceCount,i.memory.geometries--}function h(e){let a=[],t=e.index,i=e.attributes.position,n=0;if(null!==t){let r=t.array;n=t.version;for(let n=0,e=r.length;n<e;n+=3){let e=r[n+0],t=r[n+1],i=r[n+2];a.push(e,t,t,i,i,e)}}else{if(void 0===i)return;{let t=i.array;n=i.version;for(let n=0,e=t.length/3-1;n<e;n+=3){let e=n+0,t=n+1,i=n+2;a.push(e,t,t,i,i,e)}}}var r=new(wt(a)?_n:yn)(a,1),s=(r.version=n,l.get(e));s&&o.remove(s),l.set(e,r)}return{get:function(e,t){return!0!==a[t.id]&&(t.addEventListener("dispose",s),a[t.id]=!0,i.memory.geometries++),t},update:function(e){let t=e.attributes;for(let e in t)o.update(t[e],r.ARRAY_BUFFER);var n=e.morphAttributes;for(let e in n){let i=n[e];for(let e=0,t=i.length;e<t;e++)o.update(i[e],r.ARRAY_BUFFER)}},getWireframeAttribute:function(e){var t,i=l.get(e);return(!i||null!==(t=e.index)&&i.version<t.version)&&h(e),l.get(e)}}}function Ur(a,s,o,e){let l=e.isWebGL2,h,c,u;this.setMode=function(e){h=e},this.setIndex=function(e){c=e.type,u=e.bytesPerElement},this.render=function(e,t){a.drawElements(h,t,c,e*u),o.update(t,h,1)},this.renderInstances=function(i,n,r){if(0!==r){let e,t;if(l)e=a,t="drawElementsInstanced";else if(e=s.get("ANGLE_instanced_arrays"),t="drawElementsInstancedANGLE",null===e)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");e[t](h,n,c,i*u,r),o.update(n,h,r)}}}function Br(n){let r={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:r,programs:null,autoReset:!0,reset:function(){r.calls=0,r.triangles=0,r.points=0,r.lines=0},update:function(e,t,i){switch(r.calls++,t){case n.TRIANGLES:r.triangles+=i*(e/3);break;case n.LINES:r.lines+=i*(e/2);break;case n.LINE_STRIP:r.lines+=i*(e-1);break;case n.LINE_LOOP:r.lines+=i*e;break;case n.POINTS:r.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",t)}}}}function Fr(e,t){return e[0]-t[0]}function Gr(e,t){return Math.abs(t[1])-Math.abs(e[1])}function kr(w,E,i){let A={},C=new Float32Array(8),P=new WeakMap,R=new Ge,L=[];for(let e=0;e<8;e++)L[e]=[e,0];return{update:function(e,s,n){var r=e.morphTargetInfluences;if(!0===E.isWebGL2){var e=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,o=void 0!==e?e.length:0;let a=P.get(s);if(void 0===a||a.count!==o){void 0!==a&&a.texture.dispose();var l=void 0!==s.morphAttributes.position,h=void 0!==s.morphAttributes.normal,c=void 0!==s.morphAttributes.color,u=s.morphAttributes.position||[],d=s.morphAttributes.normal||[],p=s.morphAttributes.color||[];let e=!0==c?3:!0==h?2:!0==l?1:0,t=s.attributes.position.count*e,i=1,n=(t>E.maxTextureSize&&(i=Math.ceil(t/E.maxTextureSize),t=E.maxTextureSize),new Float32Array(t*i*4*o)),r=new jt(n,t,i,o);r.type=Ze,r.needsUpdate=!0;var f=4*e;for(let e=0;e<o;e++){var m=u[e],g=d[e],v=p[e],y=t*i*4*e;for(let e=0;e<m.count;e++){var _=e*f;!0==l&&(R.fromBufferAttribute(m,e),n[y+_]=R.x,n[y+_+1]=R.y,n[y+_+2]=R.z,n[y+_+3]=0),!0==h&&(R.fromBufferAttribute(g,e),n[y+_+4]=R.x,n[y+_+5]=R.y,n[y+_+6]=R.z,n[y+_+7]=0),!0==c&&(R.fromBufferAttribute(v,e),n[y+_+8]=R.x,n[y+_+9]=R.y,n[y+_+10]=R.z,n[y+_+11]=4===v.itemSize?R.w:1)}}a={count:o,texture:r,size:new Fe(t,i)},P.set(s,a),s.addEventListener("dispose",function e(){r.dispose(),P.delete(s),s.removeEventListener("dispose",e)})}let t=0;for(let e=0;e<r.length;e++)t+=r[e];e=s.morphTargetsRelative?1:1-t;n.getUniforms().setValue(w,"morphTargetBaseInfluence",e),n.getUniforms().setValue(w,"morphTargetInfluences",r),n.getUniforms().setValue(w,"morphTargetsTexture",a.texture,i),n.getUniforms().setValue(w,"morphTargetsTextureSize",a.size)}else{var a=void 0===r?0:r.length;let t=A[s.id];if(void 0===t||t.length!==a){t=[];for(let e=0;e<a;e++)t[e]=[e,0];A[s.id]=t}for(let e=0;e<a;e++){var x=t[e];x[0]=e,x[1]=r[e]}t.sort(Gr);for(let e=0;e<8;e++)e<a&&t[e][1]?(L[e][0]=t[e][0],L[e][1]=t[e][1]):(L[e][0]=Number.MAX_SAFE_INTEGER,L[e][1]=0);L.sort(Fr);var S=s.morphAttributes.position,b=s.morphAttributes.normal;let i=0;for(let e=0;e<8;e++){var T=L[e],M=T[0],T=T[1];M!==Number.MAX_SAFE_INTEGER&&T?(S&&s.getAttribute("morphTarget"+e)!==S[M]&&s.setAttribute("morphTarget"+e,S[M]),b&&s.getAttribute("morphNormal"+e)!==b[M]&&s.setAttribute("morphNormal"+e,b[M]),C[e]=T,i+=T):(S&&!0===s.hasAttribute("morphTarget"+e)&&s.deleteAttribute("morphTarget"+e),b&&!0===s.hasAttribute("morphNormal"+e)&&s.deleteAttribute("morphNormal"+e),C[e]=0)}e=s.morphTargetsRelative?1:1-i;n.getUniforms().setValue(w,"morphTargetBaseInfluence",e),n.getUniforms().setValue(w,"morphTargetInfluences",C)}}}}function Hr(n,r,a,s){let o=new WeakMap;function l(e){e=e.target;e.removeEventListener("dispose",l),a.remove(e.instanceMatrix),null!==e.instanceColor&&a.remove(e.instanceColor)}return{update:function(t){var i=s.render.frame,e=t.geometry,e=r.get(t,e);if(o.get(e)!==i&&(r.update(e),o.set(e,i)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",l)&&t.addEventListener("dispose",l),o.get(t)!==i)&&(a.update(t.instanceMatrix,n.ARRAY_BUFFER),null!==t.instanceColor&&a.update(t.instanceColor,n.ARRAY_BUFFER),o.set(t,i)),t.isSkinnedMesh){let e=t.skeleton;o.get(e)!==i&&(e.update(),o.set(e,i))}return e},dispose:function(){o=new WeakMap}}}let zr=new c,Vr=new jt,Wr=new qt,Xr=new Jn,jr=[],qr=[],Yr=new Float32Array(16),Kr=new Float32Array(9),Zr=new Float32Array(4);function Jr(i,n,r){var e=i[0];if(e<=0||0<e)return i;var t=n*r;let a=jr[t];if(void 0===a&&(a=new Float32Array(t),jr[t]=a),0!==n){e.toArray(a,0);for(let e=1,t=0;e!==n;++e)t+=r,i[e].toArray(a,t)}return a}function o(i,n){if(i.length===n.length){for(let e=0,t=i.length;e<t;e++)if(i[e]!==n[e])return;return 1}}function l(i,n){for(let e=0,t=n.length;e<t;e++)i[e]=n[e]}function Qr(t,i){let n=qr[i];void 0===n&&(n=new Int32Array(i),qr[i]=n);for(let e=0;e!==i;++e)n[e]=t.allocateTextureUnit();return n}function $r(e,t){var i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function ea(e,t){var i=this.cache;void 0!==t.x?i[0]===t.x&&i[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y):o(i,t)||(e.uniform2fv(this.addr,t),l(i,t))}function ta(e,t){var i=this.cache;void 0!==t.x?i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z):void 0!==t.r?i[0]===t.r&&i[1]===t.g&&i[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b):o(i,t)||(e.uniform3fv(this.addr,t),l(i,t))}function ia(e,t){var i=this.cache;void 0!==t.x?i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w):o(i,t)||(e.uniform4fv(this.addr,t),l(i,t))}function na(e,t){var i=this.cache,n=t.elements;void 0===n?o(i,t)||(e.uniformMatrix2fv(this.addr,!1,t),l(i,t)):o(i,n)||(Zr.set(n),e.uniformMatrix2fv(this.addr,!1,Zr),l(i,n))}function ra(e,t){var i=this.cache,n=t.elements;void 0===n?o(i,t)||(e.uniformMatrix3fv(this.addr,!1,t),l(i,t)):o(i,n)||(Kr.set(n),e.uniformMatrix3fv(this.addr,!1,Kr),l(i,n))}function aa(e,t){var i=this.cache,n=t.elements;void 0===n?o(i,t)||(e.uniformMatrix4fv(this.addr,!1,t),l(i,t)):o(i,n)||(Yr.set(n),e.uniformMatrix4fv(this.addr,!1,Yr),l(i,n))}function sa(e,t){var i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function oa(e,t){var i=this.cache;void 0!==t.x?i[0]===t.x&&i[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y):o(i,t)||(e.uniform2iv(this.addr,t),l(i,t))}function la(e,t){var i=this.cache;void 0!==t.x?i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z):o(i,t)||(e.uniform3iv(this.addr,t),l(i,t))}function ha(e,t){var i=this.cache;void 0!==t.x?i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w):o(i,t)||(e.uniform4iv(this.addr,t),l(i,t))}function ca(e,t){var i=this.cache;i[0]!==t&&(e.uniform1ui(this.addr,t),i[0]=t)}function ua(e,t){var i=this.cache;void 0!==t.x?i[0]===t.x&&i[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y):o(i,t)||(e.uniform2uiv(this.addr,t),l(i,t))}function da(e,t){var i=this.cache;void 0!==t.x?i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z):o(i,t)||(e.uniform3uiv(this.addr,t),l(i,t))}function pa(e,t){var i=this.cache;void 0!==t.x?i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w):o(i,t)||(e.uniform4uiv(this.addr,t),l(i,t))}function fa(e,t,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture2D(t||zr,r)}function ma(e,t,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(t||Wr,r)}function ga(e,t,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTextureCube(t||Xr,r)}function va(e,t,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(t||Vr,r)}function ya(e,t){e.uniform1fv(this.addr,t)}function _a(e,t){t=Jr(t,this.size,2);e.uniform2fv(this.addr,t)}function xa(e,t){t=Jr(t,this.size,3);e.uniform3fv(this.addr,t)}function Sa(e,t){t=Jr(t,this.size,4);e.uniform4fv(this.addr,t)}function ba(e,t){t=Jr(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,t)}function Ta(e,t){t=Jr(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,t)}function Ma(e,t){t=Jr(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,t)}function wa(e,t){e.uniform1iv(this.addr,t)}function Ea(e,t){e.uniform2iv(this.addr,t)}function Aa(e,t){e.uniform3iv(this.addr,t)}function Ca(e,t){e.uniform4iv(this.addr,t)}function Pa(e,t){e.uniform1uiv(this.addr,t)}function Ra(e,t){e.uniform2uiv(this.addr,t)}function La(e,t){e.uniform3uiv(this.addr,t)}function Da(e,t){e.uniform4uiv(this.addr,t)}function Ia(e,t,i){var n=this.cache,r=t.length,a=Qr(i,r);o(n,a)||(e.uniform1iv(this.addr,a),l(n,a));for(let e=0;e!==r;++e)i.setTexture2D(t[e]||zr,a[e])}function Na(e,t,i){var n=this.cache,r=t.length,a=Qr(i,r);o(n,a)||(e.uniform1iv(this.addr,a),l(n,a));for(let e=0;e!==r;++e)i.setTexture3D(t[e]||Wr,a[e])}function Oa(e,t,i){var n=this.cache,r=t.length,a=Qr(i,r);o(n,a)||(e.uniform1iv(this.addr,a),l(n,a));for(let e=0;e!==r;++e)i.setTextureCube(t[e]||Xr,a[e])}function Ua(e,t,i){var n=this.cache,r=t.length,a=Qr(i,r);o(n,a)||(e.uniform1iv(this.addr,a),l(n,a));for(let e=0;e!==r;++e)i.setTexture2DArray(t[e]||Vr,a[e])}class Ba{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=(()=>{switch(t.type){case 5126:return $r;case 35664:return ea;case 35665:return ta;case 35666:return ia;case 35674:return na;case 35675:return ra;case 35676:return aa;case 5124:case 35670:return sa;case 35667:case 35671:return oa;case 35668:case 35672:return la;case 35669:case 35673:return ha;case 5125:return ca;case 36294:return ua;case 36295:return da;case 36296:return pa;case 35678:case 36198:case 36298:case 36306:case 35682:return fa;case 35679:case 36299:case 36307:return ma;case 35680:case 36300:case 36308:case 36293:return ga;case 36289:case 36303:case 36311:case 36292:return va}})()}}class Fa{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=(()=>{switch(t.type){case 5126:return ya;case 35664:return _a;case 35665:return xa;case 35666:return Sa;case 35674:return ba;case 35675:return Ta;case 35676:return Ma;case 5124:case 35670:return wa;case 35667:case 35671:return Ea;case 35668:case 35672:return Aa;case 35669:case 35673:return Ca;case 5125:return Pa;case 36294:return Ra;case 36295:return La;case 36296:return Da;case 35678:case 36198:case 36298:case 36306:case 35682:return Ia;case 35679:case 36299:case 36307:return Na;case 35680:case 36300:case 36308:case 36293:return Oa;case 36289:case 36303:case 36311:case 36292:return Ua}})()}}class Ga{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(i,n,r){var a=this.seq;for(let e=0,t=a.length;e!==t;++e){var s=a[e];s.setValue(i,n[s.id],r)}}}let ka=/(\w+)(\])?(\[|\.)?/g;function Ha(e,t){e.seq.push(t),e.map[t.id]=t}class za{constructor(i,n){this.seq=[],this.map={};let e=i.getProgramParameter(n,i.ACTIVE_UNIFORMS);for(let t=0;t<e;++t){let e=i.getActiveUniform(n,t);u=c=h=l=o=s=a=r=void 0;var r=e,a=i.getUniformLocation(n,e.name),s=this,o=r.name,l=o.length;for(ka.lastIndex=0;;){var h=ka.exec(o),c=ka.lastIndex;let t=h[1];var u=h[3];if("]"===h[2]&&(t|=0),void 0===u||"["===u&&c+2===l){Ha(s,new(void 0===u?Ba:Fa)(t,r,a));break}{let e=s.map[t];void 0===e&&Ha(s,e=new Ga(t)),s=e}}}}setValue(e,t,i,n){t=this.map[t];void 0!==t&&t.setValue(e,i,n)}setOptional(e,t,i){t=t[i];void 0!==t&&this.setValue(e,i,t)}static upload(i,n,r,a){for(let e=0,t=n.length;e!==t;++e){var s=n[e],o=r[s.id];!1!==o.needsUpdate&&s.setValue(i,o.value,a)}}static seqWithValue(i,n){var r=[];for(let e=0,t=i.length;e!==t;++e){var a=i[e];a.id in n&&r.push(a)}return r}}function Va(e,t,i){t=e.createShader(t);return e.shaderSource(t,i),e.compileShader(t),t}let Wa=37297,Xa=0;function ja(t,i,n){let e=t.getShaderParameter(i,t.COMPILE_STATUS),r=t.getShaderInfoLog(i).trim();if(e&&""===r)return"";var a=/ERROR: 0:(\d+)/.exec(r);if(a){let e=parseInt(a[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+((e,i)=>{let n=e.split("\n"),r=[],a=Math.max(i-6,0),s=Math.min(i+6,n.length);for(let t=a;t<s;t++){let e=t+1;r.push(`${e===i?">":" "} ${e}: `+n[t])}return r.join("\n")})(t.getShaderSource(i),e)}return r}function qa(e,t){t=(e=>{var t=me.getPrimaries(me.workingColorSpace),i=me.getPrimaries(e);let n;switch(t===i?n="":t===ht&&i===lt?n="LinearDisplayP3ToLinearSRGB":t===lt&&i===ht&&(n="LinearSRGBToLinearDisplayP3"),e){case at:case st:return[n,"LinearTransferOETF"];case Be:case Oe:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[n,"LinearTransferOETF"]}})(t);return`vec4 ${e}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function Ya(e){return""!==e}function Ka(e,t){var i=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Za(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}let Ja=/^[ \t]*#include +<([\w\d./]+)>/gm;function Qa(e){return e.replace(Ja,es)}let $a=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function es(e,t){let i=R[t];if(void 0===i){let e=$a.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");i=R[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return Qa(i)}let ts=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function is(e){return e.replace(ts,ns)}function ns(e,t,i,n){let r="";for(let e=parseInt(t);e<parseInt(i);e++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return r}function rs(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function as(s,e,t,i){let o=s.getContext(),n=t.defines;var r,a,l=t.vertexShader,h=t.fragmentShader;let c=(e=>{let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===L?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===D?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===I&&(t="SHADOWMAP_TYPE_VSM"),t})(t),u=(()=>{let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case j:case q:e="ENVMAP_TYPE_CUBE";break;case ge:e="ENVMAP_TYPE_CUBE_UV"}return e})(),d=(()=>{let e="ENVMAP_MODE_REFLECTION";return e=t.envMap&&t.envMapMode===q?"ENVMAP_MODE_REFRACTION":e})(),p=(()=>{let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case O:e="ENVMAP_BLENDING_MULTIPLY";break;case U:e="ENVMAP_BLENDING_MIX";break;case B:e="ENVMAP_BLENDING_ADD"}return e})(),f=null===(a=t.envMapCubeUVHeight)?null:(r=Math.log2(a)-2,a=1/a,{texelWidth:1/(3*Math.max(Math.pow(2,r),112)),texelHeight:a,maxMip:r}),m=t.isWebGL2?"":[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ya).join("\n"),g=(e=>{var t,i=[];for(t in e){var n=e[t];!1!==n&&i.push("#define "+t+" "+n)}return i.join("\n")})(n),v=o.createProgram(),y,_,x=t.glslVersion?"#version "+t.glslVersion+"\n":"",S=(t.isRawShaderMaterial?(0<(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(Ya).join("\n")).length&&(y+="\n"),0<(_=[m,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(Ya).join("\n")).length&&(_+="\n")):(y=[rs(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",0<t.morphTargetsCount&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",0<t.morphTargetsCount&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",0<t.morphTargetsCount&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",0<t.numLightProbes?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ya).join("\n"),_=[m,rs(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",t.envMap?"#define "+p:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",0<t.numLightProbes?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Xe?"#define TONE_MAPPING":"",t.toneMapping!==Xe?R.tonemapping_pars_fragment:"",t.toneMapping!==Xe?((e,t)=>{let i;switch(t){case G:i="Linear";break;case k:i="Reinhard";break;case H:i="OptimizedCineon";break;case z:i="ACESFilmic";break;case V:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"})("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",R.colorspace_pars_fragment,qa("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Ya).join("\n")),l=Za(Ka(Qa(l),t),t),h=Za(Ka(Qa(h),t),t),l=is(l),h=is(h),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(x="#version 300 es\n",y=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+y,_=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===ct?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===ct?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_),x+y+l),b=x+_+h,T=Va(o,o.VERTEX_SHADER,S),M=Va(o,o.FRAGMENT_SHADER,b);function w(i){if(s.debug.checkShaderErrors){var n=o.getProgramInfoLog(v).trim(),r=o.getShaderInfoLog(T).trim(),a=o.getShaderInfoLog(M).trim();let e=!0,t=!0;if(!1===o.getProgramParameter(v,o.LINK_STATUS))if(e=!1,"function"==typeof s.debug.onShaderError)s.debug.onShaderError(o,v,T,M);else{let e=ja(o,T,"vertex"),t=ja(o,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(v,o.VALIDATE_STATUS)+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+t)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==r&&""!==a||(t=!1);t&&(i.diagnostics={runnable:e,programLog:n,vertexShader:{log:r,prefix:y},fragmentShader:{log:a,prefix:_}})}o.deleteShader(T),o.deleteShader(M),E=new za(o,v),A=((r,a)=>{let s={},e=r.getProgramParameter(a,r.ACTIVE_ATTRIBUTES);for(let n=0;n<e;n++){let e=r.getActiveAttrib(a,n),t=e.name,i=1;e.type===r.FLOAT_MAT2&&(i=2),e.type===r.FLOAT_MAT3&&(i=3),e.type===r.FLOAT_MAT4&&(i=4),s[t]={type:e.type,location:r.getAttribLocation(a,t),locationSize:i}}return s})(o,v)}let E,A,C=(o.attachShader(v,T),o.attachShader(v,M),void 0!==t.index0AttributeName?o.bindAttribLocation(v,0,t.index0AttributeName):!0===t.morphTargets&&o.bindAttribLocation(v,0,"position"),o.linkProgram(v),this.getUniforms=function(){return void 0===E&&w(this),E},!(this.getAttributes=function(){return void 0===A&&w(this),A})===t.rendererExtensionParallelShaderCompile);return this.isReady=function(){return C=!1===C?o.getProgramParameter(v,Wa):C},this.destroy=function(){i.releaseStatesOfProgram(this),o.deleteProgram(v),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Xa++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=T,this.fragmentShader=M,this}let ss=0;class os{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){var t=e.vertexShader,i=e.fragmentShader,t=this._getShaderStage(t),i=this._getShaderStage(i),e=this._getShaderCacheForMaterial(e);return!1===e.has(t)&&(e.add(t),t.usedTimes++),!1===e.has(i)&&(e.add(i),i.usedTimes++),this}remove(e){var t=this.materialCache.get(e);for(let e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){var t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){var t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new ls(e),t.set(e,i)),i}}class ls{constructor(e){this.id=ss++,this.code=e,this.usedTimes=0}}function hs(te,ie,ne,re,ae,t,se){let r=new Ni,oe=new os,a=[],le=ae.isWebGL2,he=ae.logarithmicDepthBuffer,ce=ae.vertexTextures,ue=ae.precision,de={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function pe(e){return 0===e?"uv":"uv"+e}return{getParameters:function(e,t,U,i,n){var r=i.fog,a=n.geometry,i=e.isMeshStandardMaterial?i.environment:null,i=(e.isMeshStandardMaterial?ne:ie).get(e.envMap||i),B=i&&i.mapping===ge?i.image.height:null,s=de[e.type],o=(null!==e.precision&&(ue=ae.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",ue,"instead."),a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color),o=void 0!==o?o.length:0;let l,h,c,u,d=0;if(void 0!==a.morphAttributes.position&&(d=1),void 0!==a.morphAttributes.normal&&(d=2),void 0!==a.morphAttributes.color&&(d=3),s){let e=hr[s];l=e.vertexShader,h=e.fragmentShader}else l=e.vertexShader,h=e.fragmentShader,oe.update(e),c=oe.getVertexShaderID(e),u=oe.getFragmentShaderID(e);var p=te.getRenderTarget(),f=!0===n.isInstancedMesh,m=!!e.map,F=!!e.matcap,g=!!i,v=!!e.aoMap,y=!!e.lightMap,_=!!e.bumpMap,x=!!e.normalMap,S=!!e.displacementMap,b=!!e.emissiveMap,T=!!e.metalnessMap,M=!!e.roughnessMap,w=0<e.anisotropy,E=0<e.clearcoat,A=0<e.iridescence,C=0<e.sheen,P=0<e.transmission,R=w&&!!e.anisotropyMap,L=E&&!!e.clearcoatMap,D=E&&!!e.clearcoatNormalMap,I=E&&!!e.clearcoatRoughnessMap,G=A&&!!e.iridescenceMap,k=A&&!!e.iridescenceThicknessMap,H=C&&!!e.sheenColorMap,z=C&&!!e.sheenRoughnessMap,V=!!e.specularMap,W=!!e.specularColorMap,X=!!e.specularIntensityMap,j=P&&!!e.transmissionMap,q=P&&!!e.thicknessMap,Y=!!e.gradientMap,N=!!e.alphaMap,K=0<e.alphaTest,Z=!!e.alphaHash,O=!!e.extensions,J=!!a.attributes.uv1,Q=!!a.attributes.uv2,$=!!a.attributes.uv3;let ee=Xe;return!e.toneMapped||null!==p&&!0!==p.isXRRenderTarget||(ee=te.toneMapping),{isWebGL2:le,shaderID:s,shaderType:e.type,shaderName:e.name,vertexShader:l,fragmentShader:h,defines:e.defines,customVertexShaderID:c,customFragmentShaderID:u,isRawShaderMaterial:!0===e.isRawShaderMaterial,glslVersion:e.glslVersion,precision:ue,instancing:f,instancingColor:f&&null!==n.instanceColor,supportsVertexTextures:ce,outputColorSpace:null===p?te.outputColorSpace:!0===p.isXRRenderTarget?p.texture.colorSpace:at,map:m,matcap:F,envMap:g,envMapMode:g&&i.mapping,envMapCubeUVHeight:B,aoMap:v,lightMap:y,bumpMap:_,normalMap:x,displacementMap:ce&&S,emissiveMap:b,normalMapObjectSpace:x&&1===e.normalMapType,normalMapTangentSpace:x&&0===e.normalMapType,metalnessMap:T,roughnessMap:M,anisotropy:w,anisotropyMap:R,clearcoat:E,clearcoatMap:L,clearcoatNormalMap:D,clearcoatRoughnessMap:I,iridescence:A,iridescenceMap:G,iridescenceThicknessMap:k,sheen:C,sheenColorMap:H,sheenRoughnessMap:z,specularMap:V,specularColorMap:W,specularIntensityMap:X,transmission:P,transmissionMap:j,thicknessMap:q,gradientMap:Y,opaque:!1===e.transparent&&1===e.blending,alphaMap:N,alphaTest:K,alphaHash:Z,combine:e.combine,mapUv:m&&pe(e.map.channel),aoMapUv:v&&pe(e.aoMap.channel),lightMapUv:y&&pe(e.lightMap.channel),bumpMapUv:_&&pe(e.bumpMap.channel),normalMapUv:x&&pe(e.normalMap.channel),displacementMapUv:S&&pe(e.displacementMap.channel),emissiveMapUv:b&&pe(e.emissiveMap.channel),metalnessMapUv:T&&pe(e.metalnessMap.channel),roughnessMapUv:M&&pe(e.roughnessMap.channel),anisotropyMapUv:R&&pe(e.anisotropyMap.channel),clearcoatMapUv:L&&pe(e.clearcoatMap.channel),clearcoatNormalMapUv:D&&pe(e.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:I&&pe(e.clearcoatRoughnessMap.channel),iridescenceMapUv:G&&pe(e.iridescenceMap.channel),iridescenceThicknessMapUv:k&&pe(e.iridescenceThicknessMap.channel),sheenColorMapUv:H&&pe(e.sheenColorMap.channel),sheenRoughnessMapUv:z&&pe(e.sheenRoughnessMap.channel),specularMapUv:V&&pe(e.specularMap.channel),specularColorMapUv:W&&pe(e.specularColorMap.channel),specularIntensityMapUv:X&&pe(e.specularIntensityMap.channel),transmissionMapUv:j&&pe(e.transmissionMap.channel),thicknessMapUv:q&&pe(e.thicknessMap.channel),alphaMapUv:N&&pe(e.alphaMap.channel),vertexTangents:!!a.attributes.tangent&&(x||w),vertexColors:e.vertexColors,vertexAlphas:!0===e.vertexColors&&!!a.attributes.color&&4===a.attributes.color.itemSize,vertexUv1s:J,vertexUv2s:Q,vertexUv3s:$,pointsUvs:!0===n.isPoints&&!!a.attributes.uv&&(m||N),fog:!!r,useFog:!0===e.fog,fogExp2:r&&r.isFogExp2,flatShading:!0===e.flatShading,sizeAttenuation:!0===e.sizeAttenuation,logarithmicDepthBuffer:he,skinning:!0===n.isSkinnedMesh,morphTargets:void 0!==a.morphAttributes.position,morphNormals:void 0!==a.morphAttributes.normal,morphColors:void 0!==a.morphAttributes.color,morphTargetsCount:o,morphTextureStride:d,numDirLights:t.directional.length,numPointLights:t.point.length,numSpotLights:t.spot.length,numSpotLightMaps:t.spotLightMap.length,numRectAreaLights:t.rectArea.length,numHemiLights:t.hemi.length,numDirLightShadows:t.directionalShadowMap.length,numPointLightShadows:t.pointShadowMap.length,numSpotLightShadows:t.spotShadowMap.length,numSpotLightShadowsWithMaps:t.numSpotLightShadowsWithMaps,numLightProbes:t.numLightProbes,numClippingPlanes:se.numPlanes,numClipIntersection:se.numIntersection,dithering:e.dithering,shadowMapEnabled:te.shadowMap.enabled&&0<U.length,shadowMapType:te.shadowMap.type,toneMapping:ee,useLegacyLights:te._useLegacyLights,decodeVideoTexture:m&&!0===e.map.isVideoTexture&&me.getTransfer(e.map.colorSpace)===fe,premultipliedAlpha:e.premultipliedAlpha,doubleSided:2===e.side,flipSided:e.side===Ue,useDepthPacking:0<=e.depthPacking,depthPacking:e.depthPacking||0,index0AttributeName:e.index0AttributeName,extensionDerivatives:O&&!0===e.extensions.derivatives,extensionFragDepth:O&&!0===e.extensions.fragDepth,extensionDrawBuffers:O&&!0===e.extensions.drawBuffers,extensionShaderTextureLOD:O&&!0===e.extensions.shaderTextureLOD,rendererExtensionFragDepth:le||re.has("EXT_frag_depth"),rendererExtensionDrawBuffers:le||re.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:le||re.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:re.has("KHR_parallel_shader_compile"),customProgramCacheKey:e.customProgramCacheKey()}},getProgramCacheKey:function(t){var e,i,n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(let e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&((e=n).push((i=t).precision),e.push(i.outputColorSpace),e.push(i.envMapMode),e.push(i.envMapCubeUVHeight),e.push(i.mapUv),e.push(i.alphaMapUv),e.push(i.lightMapUv),e.push(i.aoMapUv),e.push(i.bumpMapUv),e.push(i.normalMapUv),e.push(i.displacementMapUv),e.push(i.emissiveMapUv),e.push(i.metalnessMapUv),e.push(i.roughnessMapUv),e.push(i.anisotropyMapUv),e.push(i.clearcoatMapUv),e.push(i.clearcoatNormalMapUv),e.push(i.clearcoatRoughnessMapUv),e.push(i.iridescenceMapUv),e.push(i.iridescenceThicknessMapUv),e.push(i.sheenColorMapUv),e.push(i.sheenRoughnessMapUv),e.push(i.specularMapUv),e.push(i.specularColorMapUv),e.push(i.specularIntensityMapUv),e.push(i.transmissionMapUv),e.push(i.thicknessMapUv),e.push(i.combine),e.push(i.fogExp2),e.push(i.sizeAttenuation),e.push(i.morphTargetsCount),e.push(i.morphAttributeCount),e.push(i.numDirLights),e.push(i.numPointLights),e.push(i.numSpotLights),e.push(i.numSpotLightMaps),e.push(i.numHemiLights),e.push(i.numRectAreaLights),e.push(i.numDirLightShadows),e.push(i.numPointLightShadows),e.push(i.numSpotLightShadows),e.push(i.numSpotLightShadowsWithMaps),e.push(i.numLightProbes),e.push(i.shadowMapType),e.push(i.toneMapping),e.push(i.numClippingPlanes),e.push(i.numClipIntersection),e.push(i.depthPacking),e=n,i=t,r.disableAll(),i.isWebGL2&&r.enable(0),i.supportsVertexTextures&&r.enable(1),i.instancing&&r.enable(2),i.instancingColor&&r.enable(3),i.matcap&&r.enable(4),i.envMap&&r.enable(5),i.normalMapObjectSpace&&r.enable(6),i.normalMapTangentSpace&&r.enable(7),i.clearcoat&&r.enable(8),i.iridescence&&r.enable(9),i.alphaTest&&r.enable(10),i.vertexColors&&r.enable(11),i.vertexAlphas&&r.enable(12),i.vertexUv1s&&r.enable(13),i.vertexUv2s&&r.enable(14),i.vertexUv3s&&r.enable(15),i.vertexTangents&&r.enable(16),i.anisotropy&&r.enable(17),i.alphaHash&&r.enable(18),e.push(r.mask),r.disableAll(),i.fog&&r.enable(0),i.useFog&&r.enable(1),i.flatShading&&r.enable(2),i.logarithmicDepthBuffer&&r.enable(3),i.skinning&&r.enable(4),i.morphTargets&&r.enable(5),i.morphNormals&&r.enable(6),i.morphColors&&r.enable(7),i.premultipliedAlpha&&r.enable(8),i.shadowMapEnabled&&r.enable(9),i.useLegacyLights&&r.enable(10),i.doubleSided&&r.enable(11),i.flipSided&&r.enable(12),i.useDepthPacking&&r.enable(13),i.dithering&&r.enable(14),i.transmission&&r.enable(15),i.sheen&&r.enable(16),i.opaque&&r.enable(17),i.pointsUvs&&r.enable(18),i.decodeVideoTexture&&r.enable(19),e.push(r.mask),n.push(te.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t=de[e.type];let i;if(t){let e=hr[t];i=qn.clone(e.uniforms)}else i=e.uniforms;return i},acquireProgram:function(e,i){let n;for(let t=0,e=a.length;t<e;t++){let e=a[t];if(e.cacheKey===i){++(n=e).usedTimes;break}}return void 0===n&&(n=new as(te,i,e,t),a.push(n)),n},releaseProgram:function(e){var t;0==--e.usedTimes&&(t=a.indexOf(e),a[t]=a[a.length-1],a.pop(),e.destroy())},releaseShaderCache:function(e){oe.remove(e)},programs:a,dispose:function(){oe.dispose()}}}function cs(){let n=new WeakMap;return{get:function(e){let t=n.get(e);return void 0===t&&(t={},n.set(e,t)),t},remove:function(e){n.delete(e)},update:function(e,t,i){n.get(e)[t]=i},dispose:function(){n=new WeakMap}}}function us(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function ds(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function ps(){let o=[],l=0,s=[],h=[],c=[];function u(e,t,i,n,r,a){let s=o[l];return void 0===s?(s={id:e.id,object:e,geometry:t,material:i,groupOrder:n,renderOrder:e.renderOrder,z:r,group:a},o[l]=s):(s.id=e.id,s.object=e,s.geometry=t,s.material=i,s.groupOrder=n,s.renderOrder=e.renderOrder,s.z=r,s.group=a),l++,s}return{opaque:s,transmissive:h,transparent:c,init:function(){l=0,s.length=0,h.length=0,c.length=0},push:function(e,t,i,n,r,a){e=u(e,t,i,n,r,a);(0<i.transmission?h:!0===i.transparent?c:s).push(e)},unshift:function(e,t,i,n,r,a){e=u(e,t,i,n,r,a);(0<i.transmission?h:!0===i.transparent?c:s).unshift(e)},finish:function(){for(let t=l,e=o.length;t<e;t++){let e=o[t];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(e,t){1<s.length&&s.sort(e||us),1<h.length&&h.sort(t||ds),1<c.length&&c.sort(t||ds)}}}function fs(){let r=new WeakMap;return{get:function(e,t){var i=r.get(e);let n;return void 0===i?(n=new ps,r.set(e,[n])):t>=i.length?(n=new ps,i.push(n)):n=i[t],n},dispose:function(){r=new WeakMap}}}function ms(){let i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ke,color:new ze};break;case"SpotLight":t={position:new ke,direction:new ke,color:new ze,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ke,color:new ze,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ke,skyColor:new ze,groundColor:new ze};break;case"RectAreaLight":t={color:new ze,position:new ke,halfWidth:new ke,halfHeight:new ke}}return i[e.id]=t}}}let gs=0;function vs(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function ys(i,n){let T=new ms,M=(()=>{let i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fe,shadowCameraNear:1,shadowCameraFar:1e3}}return i[e.id]=t}}})(),w={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let e=0;e<9;e++)w.probe.push(new ke);let c=new ke,u=new He,d=new He;return{setup:function(o,e){let l=0,h=0,c=0;for(let e=0;e<9;e++)w.probe[e].set(0,0,0);let u=0,d=0,p=0,f=0,m=0,g=0,v=0,y=0,_=0,x=0,S=0;o.sort(vs);var b=!0===e?Math.PI:1;for(let e=0,t=o.length;e<t;e++){let i=o[e],n=i.color,r=i.intensity,a=i.distance,s=i.shadow&&i.shadow.map?i.shadow.map.texture:null;if(i.isAmbientLight)l+=n.r*r*b,h+=n.g*r*b,c+=n.b*r*b;else if(i.isLightProbe){for(let e=0;e<9;e++)w.probe[e].addScaledVector(i.sh.coefficients[e],r);S++}else if(i.isDirectionalLight){let e=T.get(i);if(e.color.copy(i.color).multiplyScalar(i.intensity*b),i.castShadow){let e=i.shadow,t=M.get(i);t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,w.directionalShadow[u]=t,w.directionalShadowMap[u]=s,w.directionalShadowMatrix[u]=i.shadow.matrix,g++}w.directional[u]=e,u++}else if(i.isSpotLight){let e=T.get(i),t=(e.position.setFromMatrixPosition(i.matrixWorld),e.color.copy(n).multiplyScalar(r*b),e.distance=a,e.coneCos=Math.cos(i.angle),e.penumbraCos=Math.cos(i.angle*(1-i.penumbra)),e.decay=i.decay,w.spot[p]=e,i.shadow);if(i.map&&(w.spotLightMap[_]=i.map,_++,t.updateMatrices(i),i.castShadow)&&x++,w.spotLightMatrix[p]=t.matrix,i.castShadow){let e=M.get(i);e.shadowBias=t.bias,e.shadowNormalBias=t.normalBias,e.shadowRadius=t.radius,e.shadowMapSize=t.mapSize,w.spotShadow[p]=e,w.spotShadowMap[p]=s,y++}p++}else if(i.isRectAreaLight){let e=T.get(i);e.color.copy(n).multiplyScalar(r),e.halfWidth.set(.5*i.width,0,0),e.halfHeight.set(0,.5*i.height,0),w.rectArea[f]=e,f++}else if(i.isPointLight){let e=T.get(i);if(e.color.copy(i.color).multiplyScalar(i.intensity*b),e.distance=i.distance,e.decay=i.decay,i.castShadow){let e=i.shadow,t=M.get(i);t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,w.pointShadow[d]=t,w.pointShadowMap[d]=s,w.pointShadowMatrix[d]=i.shadow.matrix,v++}w.point[d]=e,d++}else if(i.isHemisphereLight){let e=T.get(i);e.skyColor.copy(i.color).multiplyScalar(r*b),e.groundColor.copy(i.groundColor).multiplyScalar(r*b),w.hemi[m]=e,m++}}0<f&&(n.isWebGL2||!0===i.has("OES_texture_float_linear")?(w.rectAreaLTC1=s.LTC_FLOAT_1,w.rectAreaLTC2=s.LTC_FLOAT_2):!0===i.has("OES_texture_half_float_linear")?(w.rectAreaLTC1=s.LTC_HALF_1,w.rectAreaLTC2=s.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),w.ambient[0]=l,w.ambient[1]=h,w.ambient[2]=c;let t=w.hash;t.directionalLength===u&&t.pointLength===d&&t.spotLength===p&&t.rectAreaLength===f&&t.hemiLength===m&&t.numDirectionalShadows===g&&t.numPointShadows===v&&t.numSpotShadows===y&&t.numSpotMaps===_&&t.numLightProbes===S||(w.directional.length=u,w.spot.length=p,w.rectArea.length=f,w.point.length=d,w.hemi.length=m,w.directionalShadow.length=g,w.directionalShadowMap.length=g,w.pointShadow.length=v,w.pointShadowMap.length=v,w.spotShadow.length=y,w.spotShadowMap.length=y,w.directionalShadowMatrix.length=g,w.pointShadowMatrix.length=v,w.spotLightMatrix.length=y+_-x,w.spotLightMap.length=_,w.numSpotLightShadowsWithMaps=x,w.numLightProbes=S,t.directionalLength=u,t.pointLength=d,t.spotLength=p,t.rectAreaLength=f,t.hemiLength=m,t.numDirectionalShadows=g,t.numPointShadows=v,t.numSpotShadows=y,t.numSpotMaps=_,t.numLightProbes=S,w.version=gs++)},setupView:function(i,e){let n=0,r=0,a=0,s=0,o=0;var l=e.matrixWorldInverse;for(let e=0,t=i.length;e<t;e++){var h=i[e];if(h.isDirectionalLight){let e=w.directional[n];e.direction.setFromMatrixPosition(h.matrixWorld),c.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(c),e.direction.transformDirection(l),n++}else if(h.isSpotLight){let e=w.spot[a];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(l),e.direction.setFromMatrixPosition(h.matrixWorld),c.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(c),e.direction.transformDirection(l),a++}else if(h.isRectAreaLight){let e=w.rectArea[s];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(l),d.identity(),u.copy(h.matrixWorld),u.premultiply(l),d.extractRotation(u),e.halfWidth.set(.5*h.width,0,0),e.halfHeight.set(0,.5*h.height,0),e.halfWidth.applyMatrix4(d),e.halfHeight.applyMatrix4(d),s++}else if(h.isPointLight){let e=w.point[r];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(l),r++}else if(h.isHemisphereLight){let e=w.hemi[o];e.direction.setFromMatrixPosition(h.matrixWorld),e.direction.transformDirection(l),o++}}},state:w}}function _s(e,t){let i=new ys(e,t),n=[],r=[];return{init:function(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:i},setupLights:function(e){i.setup(n,e)},setupLightsView:function(e){i.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function xs(r,a){let s=new WeakMap;return{get:function(e,t=0){var i=s.get(e);let n;return void 0===i?(n=new _s(r,a),s.set(e,[n])):t>=i.length?(n=new _s(r,a),i.push(n)):n=i[t],n},dispose:function(){s=new WeakMap}}}class Ss extends t{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class bs extends t{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Ts(f,m,e){let g=new ar,v=new Fe,y=new Fe,_=new Ge,n=new Ss({depthPacking:3201}),s=new bs,o={},x=e.maxTextureSize,l={[We]:Ue,[Ue]:We,2:2},S=new Yn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Fe},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),b=S.clone();b.defines.HORIZONTAL_PASS=1;e=new C;e.setAttribute("position",new A(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let T=new P(e,S),M=this,w=(this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=L,this.type);function E(e,r,t,i){let a=null;e=!0===t.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==e)a=e;else if(a=!0===t.isPointLight?s:n,f.localClippingEnabled&&!0===r.clipShadows&&Array.isArray(r.clippingPlanes)&&0!==r.clippingPlanes.length||r.displacementMap&&0!==r.displacementScale||r.alphaMap&&0<r.alphaTest||r.map&&0<r.alphaTest){let e=a.uuid,t=r.uuid,i=o[e],n=(void 0===i&&(i={},o[e]=i),i[t]);void 0===n&&(n=a.clone(),i[t]=n),a=n}return a.visible=r.visible,a.wireframe=r.wireframe,a.side=i===I?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:l[r.side],a.alphaMap=r.alphaMap,a.alphaTest=r.alphaTest,a.map=r.map,a.clipShadows=r.clipShadows,a.clippingPlanes=r.clippingPlanes,a.clipIntersection=r.clipIntersection,a.displacementMap=r.displacementMap,a.displacementScale=r.displacementScale,a.displacementBias=r.displacementBias,a.wireframeLinewidth=r.wireframeLinewidth,a.linewidth=r.linewidth,!0===t.isPointLight&&!0===a.isMeshDistanceMaterial&&(f.properties.get(a).light=t),a}this.render=function(a,s,o){if(!1!==M.enabled&&(!1!==M.autoUpdate||!1!==M.needsUpdate)&&0!==a.length){let e=f.getRenderTarget(),t=f.getActiveCubeFace(),i=f.getActiveMipmapLevel(),r=f.state;r.setBlending(0),r.buffers.color.setClear(1,1,1,1),r.buffers.depth.setTest(!0),r.setScissorTest(!1);var l,h,c=w!==I&&this.type===I,u=w===I&&this.type!==I;for(let e=0,t=a.length;e<t;e++){let i=a[e],n=i.shadow;if(void 0===n)console.warn("THREE.WebGLShadowMap:",i,"has no shadow.");else if(!1!==n.autoUpdate||!1!==n.needsUpdate){v.copy(n.mapSize);var d=n.getFrameExtents();if(v.multiply(d),y.copy(n.mapSize),(v.x>x||v.y>x)&&(v.x>x&&(y.x=Math.floor(x/d.x),v.x=y.x*d.x,n.mapSize.x=y.x),v.y>x)&&(y.y=Math.floor(x/d.y),v.y=y.y*d.y,n.mapSize.y=y.y),null===n.map||!0==c||!0==u){let e=this.type!==I?{minFilter:W,magFilter:W}:{};null!==n.map&&n.map.dispose(),n.map=new Xt(v.x,v.y,e),n.map.texture.name=i.name+".shadowMap",n.camera.updateProjectionMatrix()}f.setRenderTarget(n.map),f.clear();var p=n.getViewportCount();for(let t=0;t<p;t++){let e=n.getViewport(t);_.set(y.x*e.x,y.y*e.y,y.x*e.z,y.y*e.w),r.viewport(_),n.updateMatrices(i,t),g=n.getFrustum(),function n(s,r,o,l,h){if(!1!==s.visible){if(s.layers.test(r.layers)&&(s.isMesh||s.isLine||s.isPoints)&&(s.castShadow||s.receiveShadow&&h===I)&&(!s.frustumCulled||g.intersectsObject(s))){s.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,s.matrixWorld);let r=m.update(s),a=s.material;if(Array.isArray(a)){let n=r.groups;for(let e=0,t=n.length;e<t;e++){let t=n[e],i=a[t.materialIndex];if(i&&i.visible){let e=E(s,i,l,h);f.renderBufferDirect(o,null,r,e,s,t)}}}else if(a.visible){let e=E(s,a,l,h);f.renderBufferDirect(o,null,r,e,s,null)}}let i=s.children;for(let e=0,t=i.length;e<t;e++)n(i[e],r,o,l,h)}}(s,o,n.camera,i,this.type)}!0!==n.isPointLightShadow&&this.type===I&&(d=n,l=o,h=void 0,h=m.update(T),S.defines.VSM_SAMPLES!==d.blurSamples&&(S.defines.VSM_SAMPLES=d.blurSamples,b.defines.VSM_SAMPLES=d.blurSamples,S.needsUpdate=!0,b.needsUpdate=!0),null===d.mapPass&&(d.mapPass=new Xt(v.x,v.y)),S.uniforms.shadow_pass.value=d.map.texture,S.uniforms.resolution.value=d.mapSize,S.uniforms.radius.value=d.radius,f.setRenderTarget(d.mapPass),f.clear(),f.renderBufferDirect(l,null,h,S,T,null),b.uniforms.shadow_pass.value=d.mapPass.texture,b.uniforms.resolution.value=d.mapSize,b.uniforms.radius.value=d.radius,f.setRenderTarget(d.map),f.clear(),f.renderBufferDirect(l,null,h,b,T,null)),n.needsUpdate=!1}}w=this.type,M.needsUpdate=!1,f.setRenderTarget(e,t,i)}}}function Ms(c,U,B){let s=B.isWebGL2,n=new function(){let t=!1,a=new Ge,i=null,s=new Ge(0,0,0,0);return{setMask:function(e){i===e||t||(c.colorMask(e,e,e,e),i=e)},setLocked:function(e){t=e},setClear:function(e,t,i,n,r){!0===r&&(e*=n,t*=n,i*=n),a.set(e,t,i,n),!1===s.equals(a)&&(c.clearColor(e,t,i,n),s.copy(a))},reset:function(){t=!1,i=null,s.set(-1,0,0,0)}}},r=new function(){let t=!1,i=null,n=null,r=null;return{setTest:function(e){(e?L:D)(c.DEPTH_TEST)},setMask:function(e){i===e||t||(c.depthMask(e),i=e)},setFunc:function(e){if(n!==e){switch(e){case 0:c.depthFunc(c.NEVER);break;case 1:c.depthFunc(c.ALWAYS);break;case 2:c.depthFunc(c.LESS);break;case 3:default:c.depthFunc(c.LEQUAL);break;case 4:c.depthFunc(c.EQUAL);break;case 5:c.depthFunc(c.GEQUAL);break;case 6:c.depthFunc(c.GREATER);break;case 7:c.depthFunc(c.NOTEQUAL)}n=e}},setLocked:function(e){t=e},setClear:function(e){r!==e&&(c.clearDepth(e),r=e)},reset:function(){t=!1,i=null,n=null,r=null}}},a=new function(){let t=!1,i=null,n=null,r=null,a=null,s=null,o=null,l=null,h=null;return{setTest:function(e){t||(e?L:D)(c.STENCIL_TEST)},setMask:function(e){i===e||t||(c.stencilMask(e),i=e)},setFunc:function(e,t,i){n===e&&r===t&&a===i||(c.stencilFunc(e,t,i),n=e,r=t,a=i)},setOp:function(e,t,i){s===e&&o===t&&l===i||(c.stencilOp(e,t,i),s=e,o=t,l=i)},setLocked:function(e){t=e},setClear:function(e){h!==e&&(c.clearStencil(e),h=e)},reset:function(){t=!1,i=null,n=null,r=null,a=null,s=null,o=null,l=null,h=null}}},F=new WeakMap,o=new WeakMap,t={},i={},l=new WeakMap,G=[],h=null,u=!1,d=null,p=null,f=null,m=null,g=null,v=null,y=null,_=new ze(0,0,0),x=0,S=!1,b=null,T=null,M=null,w=null,k=null,H=c.getParameter(c.MAX_COMBINED_TEXTURE_IMAGE_UNITS),z=!1,e=0;var E=c.getParameter(c.VERSION);-1!==E.indexOf("WebGL")?(e=parseFloat(/^WebGL (\d)/.exec(E)[1]),z=1<=e):-1!==E.indexOf("OpenGL ES")&&(e=parseFloat(/^OpenGL ES (\d)/.exec(E)[1]),z=2<=e);let A=null,C={},V=c.getParameter(c.SCISSOR_BOX),W=c.getParameter(c.VIEWPORT),X=(new Ge).fromArray(V),j=(new Ge).fromArray(W);function P(t,i,n,r){var a=new Uint8Array(4),e=c.createTexture();c.bindTexture(t,e),c.texParameteri(t,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(t,c.TEXTURE_MAG_FILTER,c.NEAREST);for(let e=0;e<n;e++)!s||t!==c.TEXTURE_3D&&t!==c.TEXTURE_2D_ARRAY?c.texImage2D(i+e,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,a):c.texImage3D(i,0,c.RGBA,1,1,r,0,c.RGBA,c.UNSIGNED_BYTE,a);return e}let R={};function L(e){!0!==t[e]&&(c.enable(e),t[e]=!0)}function D(e){!1!==t[e]&&(c.disable(e),t[e]=!1)}R[c.TEXTURE_2D]=P(c.TEXTURE_2D,c.TEXTURE_2D,1),R[c.TEXTURE_CUBE_MAP]=P(c.TEXTURE_CUBE_MAP,c.TEXTURE_CUBE_MAP_POSITIVE_X,6),s&&(R[c.TEXTURE_2D_ARRAY]=P(c.TEXTURE_2D_ARRAY,c.TEXTURE_2D_ARRAY,1,1),R[c.TEXTURE_3D]=P(c.TEXTURE_3D,c.TEXTURE_3D,1,1)),n.setClear(0,0,0,1),r.setClear(1),a.setClear(0),L(c.DEPTH_TEST),r.setFunc(3),q(!1),Y(1),L(c.CULL_FACE),O(0);let I={[Z]:c.FUNC_ADD,101:c.FUNC_SUBTRACT,102:c.FUNC_REVERSE_SUBTRACT};if(s)I[103]=c.MIN,I[104]=c.MAX;else{let e=U.get("EXT_blend_minmax");null!==e&&(I[103]=e.MIN_EXT,I[104]=e.MAX_EXT)}let N={200:c.ZERO,201:c.ONE,202:c.SRC_COLOR,[J]:c.SRC_ALPHA,210:c.SRC_ALPHA_SATURATE,208:c.DST_COLOR,206:c.DST_ALPHA,203:c.ONE_MINUS_SRC_COLOR,[Q]:c.ONE_MINUS_SRC_ALPHA,209:c.ONE_MINUS_DST_COLOR,207:c.ONE_MINUS_DST_ALPHA,211:c.CONSTANT_COLOR,212:c.ONE_MINUS_CONSTANT_COLOR,213:c.CONSTANT_ALPHA,214:c.ONE_MINUS_CONSTANT_ALPHA};function O(e,t,i,n,r,a,s,o,l,h){if(0!==e){if(!1===u&&(L(c.BLEND),u=!0),5===e)r=r||t,a=a||i,s=s||n,t===p&&r===g||(c.blendEquationSeparate(I[t],I[r]),p=t,g=r),i===f&&n===m&&a===v&&s===y||(c.blendFuncSeparate(N[i],N[n],N[a],N[s]),f=i,m=n,v=a,y=s),!1!==o.equals(_)&&l===x||(c.blendColor(o.r,o.g,o.b,l),_.copy(o),x=l),d=e,S=!1;else if(e!==d||h!==S){if(p===Z&&g===Z||(c.blendEquation(c.FUNC_ADD),p=Z,g=Z),h)switch(e){case 1:c.blendFuncSeparate(c.ONE,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case 2:c.blendFunc(c.ONE,c.ONE);break;case 3:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case 4:c.blendFuncSeparate(c.ZERO,c.SRC_COLOR,c.ZERO,c.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case 2:c.blendFunc(c.SRC_ALPHA,c.ONE);break;case 3:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case 4:c.blendFunc(c.ZERO,c.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}f=null,m=null,v=null,y=null,_.set(0,0,0),x=0,d=e,S=h}}else!0===u&&(D(c.BLEND),u=!1)}function q(e){b!==e&&(e?c.frontFace(c.CW):c.frontFace(c.CCW),b=e)}function Y(e){0!==e?(L(c.CULL_FACE),e!==T&&(1===e?c.cullFace(c.BACK):2===e?c.cullFace(c.FRONT):c.cullFace(c.FRONT_AND_BACK))):D(c.CULL_FACE),T=e}function K(e,t,i){e?(L(c.POLYGON_OFFSET_FILL),w===t&&k===i||(c.polygonOffset(t,i),w=t,k=i)):D(c.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:r,stencil:a},enable:L,disable:D,bindFramebuffer:function(e,t){return i[e]!==t&&(c.bindFramebuffer(e,t),i[e]=t,s&&(e===c.DRAW_FRAMEBUFFER&&(i[c.FRAMEBUFFER]=t),e===c.FRAMEBUFFER)&&(i[c.DRAW_FRAMEBUFFER]=t),!0)},drawBuffers:function(e,t){let n=G,r=!1;if(e)if(void 0===(n=l.get(t))&&(n=[],l.set(t,n)),e.isWebGLMultipleRenderTargets){let i=e.texture;if(n.length!==i.length||n[0]!==c.COLOR_ATTACHMENT0){for(let e=0,t=i.length;e<t;e++)n[e]=c.COLOR_ATTACHMENT0+e;n.length=i.length,r=!0}}else n[0]!==c.COLOR_ATTACHMENT0&&(n[0]=c.COLOR_ATTACHMENT0,r=!0);else n[0]!==c.BACK&&(n[0]=c.BACK,r=!0);r&&(B.isWebGL2?c.drawBuffers(n):U.get("WEBGL_draw_buffers").drawBuffersWEBGL(n))},useProgram:function(e){return h!==e&&(c.useProgram(e),h=e,!0)},setBlending:O,setMaterial:function(e,t){(2===e.side?D:L)(c.CULL_FACE);let i=e.side===Ue;q(i=t?!i:i),1===e.blending&&!1===e.transparent?O(0):O(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.blendColor,e.blendAlpha,e.premultipliedAlpha),r.setFunc(e.depthFunc),r.setTest(e.depthTest),r.setMask(e.depthWrite),n.setMask(e.colorWrite);t=e.stencilWrite;a.setTest(t),t&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),K(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),(!0===e.alphaToCoverage?L:D)(c.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:q,setCullFace:Y,setLineWidth:function(e){e!==M&&(z&&c.lineWidth(e),M=e)},setPolygonOffset:K,setScissorTest:function(e){(e?L:D)(c.SCISSOR_TEST)},activeTexture:function(e){void 0===e&&(e=c.TEXTURE0+H-1),A!==e&&(c.activeTexture(e),A=e)},bindTexture:function(e,t,i){void 0===i&&(i=null===A?c.TEXTURE0+H-1:A);let n=C[i];void 0===n&&(n={type:void 0,texture:void 0},C[i]=n),n.type===e&&n.texture===t||(A!==i&&(c.activeTexture(i),A=i),c.bindTexture(e,t||R[e]),n.type=e,n.texture=t)},unbindTexture:function(){var e=C[A];void 0!==e&&void 0!==e.type&&(c.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{c.compressedTexImage2D.apply(c,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{c.compressedTexImage3D.apply(c,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{c.texImage2D.apply(c,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{c.texImage3D.apply(c,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(e,t){let i=o.get(t);void 0===i&&(i=new WeakMap,o.set(t,i)),void 0===i.get(e)&&(t=c.getUniformBlockIndex(t,e.name),i.set(e,t))},uniformBlockBinding:function(e,t){var i=o.get(t).get(e);F.get(t)!==i&&(c.uniformBlockBinding(t,i,e.__bindingPointIndex),F.set(t,i))},texStorage2D:function(){try{c.texStorage2D.apply(c,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{c.texStorage3D.apply(c,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{c.texSubImage2D.apply(c,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{c.texSubImage3D.apply(c,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{c.compressedTexSubImage2D.apply(c,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{c.compressedTexSubImage3D.apply(c,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===X.equals(e)&&(c.scissor(e.x,e.y,e.z,e.w),X.copy(e))},viewport:function(e){!1===j.equals(e)&&(c.viewport(e.x,e.y,e.z,e.w),j.copy(e))},reset:function(){c.disable(c.BLEND),c.disable(c.CULL_FACE),c.disable(c.DEPTH_TEST),c.disable(c.POLYGON_OFFSET_FILL),c.disable(c.SCISSOR_TEST),c.disable(c.STENCIL_TEST),c.disable(c.SAMPLE_ALPHA_TO_COVERAGE),c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ONE,c.ZERO),c.blendFuncSeparate(c.ONE,c.ZERO,c.ONE,c.ZERO),c.blendColor(0,0,0,0),c.colorMask(!0,!0,!0,!0),c.clearColor(0,0,0,0),c.depthMask(!0),c.depthFunc(c.LESS),c.clearDepth(1),c.stencilMask(4294967295),c.stencilFunc(c.ALWAYS,0,4294967295),c.stencilOp(c.KEEP,c.KEEP,c.KEEP),c.clearStencil(0),c.cullFace(c.BACK),c.frontFace(c.CCW),c.polygonOffset(0,0),c.activeTexture(c.TEXTURE0),c.bindFramebuffer(c.FRAMEBUFFER,null),!0===s&&(c.bindFramebuffer(c.DRAW_FRAMEBUFFER,null),c.bindFramebuffer(c.READ_FRAMEBUFFER,null)),c.useProgram(null),c.lineWidth(1),c.scissor(0,0,c.canvas.width,c.canvas.height),c.viewport(0,0,c.canvas.width,c.canvas.height),t={},A=null,C={},i={},l=new WeakMap,G=[],h=null,u=!1,d=null,p=null,f=null,m=null,g=null,v=null,y=null,_=new ze(0,0,0),x=0,S=!1,b=null,T=null,M=null,w=null,k=null,X.set(0,0,c.canvas.width,c.canvas.height),j.set(0,0,c.canvas.width,c.canvas.height),n.reset(),r.reset(),a.reset()}}}function ws(y,s,_,x,a,S,h){let b=a.isWebGL2,t=a.maxTextures,B=a.maxCubemapSize,F=a.maxTextureSize,G=a.maxSamples,c=s.has("WEBGL_multisampled_render_to_texture")?s.get("WEBGL_multisampled_render_to_texture"):null,k="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),o=new WeakMap,l,u=new WeakMap,i=!1;try{i="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(y){}function d(e,t){return i?new OffscreenCanvas(e,t):Ct("canvas")}function T(n,r,a,e){let s=1;if((s=n.width>e||n.height>e?e/Math.max(n.width,n.height):s)<1||!0===r){if("undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap){let e=r?St:Math.floor,t=e(s*n.width),i=e(s*n.height);void 0===l&&(l=d(t,i));r=a?d(t,i):l;return r.width=t,r.height=i,r.getContext("2d").drawImage(n,0,0,t,i),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+n.width+"x"+n.height+") to ("+t+"x"+i+")."),r}"data"in n&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+n.width+"x"+n.height+").")}return n}function M(e){return _t(e.width)&&_t(e.height)}function w(e,t){return e.generateMipmaps&&t&&e.minFilter!==W&&e.minFilter!==X}function E(e){y.generateMipmap(e)}function A(e,t,i,n,r=!1){if(!1===b)return t;if(null!==e){if(void 0!==y[e])return y[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}let a=t;if(t===y.RED&&(i===y.FLOAT&&(a=y.R32F),i===y.HALF_FLOAT&&(a=y.R16F),i===y.UNSIGNED_BYTE)&&(a=y.R8),t===y.RED_INTEGER&&(i===y.UNSIGNED_BYTE&&(a=y.R8UI),i===y.UNSIGNED_SHORT&&(a=y.R16UI),i===y.UNSIGNED_INT&&(a=y.R32UI),i===y.BYTE&&(a=y.R8I),i===y.SHORT&&(a=y.R16I),i===y.INT)&&(a=y.R32I),t===y.RG&&(i===y.FLOAT&&(a=y.RG32F),i===y.HALF_FLOAT&&(a=y.RG16F),i===y.UNSIGNED_BYTE)&&(a=y.RG8),t===y.RGBA){let e=r?ot:me.getTransfer(n);i===y.FLOAT&&(a=y.RGBA32F),i===y.HALF_FLOAT&&(a=y.RGBA16F),i===y.UNSIGNED_BYTE&&(a=e===fe?y.SRGB8_ALPHA8:y.RGBA8),i===y.UNSIGNED_SHORT_4_4_4_4&&(a=y.RGBA4),i===y.UNSIGNED_SHORT_5_5_5_1&&(a=y.RGB5_A1)}return a!==y.R16F&&a!==y.R32F&&a!==y.RG16F&&a!==y.RG32F&&a!==y.RGBA16F&&a!==y.RGBA32F||s.get("EXT_color_buffer_float"),a}function C(e,t,i){return!0===w(e,i)||e.isFramebufferTexture&&e.minFilter!==W&&e.minFilter!==X?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&0<e.mipmaps.length?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function n(e){return e===W||e===ee||e===te?y.NEAREST:y.LINEAR}function p(e){var e=e.target,t=(e.removeEventListener("dispose",p),e),i=x.get(t);if(void 0!==i.__webglInit){var n=t.source,r=u.get(n);if(r){let e=r[i.__cacheKey];e.usedTimes--,0===e.usedTimes&&m(t),0===Object.keys(r).length&&u.delete(n)}x.remove(t)}e.isVideoTexture&&o.delete(e)}function f(t){t=t.target;t.removeEventListener("dispose",f);{let i=t.texture,n=x.get(t),e=x.get(i);if(void 0!==e.__webglTexture&&(y.deleteTexture(e.__webglTexture),h.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++){if(Array.isArray(n.__webglFramebuffer[t]))for(let e=0;e<n.__webglFramebuffer[t].length;e++)y.deleteFramebuffer(n.__webglFramebuffer[t][e]);else y.deleteFramebuffer(n.__webglFramebuffer[t]);n.__webglDepthbuffer&&y.deleteRenderbuffer(n.__webglDepthbuffer[t])}else{if(Array.isArray(n.__webglFramebuffer))for(let e=0;e<n.__webglFramebuffer.length;e++)y.deleteFramebuffer(n.__webglFramebuffer[e]);else y.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&y.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&y.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let e=0;e<n.__webglColorRenderbuffer.length;e++)n.__webglColorRenderbuffer[e]&&y.deleteRenderbuffer(n.__webglColorRenderbuffer[e]);n.__webglDepthRenderbuffer&&y.deleteRenderbuffer(n.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let t=0,e=i.length;t<e;t++){let e=x.get(i[t]);e.__webglTexture&&(y.deleteTexture(e.__webglTexture),h.memory.textures--),x.remove(i[t])}x.remove(i),x.remove(t)}}function m(e){var t=x.get(e),e=(y.deleteTexture(t.__webglTexture),e.source);delete u.get(e)[t.__cacheKey],h.memory.textures--}let r=0;function g(t,i){var e,n,r=x.get(t);if(t.isVideoTexture&&(e=t,n=h.render.frame,o.get(e)!==n&&(o.set(e,n),e.update())),!1===t.isRenderTargetTexture&&0<t.version&&r.__version!==t.version){let e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void L(r,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}_.bindTexture(y.TEXTURE_2D,r.__webglTexture,y.TEXTURE0+i)}let v={[Y]:y.REPEAT,[K]:y.CLAMP_TO_EDGE,[$]:y.MIRRORED_REPEAT},P={[W]:y.NEAREST,[ee]:y.NEAREST_MIPMAP_NEAREST,[te]:y.NEAREST_MIPMAP_LINEAR,[X]:y.LINEAR,[ie]:y.LINEAR_MIPMAP_NEAREST,[je]:y.LINEAR_MIPMAP_LINEAR},H={512:y.NEVER,519:y.ALWAYS,513:y.LESS,515:y.LEQUAL,514:y.EQUAL,518:y.GEQUAL,516:y.GREATER,517:y.NOTEQUAL};function R(t,i,e){if(e?(y.texParameteri(t,y.TEXTURE_WRAP_S,v[i.wrapS]),y.texParameteri(t,y.TEXTURE_WRAP_T,v[i.wrapT]),t!==y.TEXTURE_3D&&t!==y.TEXTURE_2D_ARRAY||y.texParameteri(t,y.TEXTURE_WRAP_R,v[i.wrapR]),y.texParameteri(t,y.TEXTURE_MAG_FILTER,P[i.magFilter]),y.texParameteri(t,y.TEXTURE_MIN_FILTER,P[i.minFilter])):(y.texParameteri(t,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(t,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),t!==y.TEXTURE_3D&&t!==y.TEXTURE_2D_ARRAY||y.texParameteri(t,y.TEXTURE_WRAP_R,y.CLAMP_TO_EDGE),i.wrapS===K&&i.wrapT===K||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),y.texParameteri(t,y.TEXTURE_MAG_FILTER,n(i.magFilter)),y.texParameteri(t,y.TEXTURE_MIN_FILTER,n(i.minFilter)),i.minFilter!==W&&i.minFilter!==X&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),i.compareFunction&&(y.texParameteri(t,y.TEXTURE_COMPARE_MODE,y.COMPARE_REF_TO_TEXTURE),y.texParameteri(t,y.TEXTURE_COMPARE_FUNC,H[i.compareFunction])),!0===s.has("EXT_texture_filter_anisotropic")){let e=s.get("EXT_texture_filter_anisotropic");i.magFilter===W||i.minFilter!==te&&i.minFilter!==je||i.type===Ze&&!1===s.has("OES_texture_float_linear")||!1===b&&i.type===Je&&!1===s.has("OES_texture_half_float_linear")||(1<i.anisotropy||x.get(i).__currentAnisotropy)&&(y.texParameterf(t,e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(i.anisotropy,a.getMaxAnisotropy())),x.get(i).__currentAnisotropy=i.anisotropy)}}function z(t,i){let n=!1,e=(void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",p)),i.source),r=u.get(e);void 0===r&&(r={},u.set(e,r));(a=[]).push((s=i).wrapS),a.push(s.wrapT),a.push(s.wrapR||0),a.push(s.magFilter),a.push(s.minFilter),a.push(s.anisotropy),a.push(s.internalFormat),a.push(s.format),a.push(s.type),a.push(s.generateMipmaps),a.push(s.premultiplyAlpha),a.push(s.flipY),a.push(s.unpackAlignment),a.push(s.colorSpace);var a,s=a.join();if(s!==t.__cacheKey){void 0===r[s]&&(r[s]={texture:y.createTexture(),usedTimes:0},h.memory.textures++,n=!0),r[s].usedTimes++;let e=r[t.__cacheKey];void 0!==e&&(r[t.__cacheKey].usedTimes--,0===e.usedTimes)&&m(i),t.__cacheKey=s,t.__webglTexture=r[s].texture}return n}function L(e,s,o){let l=y.TEXTURE_2D;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(l=y.TEXTURE_2D_ARRAY),s.isData3DTexture&&(l=y.TEXTURE_3D);var h=z(e,s),c=s.source,u=(_.bindTexture(l,e.__webglTexture,y.TEXTURE0+o),x.get(c));if(c.version!==u.__version||!0===h){_.activeTexture(y.TEXTURE0+o);let e=me.getPrimaries(me.workingColorSpace),t=s.colorSpace===Ne?null:me.getPrimaries(s.colorSpace),i=s.colorSpace===Ne||e===t?y.NONE:y.BROWSER_DEFAULT_WEBGL;y.pixelStorei(y.UNPACK_FLIP_Y_WEBGL,s.flipY),y.pixelStorei(y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),y.pixelStorei(y.UNPACK_ALIGNMENT,s.unpackAlignment),y.pixelStorei(y.UNPACK_COLORSPACE_CONVERSION_WEBGL,i);o=s;var d,o=!b&&(o.wrapS!==K||o.wrapT!==K||o.minFilter!==W&&o.minFilter!==X)&&!1===M(s.image),o=M(d=V(s,T(s.image,o,!1,F)))||b,p=S.convert(s.format,s.colorSpace);let n,r=S.convert(s.type),a=A(s.internalFormat,p,r,s.colorSpace,s.isVideoTexture);R(l,s,o);var f=s.mipmaps,m=b&&!0!==s.isVideoTexture,h=void 0===u.__version||!0===h,g=C(s,d,o);if(s.isDepthTexture)a=y.DEPTH_COMPONENT,b?a=s.type===Ze?y.DEPTH_COMPONENT32F:s.type===Ke?y.DEPTH_COMPONENT24:s.type===et?y.DEPTH24_STENCIL8:y.DEPTH_COMPONENT16:s.type===Ze&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),s.format===re&&a===y.DEPTH_COMPONENT&&s.type!==Ye&&s.type!==Ke&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),s.type=Ke,r=S.convert(s.type)),s.format===ae&&a===y.DEPTH_COMPONENT&&(a=y.DEPTH_STENCIL,s.type!==et)&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),s.type=et,r=S.convert(s.type)),h&&(m?_.texStorage2D(y.TEXTURE_2D,1,a,d.width,d.height):_.texImage2D(y.TEXTURE_2D,0,a,d.width,d.height,0,p,r,null));else if(s.isDataTexture)if(0<f.length&&o){m&&h&&_.texStorage2D(y.TEXTURE_2D,g,a,f[0].width,f[0].height);for(let e=0,t=f.length;e<t;e++)n=f[e],m?_.texSubImage2D(y.TEXTURE_2D,e,0,0,n.width,n.height,p,r,n.data):_.texImage2D(y.TEXTURE_2D,e,a,n.width,n.height,0,p,r,n.data);s.generateMipmaps=!1}else m?(h&&_.texStorage2D(y.TEXTURE_2D,g,a,d.width,d.height),_.texSubImage2D(y.TEXTURE_2D,0,0,0,d.width,d.height,p,r,d.data)):_.texImage2D(y.TEXTURE_2D,0,a,d.width,d.height,0,p,r,d.data);else if(s.isCompressedTexture)if(s.isCompressedArrayTexture){m&&h&&_.texStorage3D(y.TEXTURE_2D_ARRAY,g,a,f[0].width,f[0].height,d.depth);for(let e=0,t=f.length;e<t;e++)n=f[e],s.format!==tt?null!==p?m?_.compressedTexSubImage3D(y.TEXTURE_2D_ARRAY,e,0,0,0,n.width,n.height,d.depth,p,n.data,0,0):_.compressedTexImage3D(y.TEXTURE_2D_ARRAY,e,a,n.width,n.height,d.depth,0,n.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):m?_.texSubImage3D(y.TEXTURE_2D_ARRAY,e,0,0,0,n.width,n.height,d.depth,p,r,n.data):_.texImage3D(y.TEXTURE_2D_ARRAY,e,a,n.width,n.height,d.depth,0,p,r,n.data)}else{m&&h&&_.texStorage2D(y.TEXTURE_2D,g,a,f[0].width,f[0].height);for(let e=0,t=f.length;e<t;e++)n=f[e],s.format!==tt?null!==p?m?_.compressedTexSubImage2D(y.TEXTURE_2D,e,0,0,n.width,n.height,p,n.data):_.compressedTexImage2D(y.TEXTURE_2D,e,a,n.width,n.height,0,n.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):m?_.texSubImage2D(y.TEXTURE_2D,e,0,0,n.width,n.height,p,r,n.data):_.texImage2D(y.TEXTURE_2D,e,a,n.width,n.height,0,p,r,n.data)}else if(s.isDataArrayTexture)m?(h&&_.texStorage3D(y.TEXTURE_2D_ARRAY,g,a,d.width,d.height,d.depth),_.texSubImage3D(y.TEXTURE_2D_ARRAY,0,0,0,0,d.width,d.height,d.depth,p,r,d.data)):_.texImage3D(y.TEXTURE_2D_ARRAY,0,a,d.width,d.height,d.depth,0,p,r,d.data);else if(s.isData3DTexture)m?(h&&_.texStorage3D(y.TEXTURE_3D,g,a,d.width,d.height,d.depth),_.texSubImage3D(y.TEXTURE_3D,0,0,0,0,d.width,d.height,d.depth,p,r,d.data)):_.texImage3D(y.TEXTURE_3D,0,a,d.width,d.height,d.depth,0,p,r,d.data);else if(s.isFramebufferTexture){if(h)if(m)_.texStorage2D(y.TEXTURE_2D,g,a,d.width,d.height);else{let t=d.width,i=d.height;for(let e=0;e<g;e++)_.texImage2D(y.TEXTURE_2D,e,a,t,i,0,p,r,null),t>>=1,i>>=1}}else if(0<f.length&&o){m&&h&&_.texStorage2D(y.TEXTURE_2D,g,a,f[0].width,f[0].height);for(let e=0,t=f.length;e<t;e++)n=f[e],m?_.texSubImage2D(y.TEXTURE_2D,e,0,0,p,r,n):_.texImage2D(y.TEXTURE_2D,e,a,p,r,n);s.generateMipmaps=!1}else m?(h&&_.texStorage2D(y.TEXTURE_2D,g,a,d.width,d.height),_.texSubImage2D(y.TEXTURE_2D,0,0,0,p,r,d)):_.texImage2D(y.TEXTURE_2D,0,a,p,r,d);w(s,o)&&E(l),u.__version=c.version,s.onUpdate&&s.onUpdate(s)}e.__version=s.version}function D(e,i,t,n,r,a){var s=S.convert(t.format,t.colorSpace),o=S.convert(t.type),l=A(t.internalFormat,s,o,t.colorSpace);if(!x.get(i).__hasExternalTextures){let e=Math.max(1,i.width>>a),t=Math.max(1,i.height>>a);r===y.TEXTURE_3D||r===y.TEXTURE_2D_ARRAY?_.texImage3D(r,a,l,e,t,i.depth,0,s,o,null):_.texImage2D(r,a,l,e,t,0,s,o,null)}_.bindFramebuffer(y.FRAMEBUFFER,e),U(i)?c.framebufferTexture2DMultisampleEXT(y.FRAMEBUFFER,n,r,x.get(t).__webglTexture,0,O(i)):(r===y.TEXTURE_2D||r>=y.TEXTURE_CUBE_MAP_POSITIVE_X&&r<=y.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&y.framebufferTexture2D(y.FRAMEBUFFER,n,r,x.get(t).__webglTexture,a),_.bindFramebuffer(y.FRAMEBUFFER,null)}function I(e,o,l){if(y.bindRenderbuffer(y.RENDERBUFFER,e),o.depthBuffer&&!o.stencilBuffer){let i=!0===b?y.DEPTH_COMPONENT24:y.DEPTH_COMPONENT16;if(l||U(o)){let e=o.depthTexture,t=(e&&e.isDepthTexture&&(e.type===Ze?i=y.DEPTH_COMPONENT32F:e.type===Ke&&(i=y.DEPTH_COMPONENT24)),O(o));U(o)?c.renderbufferStorageMultisampleEXT(y.RENDERBUFFER,t,i,o.width,o.height):y.renderbufferStorageMultisample(y.RENDERBUFFER,t,i,o.width,o.height)}else y.renderbufferStorage(y.RENDERBUFFER,i,o.width,o.height);y.framebufferRenderbuffer(y.FRAMEBUFFER,y.DEPTH_ATTACHMENT,y.RENDERBUFFER,e)}else if(o.depthBuffer&&o.stencilBuffer){var t=O(o);l&&!1===U(o)?y.renderbufferStorageMultisample(y.RENDERBUFFER,t,y.DEPTH24_STENCIL8,o.width,o.height):U(o)?c.renderbufferStorageMultisampleEXT(y.RENDERBUFFER,t,y.DEPTH24_STENCIL8,o.width,o.height):y.renderbufferStorage(y.RENDERBUFFER,y.DEPTH_STENCIL,o.width,o.height),y.framebufferRenderbuffer(y.FRAMEBUFFER,y.DEPTH_STENCIL_ATTACHMENT,y.RENDERBUFFER,e)}else{let s=!0===o.isWebGLMultipleRenderTargets?o.texture:[o.texture];for(let a=0;a<s.length;a++){let e=s[a],t=S.convert(e.format,e.colorSpace),i=S.convert(e.type),n=A(e.internalFormat,t,i,e.colorSpace),r=O(o);l&&!1===U(o)?y.renderbufferStorageMultisample(y.RENDERBUFFER,r,n,o.width,o.height):U(o)?c.renderbufferStorageMultisampleEXT(y.RENDERBUFFER,r,n,o.width,o.height):y.renderbufferStorage(y.RENDERBUFFER,n,o.width,o.height)}}y.bindRenderbuffer(y.RENDERBUFFER,null)}function N(t){var i=x.get(t),e=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(e)throw new Error("target.depthTexture not supported in Cube render targets");var n=i.__webglFramebuffer,r=t;if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(_.bindFramebuffer(y.FRAMEBUFFER,n),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");x.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),g(r.depthTexture,0);var n=x.get(r.depthTexture).__webglTexture,a=O(r);if(r.depthTexture.format===re)U(r)?c.framebufferTexture2DMultisampleEXT(y.FRAMEBUFFER,y.DEPTH_ATTACHMENT,y.TEXTURE_2D,n,0,a):y.framebufferTexture2D(y.FRAMEBUFFER,y.DEPTH_ATTACHMENT,y.TEXTURE_2D,n,0);else{if(r.depthTexture.format!==ae)throw new Error("Unknown depthTexture format");U(r)?c.framebufferTexture2DMultisampleEXT(y.FRAMEBUFFER,y.DEPTH_STENCIL_ATTACHMENT,y.TEXTURE_2D,n,0,a):y.framebufferTexture2D(y.FRAMEBUFFER,y.DEPTH_STENCIL_ATTACHMENT,y.TEXTURE_2D,n,0)}}else if(e){i.__webglDepthbuffer=[];for(let e=0;e<6;e++)_.bindFramebuffer(y.FRAMEBUFFER,i.__webglFramebuffer[e]),i.__webglDepthbuffer[e]=y.createRenderbuffer(),I(i.__webglDepthbuffer[e],t,!1)}else _.bindFramebuffer(y.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=y.createRenderbuffer(),I(i.__webglDepthbuffer,t,!1);_.bindFramebuffer(y.FRAMEBUFFER,null)}function O(e){return Math.min(G,e.samples)}function U(e){var t=x.get(e);return b&&0<e.samples&&!0===s.has("WEBGL_multisampled_render_to_texture")&&!1!==t.__useRenderToTexture}function V(e,t){var i=e.colorSpace,n=e.format,r=e.type;return!0!==e.isCompressedTexture&&!0!==e.isVideoTexture&&e.format!==ut&&i!==at&&i!==Ne&&(me.getTransfer(i)===fe?!1===b?!0===s.has("EXT_sRGB")&&n===tt?(e.format=ut,e.minFilter=X,e.generateMipmaps=!1):t=Gt.sRGBToLinear(t):n===tt&&r===qe||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",i)),t}this.allocateTextureUnit=function(){var e=r;return e>=t&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+t),r+=1,e},this.resetTextureUnits=function(){r=0},this.setTexture2D=g,this.setTexture2DArray=function(e,t){var i=x.get(e);0<e.version&&i.__version!==e.version?L(i,e,t):_.bindTexture(y.TEXTURE_2D_ARRAY,i.__webglTexture,y.TEXTURE0+t)},this.setTexture3D=function(e,t){var i=x.get(e);0<e.version&&i.__version!==e.version?L(i,e,t):_.bindTexture(y.TEXTURE_3D,i.__webglTexture,y.TEXTURE0+t)},this.setTextureCube=function(a,e){var t=x.get(a);if(0<a.version&&t.__version!==a.version){var i=t,s=a,a=e;if(6===s.image.length){var o=z(i,s),l=s.source,h=(_.bindTexture(y.TEXTURE_CUBE_MAP,i.__webglTexture,y.TEXTURE0+a),x.get(l));if(l.version!==h.__version||!0===o){_.activeTexture(y.TEXTURE0+a);let e=me.getPrimaries(me.workingColorSpace),t=s.colorSpace===Ne?null:me.getPrimaries(s.colorSpace),i=s.colorSpace===Ne||e===t?y.NONE:y.BROWSER_DEFAULT_WEBGL;y.pixelStorei(y.UNPACK_FLIP_Y_WEBGL,s.flipY),y.pixelStorei(y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),y.pixelStorei(y.UNPACK_ALIGNMENT,s.unpackAlignment),y.pixelStorei(y.UNPACK_COLORSPACE_CONVERSION_WEBGL,i);var c=s.isCompressedTexture||s.image[0].isCompressedTexture,u=s.image[0]&&s.image[0].isDataTexture,d=[];for(let e=0;e<6;e++)d[e]=c||u?u?s.image[e].image:s.image[e]:T(s.image[e],!1,!0,B),d[e]=V(s,d[e]);var a=d[0],p=M(a)||b,f=S.convert(s.format,s.colorSpace),m=S.convert(s.type),g=A(s.internalFormat,f,m,s.colorSpace),v=b&&!0!==s.isVideoTexture,o=void 0===h.__version||!0===o;let n,r=C(s,a,p);if(R(y.TEXTURE_CUBE_MAP,s,p),c){v&&o&&_.texStorage2D(y.TEXTURE_CUBE_MAP,r,g,a.width,a.height);for(let i=0;i<6;i++){n=d[i].mipmaps;for(let t=0;t<n.length;t++){let e=n[t];s.format!==tt?null!==f?v?_.compressedTexSubImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+i,t,0,0,e.width,e.height,f,e.data):_.compressedTexImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+i,t,g,e.width,e.height,0,e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):v?_.texSubImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+i,t,0,0,e.width,e.height,f,m,e.data):_.texImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+i,t,g,e.width,e.height,0,f,m,e.data)}}}else{n=s.mipmaps,v&&o&&(0<n.length&&r++,_.texStorage2D(y.TEXTURE_CUBE_MAP,r,g,d[0].width,d[0].height));for(let i=0;i<6;i++)if(u){v?_.texSubImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,0,0,d[i].width,d[i].height,f,m,d[i].data):_.texImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,g,d[i].width,d[i].height,0,f,m,d[i].data);for(let t=0;t<n.length;t++){let e=n[t].image[i].image;v?_.texSubImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+i,t+1,0,0,e.width,e.height,f,m,e.data):_.texImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+i,t+1,g,e.width,e.height,0,f,m,e.data)}}else{v?_.texSubImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,0,0,f,m,d[i]):_.texImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,g,f,m,d[i]);for(let t=0;t<n.length;t++){let e=n[t];v?_.texSubImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+i,t+1,0,0,f,m,e.image[i]):_.texImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+i,t+1,g,f,m,e.image[i])}}}w(s,p)&&E(y.TEXTURE_CUBE_MAP),h.__version=l.version,s.onUpdate&&s.onUpdate(s)}i.__version=s.version}}else _.bindTexture(y.TEXTURE_CUBE_MAP,t.__webglTexture,y.TEXTURE0+e)},this.rebindTextures=function(e,t,i){var n=x.get(e);void 0!==t&&D(n.__webglFramebuffer,e,e.texture,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,0),void 0!==i&&N(e)},this.setupRenderTarget=function(o){let i=o.texture,l=x.get(o),e=x.get(i);o.addEventListener("dispose",f),!0!==o.isWebGLMultipleRenderTargets&&(void 0===e.__webglTexture&&(e.__webglTexture=y.createTexture()),e.__version=i.version,h.memory.textures++);var t=!0===o.isWebGLCubeRenderTarget,n=!0===o.isWebGLMultipleRenderTargets,r=M(o)||b;if(t){l.__webglFramebuffer=[];for(let t=0;t<6;t++)if(b&&i.mipmaps&&0<i.mipmaps.length){l.__webglFramebuffer[t]=[];for(let e=0;e<i.mipmaps.length;e++)l.__webglFramebuffer[t][e]=y.createFramebuffer()}else l.__webglFramebuffer[t]=y.createFramebuffer()}else{if(b&&i.mipmaps&&0<i.mipmaps.length){l.__webglFramebuffer=[];for(let e=0;e<i.mipmaps.length;e++)l.__webglFramebuffer[e]=y.createFramebuffer()}else l.__webglFramebuffer=y.createFramebuffer();if(n)if(a.drawBuffers){let i=o.texture;for(let t=0,e=i.length;t<e;t++){let e=x.get(i[t]);void 0===e.__webglTexture&&(e.__webglTexture=y.createTexture(),h.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(b&&0<o.samples&&!1===U(o)){let s=n?i:[i];l.__webglMultisampledFramebuffer=y.createFramebuffer(),l.__webglColorRenderbuffer=[],_.bindFramebuffer(y.FRAMEBUFFER,l.__webglMultisampledFramebuffer);for(let a=0;a<s.length;a++){let e=s[a],t=(l.__webglColorRenderbuffer[a]=y.createRenderbuffer(),y.bindRenderbuffer(y.RENDERBUFFER,l.__webglColorRenderbuffer[a]),S.convert(e.format,e.colorSpace)),i=S.convert(e.type),n=A(e.internalFormat,t,i,e.colorSpace,!0===o.isXRRenderTarget),r=O(o);y.renderbufferStorageMultisample(y.RENDERBUFFER,r,n,o.width,o.height),y.framebufferRenderbuffer(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0+a,y.RENDERBUFFER,l.__webglColorRenderbuffer[a])}y.bindRenderbuffer(y.RENDERBUFFER,null),o.depthBuffer&&(l.__webglDepthRenderbuffer=y.createRenderbuffer(),I(l.__webglDepthRenderbuffer,o,!0)),_.bindFramebuffer(y.FRAMEBUFFER,null)}}if(t){_.bindTexture(y.TEXTURE_CUBE_MAP,e.__webglTexture),R(y.TEXTURE_CUBE_MAP,i,r);for(let t=0;t<6;t++)if(b&&i.mipmaps&&0<i.mipmaps.length)for(let e=0;e<i.mipmaps.length;e++)D(l.__webglFramebuffer[t][e],o,i,y.COLOR_ATTACHMENT0,y.TEXTURE_CUBE_MAP_POSITIVE_X+t,e);else D(l.__webglFramebuffer[t],o,i,y.COLOR_ATTACHMENT0,y.TEXTURE_CUBE_MAP_POSITIVE_X+t,0);w(i,r)&&E(y.TEXTURE_CUBE_MAP)}else if(n){let n=o.texture;for(let i=0,e=n.length;i<e;i++){let e=n[i],t=x.get(e);_.bindTexture(y.TEXTURE_2D,t.__webglTexture),R(y.TEXTURE_2D,e,r),D(l.__webglFramebuffer,o,e,y.COLOR_ATTACHMENT0+i,y.TEXTURE_2D,0),w(e,r)&&E(y.TEXTURE_2D)}}else{let t=y.TEXTURE_2D;if((o.isWebGL3DRenderTarget||o.isWebGLArrayRenderTarget)&&(b?t=o.isWebGL3DRenderTarget?y.TEXTURE_3D:y.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),_.bindTexture(t,e.__webglTexture),R(t,i,r),b&&i.mipmaps&&0<i.mipmaps.length)for(let e=0;e<i.mipmaps.length;e++)D(l.__webglFramebuffer[e],o,i,y.COLOR_ATTACHMENT0,t,e);else D(l.__webglFramebuffer,o,i,y.COLOR_ATTACHMENT0,t,0);w(i,r)&&E(t)}_.unbindTexture(),o.depthBuffer&&N(o)},this.updateRenderTargetMipmap=function(n){let r=M(n)||b,a=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let e=0,t=a.length;e<t;e++){let i=a[e];if(w(i,r)){let e=n.isWebGLCubeRenderTarget?y.TEXTURE_CUBE_MAP:y.TEXTURE_2D,t=x.get(i).__webglTexture;_.bindTexture(e,t),E(e),_.unbindTexture()}}},this.updateMultisampleRenderTarget=function(i){if(b&&0<i.samples&&!1===U(i)){var n=i.isWebGLMultipleRenderTargets?i.texture:[i.texture],r=i.width,a=i.height;let e=y.COLOR_BUFFER_BIT;var s=[],o=i.stencilBuffer?y.DEPTH_STENCIL_ATTACHMENT:y.DEPTH_ATTACHMENT,l=x.get(i),h=!0===i.isWebGLMultipleRenderTargets;if(h)for(let e=0;e<n.length;e++)_.bindFramebuffer(y.FRAMEBUFFER,l.__webglMultisampledFramebuffer),y.framebufferRenderbuffer(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0+e,y.RENDERBUFFER,null),_.bindFramebuffer(y.FRAMEBUFFER,l.__webglFramebuffer),y.framebufferTexture2D(y.DRAW_FRAMEBUFFER,y.COLOR_ATTACHMENT0+e,y.TEXTURE_2D,null,0);_.bindFramebuffer(y.READ_FRAMEBUFFER,l.__webglMultisampledFramebuffer),_.bindFramebuffer(y.DRAW_FRAMEBUFFER,l.__webglFramebuffer);for(let t=0;t<n.length;t++){s.push(y.COLOR_ATTACHMENT0+t),i.depthBuffer&&s.push(o);var c=void 0!==l.__ignoreDepthValues&&l.__ignoreDepthValues;if(!1===c&&(i.depthBuffer&&(e|=y.DEPTH_BUFFER_BIT),i.stencilBuffer)&&(e|=y.STENCIL_BUFFER_BIT),h&&y.framebufferRenderbuffer(y.READ_FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.RENDERBUFFER,l.__webglColorRenderbuffer[t]),!0===c&&(y.invalidateFramebuffer(y.READ_FRAMEBUFFER,[o]),y.invalidateFramebuffer(y.DRAW_FRAMEBUFFER,[o])),h){let e=x.get(n[t]).__webglTexture;y.framebufferTexture2D(y.DRAW_FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,e,0)}y.blitFramebuffer(0,0,r,a,0,0,r,a,e,y.NEAREST),k&&y.invalidateFramebuffer(y.READ_FRAMEBUFFER,s)}if(_.bindFramebuffer(y.READ_FRAMEBUFFER,null),_.bindFramebuffer(y.DRAW_FRAMEBUFFER,null),h)for(let e=0;e<n.length;e++){_.bindFramebuffer(y.FRAMEBUFFER,l.__webglMultisampledFramebuffer),y.framebufferRenderbuffer(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0+e,y.RENDERBUFFER,l.__webglColorRenderbuffer[e]);var t=x.get(n[e]).__webglTexture;_.bindFramebuffer(y.FRAMEBUFFER,l.__webglFramebuffer),y.framebufferTexture2D(y.DRAW_FRAMEBUFFER,y.COLOR_ATTACHMENT0+e,y.TEXTURE_2D,t,0)}_.bindFramebuffer(y.DRAW_FRAMEBUFFER,l.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=N,this.setupFrameBufferTexture=D,this.useMultisampledRTT=U}function Es(n,r,e){let a=e.isWebGL2;return{convert:function(e,t=""){let i;t=me.getTransfer(t);if(e===qe)return n.UNSIGNED_BYTE;if(e===Qe)return n.UNSIGNED_SHORT_4_4_4_4;if(e===$e)return n.UNSIGNED_SHORT_5_5_5_1;if(1010===e)return n.BYTE;if(1011===e)return n.SHORT;if(e===Ye)return n.UNSIGNED_SHORT;if(e===ne)return n.INT;if(e===Ke)return n.UNSIGNED_INT;if(e===Ze)return n.FLOAT;if(e===Je)return a?n.HALF_FLOAT:null!==(i=r.get("OES_texture_half_float"))?i.HALF_FLOAT_OES:null;if(1021===e)return n.ALPHA;if(e===tt)return n.RGBA;if(1024===e)return n.LUMINANCE;if(1025===e)return n.LUMINANCE_ALPHA;if(e===re)return n.DEPTH_COMPONENT;if(e===ae)return n.DEPTH_STENCIL;if(e===ut)return null!==(i=r.get("EXT_sRGB"))?i.SRGB_ALPHA_EXT:null;if(1028===e)return n.RED;if(e===it)return n.RED_INTEGER;if(1030===e)return n.RG;if(e===nt)return n.RG_INTEGER;if(e===rt)return n.RGBA_INTEGER;if(e===b||e===T||e===M||e===w)if(t===fe){if(null===(i=r.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(e===b)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===T)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===M)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===w)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(i=r.get("WEBGL_compressed_texture_s3tc")))return null;if(e===b)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===T)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===M)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===w)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===E||e===se||e===oe||e===le){if(null===(i=r.get("WEBGL_compressed_texture_pvrtc")))return null;if(e===E)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===se)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===oe)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===le)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return null!==(i=r.get("WEBGL_compressed_texture_etc1"))?i.COMPRESSED_RGB_ETC1_WEBGL:null;if(e===he||e===ce){if(null===(i=r.get("WEBGL_compressed_texture_etc")))return null;if(e===he)return t===fe?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(e===ce)return t===fe?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(e===ue||e===de||e===pe||e===ve||e===ye||e===_e||e===xe||e===Se||e===be||e===Te||e===Me||e===we||e===Ee||e===Ae){if(null===(i=r.get("WEBGL_compressed_texture_astc")))return null;if(e===ue)return t===fe?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===de)return t===fe?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===pe)return t===fe?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===ve)return t===fe?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===ye)return t===fe?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===_e)return t===fe?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===xe)return t===fe?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===Se)return t===fe?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===be)return t===fe?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===Te)return t===fe?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===Me)return t===fe?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===we)return t===fe?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===Ee)return t===fe?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===Ae)return t===fe?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(e===Ce||e===Pe||e===Re){if(null===(i=r.get("EXT_texture_compression_bptc")))return null;if(e===Ce)return t===fe?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(e===Pe)return i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(e===Re)return i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===e||e===Le||e===De||e===Ie){if(null===(i=r.get("EXT_texture_compression_rgtc")))return null;if(e===Ce)return i.COMPRESSED_RED_RGTC1_EXT;if(e===Le)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===De)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===Ie)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return e===et?a?n.UNSIGNED_INT_24_8:null!==(i=r.get("WEBGL_depth_texture"))?i.UNSIGNED_INT_24_8_WEBGL:null:void 0!==n[e]?n[e]:null}}}class As extends N{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Cs extends p{constructor(){super(),this.isGroup=!0,this.type="Group"}}let Ps={type:"move"};class Rs{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Cs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Cs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ke,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ke),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Cs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ke,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ke),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){var t=this._hand;if(t)for(var i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(n,r,a){let e=null,t=null,s=null,i=this._targetRay,o=this._grip,l=this._hand;if(n&&"visible-blurred"!==r.session.visibilityState){if(l&&n.hand){s=!0;for(let i of n.hand.values()){let e=r.getJointPose(i,a),t=this._getHandJoint(l,i);null!==e&&(t.matrix.fromArray(e.transform.matrix),t.matrix.decompose(t.position,t.rotation,t.scale),t.matrixWorldNeedsUpdate=!0,t.jointRadius=e.radius),t.visible=null!==e}let e=l.joints["index-finger-tip"],t=l.joints["thumb-tip"],i=e.position.distanceTo(t.position);l.inputState.pinching&&.025<i?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:n.handedness,target:this})):!l.inputState.pinching&&i<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:n.handedness,target:this}))}else null!==o&&n.gripSpace&&null!==(t=r.getPose(n.gripSpace,a))&&(o.matrix.fromArray(t.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,t.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(t.linearVelocity)):o.hasLinearVelocity=!1,t.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(t.angularVelocity)):o.hasAngularVelocity=!1);null!==i&&null!==(e=null===(e=r.getPose(n.targetRaySpace,a))&&null!==t?t:e)&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,e.linearVelocity?(i.hasLinearVelocity=!0,i.linearVelocity.copy(e.linearVelocity)):i.hasLinearVelocity=!1,e.angularVelocity?(i.hasAngularVelocity=!0,i.angularVelocity.copy(e.angularVelocity)):i.hasAngularVelocity=!1,this.dispatchEvent(Ps))}return null!==i&&(i.visible=null!==e),null!==o&&(o.visible=null!==t),null!==l&&(l.visible=null!==s),this}_getHandJoint(e,t){var i;return void 0===e.joints[t.jointName]&&((i=new Cs).matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)),e.joints[t.jointName]}}class Ls extends c{constructor(e,t,i,n,r,a,s,o,l,h){if((h=void 0!==h?h:re)!==re&&h!==ae)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,n,r,a,s,o,h,i=void 0===(i=void 0===i&&h===re?Ke:i)&&h===ae?et:i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==s?s:W,this.minFilter=void 0!==o?o:W,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){e=super.toJSON(e);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}class Ds extends dt{constructor(s,r){super();let i=this,f=null,a=1,o=null,t="local-floor",n=1,l=null,h,c=null,u=null,d=null,p=null,m=r.getContextAttributes(),g=null,v=null,y=[],_=[],x=new N,S=(x.layers.enable(1),x.viewport=new Ge,new N),b=(S.layers.enable(2),S.viewport=new Ge,[x,S]),T=new As,M=(T.layers.enable(1),T.layers.enable(2),null),w=null;function E(e){var t=_.indexOf(e.inputSource);-1!==t&&void 0!==(t=y[t])&&(t.update(e.inputSource,e.frame,l||o),t.dispatchEvent({type:e.type,data:e.inputSource}))}function A(){f.removeEventListener("select",E),f.removeEventListener("selectstart",E),f.removeEventListener("selectend",E),f.removeEventListener("squeeze",E),f.removeEventListener("squeezestart",E),f.removeEventListener("squeezeend",E),f.removeEventListener("end",A),f.removeEventListener("inputsourceschange",C);for(let e=0;e<y.length;e++){var t=_[e];null!==t&&(_[e]=null,y[e].disconnect(t))}M=null,w=null,s.setRenderTarget(g),d=null,u=null,c=null,f=null,v=null,I.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function C(i){for(let e=0;e<i.removed.length;e++){var t=i.removed[e],n=_.indexOf(t);0<=n&&(_[n]=null,y[n].disconnect(t))}for(let e=0;e<i.added.length;e++){var r=i.added[e];let t=_.indexOf(r);if(-1===t){for(let e=0;e<y.length;e++){if(e>=_.length){_.push(r),t=e;break}if(null===_[e]){_[e]=r,t=e;break}}if(-1===t)break}var a=y[t];a&&a.connect(r)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=y[e];return void 0===t&&(t=new Rs,y[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=y[e];return void 0===t&&(t=new Rs,y[e]=t),t.getGripSpace()},this.getHand=function(e){let t=y[e];return void 0===t&&(t=new Rs,y[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){a=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){t=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==u?u:d},this.getBinding=function(){return c},this.getFrame=function(){return p},this.getSession=function(){return f},this.setSession=async function(e){if(null!==(f=e)){if(g=s.getRenderTarget(),f.addEventListener("select",E),f.addEventListener("selectstart",E),f.addEventListener("selectend",E),f.addEventListener("squeeze",E),f.addEventListener("squeezestart",E),f.addEventListener("squeezeend",E),f.addEventListener("end",A),f.addEventListener("inputsourceschange",C),!0!==m.xrCompatible&&await r.makeXRCompatible(),void 0===f.renderState.layers||!1===s.capabilities.isWebGL2){let e={antialias:void 0!==f.renderState.layers||m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:a};d=new XRWebGLLayer(f,r,e),f.updateRenderState({baseLayer:d}),v=new Xt(d.framebufferWidth,d.framebufferHeight,{format:tt,type:qe,colorSpace:s.outputColorSpace,stencilBuffer:m.stencil})}else{let e=null,t=null,i=null,n=(m.depth&&(i=m.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,e=m.stencil?ae:re,t=m.stencil?et:Ke),{colorFormat:r.RGBA8,depthFormat:i,scaleFactor:a});c=new XRWebGLBinding(f,r),u=c.createProjectionLayer(n),f.updateRenderState({layers:[u]}),v=new Xt(u.textureWidth,u.textureHeight,{format:tt,type:qe,depthTexture:new Ls(u.textureWidth,u.textureHeight,t,void 0,void 0,void 0,void 0,void 0,void 0,e),stencilBuffer:m.stencil,colorSpace:s.outputColorSpace,samples:m.antialias?4:0}),s.properties.get(v).__ignoreDepthValues=u.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(n),l=null,o=await f.requestReferenceSpace(t),I.setContext(f),I.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==f)return f.environmentBlendMode};let P=new ke,R=new ke;function L(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null!==f){T.near=S.near=x.near=e.near,T.far=S.far=x.far=e.far,M===T.near&&w===T.far||(f.updateRenderState({depthNear:T.near,depthFar:T.far}),M=T.near,w=T.far);var t,i,n,r,a,s,o,l,h,c,u,d=e.parent,p=T.cameras;L(T,d);for(let e=0;e<p.length;e++)L(p[e],d);2===p.length?(t=T,i=x,n=S,P.setFromMatrixPosition(i.matrixWorld),R.setFromMatrixPosition(n.matrixWorld),r=P.distanceTo(R),a=i.projectionMatrix.elements,n=n.projectionMatrix.elements,s=a[14]/(a[10]-1),o=a[14]/(a[10]+1),l=(a[9]+1)/a[5],h=(a[9]-1)/a[5],a=(a[8]-1)/a[0],n=(n[8]+1)/n[0],c=s*a,u=s*n,a=(n=r/(n-a))*-a,i.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(a),t.translateZ(n),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert(),i=s+n,s=o+n,t.projectionMatrix.makePerspective(c-a,r-a+u,l*o/s*i,h*o/s*i,i,s),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()):T.projectionMatrix.copy(x.projectionMatrix),n=e,c=T,null===(r=d)?n.matrix.copy(c.matrixWorld):(n.matrix.copy(r.matrixWorld),n.matrix.invert(),n.matrix.multiply(c.matrixWorld)),n.matrix.decompose(n.position,n.quaternion,n.scale),n.updateMatrixWorld(!0),n.projectionMatrix.copy(c.projectionMatrix),n.projectionMatrixInverse.copy(c.projectionMatrixInverse),n.isPerspectiveCamera&&(n.fov=2*mt*Math.atan(1/n.projectionMatrix.elements[5]),n.zoom=1)}},this.getCamera=function(){return T},this.getFoveation=function(){if(null!==u||null!==d)return n},this.setFoveation=function(e){n=e,null!==u&&(u.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)};let D=null,I=new sr;I.setAnimationLoop(function(e,n){if(h=n.getViewerPose(l||o),p=n,null!==h){let n=h.views,r=(null!==d&&(s.setRenderTargetFramebuffer(v,d.framebuffer),s.setRenderTarget(v)),!1);n.length!==T.cameras.length&&(T.cameras.length=0,r=!0);for(let i=0;i<n.length;i++){var a=n[i];let t=null;if(null!==d)t=d.getViewport(a);else{let e=c.getViewSubImage(u,a);t=e.viewport,0===i&&(s.setRenderTargetTextures(v,e.colorTexture,u.ignoreDepthValues?void 0:e.depthStencilTexture),s.setRenderTarget(v))}let e=b[i];void 0===e&&((e=new N).layers.enable(i),e.viewport=new Ge,b[i]=e),e.matrix.fromArray(a.transform.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale),e.projectionMatrix.fromArray(a.projectionMatrix),e.projectionMatrixInverse.copy(e.projectionMatrix).invert(),e.viewport.set(t.x,t.y,t.width,t.height),0===i&&(T.matrix.copy(e.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),!0===r&&T.cameras.push(e)}}for(let i=0;i<y.length;i++){let e=_[i],t=y[i];null!==e&&void 0!==t&&t.update(e,n,l||o)}D&&D(e,n),n.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:n}),p=null}),this.setAnimationLoop=function(e){D=e},this.dispose=function(){}}}function Is(n,c){function u(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function d(t,i){t.opacity.value=i.opacity,i.color&&t.diffuse.value.copy(i.color),i.emissive&&t.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(t.map.value=i.map,u(i.map,t.mapTransform)),i.alphaMap&&(t.alphaMap.value=i.alphaMap,u(i.alphaMap,t.alphaMapTransform)),i.bumpMap&&(t.bumpMap.value=i.bumpMap,u(i.bumpMap,t.bumpMapTransform),t.bumpScale.value=i.bumpScale,i.side===Ue)&&(t.bumpScale.value*=-1),i.normalMap&&(t.normalMap.value=i.normalMap,u(i.normalMap,t.normalMapTransform),t.normalScale.value.copy(i.normalScale),i.side===Ue)&&t.normalScale.value.negate(),i.displacementMap&&(t.displacementMap.value=i.displacementMap,u(i.displacementMap,t.displacementMapTransform),t.displacementScale.value=i.displacementScale,t.displacementBias.value=i.displacementBias),i.emissiveMap&&(t.emissiveMap.value=i.emissiveMap,u(i.emissiveMap,t.emissiveMapTransform)),i.specularMap&&(t.specularMap.value=i.specularMap,u(i.specularMap,t.specularMapTransform)),0<i.alphaTest&&(t.alphaTest.value=i.alphaTest);var e=c.get(i).envMap;if(e&&(t.envMap.value=e,t.flipEnvMap.value=e.isCubeTexture&&!1===e.isRenderTargetTexture?-1:1,t.reflectivity.value=i.reflectivity,t.ior.value=i.ior,t.refractionRatio.value=i.refractionRatio),i.lightMap){t.lightMap.value=i.lightMap;let e=!0===n._useLegacyLights?Math.PI:1;t.lightMapIntensity.value=i.lightMapIntensity*e,u(i.lightMap,t.lightMapTransform)}i.aoMap&&(t.aoMap.value=i.aoMap,t.aoMapIntensity.value=i.aoMapIntensity,u(i.aoMap,t.aoMapTransform))}return{refreshFogUniforms:function(e,t){t.color.getRGB(e.fogColor.value,jn(n)),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,t,i,n,r){var a,s,o,l,h;t.isMeshBasicMaterial||t.isMeshLambertMaterial?d(e,t):t.isMeshToonMaterial?(d(e,t),h=e,t.gradientMap&&(h.gradientMap.value=t.gradientMap)):t.isMeshPhongMaterial?(d(e,t),h=t,(l=e).specular.value.copy(h.specular),l.shininess.value=Math.max(h.shininess,1e-4)):t.isMeshStandardMaterial?(d(e,t),l=t,(o=e).metalness.value=l.metalness,l.metalnessMap&&(o.metalnessMap.value=l.metalnessMap,u(l.metalnessMap,o.metalnessMapTransform)),o.roughness.value=l.roughness,l.roughnessMap&&(o.roughnessMap.value=l.roughnessMap,u(l.roughnessMap,o.roughnessMapTransform)),c.get(l).envMap&&(o.envMapIntensity.value=l.envMapIntensity),t.isMeshPhysicalMaterial&&(o=t,r=r,(s=e).ior.value=o.ior,0<o.sheen&&(s.sheenColor.value.copy(o.sheenColor).multiplyScalar(o.sheen),s.sheenRoughness.value=o.sheenRoughness,o.sheenColorMap&&(s.sheenColorMap.value=o.sheenColorMap,u(o.sheenColorMap,s.sheenColorMapTransform)),o.sheenRoughnessMap)&&(s.sheenRoughnessMap.value=o.sheenRoughnessMap,u(o.sheenRoughnessMap,s.sheenRoughnessMapTransform)),0<o.clearcoat&&(s.clearcoat.value=o.clearcoat,s.clearcoatRoughness.value=o.clearcoatRoughness,o.clearcoatMap&&(s.clearcoatMap.value=o.clearcoatMap,u(o.clearcoatMap,s.clearcoatMapTransform)),o.clearcoatRoughnessMap&&(s.clearcoatRoughnessMap.value=o.clearcoatRoughnessMap,u(o.clearcoatRoughnessMap,s.clearcoatRoughnessMapTransform)),o.clearcoatNormalMap)&&(s.clearcoatNormalMap.value=o.clearcoatNormalMap,u(o.clearcoatNormalMap,s.clearcoatNormalMapTransform),s.clearcoatNormalScale.value.copy(o.clearcoatNormalScale),o.side===Ue)&&s.clearcoatNormalScale.value.negate(),0<o.iridescence&&(s.iridescence.value=o.iridescence,s.iridescenceIOR.value=o.iridescenceIOR,s.iridescenceThicknessMinimum.value=o.iridescenceThicknessRange[0],s.iridescenceThicknessMaximum.value=o.iridescenceThicknessRange[1],o.iridescenceMap&&(s.iridescenceMap.value=o.iridescenceMap,u(o.iridescenceMap,s.iridescenceMapTransform)),o.iridescenceThicknessMap)&&(s.iridescenceThicknessMap.value=o.iridescenceThicknessMap,u(o.iridescenceThicknessMap,s.iridescenceThicknessMapTransform)),0<o.transmission&&(s.transmission.value=o.transmission,s.transmissionSamplerMap.value=r.texture,s.transmissionSamplerSize.value.set(r.width,r.height),o.transmissionMap&&(s.transmissionMap.value=o.transmissionMap,u(o.transmissionMap,s.transmissionMapTransform)),s.thickness.value=o.thickness,o.thicknessMap&&(s.thicknessMap.value=o.thicknessMap,u(o.thicknessMap,s.thicknessMapTransform)),s.attenuationDistance.value=o.attenuationDistance,s.attenuationColor.value.copy(o.attenuationColor)),0<o.anisotropy&&(s.anisotropyVector.value.set(o.anisotropy*Math.cos(o.anisotropyRotation),o.anisotropy*Math.sin(o.anisotropyRotation)),o.anisotropyMap)&&(s.anisotropyMap.value=o.anisotropyMap,u(o.anisotropyMap,s.anisotropyMapTransform)),s.specularIntensity.value=o.specularIntensity,s.specularColor.value.copy(o.specularColor),o.specularColorMap&&(s.specularColorMap.value=o.specularColorMap,u(o.specularColorMap,s.specularColorMapTransform)),o.specularIntensityMap)&&(s.specularIntensityMap.value=o.specularIntensityMap,u(o.specularIntensityMap,s.specularIntensityMapTransform))):t.isMeshMatcapMaterial?(d(e,t),r=e,t.matcap&&(r.matcap.value=t.matcap)):t.isMeshDepthMaterial?d(e,t):t.isMeshDistanceMaterial?(d(e,t),o=e,s=c.get(t).light,o.referencePosition.value.setFromMatrixPosition(s.matrixWorld),o.nearDistance.value=s.shadow.camera.near,o.farDistance.value=s.shadow.camera.far):t.isMeshNormalMaterial?d(e,t):t.isLineBasicMaterial?(r=t,(a=e).diffuse.value.copy(r.color),a.opacity.value=r.opacity,r.map&&(a.map.value=r.map,u(r.map,a.mapTransform)),t.isLineDashedMaterial&&(r=t,(a=e).dashSize.value=r.dashSize,a.totalSize.value=r.dashSize+r.gapSize,a.scale.value=r.scale)):t.isPointsMaterial?(a=t,r=i,i=n,(n=e).diffuse.value.copy(a.color),n.opacity.value=a.opacity,n.size.value=a.size*r,n.scale.value=.5*i,a.map&&(n.map.value=a.map,u(a.map,n.uvTransform)),a.alphaMap&&(n.alphaMap.value=a.alphaMap,u(a.alphaMap,n.alphaMapTransform)),0<a.alphaTest&&(n.alphaTest.value=a.alphaTest)):t.isSpriteMaterial?(r=t,(i=e).diffuse.value.copy(r.color),i.opacity.value=r.opacity,i.rotation.value=r.rotation,r.map&&(i.map.value=r.map,u(r.map,i.mapTransform)),r.alphaMap&&(i.alphaMap.value=r.alphaMap,u(r.alphaMap,i.alphaMapTransform)),0<r.alphaTest&&(i.alphaTest.value=r.alphaTest)):t.isShadowMaterial?(e.color.value.copy(t.color),e.opacity.value=t.opacity):t.isShaderMaterial&&(t.uniformsNeedUpdate=!1)}}}function Ns(p,f,e,m){let g={},v={},y=[],_=e.isWebGL2?p.getParameter(p.MAX_UNIFORM_BUFFER_BINDINGS):0;function x(e){var t={boundary:0,storage:0};return"number"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function S(e){var e=e.target,t=(e.removeEventListener("dispose",S),y.indexOf(e.__bindingPointIndex));y.splice(t,1),p.deleteBuffer(g[e.id]),delete g[e.id],delete v[e.id]}return{bind:function(e,t){t=t.program;m.uniformBlockBinding(e,t)},update:function(t,e){var i,n,r=g[t.id];if(void 0===r){{var a;let i=(a=t).uniforms,n=0,r=0;for(let e=0,t=i.length;e<t;e++){var s=i[e],o={boundary:0,storage:0},l=Array.isArray(s.value)?s.value:[s.value];for(let t=0,e=l.length;t<e;t++){let e=x(l[t]);o.boundary+=e.boundary,o.storage+=e.storage}s.__data=new Float32Array(o.storage/Float32Array.BYTES_PER_ELEMENT),s.__offset=n,0<e&&0!==(r=n%16)&&16-r-o.boundary<0&&(n+=16-r,s.__offset=n),n+=o.storage}0<(r=n%16)&&(n+=16-r),a.__size=n,a.__cache={}}a=t,i=(()=>{for(let e=0;e<_;e++)if(-1===y.indexOf(e))return y.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0})(),a.__bindingPointIndex=i,n=p.createBuffer(),h=a.__size,a=a.usage,p.bindBuffer(p.UNIFORM_BUFFER,n),p.bufferData(p.UNIFORM_BUFFER,h,a),p.bindBuffer(p.UNIFORM_BUFFER,null),p.bindBufferBase(p.UNIFORM_BUFFER,i,n),r=n,g[t.id]=r,t.addEventListener("dispose",S)}var h=e.program,a=(m.updateUBOMapping(t,h),f.render.frame);if(v[t.id]!==a){{var c=t;let e=g[c.id],i=c.uniforms,n=c.__cache;p.bindBuffer(p.UNIFORM_BUFFER,e);for(let e=0,t=i.length;e<t;e++){let r=i[e];if(!0===((e,r,a)=>{var s=e.value;if(void 0===a[r]){if("number"==typeof s)a[r]=s;else{let t=Array.isArray(s)?s:[s],i=[];for(let e=0;e<t.length;e++)i.push(t[e].clone());a[r]=i}return!0}if("number"==typeof s){if(a[r]!==s)return a[r]=s,!0}else{let i=Array.isArray(a[r])?a[r]:[a[r]],n=Array.isArray(s)?s:[s];for(let t=0;t<i.length;t++){let e=i[t];if(!1===e.equals(n[t]))return e.copy(n[t]),!0}}return!1})(r,e,n)){let t=r.__offset,i=Array.isArray(r.value)?r.value:[r.value],n=0;for(let e=0;e<i.length;e++){var u=i[e],d=x(u);"number"==typeof u?(r.__data[0]=u,p.bufferSubData(p.UNIFORM_BUFFER,t+n,r.__data)):u.isMatrix3?(r.__data[0]=u.elements[0],r.__data[1]=u.elements[1],r.__data[2]=u.elements[2],r.__data[3]=u.elements[0],r.__data[4]=u.elements[3],r.__data[5]=u.elements[4],r.__data[6]=u.elements[5],r.__data[7]=u.elements[0],r.__data[8]=u.elements[6],r.__data[9]=u.elements[7],r.__data[10]=u.elements[8],r.__data[11]=u.elements[0]):(u.toArray(r.__data,n),n+=d.storage/Float32Array.BYTES_PER_ELEMENT)}p.bufferSubData(p.UNIFORM_BUFFER,t,r.__data)}}p.bindBuffer(p.UNIFORM_BUFFER,null)}v[t.id]=a}},dispose:function(){for(var e in g)p.deleteBuffer(g[e]);y=[],g={},v={}}}}class Os{constructor(e={}){let{canvas:r=Pt(),context:_=null,depth:x=!0,stencil:S=!0,alpha:G=!1,antialias:k=!1,premultipliedAlpha:H=!0,preserveDrawingBuffer:z=!1,powerPreference:V="default",failIfMajorPerformanceCaveat:W=!1}=e,X,o=(this.isWebGLRenderer=!0,X=null!==_?_.getContextAttributes().alpha:G,new Uint32Array(4)),l=new Int32Array(4),c=null,b=null,i=[],s=[],T=(this.domElement=r,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Be,this._useLegacyLights=!1,this.toneMapping=Xe,this.toneMappingExposure=1,this),j=!1,q=0,Y=0,M=null,w=-1,E=null,u=new Ge,K=new Ge,Z=null,J=new ze(0),Q=0,n=r.width,A=r.height,C=1,$=null,ee=null,te=new Ge(0,0,n,A),ie=new Ge(0,0,n,A),ne=!1,re=new ar,ae=!1,se=!1,P=null,oe=new He,le=new Fe,R=new ke,he={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ce(){return null===M?C:1}let d,L,D,a,I,N,O,U,ue,de,p,f,pe,fe,me,B,h,m,ge,ve,ye,v,g,_e,F=_;function xe(t,i){for(let e=0;e<t.length;e++){var n=t[e],n=r.getContext(n,i);if(null!==n)return n}return null}try{let t={alpha:!0,depth:x,stencil:S,antialias:k,premultipliedAlpha:H,preserveDrawingBuffer:z,powerPreference:V,failIfMajorPerformanceCaveat:W};if("setAttribute"in r&&r.setAttribute("data-engine","three.js r"+Ve),r.addEventListener("webglcontextlost",be,!1),r.addEventListener("webglcontextrestored",Te,!1),r.addEventListener("webglcontextcreationerror",Me,!1),null===F){let e=["webgl2","webgl","experimental-webgl"];if(!0===T.isWebGL1Renderer&&e.shift(),null===(F=xe(e,t)))throw xe(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!=typeof WebGLRenderingContext&&F instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===F.getShaderPrecisionFormat&&(F.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function Se(){d=new Nr(F),L=new fr(F,d,e),d.init(L),v=new Es(F,d,L),D=new Ms(F,d,L),a=new Br(F),I=new cs,N=new ws(F,d,D,I,L,v,a),O=new gr(T),U=new Ir(T),ue=new or(F,L),g=new dr(F,d,ue,L),de=new Or(F,ue,a,g),p=new Hr(F,de,ue,a),ge=new kr(F,L,N),B=new mr(I),f=new hs(T,O,U,d,L,g,B),pe=new Is(T,I),fe=new fs,me=new xs(d,L),m=new ur(T,O,U,D,p,X,H),h=new Ts(T,p,L),_e=new Ns(F,a,L,D),ve=new pr(F,d,a,L),ye=new Ur(F,d,a,L),a.programs=f.programs,T.capabilities=L,T.extensions=d,T.properties=I,T.renderLists=fe,T.shadowMap=h,T.state=D,T.info=a}Se();let y=new Ds(T,F);function be(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),j=!0}function Te(){console.log("THREE.WebGLRenderer: Context Restored."),j=!1;var e=a.autoReset,t=h.enabled,i=h.autoUpdate,n=h.needsUpdate,r=h.type;Se(),a.autoReset=e,h.enabled=t,h.autoUpdate=i,h.needsUpdate=n,h.type=r}function Me(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function we(e){var t,i,e=e.target;e.removeEventListener("dispose",we),t=e=e,void 0!==(i=I.get(t).programs)&&(i.forEach(function(e){f.releaseProgram(e)}),t.isShaderMaterial)&&f.releaseShaderCache(t),I.remove(e)}function Ee(e,t,i){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=Ue,e.needsUpdate=!0,Ie(e,t,i),e.side=We,e.needsUpdate=!0,Ie(e,t,i),e.side=2):Ie(e,t,i)}this.xr=y,this.getContext=function(){return F},this.getContextAttributes=function(){return F.getContextAttributes()},this.forceContextLoss=function(){var e=d.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=d.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(e){void 0!==e&&(C=e,this.setSize(n,A,!1))},this.getSize=function(e){return e.set(n,A)},this.setSize=function(e,t,i=!0){y.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(n=e,A=t,r.width=Math.floor(e*C),r.height=Math.floor(t*C),!0===i&&(r.style.width=e+"px",r.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(n*C,A*C).floor()},this.setDrawingBufferSize=function(e,t,i){n=e,A=t,C=i,r.width=Math.floor(e*i),r.height=Math.floor(t*i),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(u)},this.getViewport=function(e){return e.copy(te)},this.setViewport=function(e,t,i,n){e.isVector4?te.set(e.x,e.y,e.z,e.w):te.set(e,t,i,n),D.viewport(u.copy(te).multiplyScalar(C).floor())},this.getScissor=function(e){return e.copy(ie)},this.setScissor=function(e,t,i,n){e.isVector4?ie.set(e.x,e.y,e.z,e.w):ie.set(e,t,i,n),D.scissor(K.copy(ie).multiplyScalar(C).floor())},this.getScissorTest=function(){return ne},this.setScissorTest=function(e){D.setScissorTest(ne=e)},this.setOpaqueSort=function(e){$=e},this.setTransparentSort=function(e){ee=e},this.getClearColor=function(e){return e.copy(m.getClearColor())},this.setClearColor=function(){m.setClearColor.apply(m,arguments)},this.getClearAlpha=function(){return m.getClearAlpha()},this.setClearAlpha=function(){m.setClearAlpha.apply(m,arguments)},this.clear=function(e=!0,t=!0,i=!0){let n=0;if(e){let t=!1;if(null!==M){let e=M.texture.format;t=e===rt||e===nt||e===it}if(t){let e=M.texture.type,t=e===qe||e===Ke||e===Ye||e===et||e===Qe||e===$e,i=m.getClearColor(),n=m.getClearAlpha(),r=i.r,a=i.g,s=i.b;t?(o[0]=r,o[1]=a,o[2]=s,o[3]=n,F.clearBufferuiv(F.COLOR,0,o)):(l[0]=r,l[1]=a,l[2]=s,l[3]=n,F.clearBufferiv(F.COLOR,0,l))}else n|=F.COLOR_BUFFER_BIT}t&&(n|=F.DEPTH_BUFFER_BIT),i&&(n|=F.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),F.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",be,!1),r.removeEventListener("webglcontextrestored",Te,!1),r.removeEventListener("webglcontextcreationerror",Me,!1),fe.dispose(),me.dispose(),I.dispose(),O.dispose(),U.dispose(),p.dispose(),g.dispose(),_e.dispose(),f.dispose(),y.dispose(),y.removeEventListener("sessionstart",Ce),y.removeEventListener("sessionend",Pe),P&&(P.dispose(),P=null),t.stop()},this.renderBufferDirect=function(e,t,n,r,a,s){null===t&&(t=he);var i=a.isMesh&&a.matrixWorld.determinant()<0,e=((t,e,i,n,r)=>{!0!==e.isScene&&(e=he),N.resetTextureUnits();var a=e.fog,s=n.isMeshStandardMaterial?e.environment:null,o=null===M?T.outputColorSpace:!0===M.isXRRenderTarget?M.texture.colorSpace:at,s=(n.isMeshStandardMaterial?U:O).get(n.envMap||s),l=!0===n.vertexColors&&!!i.attributes.color&&4===i.attributes.color.itemSize,h=!!i.attributes.tangent&&(!!n.normalMap||0<n.anisotropy),c=!!i.morphAttributes.position,u=!!i.morphAttributes.normal,d=!!i.morphAttributes.color;let p=Xe;!n.toneMapped||null!==M&&!0!==M.isXRRenderTarget||(p=T.toneMapping);var f=void 0!==(f=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color)?f.length:0,m=I.get(n),g=b.state.lights;if(!0===ae&&(!0===se||t!==E)){let e=t===E&&n.id===w;B.setState(n,t,e)}let v=!1,y=(n.version===m.__version?(m.needsLights&&m.lightsStateVersion!==g.state.version||m.outputColorSpace!==o||r.isInstancedMesh&&!1===m.instancing||!r.isInstancedMesh&&!0===m.instancing||r.isSkinnedMesh&&!1===m.skinning||!r.isSkinnedMesh&&!0===m.skinning||r.isInstancedMesh&&!0===m.instancingColor&&null===r.instanceColor||r.isInstancedMesh&&!1===m.instancingColor&&null!==r.instanceColor||m.envMap!==s||!0===n.fog&&m.fog!==a||void 0!==m.numClippingPlanes&&(m.numClippingPlanes!==B.numPlanes||m.numIntersection!==B.numIntersection)||m.vertexAlphas!==l||m.vertexTangents!==h||m.morphTargets!==c||m.morphNormals!==u||m.morphColors!==d||m.toneMapping!==p||!0===L.isWebGL2&&m.morphTargetsCount!==f)&&(v=!0):(v=!0,m.__version=n.version),m.currentProgram),_=!1,x=!1,S=!1;if(g=(y=!0===v?Ie(n,e,r):y).getUniforms(),o=m.uniforms,D.useProgram(y.program)&&(_=!0,x=!0,S=!0),n.id!==w&&(w=n.id,x=!0),_||E!==t){g.setValue(F,"projectionMatrix",t.projectionMatrix),g.setValue(F,"viewMatrix",t.matrixWorldInverse);let e=g.map.cameraPosition;void 0!==e&&e.setValue(F,R.setFromMatrixPosition(t.matrixWorld)),L.logarithmicDepthBuffer&&g.setValue(F,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&g.setValue(F,"isOrthographic",!0===t.isOrthographicCamera),E!==t&&(E=t,x=!0,S=!0)}if(r.isSkinnedMesh){g.setOptional(F,r,"bindMatrix"),g.setOptional(F,r,"bindMatrixInverse");let e=r.skeleton;e&&(L.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),g.setValue(F,"boneTexture",e.boneTexture,N),g.setValue(F,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}if((void 0!==(l=i.morphAttributes).position||void 0!==l.normal||void 0!==l.color&&!0===L.isWebGL2)&&ge.update(r,i,y),!x&&m.receiveShadow===r.receiveShadow||(m.receiveShadow=r.receiveShadow,g.setValue(F,"receiveShadow",r.receiveShadow)),n.isMeshGouraudMaterial&&null!==n.envMap&&(o.envMap.value=s,o.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1),x&&(g.setValue(F,"toneMappingExposure",T.toneMappingExposure),m.needsLights&&(h=S,(c=o).ambientLightColor.needsUpdate=h,c.lightProbe.needsUpdate=h,c.directionalLights.needsUpdate=h,c.directionalLightShadows.needsUpdate=h,c.pointLights.needsUpdate=h,c.pointLightShadows.needsUpdate=h,c.spotLights.needsUpdate=h,c.spotLightShadows.needsUpdate=h,c.rectAreaLights.needsUpdate=h,c.hemisphereLights.needsUpdate=h),a&&!0===n.fog&&pe.refreshFogUniforms(o,a),pe.refreshMaterialUniforms(o,n,C,A,P),za.upload(F,Ne(m),o,N)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(za.upload(F,Ne(m),o,N),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&g.setValue(F,"center",r.center),g.setValue(F,"modelViewMatrix",r.modelViewMatrix),g.setValue(F,"normalMatrix",r.normalMatrix),g.setValue(F,"modelMatrix",r.matrixWorld),n.isShaderMaterial||n.isRawShaderMaterial){let i=n.uniformsGroups;for(let t=0,e=i.length;t<e;t++)if(L.isWebGL2){let e=i[t];_e.update(e,y),_e.bind(e,y)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return y})(e,t,n,r,a);D.setMaterial(r,i);let o=n.index,l=1;if(!0===r.wireframe){if(void 0===(o=de.getWireframeAttribute(n)))return;l=2}t=n.drawRange,i=n.attributes.position;let h=t.start*l,c=(t.start+t.count)*l;null!==s&&(h=Math.max(h,s.start*l),c=Math.min(c,(s.start+s.count)*l)),null!==o?(h=Math.max(h,0),c=Math.min(c,o.count)):null!=i&&(h=Math.max(h,0),c=Math.min(c,i.count));s=c-h;if(!(s<0||s==1/0)){g.setup(a,r,e,n,o);let i=ve;if(null!==o&&(t=ue.get(o),(i=ye).setIndex(t)),a.isMesh)!0===r.wireframe?(D.setLineWidth(r.wireframeLinewidth*ce()),i.setMode(F.LINES)):i.setMode(F.TRIANGLES);else if(a.isLine){let e=r.linewidth;void 0===e&&(e=1),D.setLineWidth(e*ce()),a.isLineSegments?i.setMode(F.LINES):a.isLineLoop?i.setMode(F.LINE_LOOP):i.setMode(F.LINE_STRIP)}else a.isPoints?i.setMode(F.POINTS):a.isSprite&&i.setMode(F.TRIANGLES);if(a.isInstancedMesh)i.renderInstances(h,s,a.count);else if(n.isInstancedBufferGeometry){let e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);i.renderInstances(h,s,t)}else i.render(h,s)}},this.compile=function(e,t,r=null){null===r&&(r=e),(b=me.get(r)).init(),s.push(b),r.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(b.pushLight(e),e.castShadow)&&b.pushShadow(e)}),e!==r&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(b.pushLight(e),e.castShadow)&&b.pushShadow(e)}),b.setupLights(T._useLegacyLights);let a=new Set;return e.traverse(function(t){var i=t.material;if(i)if(Array.isArray(i))for(let e=0;e<i.length;e++){var n=i[e];Ee(n,r,t),a.add(n)}else Ee(i,r,t),a.add(i)}),s.pop(),b=null,a},this.compileAsync=function(i,e,t=null){let n=this.compile(i,e,t);return new Promise(e=>{function t(){n.forEach(function(e){I.get(e).currentProgram.isReady()&&n.delete(e)}),0!==n.size?setTimeout(t,10):e(i)}null!==d.get("KHR_parallel_shader_compile")?t():setTimeout(t,10)})};let Ae=null;function Ce(){t.stop()}function Pe(){t.start()}let t=new sr;function Re(e,t,i,n){var r=e.opaque,a=e.transmissive,e=e.transparent;if(b.setupLightsView(i),!0===ae&&B.setGlobalState(T.clippingPlanes,i),0<a.length){var o=r,l=a,h=t,c=i;let e=!0===h.isScene?h.overrideMaterial:null;if(null===e){let e=L.isWebGL2,t=(null===P&&(P=new Xt(1,1,{generateMipmaps:!0,type:d.has("EXT_color_buffer_half_float")?Je:qe,minFilter:je,samples:e?4:0})),T.getDrawingBufferSize(le),e?P.setSize(le.x,le.y):P.setSize(St(le.x),St(le.y)),T.getRenderTarget()),i=(T.setRenderTarget(P),T.getClearColor(J),(Q=T.getClearAlpha())<1&&T.setClearColor(16777215,.5),T.clear(),T.toneMapping),s=(T.toneMapping=Xe,Le(o,h,c),N.updateMultisampleRenderTarget(P),N.updateRenderTargetMipmap(P),!1);for(let a=0,e=l.length;a<e;a++){let e=l[a],t=e.object,i=e.geometry,n=e.material,r=e.group;if(2===n.side&&t.layers.test(c.layers)){let e=n.side;n.side=Ue,n.needsUpdate=!0,De(t,h,c,i,n,r),n.side=e,n.needsUpdate=!0,s=!0}}!0===s&&(N.updateMultisampleRenderTarget(P),N.updateRenderTargetMipmap(P)),T.setRenderTarget(t),T.setClearColor(J,Q),T.toneMapping=i}}n&&D.viewport(u.copy(n)),0<r.length&&Le(r,t,i),0<a.length&&Le(a,t,i),0<e.length&&Le(e,t,i),D.buffers.depth.setTest(!0),D.buffers.depth.setMask(!0),D.buffers.color.setMask(!0),D.setPolygonOffset(!1)}function Le(i,n,r){var a=!0===n.isScene?n.overrideMaterial:null;for(let e=0,t=i.length;e<t;e++){var s=i[e],o=s.object,l=s.geometry,h=null===a?s.material:a,s=s.group;o.layers.test(r.layers)&&De(o,n,r,l,h,s)}}function De(e,t,i,n,r,a){e.onBeforeRender(T,t,i,n,r,a),e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(T,t,i,n,e,a),!0===r.transparent&&2===r.side&&!1===r.forceSinglePass?(r.side=Ue,r.needsUpdate=!0,T.renderBufferDirect(i,t,n,r,e,a),r.side=We,r.needsUpdate=!0,T.renderBufferDirect(i,t,n,r,e,a),r.side=2):T.renderBufferDirect(i,t,n,r,e,a),e.onAfterRender(T,t,i,n,r,a)}function Ie(e,t,i){!0!==t.isScene&&(t=he);var n=I.get(e),r=b.state.lights,a=b.state.shadowsArray,s=r.state.version,a=f.getParameters(e,r.state,a,t,i),o=f.getProgramCacheKey(a);let l=n.programs,h=(n.environment=e.isMeshStandardMaterial?t.environment:null,n.fog=t.fog,n.envMap=(e.isMeshStandardMaterial?U:O).get(e.envMap||n.environment),void 0===l&&(e.addEventListener("dispose",we),l=new Map,n.programs=l),l.get(o));if(void 0!==h){if(n.currentProgram===h&&n.lightsStateVersion===s)return Oe(e,a),h}else a.uniforms=f.getUniforms(e),e.onBuild(i,a,T),e.onBeforeCompile(a,T),h=f.acquireProgram(a,o),l.set(o,h),n.uniforms=a.uniforms;t=n.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(t.clippingPlanes=B.uniform),Oe(e,a),n.needsLights=e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights,n.lightsStateVersion=s,n.needsLights&&(t.ambientLightColor.value=r.state.ambient,t.lightProbe.value=r.state.probe,t.directionalLights.value=r.state.directional,t.directionalLightShadows.value=r.state.directionalShadow,t.spotLights.value=r.state.spot,t.spotLightShadows.value=r.state.spotShadow,t.rectAreaLights.value=r.state.rectArea,t.ltc_1.value=r.state.rectAreaLTC1,t.ltc_2.value=r.state.rectAreaLTC2,t.pointLights.value=r.state.point,t.pointLightShadows.value=r.state.pointShadow,t.hemisphereLights.value=r.state.hemi,t.directionalShadowMap.value=r.state.directionalShadowMap,t.directionalShadowMatrix.value=r.state.directionalShadowMatrix,t.spotShadowMap.value=r.state.spotShadowMap,t.spotLightMatrix.value=r.state.spotLightMatrix,t.spotLightMap.value=r.state.spotLightMap,t.pointShadowMap.value=r.state.pointShadowMap,t.pointShadowMatrix.value=r.state.pointShadowMatrix),n.currentProgram=h,n.uniformsList=null,h}function Ne(e){var t;return null===e.uniformsList&&(t=e.currentProgram.getUniforms(),e.uniformsList=za.seqWithValue(t.seq,e.uniforms)),e.uniformsList}function Oe(e,t){e=I.get(e);e.outputColorSpace=t.outputColorSpace,e.instancing=t.instancing,e.instancingColor=t.instancingColor,e.skinning=t.skinning,e.morphTargets=t.morphTargets,e.morphNormals=t.morphNormals,e.morphColors=t.morphColors,e.morphTargetsCount=t.morphTargetsCount,e.numClippingPlanes=t.numClippingPlanes,e.numIntersection=t.numClipIntersection,e.vertexAlphas=t.vertexAlphas,e.vertexTangents=t.vertexTangents,e.toneMapping=t.toneMapping}t.setAnimationLoop(function(e){Ae&&Ae(e)}),"undefined"!=typeof self&&t.setContext(self),this.setAnimationLoop=function(e){Ae=e,y.setAnimationLoop(e),null===e?t.stop():t.start()},y.addEventListener("sessionstart",Ce),y.addEventListener("sessionend",Pe),this.render=function(n,t){if(void 0!==t&&!0!==t.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else if(!0!==j){!0===n.matrixWorldAutoUpdate&&n.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===y.enabled&&!0===y.isPresenting&&(!0===y.cameraAutoUpdate&&y.updateCamera(t),t=y.getCamera()),!0===n.isScene&&n.onBeforeRender(T,n,t,M),(b=me.get(n,s.length)).init(),s.push(b),oe.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),re.setFromProjectionMatrix(oe),se=this.localClippingEnabled,ae=B.init(this.clippingPlanes,se),(c=fe.get(n,i.length)).init(),i.push(c),function n(a,r,s,o){if(!1!==a.visible){if(a.layers.test(r.layers))if(a.isGroup)s=a.renderOrder;else if(a.isLOD)!0===a.autoUpdate&&a.update(r);else if(a.isLight)b.pushLight(a),a.castShadow&&b.pushShadow(a);else if(a.isSprite){if(!a.frustumCulled||re.intersectsSprite(a)){o&&R.setFromMatrixPosition(a.matrixWorld).applyMatrix4(oe);let e=p.update(a),t=a.material;t.visible&&c.push(a,e,t,s,R.z,null)}}else if((a.isMesh||a.isLine||a.isPoints)&&(!a.frustumCulled||re.intersectsObject(a))){let n=p.update(a),r=a.material;if(o&&(void 0!==a.boundingSphere?(null===a.boundingSphere&&a.computeBoundingSphere(),R.copy(a.boundingSphere.center)):(null===n.boundingSphere&&n.computeBoundingSphere(),R.copy(n.boundingSphere.center)),R.applyMatrix4(a.matrixWorld).applyMatrix4(oe)),Array.isArray(r)){let i=n.groups;for(let e=0,t=i.length;e<t;e++){var l=i[e],h=r[l.materialIndex];h&&h.visible&&c.push(a,n,h,s,R.z,l)}}else r.visible&&c.push(a,n,r,s,R.z,null)}let i=a.children;for(let e=0,t=i.length;e<t;e++)n(i[e],r,s,o)}}(n,t,0,T.sortObjects),c.finish(),!0===T.sortObjects&&c.sort($,ee),this.info.render.frame++,!0===ae&&B.beginShadows();let e=b.state.shadowsArray;if(h.render(e,n,t),!0===ae&&B.endShadows(),!0===this.info.autoReset&&this.info.reset(),m.render(c,n),b.setupLights(T._useLegacyLights),t.isArrayCamera){let i=t.cameras;for(let e=0,t=i.length;e<t;e++){var r=i[e];Re(c,n,r,r.viewport)}}else Re(c,n,t);null!==M&&(N.updateMultisampleRenderTarget(M),N.updateRenderTargetMipmap(M)),!0===n.isScene&&n.onAfterRender(T,n,t),g.resetDefaultState(),w=-1,E=null,s.pop(),b=0<s.length?s[s.length-1]:null,i.pop(),c=0<i.length?i[i.length-1]:null}},this.getActiveCubeFace=function(){return q},this.getActiveMipmapLevel=function(){return Y},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(e,t,i){I.get(e.texture).__webglTexture=t,I.get(e.depthTexture).__webglTexture=i;t=I.get(e);t.__hasExternalTextures=!0,t.__hasExternalTextures&&(t.__autoAllocateDepthBuffer=void 0===i,t.__autoAllocateDepthBuffer||!0===d.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),t.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){e=I.get(e);e.__webglFramebuffer=t,e.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(i,n=0,r=0){M=i,q=n,Y=r;let e=!0,t=null,a=!1,s=!1;var o;if(Z=i?(void 0!==(o=I.get(i)).__useDefaultFramebuffer?(D.bindFramebuffer(F.FRAMEBUFFER,null),e=!1):void 0===o.__webglFramebuffer?N.setupRenderTarget(i):o.__hasExternalTextures&&N.rebindTextures(i,I.get(i.texture).__webglTexture,I.get(i.depthTexture).__webglTexture),((o=i.texture).isData3DTexture||o.isDataArrayTexture||o.isCompressedArrayTexture)&&(s=!0),o=I.get(i).__webglFramebuffer,i.isWebGLCubeRenderTarget?(t=Array.isArray(o[n])?o[n][r]:o[n],a=!0):t=L.isWebGL2&&0<i.samples&&!1===N.useMultisampledRTT(i)?I.get(i).__webglMultisampledFramebuffer:Array.isArray(o)?o[r]:o,u.copy(i.viewport),K.copy(i.scissor),i.scissorTest):(u.copy(te).multiplyScalar(C).floor(),K.copy(ie).multiplyScalar(C).floor(),ne),D.bindFramebuffer(F.FRAMEBUFFER,t)&&L.drawBuffers&&e&&D.drawBuffers(i,t),D.viewport(u),D.scissor(K),D.setScissorTest(Z),a){let e=I.get(i.texture);F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_CUBE_MAP_POSITIVE_X+n,e.__webglTexture,r)}else if(s){let e=I.get(i.texture),t=n||0;F.framebufferTextureLayer(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,e.__webglTexture,r||0,t)}w=-1},this.readRenderTargetPixels=function(n,r,a,s,o,l,t){if(n&&n.isWebGLRenderTarget){let e=I.get(n).__webglFramebuffer;if(e=n.isWebGLCubeRenderTarget&&void 0!==t?e[t]:e){D.bindFramebuffer(F.FRAMEBUFFER,e);try{let e=n.texture,t=e.format,i=e.type;var h;t!==tt&&v.convert(t)!==F.getParameter(F.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):(h=i===Je&&(d.has("EXT_color_buffer_half_float")||L.isWebGL2&&d.has("EXT_color_buffer_float")),i===qe||v.convert(i)===F.getParameter(F.IMPLEMENTATION_COLOR_READ_TYPE)||i===Ze&&(L.isWebGL2||d.has("OES_texture_float")||d.has("WEBGL_color_buffer_float"))||h?0<=r&&r<=n.width-s&&0<=a&&a<=n.height-o&&F.readPixels(r,a,s,o,v.convert(t),v.convert(i),l):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type."))}finally{let e=null!==M?I.get(M).__webglFramebuffer:null;D.bindFramebuffer(F.FRAMEBUFFER,e)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,i=0){var n=Math.pow(2,-i),r=Math.floor(t.image.width*n),n=Math.floor(t.image.height*n);N.setTexture2D(t,0),F.copyTexSubImage2D(F.TEXTURE_2D,i,0,0,e.x,e.y,r,n),D.unbindTexture()},this.copyTextureToTexture=function(e,t,i,n=0){var r=t.image.width,a=t.image.height,s=v.convert(i.format),o=v.convert(i.type);N.setTexture2D(i,0),F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,i.flipY),F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),F.pixelStorei(F.UNPACK_ALIGNMENT,i.unpackAlignment),t.isDataTexture?F.texSubImage2D(F.TEXTURE_2D,n,e.x,e.y,r,a,s,o,t.image.data):t.isCompressedTexture?F.compressedTexSubImage2D(F.TEXTURE_2D,n,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):F.texSubImage2D(F.TEXTURE_2D,n,e.x,e.y,s,o,t.image),0===n&&i.generateMipmaps&&F.generateMipmap(F.TEXTURE_2D),D.unbindTexture()},this.copyTextureToTexture3D=function(t,i,n,r,a=0){if(T.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var s=t.max.x-t.min.x+1,o=t.max.y-t.min.y+1,l=t.max.z-t.min.z+1,h=v.convert(r.format),c=v.convert(r.type);let e;if(r.isData3DTexture)N.setTexture3D(r,0),e=F.TEXTURE_3D;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");N.setTexture2DArray(r,0),e=F.TEXTURE_2D_ARRAY}F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,r.flipY),F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),F.pixelStorei(F.UNPACK_ALIGNMENT,r.unpackAlignment);var u=F.getParameter(F.UNPACK_ROW_LENGTH),d=F.getParameter(F.UNPACK_IMAGE_HEIGHT),p=F.getParameter(F.UNPACK_SKIP_PIXELS),f=F.getParameter(F.UNPACK_SKIP_ROWS),m=F.getParameter(F.UNPACK_SKIP_IMAGES),g=n.isCompressedTexture?n.mipmaps[0]:n.image;F.pixelStorei(F.UNPACK_ROW_LENGTH,g.width),F.pixelStorei(F.UNPACK_IMAGE_HEIGHT,g.height),F.pixelStorei(F.UNPACK_SKIP_PIXELS,t.min.x),F.pixelStorei(F.UNPACK_SKIP_ROWS,t.min.y),F.pixelStorei(F.UNPACK_SKIP_IMAGES,t.min.z),n.isDataTexture||n.isData3DTexture?F.texSubImage3D(e,a,i.x,i.y,i.z,s,o,l,h,c,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),F.compressedTexSubImage3D(e,a,i.x,i.y,i.z,s,o,l,h,g.data)):F.texSubImage3D(e,a,i.x,i.y,i.z,s,o,l,h,c,g),F.pixelStorei(F.UNPACK_ROW_LENGTH,u),F.pixelStorei(F.UNPACK_IMAGE_HEIGHT,d),F.pixelStorei(F.UNPACK_SKIP_PIXELS,p),F.pixelStorei(F.UNPACK_SKIP_ROWS,f),F.pixelStorei(F.UNPACK_SKIP_IMAGES,m),0===a&&r.generateMipmaps&&F.generateMipmap(e),D.unbindTexture()}},this.initTexture=function(e){e.isCubeTexture?N.setTextureCube(e,0):e.isData3DTexture?N.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?N.setTexture2DArray(e,0):N.setTexture2D(e,0),D.unbindTexture()},this.resetState=function(){q=0,Y=0,M=null,D.reset(),g.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return 2e3}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;var t=this.getContext();t.drawingBufferColorSpace=e===Oe?"display-p3":"srgb",t.unpackColorSpace=me.workingColorSpace===st?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Be?3001:3e3}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=3001===e?Be:at}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class Us extends Os{}Us.prototype.isWebGL1Renderer=!0;class Bs{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ze(e),this.density=t}clone(){return new Bs(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Fs{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new ze(e),this.near=t,this.far=i}clone(){return new Fs(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Gs extends p{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){e=super.toJSON(e);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),0<this.backgroundBlurriness&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e}}class ks{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=gt()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(i,n,r){i*=this.stride,r*=n.stride;for(let e=0,t=this.stride;e<t;e++)this.array[i+e]=n.array[r+e];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=gt()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);e=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),e=new this.constructor(e,this.stride);return e.setUsage(this.usage),e}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=gt()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}let Hs=new ke;class zs{constructor(e,t,i,n=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(i){for(let e=0,t=this.data.count;e<t;e++)Hs.fromBufferAttribute(this,e),Hs.applyMatrix4(i),this.setXYZ(e,Hs.x,Hs.y,Hs.z);return this}applyNormalMatrix(i){for(let e=0,t=this.count;e<t;e++)Hs.fromBufferAttribute(this,e),Hs.applyNormalMatrix(i),this.setXYZ(e,Hs.x,Hs.y,Hs.z);return this}transformDirection(i){for(let e=0,t=this.count;e<t;e++)Hs.fromBufferAttribute(this,e),Hs.transformDirection(i),this.setXYZ(e,Hs.x,Hs.y,Hs.z);return this}setX(e,t){return this.normalized&&(t=a(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=a(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=a(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=a(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return t=this.normalized?bt(t,this.array):t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return t=this.normalized?bt(t,this.array):t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return t=this.normalized?bt(t,this.array):t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return t=this.normalized?bt(t,this.array):t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=a(t,this.array),i=a(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=a(t,this.array),i=a(i,this.array),n=a(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this}setXYZW(e,t,i,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=a(t,this.array),i=a(i,this.array),n=a(n,this.array),r=a(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this.data.array[e+3]=r,this}clone(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new zs(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized);{console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let e=0;e<this.count;e++){var i=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[i+e])}return new A(new this.array.constructor(t),this.itemSize,this.normalized)}}toJSON(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized};{console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let e=0;e<this.count;e++){var i=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[i+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}}}class Vs extends t{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ze(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Ws,Xs=new ke,js=new ke,qs=new ke,Ys=new Fe,Ks=new Fe,Zs=new He,Js=new ke,Qs=new ke,$s=new ke,eo=new Fe,to=new Fe,io=new Fe;class no extends p{constructor(e=new Vs){if(super(),this.isSprite=!0,this.type="Sprite",void 0===Ws){Ws=new C;let e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new ks(e,5);Ws.setIndex([0,1,2,0,2,3]),Ws.setAttribute("position",new zs(t,3,0,!1)),Ws.setAttribute("uv",new zs(t,2,3,!1))}this.geometry=Ws,this.material=e,this.center=new Fe(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),js.setFromMatrixScale(this.matrixWorld),Zs.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),qs.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&js.multiplyScalar(-qs.z);var i=this.material.rotation;let n,r;0!==i&&(r=Math.cos(i),n=Math.sin(i));var i=this.center,a=(ro(Js.set(-.5,-.5,0),qs,i,js,n,r),ro(Qs.set(.5,-.5,0),qs,i,js,n,r),ro($s.set(.5,.5,0),qs,i,js,n,r),eo.set(0,0),to.set(1,0),io.set(1,1),e.ray.intersectTriangle(Js,Qs,$s,!1,Xs));null===a&&(ro(Qs.set(-.5,.5,0),qs,i,js,n,r),to.set(0,1),null===(a=e.ray.intersectTriangle(Js,$s,Qs,!1,Xs)))||(i=e.ray.origin.distanceTo(Xs))<e.near||i>e.far||t.push({distance:i,point:Xs.clone(),uv:sn.getInterpolation(Xs,Js,Qs,$s,eo,to,io,new Fe),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function ro(e,t,i,n,r,a){Ys.subVectors(e,i).addScalar(.5).multiply(n),void 0!==r?(Ks.x=a*Ys.x-r*Ys.y,Ks.y=r*Ys.x+a*Ys.y):Ks.copy(Ys),e.copy(t),e.x+=Ks.x,e.y+=Ks.y,e.applyMatrix4(Zs)}let ao=new ke,so=new ke;class oo extends p{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);var i=e.levels;for(let e=0,t=i.length;e<t;e++){var n=i[e];this.addLevel(n.object.clone(),n.distance,n.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);var n=this.levels;let r;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(i){var n=this.levels;if(0<n.length){let t,e;for(t=1,e=n.length;t<e;t++){let e=n[t].distance;if(n[t].object.visible&&(e-=e*n[t].hysteresis),i<e)break}return n[t-1].object}return null}raycast(e,t){var i;0<this.levels.length&&(ao.setFromMatrixPosition(this.matrixWorld),i=e.ray.origin.distanceTo(ao),this.getObjectForDistance(i).raycast(e,t))}update(i){var n=this.levels;if(1<n.length){ao.setFromMatrixPosition(i.matrixWorld),so.setFromMatrixPosition(this.matrixWorld);var r=ao.distanceTo(so)/i.zoom;let t,e;for(n[0].object.visible=!0,t=1,e=n.length;t<e;t++){let e=n[t].distance;if(n[t].object.visible&&(e-=e*n[t].hysteresis),!(r>=e))break;n[t-1].object.visible=!1,n[t].object.visible=!0}for(this._currentLevel=t-1;t<e;t++)n[t].object.visible=!1}}toJSON(e){var i=super.toJSON(e),n=(!1===this.autoUpdate&&(i.object.autoUpdate=!1),i.object.levels=[],this.levels);for(let e=0,t=n.length;e<t;e++){var r=n[e];i.object.levels.push({object:r.object.uuid,distance:r.distance,hysteresis:r.hysteresis})}return i}}let lo=new ke,ho=new Ge,co=new Ge,uo=new ke,po=new He,fo=new ke,mo=new mi,go=new He,vo=new Ti;class yo extends P{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=v,this.bindMatrix=new He,this.bindMatrixInverse=new He,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){var e=this.geometry,t=(null===this.boundingBox&&(this.boundingBox=new Jt),this.boundingBox.makeEmpty(),e.getAttribute("position"));for(let e=0;e<t.count;e++)this.getVertexPosition(e,fo),this.boundingBox.expandByPoint(fo)}computeBoundingSphere(){var e=this.geometry,t=(null===this.boundingSphere&&(this.boundingSphere=new mi),this.boundingSphere.makeEmpty(),e.getAttribute("position"));for(let e=0;e<t.count;e++)this.getVertexPosition(e,fo),this.boundingSphere.expandByPoint(fo)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){var i=this.material,n=this.matrixWorld;void 0!==i&&(null===this.boundingSphere&&this.computeBoundingSphere(),mo.copy(this.boundingSphere),mo.applyMatrix4(n),!1!==e.ray.intersectsSphere(mo))&&(go.copy(n).invert(),vo.copy(e.ray).applyMatrix4(go),null!==this.boundingBox&&!1===vo.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,vo))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){var i=new Ge,n=this.geometry.attributes.skinWeight;for(let e=0,t=n.count;e<t;e++){i.fromBufferAttribute(n,e);var r=1/i.manhattanLength();r!=1/0?i.multiplyScalar(r):i.set(1,0,0,0),n.setXYZW(e,i.x,i.y,i.z,i.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===v?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,i){let n=this.skeleton,t=this.geometry;ho.fromBufferAttribute(t.attributes.skinIndex,e),co.fromBufferAttribute(t.attributes.skinWeight,e),lo.copy(i).applyMatrix4(this.bindMatrix),i.set(0,0,0);for(let t=0;t<4;t++){let e=co.getComponent(t);var r;0!==e&&(r=ho.getComponent(t),po.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),i.addScaledVector(uo.copy(lo).applyMatrix4(po),e))}return i.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class _o extends p{constructor(){super(),this.isBone=!0,this.type="Bone"}}class xo extends c{constructor(e=null,t=1,i=1,n,r,a,s,o,l=1003,h=1003,c,u){super(null,a,s,o,l,h,n,r,c,u),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}let So=new He,bo=new He;class To{constructor(e=[],t=[]){this.uuid=gt(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new He)}}calculateInverses(){for(let e=this.boneInverses.length=0,t=this.bones.length;e<t;e++){var i=new He;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){var i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){var i=this.bones,n=this.boneInverses,r=this.boneMatrices,e=this.boneTexture;for(let e=0,t=i.length;e<t;e++){var a=i[e]?i[e].matrixWorld:bo;So.multiplyMatrices(a,n[e]),So.toArray(r,16*e)}null!==e&&(e.needsUpdate=!0)}clone(){return new To(this.bones,this.boneInverses)}computeBoneTexture(){var e=xt(Math.sqrt(4*this.bones.length)),t=(e=Math.max(e,4),new Float32Array(e*e*4)),i=(t.set(this.boneMatrices),new xo(t,e,e,tt,Ze));return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(i){for(let e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];if(n.name===i)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(i,n){this.uuid=i.uuid;for(let t=0,e=i.bones.length;t<e;t++){var r=i.bones[t];let e=n[r];void 0===e&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),e=new _o),this.bones.push(e),this.boneInverses.push((new He).fromArray(i.boneInverses[t]))}return this.init(),this}toJSON(){var i={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]},n=(i.uuid=this.uuid,this.bones),r=this.boneInverses;for(let e=0,t=n.length;e<t;e++){var a=n[e],a=(i.bones.push(a.uuid),r[e]);i.boneInverses.push(a.toArray())}return i}}class Mo extends A{constructor(e,t,i,n=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){var e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}let wo=new He,Eo=new He,Ao=[],Co=new Jt,Po=new He,Ro=new P,Lo=new mi;class Do extends P{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Mo(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let e=0;e<i;e++)this.setMatrixAt(e,Po)}computeBoundingBox(){var t=this.geometry,i=this.count;null===this.boundingBox&&(this.boundingBox=new Jt),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let e=0;e<i;e++)this.getMatrixAt(e,wo),Co.copy(t.boundingBox).applyMatrix4(wo),this.boundingBox.union(Co)}computeBoundingSphere(){var t=this.geometry,i=this.count;null===this.boundingSphere&&(this.boundingSphere=new mi),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let e=0;e<i;e++)this.getMatrixAt(e,wo),Lo.copy(t.boundingSphere).applyMatrix4(wo),this.boundingSphere.union(Lo)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,n){let t=this.matrixWorld,r=this.count;if(Ro.geometry=this.geometry,Ro.material=this.material,void 0!==Ro.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Lo.copy(this.boundingSphere),Lo.applyMatrix4(t),!1!==e.ray.intersectsSphere(Lo)))for(let i=0;i<r;i++){this.getMatrixAt(i,wo),Eo.multiplyMatrices(t,wo),Ro.matrixWorld=Eo,Ro.raycast(e,Ao);for(let t=0,e=Ao.length;t<e;t++){let e=Ao[t];e.instanceId=i,e.object=this,n.push(e)}Ao.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Mo(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Io extends t{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ze(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}let No=new ke,Oo=new ke,Uo=new He,Bo=new Ti,Fo=new mi;class Go extends p{constructor(e=new C,t=new Io){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){var e=this.geometry;if(null===e.index){var i=e.attributes.position,n=[0];for(let e=1,t=i.count;e<t;e++)No.fromBufferAttribute(i,e-1),Oo.fromBufferAttribute(i,e),n[e]=n[e-1],n[e]+=No.distanceTo(Oo);e.setAttribute("lineDistance",new F(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(n,r){let e=this.geometry,t=this.matrixWorld,i=n.params.Line.threshold,a=e.drawRange;if(null===e.boundingSphere&&e.computeBoundingSphere(),Fo.copy(e.boundingSphere),Fo.applyMatrix4(t),Fo.radius+=i,!1!==n.ray.intersectsSphere(Fo)){Uo.copy(t).invert(),Bo.copy(n.ray).applyMatrix4(Uo);var s=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=new ke,h=new ke,c=new ke,u=new ke,d=this.isLineSegments?2:1,p=e.index,f=e.attributes.position;if(null!==p)for(let i=Math.max(0,a.start),e=Math.min(p.count,a.start+a.count)-1;i<e;i+=d){let e=p.getX(i),t=p.getX(i+1);if(l.fromBufferAttribute(f,e),h.fromBufferAttribute(f,t),!(Bo.distanceSqToSegment(l,h,u,c)>o)){u.applyMatrix4(this.matrixWorld);let e=n.ray.origin.distanceTo(u);e<n.near||e>n.far||r.push({distance:e,point:c.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else for(let t=Math.max(0,a.start),e=Math.min(f.count,a.start+a.count)-1;t<e;t+=d)if(l.fromBufferAttribute(f,t),h.fromBufferAttribute(f,t+1),!(Bo.distanceSqToSegment(l,h,u,c)>o)){u.applyMatrix4(this.matrixWorld);let e=n.ray.origin.distanceTo(u);e<n.near||e>n.far||r.push({distance:e,point:c.clone().applyMatrix4(this.matrixWorld),index:t,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(0<t.length){var i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=i.length;t<e;t++){let e=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}let ko=new ke,Ho=new ke;class zo extends Go{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){var e=this.geometry;if(null===e.index){var i=e.attributes.position,n=[];for(let e=0,t=i.count;e<t;e+=2)ko.fromBufferAttribute(i,e),Ho.fromBufferAttribute(i,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+ko.distanceTo(Ho);e.setAttribute("lineDistance",new F(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Vo extends Go{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Wo extends t{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ze(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Xo=new He,jo=new Ti,qo=new mi,Yo=new ke;class Ko extends p{constructor(e=new C,t=new Wo){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(i,n){let e=this.geometry,r=this.matrixWorld,t=i.params.Points.threshold,a=e.drawRange;if(null===e.boundingSphere&&e.computeBoundingSphere(),qo.copy(e.boundingSphere),qo.applyMatrix4(r),qo.radius+=t,!1!==i.ray.intersectsSphere(qo)){Xo.copy(r).invert(),jo.copy(i.ray).applyMatrix4(Xo);var s=t/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=e.index,h=e.attributes.position;if(null!==l)for(let t=Math.max(0,a.start),e=Math.min(l.count,a.start+a.count);t<e;t++){let e=l.getX(t);Yo.fromBufferAttribute(h,e),Zo(Yo,e,o,r,i,n,this)}else for(let e=Math.max(0,a.start),t=Math.min(h.count,a.start+a.count);e<t;e++)Yo.fromBufferAttribute(h,e),Zo(Yo,e,o,r,i,n,this)}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(0<t.length){var i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=i.length;t<e;t++){let e=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function Zo(t,i,e,n,r,a,s){var o=jo.distanceSqToPoint(t);if(o<e){let e=new ke;jo.closestPointToPoint(t,e),e.applyMatrix4(n);t=r.ray.origin.distanceTo(e);t<r.near||t>r.far||a.push({distance:t,distanceToRay:Math.sqrt(o),point:e,index:i,face:null,object:s})}}class Jo extends c{constructor(e,t,i,n,r,a,s,o,l,h,c,u){super(null,a,s,o,l,h,n,r,c,u),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Qo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){e=this.getUtoTmapping(e);return this.getPoint(e,t)}getPoints(t=5){var i=[];for(let e=0;e<=t;e++)i.push(this.getPoint(e/t));return i}getSpacedPoints(t=5){var i=[];for(let e=0;e<=t;e++)i.push(this.getPointAt(e/t));return i}getLength(){var e=this.getLengths();return e[e.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var i=[];let n,r=this.getPoint(0),a=0;i.push(0);for(let e=1;e<=t;e++)n=this.getPoint(e/t),a+=n.distanceTo(r),i.push(a),r=n;return this.cacheArcLengths=i}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){var i=this.getLengths();let n=0;var r=i.length,a=t||e*i[r-1];let s,o=0,l=r-1;for(;o<=l;)if((s=i[n=Math.floor(o+(l-o)/2)]-a)<0)o=n+1;else{if(!(0<s)){l=n;break}l=n-1}return i[n=l]===a?n/(r-1):(t=i[n],(n+(a-t)/(i[n+1]-t))/(r-1))}getTangent(e,t){let i=e-1e-4,n=e+1e-4;i<0&&(i=0),1<n&&(n=1);var e=this.getPoint(i),r=this.getPoint(n),t=t||new(e.isVector2?Fe:ke);return t.copy(r).sub(e).normalize(),t}getTangentAt(e,t){e=this.getUtoTmapping(e);return this.getTangent(e,t)}computeFrenetFrames(i,e){let t=new ke,n=[],r=[],a=[],s=new ke,o=new He;for(let t=0;t<=i;t++){let e=t/i;n[t]=this.getTangentAt(e,new ke)}r[0]=new ke,a[0]=new ke;let l=Number.MAX_VALUE;var h=Math.abs(n[0].x),c=Math.abs(n[0].y),u=Math.abs(n[0].z);h<=l&&(l=h,t.set(1,0,0)),c<=l&&(l=c,t.set(0,1,0)),u<=l&&t.set(0,0,1),s.crossVectors(n[0],t).normalize(),r[0].crossVectors(n[0],s),a[0].crossVectors(n[0],r[0]);for(let t=1;t<=i;t++){if(r[t]=r[t-1].clone(),a[t]=a[t-1].clone(),s.crossVectors(n[t-1],n[t]),s.length()>Number.EPSILON){s.normalize();let e=Math.acos(y(n[t-1].dot(n[t]),-1,1));r[t].applyMatrix4(o.makeRotationAxis(s,e))}a[t].crossVectors(n[t],r[t])}if(!0===e){let t=Math.acos(y(r[0].dot(r[i]),-1,1));t/=i,0<n[0].dot(s.crossVectors(r[0],r[i]))&&(t=-t);for(let e=1;e<=i;e++)r[e].applyMatrix4(o.makeRotationAxis(n[e],t*e)),a[e].crossVectors(n[e],r[e])}return{tangents:n,normals:r,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){var e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class $o extends Qo{constructor(e=0,t=0,i=1,n=1,r=0,a=2*Math.PI,s=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o}getPoint(e,t){let i=t||new Fe,n=2*Math.PI,r=this.aEndAngle-this.aStartAngle;for(t=Math.abs(r)<Number.EPSILON;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=t?0:n),!0!==this.aClockwise||t||(r===n?r=-n:r-=n);t=this.aStartAngle+e*r;let a=this.aX+this.xRadius*Math.cos(t),s=this.aY+this.yRadius*Math.sin(t);if(0!==this.aRotation){let e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),i=a-this.aX,n=s-this.aY;a=i*e-n*t+this.aX,s=i*t+n*e+this.aY}return i.set(a,s)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){var e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class el extends $o{constructor(e,t,i,n,r,a){super(e,t,i,i,n,r,a),this.isArcCurve=!0,this.type="ArcCurve"}}function tl(){let r=0,a=0,s=0,o=0;function l(e,t,i,n){r=e,a=i,s=-3*e+3*t-2*i-n,o=2*e-2*t+i+n}return{initCatmullRom:function(e,t,i,n,r){l(t,i,r*(i-e),r*(n-t))},initNonuniformCatmullRom:function(e,t,i,n,r,a,s){e=(t-e)/r-(i-e)/(r+a)+(i-t)/a,r=(i-t)/a-(n-t)/(a+s)+(n-i)/s;l(t,i,e*=a,r*=a)},calc:function(e){var t=e*e;return r+a*e+s*t+o*(t*e)}}}let il=new ke,nl=new tl,rl=new tl,al=new tl;class sl extends Qo{constructor(e=[],t=!1,i="centripetal",n=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=n}getPoint(e,t=new ke){var i=this.points,n=i.length,e=(n-(this.closed?0:1))*e;let r,a,s=Math.floor(e),o=e-s;this.closed?s+=0<s?0:(Math.floor(Math.abs(s)/n)+1)*n:0===o&&s===n-1&&(s=n-2,o=1),r=this.closed||0<s?i[(s-1)%n]:(il.subVectors(i[0],i[1]).add(i[0]),il);var l=i[s%n],h=i[(s+1)%n];if(a=this.closed||s+2<n?i[(s+2)%n]:(il.subVectors(i[n-1],i[n-2]).add(i[n-1]),il),"centripetal"===this.curveType||"chordal"===this.curveType){let e="chordal"===this.curveType?.5:.25,t=Math.pow(r.distanceToSquared(l),e),i=Math.pow(l.distanceToSquared(h),e),n=Math.pow(h.distanceToSquared(a),e);i<1e-4&&(i=1),t<1e-4&&(t=i),n<1e-4&&(n=i),nl.initNonuniformCatmullRom(r.x,l.x,h.x,a.x,t,i,n),rl.initNonuniformCatmullRom(r.y,l.y,h.y,a.y,t,i,n),al.initNonuniformCatmullRom(r.z,l.z,h.z,a.z,t,i,n)}else"catmullrom"===this.curveType&&(nl.initCatmullRom(r.x,l.x,h.x,a.x,this.tension),rl.initCatmullRom(r.y,l.y,h.y,a.y,this.tension),al.initCatmullRom(r.z,l.z,h.z,a.z,this.tension));return t.set(nl.calc(o),rl.calc(o),al.calc(o)),t}copy(i){super.copy(i),this.points=[];for(let e=0,t=i.points.length;e<t;e++){var n=i.points[e];this.points.push(n.clone())}return this.closed=i.closed,this.curveType=i.curveType,this.tension=i.tension,this}toJSON(){var i=super.toJSON();i.points=[];for(let e=0,t=this.points.length;e<t;e++){var n=this.points[e];i.points.push(n.toArray())}return i.closed=this.closed,i.curveType=this.curveType,i.tension=this.tension,i}fromJSON(i){super.fromJSON(i),this.points=[];for(let e=0,t=i.points.length;e<t;e++){var n=i.points[e];this.points.push((new ke).fromArray(n))}return this.closed=i.closed,this.curveType=i.curveType,this.tension=i.tension,this}}function ol(e,t,i,n,r){var t=.5*(n-t),r=.5*(r-i),a=e*e;return e*a*(2*i-2*n+t+r)+(-3*i+3*n-2*t-r)*a+t*e+i}function ll(e,t,i,n){return(r=1-e)*r*t+2*(1-e)*e*i+e*e*n;var r}function hl(e,t,i,n,r){return(a=1-e)*a*a*t+3*(a=1-e)*a*e*i+3*(1-e)*e*e*n+e*e*e*r;var a}class cl extends Qo{constructor(e=new Fe,t=new Fe,i=new Fe,n=new Fe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=n}getPoint(e,t=new Fe){var i=this.v0,n=this.v1,r=this.v2,a=this.v3;return t.set(hl(e,i.x,n.x,r.x,a.x),hl(e,i.y,n.y,r.y,a.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){var e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ul extends Qo{constructor(e=new ke,t=new ke,i=new ke,n=new ke){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=n}getPoint(e,t=new ke){var i=this.v0,n=this.v1,r=this.v2,a=this.v3;return t.set(hl(e,i.x,n.x,r.x,a.x),hl(e,i.y,n.y,r.y,a.y),hl(e,i.z,n.z,r.z,a.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){var e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class dl extends Qo{constructor(e=new Fe,t=new Fe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Fe){return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Fe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){var e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pl extends Qo{constructor(e=new ke,t=new ke){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ke){return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ke){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){var e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class fl extends Qo{constructor(e=new Fe,t=new Fe,i=new Fe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Fe){var i=this.v0,n=this.v1,r=this.v2;return t.set(ll(e,i.x,n.x,r.x),ll(e,i.y,n.y,r.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){var e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ml extends Qo{constructor(e=new ke,t=new ke,i=new ke){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ke){var i=this.v0,n=this.v1,r=this.v2;return t.set(ll(e,i.x,n.x,r.x),ll(e,i.y,n.y,r.y),ll(e,i.z,n.z,r.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){var e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class gl extends Qo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Fe){var i=this.points,e=(i.length-1)*e,n=Math.floor(e),e=e-n,r=i[0===n?n:n-1],a=i[n],s=i[n>i.length-2?i.length-1:n+1],i=i[n>i.length-3?i.length-1:n+2];return t.set(ol(e,r.x,a.x,s.x,i.x),ol(e,r.y,a.y,s.y,i.y)),t}copy(i){super.copy(i),this.points=[];for(let e=0,t=i.points.length;e<t;e++){var n=i.points[e];this.points.push(n.clone())}return this}toJSON(){var i=super.toJSON();i.points=[];for(let e=0,t=this.points.length;e<t;e++){var n=this.points[e];i.points.push(n.toArray())}return i}fromJSON(i){super.fromJSON(i),this.points=[];for(let e=0,t=i.points.length;e<t;e++){var n=i.points[e];this.points.push((new Fe).fromArray(n))}return this}}var vl=Object.freeze({__proto__:null,ArcCurve:el,CatmullRomCurve3:sl,CubicBezierCurve:cl,CubicBezierCurve3:ul,EllipseCurve:$o,LineCurve:dl,LineCurve3:pl,QuadraticBezierCurve:fl,QuadraticBezierCurve3:ml,SplineCurve:gl});class yl extends Qo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){var e,t=this.curves[0].getPoint(0),i=this.curves[this.curves.length-1].getPoint(1);return t.equals(i)||(e=!0===t.isVector2?"LineCurve":"LineCurve3",this.curves.push(new vl[e](i,t))),this}getPoint(e,r){var a=e*this.getLength(),s=this.getCurveLengths();let o=0;for(;o<s.length;){if(s[o]>=a){let e=s[o]-a,t=this.curves[o],i=t.getLength(),n=0===i?0:1-e/i;return t.getPointAt(n,r)}o++}return null}getLength(){var e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;var i=[];let n=0;for(let e=0,t=this.curves.length;e<t;e++)n+=this.curves[e].getLength(),i.push(n);return this.cacheLengths=i}getSpacedPoints(t=40){var i=[];for(let e=0;e<=t;e++)i.push(this.getPoint(e/t));return this.autoClose&&i.push(i[0]),i}getPoints(i=12){var n=[];let r;for(let e=0,t=this.curves;e<t.length;e++){var a=t[e],s=a.isEllipseCurve?2*i:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?i*a.points.length:i,o=a.getPoints(s);for(let e=0;e<o.length;e++){var l=o[e];r&&r.equals(l)||(n.push(l),r=l)}}return this.autoClose&&1<n.length&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(i){super.copy(i),this.curves=[];for(let e=0,t=i.curves.length;e<t;e++){var n=i.curves[e];this.curves.push(n.clone())}return this.autoClose=i.autoClose,this}toJSON(){var i=super.toJSON();i.autoClose=this.autoClose,i.curves=[];for(let e=0,t=this.curves.length;e<t;e++){var n=this.curves[e];i.curves.push(n.toJSON())}return i}fromJSON(i){super.fromJSON(i),this.autoClose=i.autoClose,this.curves=[];for(let e=0,t=i.curves.length;e<t;e++){var n=i.curves[e];this.curves.push((new vl[n.type]).fromJSON(n))}return this}}class _l extends yl{constructor(e){super(),this.type="Path",this.currentPoint=new Fe,e&&this.setFromPoints(e)}setFromPoints(i){this.moveTo(i[0].x,i[0].y);for(let e=1,t=i.length;e<t;e++)this.lineTo(i[e].x,i[e].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){var i=new dl(this.currentPoint.clone(),new Fe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,n){e=new fl(this.currentPoint.clone(),new Fe(e,t),new Fe(i,n));return this.curves.push(e),this.currentPoint.set(i,n),this}bezierCurveTo(e,t,i,n,r,a){e=new cl(this.currentPoint.clone(),new Fe(e,t),new Fe(i,n),new Fe(r,a));return this.curves.push(e),this.currentPoint.set(r,a),this}splineThru(e){var t=[this.currentPoint.clone()].concat(e),t=new gl(t);return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,n,r,a){var s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,i,n,r,a),this}absarc(e,t,i,n,r,a){return this.absellipse(e,t,i,i,n,r,a),this}ellipse(e,t,i,n,r,a,s,o){var l=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+l,t+h,i,n,r,a,s,o),this}absellipse(e,t,i,n,r,a,s,o){t=new $o(e,t,i,n,r,a,s,o);if(0<this.curves.length){let e=t.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(t);e=t.getPoint(1);return this.currentPoint.copy(e),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){var e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class xl extends C{constructor(o=[new Fe(0,-.5),new Fe(.5,0),new Fe(0,.5)],l=12,t=0,i=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:o,segments:l,phiStart:t,phiLength:i},l=Math.floor(l),i=y(i,0,2*Math.PI);let h=[],c=[],u=[],d=[],p=[],n=1/l,f=new ke,m=new Fe,r=new ke,a=new ke,s=new ke,g=0,v=0;for(let e=0;e<=o.length-1;e++)switch(e){case 0:g=o[e+1].x-o[e].x,v=o[e+1].y-o[e].y,r.x=+v,r.y=-g,r.z=0*v,s.copy(r),r.normalize(),d.push(r.x,r.y,r.z);break;case o.length-1:d.push(s.x,s.y,s.z);break;default:g=o[e+1].x-o[e].x,v=o[e+1].y-o[e].y,r.x=+v,r.y=-g,r.z=0*v,a.copy(r),r.x+=s.x,r.y+=s.y,r.z+=s.z,r.normalize(),d.push(r.x,r.y,r.z),s.copy(a)}for(let s=0;s<=l;s++){let e=t+s*n*i,r=Math.sin(e),a=Math.cos(e);for(let n=0;n<=o.length-1;n++){f.x=o[n].x*r,f.y=o[n].y,f.z=o[n].x*a,c.push(f.x,f.y,f.z),m.x=s/l,m.y=n/(o.length-1),u.push(m.x,m.y);let e=d[3*n+0]*r,t=d[3*n+1],i=d[3*n+0]*a;p.push(e,t,i)}}for(let s=0;s<l;s++)for(let a=0;a<o.length-1;a++){let e=a+s*o.length,t=e,i=e+o.length,n=e+o.length+1,r=e+1;h.push(t,i,r),h.push(n,r,i)}this.setIndex(h),this.setAttribute("position",new F(c,3)),this.setAttribute("uv",new F(u,2)),this.setAttribute("normal",new F(p,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xl(e.points,e.segments,e.phiStart,e.phiLength)}}class Sl extends xl{constructor(e=1,t=1,i=4,n=8){var r=new _l;r.absarc(0,-t/2,e,1.5*Math.PI,0),r.absarc(0,t/2,e,0,.5*Math.PI),super(r.getPoints(i),n),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:n}}static fromJSON(e){return new Sl(e.radius,e.length,e.capSegments,e.radialSegments)}}class bl extends C{constructor(i=1,n=32,r=0,a=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:i,segments:n,thetaStart:r,thetaLength:a},n=Math.max(3,n);var t=[],s=[],o=[],l=[],h=new ke,c=new Fe;s.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let e=0,t=3;e<=n;e++,t+=3){var u=r+e/n*a;h.x=i*Math.cos(u),h.y=i*Math.sin(u),s.push(h.x,h.y,h.z),o.push(0,0,1),c.x=(s[t]/i+1)/2,c.y=(s[t+1]/i+1)/2,l.push(c.x,c.y)}for(let e=1;e<=n;e++)t.push(e,e+1,0);this.setIndex(t),this.setAttribute("position",new F(s,3)),this.setAttribute("normal",new F(o,3)),this.setAttribute("uv",new F(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bl(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Tl extends C{constructor(t=1,i=1,c=1,u=32,n=1,e=!1,d=0,p=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:i,height:c,radialSegments:u,heightSegments:n,openEnded:e,thetaStart:d,thetaLength:p};let f=this,m=(u=Math.floor(u),n=Math.floor(n),[]),g=[],v=[],y=[],_=0,x=[],S=c/2,b=0;function r(n){let r=_,a=new Fe,s=new ke,o=0;var l=!0===n?t:i,h=!0===n?1:-1;for(let e=1;e<=u;e++)g.push(0,S*h,0),v.push(0,h,0),y.push(.5,.5),_++;var c=_;for(let n=0;n<=u;n++){let e=n/u*p+d,t=Math.cos(e),i=Math.sin(e);s.x=l*i,s.y=S*h,s.z=l*t,g.push(s.x,s.y,s.z),v.push(0,h,0),a.x=.5*t+.5,a.y=.5*i*h+.5,y.push(a.x,a.y),_++}for(let i=0;i<u;i++){let e=r+i,t=c+i;!0===n?m.push(t,t+1,e):m.push(t+1,t,e),o+=3}f.addGroup(b,o,!0===n?1:2),b+=o}{let l=new ke,h=new ke,s=0;var T=(i-t)/c;for(let e=0;e<=n;e++){let a=[],s=e/n,o=s*(i-t)+t;for(let r=0;r<=u;r++){let e=r/u,t=e*p+d,i=Math.sin(t),n=Math.cos(t);h.x=o*i,h.y=-s*c+S,h.z=o*n,g.push(h.x,h.y,h.z),l.set(i,T,n).normalize(),v.push(l.x,l.y,l.z),y.push(e,1-s),a.push(_++)}x.push(a)}for(let a=0;a<u;a++)for(let r=0;r<n;r++){let e=x[r][a],t=x[r+1][a],i=x[r+1][a+1],n=x[r][a+1];m.push(e,t,n),m.push(t,i,n),s+=6}f.addGroup(b,s,0),b+=s}!1===e&&(0<t&&r(!0),0<i)&&r(!1),this.setIndex(m),this.setAttribute("position",new F(g,3)),this.setAttribute("normal",new F(v,3)),this.setAttribute("uv",new F(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tl(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ml extends Tl{constructor(e=1,t=1,i=32,n=1,r=!1,a=0,s=2*Math.PI){super(0,e,t,i,n,r,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:s}}static fromJSON(e){return new Ml(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class wl extends C{constructor(i=[],t=[],e=1,n=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:i,indices:t,radius:e,detail:n};let r=[],a=[];function s(e){r.push(e.x,e.y,e.z)}function o(e,t){e*=3;t.x=i[0+e],t.y=i[1+e],t.z=i[2+e]}function l(e,t,i,n){n<0&&1===e.x&&(a[t]=e.x-1),0===i.x&&0===i.z&&(a[t]=n/2/Math.PI+.5)}function h(e){return Math.atan2(e.z,-e.x)}var c=n,u=new ke,d=new ke,p=new ke;for(let e=0;e<t.length;e+=3){o(t[e+0],u),o(t[e+1],d),o(t[e+2],p);{f=void 0;m=void 0;g=void 0;v=void 0;y=void 0;_=void 0;var f=u;var m=d;var g=p;var v=c;var y=v+1,_=[];for(let r=0;r<=y;r++){_[r]=[];let t=f.clone().lerp(g,r/y),i=m.clone().lerp(g,r/y),n=y-r;for(let e=0;e<=n;e++)_[r][e]=0===e&&r===y?t:t.clone().lerp(i,e/n)}for(let i=0;i<y;i++)for(let t=0;t<2*(y-i)-1;t++){let e=Math.floor(t/2);t%2==0?(s(_[i][e+1]),s(_[i+1][e]),s(_[i][e])):(s(_[i][e+1]),s(_[i+1][e+1]),s(_[i+1][e]))}}}var x=e,S=new ke;for(let e=0;e<r.length;e+=3)S.x=r[e+0],S.y=r[e+1],S.z=r[e+2],S.normalize().multiplyScalar(x),r[e+0]=S.x,r[e+1]=S.y,r[e+2]=S.z;var b=new ke;for(let e=0;e<r.length;e+=3){b.x=r[e+0],b.y=r[e+1],b.z=r[e+2];var T=h(b)/2/Math.PI+.5,M=Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))/Math.PI+.5;a.push(T,1-M)}var w=new ke,E=new ke,A=new ke,C=new ke,P=new Fe,R=new Fe,L=new Fe;for(let e=0,t=0;e<r.length;e+=9,t+=6){w.set(r[e+0],r[e+1],r[e+2]),E.set(r[e+3],r[e+4],r[e+5]),A.set(r[e+6],r[e+7],r[e+8]),P.set(a[t+0],a[t+1]),R.set(a[t+2],a[t+3]),L.set(a[t+4],a[t+5]),C.copy(w).add(E).add(A).divideScalar(3);var D=h(C);l(P,t+0,w,D),l(R,t+2,E,D),l(L,t+4,A,D)}for(let e=0;e<a.length;e+=6){var I=a[e+0],N=a[e+2],O=a[e+4],U=Math.max(I,N,O),B=Math.min(I,N,O);.9<U&&B<.1&&(I<.2&&(a[e+0]+=1),N<.2&&(a[e+2]+=1),O<.2)&&(a[e+4]+=1)}this.setAttribute("position",new F(r,3)),this.setAttribute("normal",new F(r.slice(),3)),this.setAttribute("uv",new F(a,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wl(e.vertices,e.indices,e.radius,e.details)}}class El extends wl{constructor(e=1,t=0){var i=(1+Math.sqrt(5))/2,n=1/i;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new El(e.radius,e.detail)}}let Al=new ke,Cl=new ke,Pl=new ke,Rl=new sn;class Ll extends C{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){var r=Math.pow(10,4),l=Math.cos(ft*t),a=e.getIndex(),s=e.getAttribute("position"),i=(a||s).count,h=[0,0,0],c=["a","b","c"],u=new Array(3),d={},p=[];for(let n=0;n<i;n+=3){a?(h[0]=a.getX(n),h[1]=a.getX(n+1),h[2]=a.getX(n+2)):(h[0]=n,h[1]=n+1,h[2]=n+2);let{a:e,b:t,c:i}=Rl;if(e.fromBufferAttribute(s,h[0]),t.fromBufferAttribute(s,h[1]),i.fromBufferAttribute(s,h[2]),Rl.getNormal(Pl),u[0]=`${Math.round(e.x*r)},${Math.round(e.y*r)},`+Math.round(e.z*r),u[1]=`${Math.round(t.x*r)},${Math.round(t.y*r)},`+Math.round(t.z*r),u[2]=`${Math.round(i.x*r)},${Math.round(i.y*r)},`+Math.round(i.z*r),u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let o=0;o<3;o++){let e=(o+1)%3,t=u[o],i=u[e],n=Rl[c[o]],r=Rl[c[e]],a=t+"_"+i,s=i+"_"+t;s in d&&d[s]?(Pl.dot(d[s].normal)<=l&&(p.push(n.x,n.y,n.z),p.push(r.x,r.y,r.z)),d[s]=null):a in d||(d[a]={index0:h[o],index1:h[e],normal:Pl.clone()})}}for(let i in d)if(d[i]){let{index0:e,index1:t}=d[i];Al.fromBufferAttribute(s,e),Cl.fromBufferAttribute(s,t),p.push(Al.x,Al.y,Al.z),p.push(Cl.x,Cl.y,Cl.z)}this.setAttribute("position",new F(p,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Dl extends _l{constructor(e){super(e),this.uuid=gt(),this.type="Shape",this.holes=[]}getPointsHoles(i){var n=[];for(let e=0,t=this.holes.length;e<t;e++)n[e]=this.holes[e].getPoints(i);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(i){super.copy(i),this.holes=[];for(let e=0,t=i.holes.length;e<t;e++){var n=i.holes[e];this.holes.push(n.clone())}return this}toJSON(){var i=super.toJSON();i.uuid=this.uuid,i.holes=[];for(let e=0,t=this.holes.length;e<t;e++){var n=this.holes[e];i.holes.push(n.toJSON())}return i}fromJSON(i){super.fromJSON(i),this.uuid=i.uuid,this.holes=[];for(let e=0,t=i.holes.length;e<t;e++){var n=i.holes[e];this.holes.push((new _l).fromJSON(n))}return this}}function Il(o,l,h=2){var c=l&&l.length,u=c?l[0]*h:o.length;let d=Nl(o,0,u,h,!0);var p=[];if(d&&d.next!==d.prev){let t,i,n,r,a,s,e;if(c&&(d=((e,t,i,n)=>{var r=[];let a,s,o,l,h;for(a=0,s=t.length;a<s;a++)o=t[a]*n,l=a<s-1?t[a+1]*n:e.length,(h=Nl(e,o,l,n,!1))===h.next&&(h.steiner=!0),r.push((e=>{let t=e,i=e;for(;(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),(t=t.next)!==e;);return i})(h));for(r.sort(Bl),a=0;a<r.length;a++)i=((e,t)=>{var i=((e,t)=>{let i,n=t,r=-1/0;var a=e.x,s=e.y;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){let e=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=a&&e>r&&(r=e,i=n.x<n.next.x?n:n.next,e===a))return i}}while((n=n.next)!==t);if(!i)return null;var o,l,h=i,c=i.x,u=i.y;let d,p=1/0;for(n=i;a>=n.x&&n.x>=c&&a!==n.x&&Gl(s<u?a:r,s,c,u,s<u?r:a,s,n.x,n.y)&&(d=Math.abs(s-n.y)/(a-n.x),Wl(n,e))&&(d<p||d===p&&(n.x>i.x||n.x===i.x&&(o=i,l=n,S(o.prev,o,l.prev)<0)&&S(l.next,o,o.next)<0))&&(i=n,p=d),(n=n.next)!==h;);return i})(e,t);return i?(Ol(t=Xl(i,e),t.next),Ol(i,i.next)):t})(r[a],i);return i})(o,l,d,h)),o.length>80*h){t=n=o[0],i=r=o[1];for(let e=h;e<u;e+=h)a=o[e],s=o[e+1],a<t&&(t=a),s<i&&(i=s),a>n&&(n=a),s>r&&(r=s);e=0!==(e=Math.max(n-t,r-i))?32767/e:0}Ul(d,p,h,t,i,e,0)}return p}function Nl(e,s,t,i,n){let r,a;if(n===0<((i,n,r)=>{let a=0;for(let e=s,t=n-r;e<n;e+=r)a+=(i[t]-i[e])*(i[e+1]+i[t+1]),t=e;return a})(e,t,i))for(r=s;r<t;r+=i)a=jl(r,e[r],e[r+1],a);else for(r=t-i;r>=s;r-=i)a=jl(r,e[r],e[r+1],a);return a&&kl(a,a.next)&&(ql(a),a=a.next),a}function Ol(e,t){if(!e)return e;t=t||e;let i,n=e;do{if(i=!1,n.steiner||!kl(n,n.next)&&0!==S(n.prev,n,n.next))n=n.next;else{if(ql(n),(n=t=n.prev)===n.next)break;i=!0}}while(i||n!==t);return t}function Ul(n,r,a,s,o,l,h){if(n){if(!h&&l){var c=n;var u=s;var d=o;var p=l;let h=c;for(;0===h.z&&(h.z=Fl(h.x,h.y,u,d,p)),h.prevZ=h.prev,h.nextZ=h.next,(h=h.next)!==c;);h.prevZ.nextZ=null,h.prevZ=null;{var f=h;let e,t,i,n,r,a,s,o,l=1;do{for(t=f,f=null,r=null,a=0;t;){for(a++,i=t,s=0,e=0;e<l&&(s++,i=i.nextZ);e++);for(o=l;0<s||0<o&&i;)0!==s&&(0===o||!i||t.z<=i.z)?(t=(n=t).nextZ,s--):(i=(n=i).nextZ,o--),r?r.nextZ=n:f=n,n.prevZ=r,r=n;t=i}}while(r.nextZ=null,l*=2,1<a)}}let e,t,i=n;for(;n.prev!==n.next;)if(e=n.prev,t=n.next,l?((f,m,g,v)=>{var y=f.prev,_=f,x=f.next;if(!(0<=S(y,_,x))){let e=y.x,t=_.x,i=x.x,n=y.y,r=_.y,a=x.y,s=e<t?e<i?e:i:t<i?t:i,o=n<r?n<a?n:a:r<a?r:a,l=e>t?e>i?e:i:t>i?t:i,h=n>r?n>a?n:a:r>a?r:a,c=Fl(s,o,m,g,v),u=Fl(l,h,m,g,v),d=f.prevZ,p=f.nextZ;for(;d&&d.z>=c&&p&&p.z<=u;){if(d.x>=s&&d.x<=l&&d.y>=o&&d.y<=h&&d!==y&&d!==x&&Gl(e,n,t,r,i,a,d.x,d.y)&&0<=S(d.prev,d,d.next))return;if(d=d.prevZ,p.x>=s&&p.x<=l&&p.y>=o&&p.y<=h&&p!==y&&p!==x&&Gl(e,n,t,r,i,a,p.x,p.y)&&0<=S(p.prev,p,p.next))return;p=p.nextZ}for(;d&&d.z>=c;){if(d.x>=s&&d.x<=l&&d.y>=o&&d.y<=h&&d!==y&&d!==x&&Gl(e,n,t,r,i,a,d.x,d.y)&&0<=S(d.prev,d,d.next))return;d=d.prevZ}for(;p&&p.z<=u;){if(p.x>=s&&p.x<=l&&p.y>=o&&p.y<=h&&p!==y&&p!==x&&Gl(e,n,t,r,i,a,p.x,p.y)&&0<=S(p.prev,p,p.next))return;p=p.nextZ}return 1}})(n,s,o,l):(u=>{var d=u.prev,p=u,u=u.next;if(!(0<=S(d,p,u))){let e=d.x,t=p.x,i=u.x,n=d.y,r=p.y,a=u.y,s=e<t?e<i?e:i:t<i?t:i,o=n<r?n<a?n:a:r<a?r:a,l=e>t?e>i?e:i:t>i?t:i,h=n>r?n>a?n:a:r>a?r:a,c=u.next;for(;c!==d;){if(c.x>=s&&c.x<=l&&c.y>=o&&c.y<=h&&Gl(e,n,t,r,i,a,c.x,c.y)&&0<=S(c.prev,c,c.next))return;c=c.next}return 1}})(n))r.push(e.i/a|0),r.push(n.i/a|0),r.push(t.i/a|0),ql(n),n=t.next,i=t.next;else if((n=t)===i){h?1===h?Ul(n=((e,t,i)=>{let n=e;do{var r=n.prev,a=n.next.next;!kl(r,a)&&Hl(r,n,n.next,a)&&Wl(r,a)&&Wl(a,r)&&(t.push(r.i/i|0),t.push(n.i/i|0),t.push(a.i/i|0),ql(n),ql(n.next),n=e=a),n=n.next}while(n!==e);return Ol(n)})(Ol(n),r,a),r,a,s,o,l,2):2===h&&((e,t,i,n,r,a)=>{let s=e;do{let e=s.next.next;for(;e!==s.prev;){var o;if(s.i!==e.i&&((e,t)=>e.next.i!==t.i&&e.prev.i!==t.i&&!((e,t)=>{let i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&Hl(i,i.next,e,t))return 1}while((i=i.next)!==e)})(e,t)&&(Wl(e,t)&&Wl(t,e)&&((e,t)=>{let i=e,n=!1;for(var r=(e.x+t.x)/2,a=(e.y+t.y)/2;i.y>a!=i.next.y>a&&i.next.y!==i.y&&r<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(n=!n),(i=i.next)!==e;);return n})(e,t)&&(S(e.prev,e,t.prev)||S(e,t.prev,t))||kl(e,t)&&0<S(e.prev,e,e.next)&&0<S(t.prev,t,t.next)))(s,e))return o=Xl(s,e),s=Ol(s,s.next),o=Ol(o,o.next),Ul(s,t,i,n,r,a,0),Ul(o,t,i,n,r,a,0);e=e.next}}while((s=s.next)!==e)})(n,r,a,s,o,l):Ul(Ol(n),r,a,s,o,l,1);break}}}function Bl(e,t){return e.x-t.x}function Fl(e,t,i,n,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Gl(e,t,i,n,r,a,s,o){return(e-s)*(a-o)<=(r-s)*(t-o)&&(i-s)*(t-o)<=(e-s)*(n-o)&&(r-s)*(n-o)<=(i-s)*(a-o)}function S(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function kl(e,t){return e.x===t.x&&e.y===t.y}function Hl(e,t,i,n){var r=Vl(S(e,t,i)),a=Vl(S(e,t,n)),s=Vl(S(i,n,e)),o=Vl(S(i,n,t));return r!==a&&s!==o||0===r&&zl(e,i,t)||0===a&&zl(e,n,t)||0===s&&zl(i,e,n)||0===o&&zl(i,t,n)}function zl(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Vl(e){return 0<e?1:e<0?-1:0}function Wl(e,t){return S(e.prev,e,e.next)<0?0<=S(e,t,e.next)&&0<=S(e,e.prev,t):S(e,t,e.prev)<0||S(e,e.next,t)<0}function Xl(e,t){var i=new Yl(e.i,e.x,e.y),n=new Yl(t.i,t.x,t.y),r=e.next,a=t.prev;return(e.next=t).prev=e,(i.next=r).prev=i,n.next=i,(a.next=i.prev=n).prev=a,n}function jl(e,t,i,n){e=new Yl(e,t,i);return n?(e.next=n.next,(e.prev=n).next.prev=e,n.next=e):(e.prev=e).next=e,e}function ql(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Yl(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Kl{static area(i){var n=i.length;let r=0;for(let e=n-1,t=0;t<n;e=t++)r+=i[e].x*i[t].y-i[t].x*i[e].y;return.5*r}static isClockWise(e){return Kl.area(e)<0}static triangulateShape(e,t){var i=[],n=[],r=[];Zl(e),Jl(i,e);let a=e.length;t.forEach(Zl);for(let e=0;e<t.length;e++)n.push(a),a+=t[e].length,Jl(i,t[e]);var s=Il(i,n);for(let e=0;e<s.length;e+=3)r.push(s.slice(e,e+3));return r}}function Zl(e){var t=e.length;2<t&&e[t-1].equals(e[0])&&e.pop()}function Jl(t,i){for(let e=0;e<i.length;e++)t.push(i[e].x),t.push(i[e].y)}class Ql extends C{constructor(i=new Dl([new Fe(.5,.5),new Fe(-.5,.5),new Fe(-.5,-.5),new Fe(.5,-.5)]),G={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:i,options:G},i=Array.isArray(i)?i:[i];let k=this,H=[],z=[];for(let e=0,t=i.length;e<t;e++)(e=>{let n=[],U=void 0!==G.curveSegments?G.curveSegments:12,c=void 0!==G.steps?G.steps:1,a=void 0!==G.depth?G.depth:1,r=void 0===G.bevelEnabled||G.bevelEnabled,i=void 0!==G.bevelThickness?G.bevelThickness:.2,s=void 0!==G.bevelSize?G.bevelSize:i-.1,o=void 0!==G.bevelOffset?G.bevelOffset:0,u=void 0!==G.bevelSegments?G.bevelSegments:3,t=G.extrudePath,d=void 0!==G.UVGenerator?G.UVGenerator:$l,l,h,p,f,m,g=!1,v=(t&&(l=t.getSpacedPoints(c),g=!0,r=!1,h=t.computeFrenetFrames(c,!1),p=new ke,f=new ke,m=new ke),r||(u=0,i=0,s=0,o=0),e.extractPoints(U)),y=v.shape,_=v.holes;if(!Kl.isClockWise(y)){y=y.reverse();for(let t=0,e=_.length;t<e;t++){let e=_[t];Kl.isClockWise(e)&&(_[t]=e.reverse())}}let x=Kl.triangulateShape(y,_),S=y;for(let t=0,e=_.length;t<e;t++){let e=_[t];y=y.concat(e)}function b(e,t,i){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,i)}let T=y.length,M=x.length;function w(a,s,o){let l,h,c,u=a.x-s.x,d=a.y-s.y,p=o.x-a.x,f=o.y-a.y,m=u*u+d*d,e=u*f-d*p;if(Math.abs(e)>Number.EPSILON){let e=Math.sqrt(m),t=Math.sqrt(p*p+f*f),i=s.x-d/e,n=s.y+u/e,r=((o.x-f/t-i)*f-(o.y+p/t-n)*p)/(u*f-d*p);l=i+u*r-a.x,h=n+d*r-a.y;s=l*l+h*h;if(s<=2)return new Fe(l,h);c=Math.sqrt(s/2)}else{let e=!1;u>Number.EPSILON?p>Number.EPSILON&&(e=!0):u<-Number.EPSILON?p<-Number.EPSILON&&(e=!0):Math.sign(d)===Math.sign(f)&&(e=!0),c=e?(l=-d,h=u,Math.sqrt(m)):(l=u,h=d,Math.sqrt(m/2))}return new Fe(l/c,h/c)}var E=[];for(let e=0,t=S.length,i=t-1,n=e+1;e<t;e++,i++,n++)i===t&&(i=0),n===t&&(n=0),E[e]=w(S[e],S[i],S[n]);let A=[],C,P=E.concat();for(let e=0,t=_.length;e<t;e++){let r=_[e];C=[];for(let e=0,t=r.length,i=t-1,n=e+1;e<t;e++,i++,n++)i===t&&(i=0),n===t&&(n=0),C[e]=w(r[e],r[i],r[n]);A.push(C),P=P.concat(C)}for(let t=0;t<u;t++){let e=t/u,n=i*Math.cos(e*Math.PI/2),r=s*Math.sin(e*Math.PI/2)+o;for(let t=0,e=S.length;t<e;t++){let e=b(S[t],E[t],r);R(e.x,e.y,-n)}for(let e=0,t=_.length;e<t;e++){let i=_[e];C=A[e];for(let t=0,e=i.length;t<e;t++){let e=b(i[t],C[t],r);R(e.x,e.y,-n)}}}var B=s+o;for(let t=0;t<T;t++){let e=r?b(y[t],P[t],B):y[t];g?(f.copy(h.normals[0]).multiplyScalar(e.x),p.copy(h.binormals[0]).multiplyScalar(e.y),m.copy(l[0]).add(f).add(p),R(m.x,m.y,m.z)):R(e.x,e.y,0)}for(let i=1;i<=c;i++)for(let t=0;t<T;t++){let e=r?b(y[t],P[t],B):y[t];g?(f.copy(h.normals[i]).multiplyScalar(e.x),p.copy(h.binormals[i]).multiplyScalar(e.y),m.copy(l[i]).add(f).add(p),R(m.x,m.y,m.z)):R(e.x,e.y,a/c*i)}for(let t=u-1;0<=t;t--){let e=t/u,n=i*Math.cos(e*Math.PI/2),r=s*Math.sin(e*Math.PI/2)+o;for(let t=0,e=S.length;t<e;t++){let e=b(S[t],E[t],r);R(e.x,e.y,a+n)}for(let e=0,t=_.length;e<t;e++){let i=_[e];C=A[e];for(let t=0,e=i.length;t<e;t++){let e=b(i[t],C[t],r);g?R(e.x,e.y+l[c-1].y,l[c-1].x+n):R(e.x,e.y,a+n)}}}function F(e,r){let t=e.length;for(;0<=--t;){var a=t;let n=t-1;n<0&&(n=e.length-1);for(let i=0,e=c+2*u;i<e;i++){let e=T*i,t=T*(i+1);h=l=o=s=void 0;var s=r+a+e,o=r+n+e,l=r+n+t,h=r+a+t;D(s),D(o),D(h),D(o),D(l),D(h),s=H.length/3,I((o=d.generateSideWallUV(k,H,s-6,s-3,s-2,s-1))[0]),I(o[1]),I(o[3]),I(o[1]),I(o[2]),I(o[3])}}}function R(e,t,i){n.push(e),n.push(t),n.push(i)}function L(e,t,i){D(e),D(t),D(i);e=H.length/3,t=d.generateTopUV(k,H,e-3,e-2,e-1);I(t[0]),I(t[1]),I(t[2])}function D(e){H.push(n[3*e+0]),H.push(n[3*e+1]),H.push(n[3*e+2])}function I(e){z.push(e.x),z.push(e.y)}if(e=H.length/3,r){let e=0,i=0*T;for(let t=0;t<M;t++){let e=x[t];L(e[2]+i,e[1]+i,e[0]+i)}e=c+2*u,i=T*e;for(let t=0;t<M;t++){let e=x[t];L(e[0]+i,e[1]+i,e[2]+i)}}else{for(let e=0;e<M;e++){var N=x[e];L(N[2],N[1],N[0])}for(let e=0;e<M;e++){var O=x[e];L(O[0]+T*c,O[1]+T*c,O[2]+T*c)}}k.addGroup(e,H.length/3-e,0);{e=H.length/3;let i=0;F(S,i),i+=S.length;for(let t=0,e=_.length;t<e;t++){let e=_[t];F(e,i),i+=e.length}k.addGroup(e,H.length/3-e,1)}})(i[e]);this.setAttribute("position",new F(H,3)),this.setAttribute("uv",new F(z,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){var e=super.toJSON(),i=this.parameters.shapes,t=this.parameters.options,n=e;if(n.shapes=[],Array.isArray(i))for(let e=0,t=i.length;e<t;e++){var r=i[e];n.shapes.push(r.uuid)}else n.shapes.push(i.uuid);return n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}static fromJSON(i,n){var r=[];for(let e=0,t=i.shapes.length;e<t;e++){var a=n[i.shapes[e]];r.push(a)}var e=i.options.extrudePath;return void 0!==e&&(i.options.extrudePath=(new vl[e.type]).fromJSON(e)),new Ql(r,i.options)}}let $l={generateTopUV:function(e,t,i,n,r){var a=t[3*i],i=t[3*i+1],s=t[3*n],n=t[3*n+1],o=t[3*r],t=t[3*r+1];return[new Fe(a,i),new Fe(s,n),new Fe(o,t)]},generateSideWallUV:function(e,t,i,n,r,a){var s=t[3*i],o=t[3*i+1],i=t[3*i+2],l=t[3*n],h=t[3*n+1],n=t[3*n+2],c=t[3*r],u=t[3*r+1],r=t[3*r+2],d=t[3*a],p=t[3*a+1],t=t[3*a+2];return Math.abs(o-h)<Math.abs(s-l)?[new Fe(s,1-i),new Fe(l,1-n),new Fe(c,1-r),new Fe(d,1-t)]:[new Fe(o,1-i),new Fe(h,1-n),new Fe(u,1-r),new Fe(p,1-t)]}};class eh extends wl{constructor(e=1,t=0){var i=(1+Math.sqrt(5))/2;super([-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new eh(e.radius,e.detail)}}class th extends wl{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new th(e.radius,e.detail)}}class ih extends C{constructor(e=.5,i=1,o=32,t=1,n=0,r=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:i,thetaSegments:o,phiSegments:t,thetaStart:n,thetaLength:r},o=Math.max(3,o);let l=[],a=[],s=[],h=[],c=e;var u=(i-e)/(t=Math.max(1,t)),d=new ke,p=new Fe;for(let e=0;e<=t;e++){for(let t=0;t<=o;t++){let e=n+t/o*r;d.x=c*Math.cos(e),d.y=c*Math.sin(e),a.push(d.x,d.y,d.z),s.push(0,0,1),p.x=(d.x/i+1)/2,p.y=(d.y/i+1)/2,h.push(p.x,p.y)}c+=u}for(let e=0;e<t;e++){let s=e*(o+1);for(let a=0;a<o;a++){let e=a+s,t=e,i=e+o+1,n=e+o+2,r=e+1;l.push(t,i,r),l.push(i,n,r)}}this.setIndex(l),this.setAttribute("position",new F(a,3)),this.setAttribute("normal",new F(s,3)),this.setAttribute("uv",new F(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ih(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class nh extends C{constructor(t=new Dl([new Fe(0,.5),new Fe(-.5,-.5),new Fe(.5,-.5)]),r=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:r};let o=[],l=[],h=[],c=[],i=0,u=0;if(!1===Array.isArray(t))n(t);else for(let e=0;e<t.length;e++)n(t[e]),this.addGroup(i,u,e),i+=u,u=0;function n(e){var a=l.length/3,e=e.extractPoints(r);let i=e.shape;var n=e.holes;!1===Kl.isClockWise(i)&&(i=i.reverse());for(let t=0,e=n.length;t<e;t++){let e=n[t];!0===Kl.isClockWise(e)&&(n[t]=e.reverse())}var s=Kl.triangulateShape(i,n);for(let t=0,e=n.length;t<e;t++){let e=n[t];i=i.concat(e)}for(let t=0,e=i.length;t<e;t++){let e=i[t];l.push(e.x,e.y,0),h.push(0,0,1),c.push(e.x,e.y)}for(let r=0,e=s.length;r<e;r++){let e=s[r],t=e[0]+a,i=e[1]+a,n=e[2]+a;o.push(t,i,n),u+=3}}this.setIndex(o),this.setAttribute("position",new F(l,3)),this.setAttribute("normal",new F(h,3)),this.setAttribute("uv",new F(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){var e=super.toJSON(),i=this.parameters.shapes,n=e;if(n.shapes=[],Array.isArray(i))for(let e=0,t=i.length;e<t;e++){var r=i[e];n.shapes.push(r.uuid)}else n.shapes.push(i.uuid);return n}static fromJSON(i,n){var r=[];for(let e=0,t=i.shapes.length;e<t;e++){var a=n[i.shapes[e]];r.push(a)}return new nh(r,i.curveSegments)}}class rh extends C{constructor(n=1,s=32,o=16,r=0,a=2*Math.PI,l=0,h=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:n,widthSegments:s,heightSegments:o,phiStart:r,phiLength:a,thetaStart:l,thetaLength:h},s=Math.max(3,Math.floor(s)),o=Math.max(2,Math.floor(o));let c=Math.min(l+h,Math.PI),u=0;var d=[],p=new ke,f=new ke,m=[],g=[],v=[],y=[];for(let e=0;e<=o;e++){var _=[],x=e/o;let i=0;0===e&&0===l?i=.5/s:e===o&&c===Math.PI&&(i=-.5/s);for(let t=0;t<=s;t++){let e=t/s;p.x=-n*Math.cos(r+e*a)*Math.sin(l+x*h),p.y=n*Math.cos(l+x*h),p.z=n*Math.sin(r+e*a)*Math.sin(l+x*h),g.push(p.x,p.y,p.z),f.copy(p).normalize(),v.push(f.x,f.y,f.z),y.push(e+i,1-x),_.push(u++)}d.push(_)}for(let a=0;a<o;a++)for(let r=0;r<s;r++){let e=d[a][r+1],t=d[a][r],i=d[a+1][r],n=d[a+1][r+1];(0!==a||0<l)&&m.push(e,t,n),(a!==o-1||c<Math.PI)&&m.push(t,i,n)}this.setIndex(m),this.setAttribute("position",new F(g,3)),this.setAttribute("normal",new F(v,3)),this.setAttribute("uv",new F(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class ah extends wl{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ah(e.radius,e.detail)}}class sh extends C{constructor(i=1,n=.4,r=12,s=48,a=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:i,tube:n,radialSegments:r,tubularSegments:s,arc:a},r=Math.floor(r),s=Math.floor(s);let o=[],l=[],h=[],c=[],u=new ke,d=new ke,p=new ke;for(let t=0;t<=r;t++)for(let e=0;e<=s;e++){var f=e/s*a,m=t/r*Math.PI*2;d.x=(i+n*Math.cos(m))*Math.cos(f),d.y=(i+n*Math.cos(m))*Math.sin(f),d.z=n*Math.sin(m),l.push(d.x,d.y,d.z),u.x=i*Math.cos(f),u.y=i*Math.sin(f),p.subVectors(d,u).normalize(),h.push(p.x,p.y,p.z),c.push(e/s),c.push(t/r)}for(let a=1;a<=r;a++)for(let r=1;r<=s;r++){let e=(s+1)*a+r-1,t=(s+1)*(a-1)+r-1,i=(s+1)*(a-1)+r,n=(s+1)*a+r;o.push(e,t,n),o.push(t,i,n)}this.setIndex(o),this.setAttribute("position",new F(l,3)),this.setAttribute("normal",new F(h,3)),this.setAttribute("uv",new F(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sh(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class oh extends C{constructor(e=1,a=.4,s=64,o=8,t=2,i=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:a,tubularSegments:s,radialSegments:o,p:t,q:i},s=Math.floor(s),o=Math.floor(o);let l=[],h=[],c=[],u=[],d=new ke,p=new ke,f=new ke,n=new ke,m=new ke,g=new ke,v=new ke;for(let r=0;r<=s;++r){var y=r/s*t*Math.PI*2;_(y,t,i,e,f),_(.01+y,t,i,e,n),g.subVectors(n,f),v.addVectors(n,f),m.crossVectors(g,v),v.crossVectors(m,g),m.normalize(),v.normalize();for(let n=0;n<=o;++n){let e=n/o*Math.PI*2,t=-a*Math.cos(e),i=a*Math.sin(e);d.x=f.x+(t*v.x+i*m.x),d.y=f.y+(t*v.y+i*m.y),d.z=f.z+(t*v.z+i*m.z),h.push(d.x,d.y,d.z),p.subVectors(d,f).normalize(),c.push(p.x,p.y,p.z),u.push(r/s),u.push(n/o)}}for(let a=1;a<=s;a++)for(let r=1;r<=o;r++){let e=(o+1)*(a-1)+(r-1),t=(o+1)*a+(r-1),i=(o+1)*a+r,n=(o+1)*(a-1)+r;l.push(e,t,n),l.push(t,i,n)}function _(e,t,i,n,r){var a=Math.cos(e),s=Math.sin(e),i=i/t*e,t=Math.cos(i);r.x=n*(2+t)*.5*a,r.y=n*(2+t)*s*.5,r.z=n*Math.sin(i)*.5}this.setIndex(l),this.setAttribute("position",new F(h,3)),this.setAttribute("normal",new F(c,3)),this.setAttribute("uv",new F(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new oh(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class lh extends C{constructor(t=new ml(new ke(-1,-1,0),new ke(-1,1,0),new ke(1,1,0)),i=64,s=1,o=8,e=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:i,radius:s,radialSegments:o,closed:e};let n=t.computeFrenetFrames(i,e),l=(this.tangents=n.tangents,this.normals=n.normals,this.binormals=n.binormals,new ke),h=new ke,r=new Fe,c=new ke,u=[],d=[],a=[],p=[];function f(e){c=t.getPointAt(e/i,c);var r=n.normals[e],a=n.binormals[e];for(let n=0;n<=o;n++){let e=n/o*Math.PI*2,t=Math.sin(e),i=-Math.cos(e);h.x=i*r.x+t*a.x,h.y=i*r.y+t*a.y,h.z=i*r.z+t*a.z,h.normalize(),d.push(h.x,h.y,h.z),l.x=c.x+s*h.x,l.y=c.y+s*h.y,l.z=c.z+s*h.z,u.push(l.x,l.y,l.z)}}for(let e=0;e<i;e++)f(e);f(!1===e?i:0);for(let t=0;t<=i;t++)for(let e=0;e<=o;e++)r.x=t/i,r.y=e/o,a.push(r.x,r.y);for(let t=1;t<=i;t++)for(let e=1;e<=o;e++){var m=(o+1)*(t-1)+(e-1),g=(o+1)*t+(e-1),v=(o+1)*t+e,y=(o+1)*(t-1)+e;p.push(m,g,y),p.push(g,v,y)}this.setIndex(p),this.setAttribute("position",new F(u,3)),this.setAttribute("normal",new F(d,3)),this.setAttribute("uv",new F(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){var e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new lh((new vl[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class hh extends C{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){var n=[],r=new Set,a=new ke,s=new ke;if(null!==e.index){var o=e.attributes.position,l=e.index;let i=e.groups;for(let e=0,t=(i=0===i.length?[{start:0,count:l.count,materialIndex:0}]:i).length;e<t;++e){var h=i[e],c=h.start;for(let t=c,e=c+h.count;t<e;t+=3)for(let e=0;e<3;e++){var u=l.getX(t+e),d=l.getX(t+(e+1)%3);a.fromBufferAttribute(o,u),s.fromBufferAttribute(o,d),!0===ch(a,s,r)&&(n.push(a.x,a.y,a.z),n.push(s.x,s.y,s.z))}}}else{var i=e.attributes.position;for(let t=0,e=i.count/3;t<e;t++)for(let e=0;e<3;e++){var p=3*t+e,f=3*t+(e+1)%3;a.fromBufferAttribute(i,p),s.fromBufferAttribute(i,f),!0===ch(a,s,r)&&(n.push(a.x,a.y,a.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new F(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function ch(e,t,i){var n=`${e.x},${e.y},${e.z}-${t.x},${t.y},`+t.z,t=t.x+`,${t.y},${t.z}-${e.x},${e.y},`+e.z;return!0!==i.has(n)&&!0!==i.has(t)&&(i.add(n),i.add(t),!0)}var uh=Object.freeze({__proto__:null,BoxGeometry:Wn,CapsuleGeometry:Sl,CircleGeometry:bl,ConeGeometry:Ml,CylinderGeometry:Tl,DodecahedronGeometry:El,EdgesGeometry:Ll,ExtrudeGeometry:Ql,IcosahedronGeometry:eh,LatheGeometry:xl,OctahedronGeometry:th,PlaneGeometry:lr,PolyhedronGeometry:wl,RingGeometry:ih,ShapeGeometry:nh,SphereGeometry:rh,TetrahedronGeometry:ah,TorusGeometry:sh,TorusKnotGeometry:oh,TubeGeometry:lh,WireframeGeometry:hh});class dh extends t{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ze(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class ph extends Yn{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class fh extends t{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ze(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mh extends fh{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Fe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return y(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ze(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ze(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ze(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){0<this._anisotropy!=0<e&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){0<this._clearcoat!=0<e&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){0<this._iridescence!=0<e&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){0<this._sheen!=0<e&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){0<this._transmission!=0<e&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class gh extends t{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ze(16777215),this.specular=new ze(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=O,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class vh extends t{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ze(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class yh extends t{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class _h extends t{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=O,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xh extends t{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ze(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Sh extends Io{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function bh(e,t,i){return!e||!i&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function Th(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Mh(i){var t=i.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort(function(e,t){return i[e]-i[t]}),n}function wh(n,r,a){let t=n.length,s=new n.constructor(t);for(let e=0,i=0;i!==t;++e){let t=a[e]*r;for(let e=0;e!==r;++e)s[i++]=n[t+e]}return s}function Eh(t,i,n,r){let a=1,s=t[0];for(;void 0!==s&&void 0===s[r];)s=t[a++];if(void 0!==s){let e=s[r];if(void 0!==e)if(Array.isArray(e))for(;void 0!==(e=s[r])&&(i.push(s.time),n.push.apply(n,e)),void 0!==(s=t[a++]););else if(void 0!==e.toArray)for(;void 0!==(e=s[r])&&(i.push(s.time),e.toArray(n,n.length)),void 0!==(s=t[a++]););else for(;void 0!==(e=s[r])&&(i.push(s.time),n.push(e)),void 0!==(s=t[a++]););}}var Ah={convertArray:bh,isTypedArray:Th,getKeyframeOrder:Mh,sortedArray:wh,flattenJSON:Eh,subclip:function(e,t,s,o,l=30){let h=e.clone();h.name=t;var c=[];for(let e=0;e<h.tracks.length;++e){let i=h.tracks[e],n=i.getValueSize(),r=[],a=[];for(let t=0;t<i.times.length;++t){let e=i.times[t]*l;if(!(e<s||e>=o)){r.push(i.times[t]);for(let e=0;e<n;++e)a.push(i.values[t*n+e])}}0!==r.length&&(i.times=bh(r,i.times.constructor),i.values=bh(a,i.values.constructor),c.push(i))}h.tracks=c;let i=1/0;for(let e=0;e<h.tracks.length;++e)i>h.tracks[e].times[0]&&(i=h.tracks[e].times[0]);for(let e=0;e<h.tracks.length;++e)h.tracks[e].shift(-1*i);return h.resetDuration(),h},makeClipAdditive:function(i,e=0,n=i,t=30){let r=n.tracks.length,o=e/(t=t<=0?30:t);for(let e=0;e<r;++e){let s=n.tracks[e],t=s.ValueTypeName;if("bool"!==t&&"string"!==t){var l=i.tracks.find(function(e){return e.name===s.name&&e.ValueTypeName===t});if(void 0!==l){let n=0;var h=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(n=h/3);let r=0;var c=l.getValueSize(),u=(l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(r=c/3),s.times.length-1);let a;if(o<=s.times[0]){let e=n,t=h-n;a=s.values.slice(e,t)}else if(o>=s.times[u]){let e=u*h+n,t=e+h-n;a=s.values.slice(e,t)}else{let e=s.createInterpolant(),t=n,i=h-n;e.evaluate(o),a=e.resultBuffer.slice(t,i)}"quaternion"===t&&(new Yt).fromArray(a).normalize().conjugate().toArray(a);var d=l.times.length;for(let e=0;e<d;++e){let i=e*c+r;if("quaternion"===t)Yt.multiplyQuaternionsFlat(l.values,i,a,0,l.values,i);else{let t=c-2*r;for(let e=0;e<t;++e)l.values[i+e]-=a[e]}}}}}return i.blendMode=2501,i}};class Ch{constructor(e,t,i,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(i){var n=this.parameterPositions;let r=this._cachedIndex,e=n[r],a=n[r-1];e:{t:{let t;i:{n:if(!(i<e)){for(var s=r+2;;){if(void 0===e){if(i<a)break n;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===s)break;if(a=e,i<(e=n[++r]))break t}t=n.length;break i}if(i>=a)break e;var o=n[1];i<o&&(r=2,a=o);for(var l=r-2;;){if(void 0===a)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(e=a,i>=(a=n[--r-1]))break t}t=r,r=0}for(;r<t;){let e=r+t>>>1;i<n[e]?t=e:r=1+e}if(e=n[r],void 0===(a=n[r-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===e)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,a,e)}return this.interpolate_(r,a,i,e)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){var t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=e*n;for(let e=0;e!==n;++e)t[e]=i[r+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Ph extends Ch{constructor(e,t,i,n){super(e,t,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){var n=this.parameterPositions;let r=e-2,a=e+1,s=n[r],o=n[a];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:r=e,s=2*t-i;break;case 2402:r=n.length-2,s=t+n[r]-n[r+1];break;default:r=e,s=i}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:a=e,o=2*i-t;break;case 2402:a=1,o=i+n[1]-n[0];break;default:a=e-1,o=t}var l=.5*(i-t),h=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-i),this._offsetPrev=r*h,this._offsetNext=a*h}interpolate_(e,t,i,n){var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,h=this._offsetPrev,c=this._offsetNext,e=this._weightPrev,u=this._weightNext,i=(i-t)/(n-t),n=i*i,t=n*i,d=-e*t+2*e*n-e*i,p=(1+e)*t+(-1.5-2*e)*n+(-.5+e)*i+1,f=(-1-u)*t+(1.5+u)*n+.5*i,m=u*t-u*n;for(let e=0;e!==s;++e)r[e]=d*a[h+e]+p*a[l+e]+f*a[o+e]+m*a[c+e];return r}}class Rh extends Ch{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,h=(i-t)/(n-t),c=1-h;for(let e=0;e!==s;++e)r[e]=a[l+e]*c+a[o+e]*h;return r}}class Lh extends Ch{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e){return this.copySampleValue_(e-1)}}class Dh{constructor(e,t,i,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=bh(t,this.TimeBufferType),this.values=bh(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(t){let e=t.constructor,i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:bh(t.times,Array),values:bh(t.values,Array)};let e=t.getInterpolation();e!==t.DefaultInterpolation&&(i.interpolation=e)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Lh(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Rh(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Ph(this.times,this.values,this.getValueSize(),e)}setInterpolation(t){let e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){let e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}console.warn("THREE.KeyframeTrack:",e)}else this.createInterpolant=e;return this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(i){if(0!==i){var n=this.times;for(let e=0,t=n.length;e!==t;++e)n[e]+=i}return this}scale(i){if(1!==i){var n=this.times;for(let e=0,t=n.length;e!==t;++e)n[e]*=i}return this}trim(e,t){var i=this.times,n=i.length;let r=0,a=n-1;for(;r!==n&&i[r]<e;)++r;for(;-1!==a&&i[a]>t;)--a;if(++a,0!==r||a!==n){r>=a&&(a=Math.max(a,1),r=a-1);let e=this.getValueSize();this.times=i.slice(r,a),this.values=this.values.slice(r*e,a*e)}return this}validate(){let i=!0;var e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),i=!1);let n=this.times,r=this.values,a=n.length,s=(0===a&&(console.error("THREE.KeyframeTrack: Track is empty.",this),i=!1),null);for(let t=0;t!==a;t++){let e=n[t];if("number"==typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,e),i=!1;break}if(null!==s&&s>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,e,s),i=!1;break}s=e}if(void 0!==r&&Th(r))for(let t=0,e=r.length;t!==e;++t){let e=r[t];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,e),i=!1;break}}return i}optimize(){let n=this.times.slice(),s=this.values.slice(),o=this.getValueSize(),t=2302===this.getInterpolation(),r=n.length-1,l=1;for(let e=1;e<r;++e){let a=!1;var i=n[e];if(i!==n[e+1]&&(1!==e||i!==n[0]))if(t)a=!0;else{let i=e*o,n=i-o,r=i+o;for(let t=0;t!==o;++t){let e=s[i+t];if(e!==s[n+t]||e!==s[r+t]){a=!0;break}}}if(a){if(e!==l){n[l]=n[e];let t=e*o,i=l*o;for(let e=0;e!==o;++e)s[i+e]=s[t+e]}++l}}if(0<r){n[l]=n[r];for(let e=r*o,t=l*o,i=0;i!==o;++i)s[t+i]=s[e+i];++l}return l!==n.length?(this.times=n.slice(0,l),this.values=s.slice(0,l*o)):(this.times=n,this.values=s),this}clone(){var e=this.times.slice(),t=this.values.slice(),e=new this.constructor(this.name,e,t);return e.createInterpolant=this.createInterpolant,e}}Dh.prototype.TimeBufferType=Float32Array,Dh.prototype.ValueBufferType=Float32Array,Dh.prototype.DefaultInterpolation=2301;class Ih extends Dh{}Ih.prototype.ValueTypeName="bool",Ih.prototype.ValueBufferType=Array,Ih.prototype.DefaultInterpolation=2300,Ih.prototype.InterpolantFactoryMethodLinear=void 0,Ih.prototype.InterpolantFactoryMethodSmooth=void 0;class Nh extends Dh{}Nh.prototype.ValueTypeName="color";class Oh extends Dh{}Oh.prototype.ValueTypeName="number";class Uh extends Ch{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(i-t)/(n-t);let l=e*s;for(var h=l+s;l!==h;l+=4)Yt.slerpFlat(r,0,a,l-s,a,l,o);return r}}class Bh extends Dh{InterpolantFactoryMethodLinear(e){return new Uh(this.times,this.values,this.getValueSize(),e)}}Bh.prototype.ValueTypeName="quaternion",Bh.prototype.DefaultInterpolation=2301,Bh.prototype.InterpolantFactoryMethodSmooth=void 0;class Fh extends Dh{}Fh.prototype.ValueTypeName="string",Fh.prototype.ValueBufferType=Array,Fh.prototype.DefaultInterpolation=2300,Fh.prototype.InterpolantFactoryMethodLinear=void 0,Fh.prototype.InterpolantFactoryMethodSmooth=void 0;class Gh extends Dh{}class kh{constructor(e,t=-1,i,n=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=n,this.uuid=gt(),this.duration<0&&this.resetDuration()}static parse(e){var i=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,t=n.length;e!==t;++e)i.push((i=>{if(void 0===i.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let e=(e=>{switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Oh;case"vector":case"vector2":case"vector3":case"vector4":return Gh;case"color":return Nh;case"quaternion":return Bh;case"bool":case"boolean":return Ih;case"string":return Fh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)})(i.type);if(void 0===i.times){let e=[],t=[];Eh(i.keys,e,t,"value"),i.times=e,i.values=t}return void 0!==e.parse?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)})(n[e]).scale(r));var t=new this(e.name,e.duration,i,e.blendMode);return t.uuid=e.uuid,t}static toJSON(e){var i=[],n=e.tracks,e={name:e.name,duration:e.duration,tracks:i,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,t=n.length;e!==t;++e)i.push(Dh.toJSON(n[e]));return e}static CreateFromMorphTargetSequence(e,n,r,a){var s=n.length,o=[];for(let i=0;i<s;i++){let e=[],t=[];e.push((i+s-1)%s,i,(i+1)%s),t.push(0,1,0);var l=Mh(e);e=wh(e,1,l),t=wh(t,1,l),a||0!==e[0]||(e.push(s),t.push(t[0])),o.push(new Oh(".morphTargetInfluences["+n[i].name+"]",e,t).scale(1/r))}return new this(e,-1,o)}static findByName(t,i){let n=t;if(!Array.isArray(t)){let e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let e=0;e<n.length;e++)if(n[e].name===i)return n[e];return null}static CreateClipsFromMorphTargetSequences(r,t,i){var a={},s=/^([\w-]*?)([\d]+)$/;for(let e=0,t=r.length;e<t;e++){let i=r[e],n=i.name.match(s);if(n&&1<n.length){let e=n[1],t=a[e];t||(a[e]=t=[]),t.push(i)}}let n=[];for(let e in a)n.push(this.CreateFromMorphTargetSequence(e,a[e],t,i));return n}static parseAnimation(e,i){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let n=function(e,t,i,n,r){var a;0!==i.length&&(Eh(i,i=[],a=[],n),0!==i.length)&&r.push(new e(t,i,a))},s=[],t=e.name||"default",o=e.fps||30,r=e.blendMode,l=e.length||-1;var h=e.hierarchy||[];for(let t=0;t<h.length;t++){let a=h[t].keys;if(a&&0!==a.length)if(a[0].morphTargets){let t={},r;for(r=0;r<a.length;r++)if(a[r].morphTargets)for(let e=0;e<a[r].morphTargets.length;e++)t[a[r].morphTargets[e]]=-1;for(let n in t){let t=[],i=[];for(let e=0;e!==a[r].morphTargets.length;++e){let e=a[r];t.push(e.time),i.push(e.morphTarget===n?1:0)}s.push(new Oh(".morphTargetInfluence["+n+"]",t,i))}l=t.length*o}else{let e=".bones["+i[t].name+"]";n(Gh,e+".position",a,"pos",s),n(Bh,e+".quaternion",a,"rot",s),n(Gh,e+".scale",a,"scl",s)}}return 0===s.length?null:new this(t,l,s,r)}resetDuration(){let i=0;for(let e=0,t=this.tracks.length;e!==t;++e){var n=this.tracks[e];i=Math.max(i,n.times[n.times.length-1])}return this.duration=i,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){var t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}let Hh={enabled:!(Gh.prototype.ValueTypeName="vector"),files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class zh{constructor(e,t,i){let n=this,r,a=!1,s=0,o=0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){o++,!1===a&&void 0!==n.onStart&&n.onStart(e,s,o),a=!0},this.itemEnd=function(e){s++,void 0!==n.onProgress&&n.onProgress(e,s,o),s===o&&(a=!1,void 0!==n.onLoad)&&n.onLoad()},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){e=l.indexOf(e);return-1!==e&&l.splice(e,2),this},this.getHandler=function(i){for(let e=0,t=l.length;e<t;e+=2){var n=l[e],r=l[e+1];if(n.global&&(n.lastIndex=0),n.test(i))return r}return null}}}let Vh=new zh;class Wh{constructor(e){this.manager=void 0!==e?e:Vh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(i,n){let r=this;return new Promise(function(e,t){r.load(i,e,n,t)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Wh.DEFAULT_MATERIAL_NAME="__DEFAULT";let Xh={};class jh extends Error{constructor(e,t){super(e),this.response=t}}class qh extends Wh{constructor(e){super(e)}load(h,i,n,a){void 0===h&&(h=""),void 0!==this.path&&(h=this.path+h),h=this.manager.resolveURL(h);let e=Hh.get(h);if(void 0!==e)return this.manager.itemStart(h),setTimeout(()=>{i&&i(e),this.manager.itemEnd(h)},0),e;if(void 0!==Xh[h])Xh[h].push({onLoad:i,onProgress:n,onError:a});else{Xh[h]=[],Xh[h].push({onLoad:i,onProgress:n,onError:a});let e=new Request(h,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),r=this.mimeType,t=this.responseType;fetch(e).then(i=>{if(200!==i.status&&0!==i.status)throw new jh(`fetch for "${i.url}" responded with ${i.status}: `+i.statusText,i);{if(0===i.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===i.body||void 0===i.body.getReader)return i;let a=Xh[h],e=i.body.getReader(),t=i.headers.get("Content-Length")||i.headers.get("X-File-Size"),s=t?parseInt(t):0,o=0!==s,l=0;i=new ReadableStream({start(r){!function n(){e.read().then(({done:e,value:t})=>{if(e)r.close();else{l+=t.byteLength;let i=new ProgressEvent("progress",{lengthComputable:o,loaded:l,total:s});for(let t=0,e=a.length;t<e;t++){let e=a[t];e.onProgress&&e.onProgress(i)}r.enqueue(t),n()}})}()}});return new Response(i)}}).then(n=>{switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"document":return n.text().then(e=>(new DOMParser).parseFromString(e,r));case"json":return n.json();default:if(void 0===r)return n.text();{let e=/charset="?([^;"\s]*)"?/i.exec(r),t=e&&e[1]?e[1].toLowerCase():void 0,i=new TextDecoder(t);return n.arrayBuffer().then(e=>i.decode(e))}}}).then(i=>{Hh.add(h,i);var n=Xh[h];delete Xh[h];for(let e=0,t=n.length;e<t;e++){var r=n[e];r.onLoad&&r.onLoad(i)}}).catch(i=>{var n=Xh[h];if(void 0===n)throw this.manager.itemError(h),i;delete Xh[h];for(let e=0,t=n.length;e<t;e++){var r=n[e];r.onError&&r.onError(i)}this.manager.itemError(h)}).finally(()=>{this.manager.itemEnd(h)}),this.manager.itemStart(h)}}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Yh extends Wh{constructor(e){super(e)}load(t,e,i,n){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);let r=this,a=Hh.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;let s=Ct("img");function o(){h(),Hh.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){h(),n&&n(e),r.manager.itemError(t),r.manager.itemEnd(t)}function h(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(t),s.src=t,s}}class Kh extends p{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ze(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){e=super.toJSON(e);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}class Zh extends Kh{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(p.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ze(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}let Jh=new He,Qh=new ke,$h=new ke;class ec{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Fe(512,512),this.map=null,this.mapPass=null,this.matrix=new He,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ar,this._frameExtents=new Fe(1,1),this._viewportCount=1,this._viewports=[new Ge(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){var t=this.camera,i=this.matrix;Qh.setFromMatrixPosition(e.matrixWorld),t.position.copy(Qh),$h.setFromMatrixPosition(e.target.matrixWorld),t.lookAt($h),t.updateMatrixWorld(),Jh.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Jh),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Jh)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class tc extends ec{constructor(){super(new N(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){var t=this.camera,i=2*mt*e.angle*this.focus,n=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;i===t.fov&&n===t.aspect&&r===t.far||(t.fov=i,t.aspect=n,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class ic extends Kh{constructor(e,t,i=0,n=Math.PI/3,r=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(p.DEFAULT_UP),this.updateMatrix(),this.target=new p,this.distance=i,this.angle=n,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new tc}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}let nc=new He,rc=new ke,ac=new ke;class sc extends ec{constructor(){super(new N(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Fe(4,2),this._viewportCount=6,this._viewports=[new Ge(2,1,1,1),new Ge(0,1,1,1),new Ge(3,1,1,1),new Ge(1,1,1,1),new Ge(3,0,1,1),new Ge(1,0,1,1)],this._cubeDirections=[new ke(1,0,0),new ke(-1,0,0),new ke(0,0,1),new ke(0,0,-1),new ke(0,1,0),new ke(0,-1,0)],this._cubeUps=[new ke(0,1,0),new ke(0,1,0),new ke(0,1,0),new ke(0,1,0),new ke(0,0,1),new ke(0,0,-1)]}updateMatrices(e,t=0){var i=this.camera,n=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),rc.setFromMatrixPosition(e.matrixWorld),i.position.copy(rc),ac.copy(i.position),ac.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(ac),i.updateMatrixWorld(),n.makeTranslation(-rc.x,-rc.y,-rc.z),nc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nc)}}class oc extends Kh{constructor(e,t,i=0,n=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=n,this.shadow=new sc}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class lc extends ec{constructor(){super(new vr(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class hc extends Kh{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(p.DEFAULT_UP),this.updateMatrix(),this.target=new p,this.shadow=new lc}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class cc extends Kh{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class uc extends Kh{constructor(e,t,i=10,n=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=n}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){e=super.toJSON(e);return e.object.width=this.width,e.object.height=this.height,e}}class dc{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ke)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){var i=e.x,n=e.y,e=e.z,r=this.coefficients;return t.copy(r[0]).multiplyScalar(.282095),t.addScaledVector(r[1],.488603*n),t.addScaledVector(r[2],.488603*e),t.addScaledVector(r[3],.488603*i),t.addScaledVector(r[4],i*n*1.092548),t.addScaledVector(r[5],n*e*1.092548),t.addScaledVector(r[6],.315392*(3*e*e-1)),t.addScaledVector(r[7],i*e*1.092548),t.addScaledVector(r[8],.546274*(i*i-n*n)),t}getIrradianceAt(e,t){var i=e.x,n=e.y,e=e.z,r=this.coefficients;return t.copy(r[0]).multiplyScalar(.886227),t.addScaledVector(r[1],1.023328*n),t.addScaledVector(r[2],1.023328*e),t.addScaledVector(r[3],1.023328*i),t.addScaledVector(r[4],.858086*i*n),t.addScaledVector(r[5],.858086*n*e),t.addScaledVector(r[6],.743125*e*e-.247708),t.addScaledVector(r[7],.858086*i*e),t.addScaledVector(r[8],.429043*(i*i-n*n)),t}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,i){for(let e=0;e<9;e++)this.coefficients[e].addScaledVector(t.coefficients[e],i);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,i){for(let e=0;e<9;e++)this.coefficients[e].lerp(t.coefficients[e],i);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,i=0){var n=this.coefficients;for(let e=0;e<9;e++)n[e].fromArray(t,i+3*e);return this}toArray(t=[],i=0){var n=this.coefficients;for(let e=0;e<9;e++)n[e].toArray(t,i+3*e);return t}static getBasisAt(e,t){var i=e.x,n=e.y,e=e.z;t[0]=.282095,t[1]=.488603*n,t[2]=.488603*e,t[3]=.488603*i,t[4]=1.092548*i*n,t[5]=1.092548*n*e,t[6]=.315392*(3*e*e-1),t[7]=1.092548*i*e,t[8]=.546274*(i*i-n*n)}}class pc extends Kh{constructor(e=new dc,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){e=super.toJSON(e);return e.object.sh=this.sh.toArray(),e}}class fc extends Wh{constructor(e){super(e),this.textures={}}load(t,i,e,n){let r=this,a=new qh(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(e){try{i(r.parse(JSON.parse(e)))}catch(e){n?n(e):console.error(e),r.manager.itemError(t)}},e,n)}parse(t){let i=this.textures;function n(e){return void 0===i[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),i[e]}var r=fc.createMaterialFromType(t.type);if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&void 0!==r.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.sheen&&(r.sheen=t.sheen),void 0!==t.sheenColor&&(r.sheenColor=(new ze).setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(r.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==r.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==r.specular&&r.specular.setHex(t.specular),void 0!==t.specularIntensity&&(r.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearcoat&&(r.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(r.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.iridescence&&(r.iridescence=t.iridescence),void 0!==t.iridescenceIOR&&(r.iridescenceIOR=t.iridescenceIOR),void 0!==t.iridescenceThicknessRange&&(r.iridescenceThicknessRange=t.iridescenceThicknessRange),void 0!==t.transmission&&(r.transmission=t.transmission),void 0!==t.thickness&&(r.thickness=t.thickness),void 0!==t.attenuationDistance&&(r.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(t.attenuationColor),void 0!==t.anisotropy&&(r.anisotropy=t.anisotropy),void 0!==t.anisotropyRotation&&(r.anisotropyRotation=t.anisotropyRotation),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.shadowSide&&(r.shadowSide=t.shadowSide),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.alphaHash&&(r.alphaHash=t.alphaHash),void 0!==t.depthFunc&&(r.depthFunc=t.depthFunc),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.blendSrc&&(r.blendSrc=t.blendSrc),void 0!==t.blendDst&&(r.blendDst=t.blendDst),void 0!==t.blendEquation&&(r.blendEquation=t.blendEquation),void 0!==t.blendSrcAlpha&&(r.blendSrcAlpha=t.blendSrcAlpha),void 0!==t.blendDstAlpha&&(r.blendDstAlpha=t.blendDstAlpha),void 0!==t.blendEquationAlpha&&(r.blendEquationAlpha=t.blendEquationAlpha),void 0!==t.blendColor&&void 0!==r.blendColor&&r.blendColor.setHex(t.blendColor),void 0!==t.blendAlpha&&(r.blendAlpha=t.blendAlpha),void 0!==t.stencilWriteMask&&(r.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(r.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(r.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(r.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(r.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(r.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(r.stencilZPass=t.stencilZPass),void 0!==t.stencilWrite&&(r.stencilWrite=t.stencilWrite),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),void 0!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.alphaToCoverage&&(r.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(r.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.forceSinglePass&&(r.forceSinglePass=t.forceSinglePass),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.toneMapped&&(r.toneMapped=t.toneMapped),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?r.vertexColors=0<t.vertexColors:r.vertexColors=t.vertexColors),void 0!==t.uniforms)for(let e in t.uniforms){var a=t.uniforms[e];switch(r.uniforms[e]={},a.type){case"t":r.uniforms[e].value=n(a.value);break;case"c":r.uniforms[e].value=(new ze).setHex(a.value);break;case"v2":r.uniforms[e].value=(new Fe).fromArray(a.value);break;case"v3":r.uniforms[e].value=(new ke).fromArray(a.value);break;case"v4":r.uniforms[e].value=(new Ge).fromArray(a.value);break;case"m3":r.uniforms[e].value=(new g).fromArray(a.value);break;case"m4":r.uniforms[e].value=(new He).fromArray(a.value);break;default:r.uniforms[e].value=a.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.glslVersion&&(r.glslVersion=t.glslVersion),void 0!==t.extensions)for(let e in t.extensions)r.extensions[e]=t.extensions[e];if(void 0!==t.lights&&(r.lights=t.lights),void 0!==t.clipping&&(r.clipping=t.clipping),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=n(t.map)),void 0!==t.matcap&&(r.matcap=n(t.matcap)),void 0!==t.alphaMap&&(r.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(r.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),r.normalScale=(new Fe).fromArray(e)}return void 0!==t.displacementMap&&(r.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=n(t.specularMap)),void 0!==t.specularIntensityMap&&(r.specularIntensityMap=n(t.specularIntensityMap)),void 0!==t.specularColorMap&&(r.specularColorMap=n(t.specularColorMap)),void 0!==t.envMap&&(r.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(r.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(r.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(r.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(r.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Fe).fromArray(t.clearcoatNormalScale)),void 0!==t.iridescenceMap&&(r.iridescenceMap=n(t.iridescenceMap)),void 0!==t.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),void 0!==t.transmissionMap&&(r.transmissionMap=n(t.transmissionMap)),void 0!==t.thicknessMap&&(r.thicknessMap=n(t.thicknessMap)),void 0!==t.anisotropyMap&&(r.anisotropyMap=n(t.anisotropyMap)),void 0!==t.sheenColorMap&&(r.sheenColorMap=n(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(r.sheenRoughnessMap=n(t.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:dh,SpriteMaterial:Vs,RawShaderMaterial:ph,ShaderMaterial:Yn,PointsMaterial:Wo,MeshPhysicalMaterial:mh,MeshStandardMaterial:fh,MeshPhongMaterial:gh,MeshToonMaterial:vh,MeshNormalMaterial:yh,MeshLambertMaterial:_h,MeshDepthMaterial:Ss,MeshDistanceMaterial:bs,MeshBasicMaterial:dn,MeshMatcapMaterial:xh,LineDashedMaterial:Sh,LineBasicMaterial:Io,Material:t}[e]}}class mc{static decodeText(i){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(i);let n="";for(let e=0,t=i.length;e<t;e++)n+=String.fromCharCode(i[e]);try{return decodeURIComponent(escape(n))}catch(i){return n}}static extractUrlBase(e){var t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class gc extends C{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){var e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class vc extends Wh{constructor(e){super(e)}load(t,i,e,n){let r=this,a=new qh(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(e){try{i(r.parse(JSON.parse(e)))}catch(e){n?n(e):console.error(e),r.manager.itemError(t)}},e,n)}parse(a){let r={},s={};function o(e,t){var i,n;return void 0!==r[t]?r[t]:(i=e.interleavedBuffers[t],e=e,n=i.buffer,n=void 0!==s[n]?s[n]:(e=e.arrayBuffers[n],e=new Uint32Array(e).buffer,s[n]=e),e=At(i.type,n),(n=new ks(e,i.stride)).uuid=i.uuid,r[t]=n)}let l=new(a.isInstancedBufferGeometry?gc:C),t=a.data.index;if(void 0!==t){let e=At(t.type,t.array);l.setIndex(new A(e,1))}var n=a.data.attributes;for(let e in n){let t=n[e],i;if(t.isInterleavedBufferAttribute){let e=o(a.data,t.data);i=new zs(e,t.itemSize,t.offset,t.normalized)}else{let e=At(t.type,t.array);i=new(t.isInstancedBufferAttribute?Mo:A)(e,t.itemSize,t.normalized)}void 0!==t.name&&(i.name=t.name),void 0!==t.usage&&i.setUsage(t.usage),void 0!==t.updateRange&&(i.updateRange.offset=t.updateRange.offset,i.updateRange.count=t.updateRange.count),l.setAttribute(e,i)}var i=a.data.morphAttributes;if(i)for(let e in i){let n=i[e],r=[];for(let e=0,t=n.length;e<t;e++){let t=n[e],i;if(t.isInterleavedBufferAttribute){let e=o(a.data,t.data);i=new zs(e,t.itemSize,t.offset,t.normalized)}else{let e=At(t.type,t.array);i=new A(e,t.itemSize,t.normalized)}void 0!==t.name&&(i.name=t.name),r.push(i)}l.morphAttributes[e]=r}a.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);var h=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==h)for(let t=0,e=h.length;t!==e;++t){let e=h[t];l.addGroup(e.start,e.count,e.materialIndex)}var c=a.data.boundingSphere;if(void 0!==c){let e=new ke;void 0!==c.center&&e.fromArray(c.center),l.boundingSphere=new mi(e,c.radius)}return a.name&&(l.name=a.name),a.userData&&(l.userData=a.userData),l}}let yc={UVMapping:300,CubeReflectionMapping:j,CubeRefractionMapping:q,EquirectangularReflectionMapping:_,EquirectangularRefractionMapping:x,CubeUVReflectionMapping:ge},_c={RepeatWrapping:Y,ClampToEdgeWrapping:K,MirroredRepeatWrapping:$},xc={NearestFilter:W,NearestMipmapNearestFilter:ee,NearestMipmapLinearFilter:te,LinearFilter:X,LinearMipmapNearestFilter:ie,LinearMipmapLinearFilter:je},Sc;class bc{static getContext(){return Sc=void 0===Sc?new(window.AudioContext||window.webkitAudioContext):Sc}static setContext(e){Sc=e}}let Tc=new He,Mc=new He,wc=new He;class Ec{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Ac(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;var t;return this.autoStart&&!this.running?(this.start(),0):(this.running&&(t=Ac(),e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e),e)}}function Ac(){return("undefined"==typeof performance?Date:performance).now()}let Cc=new ke,Pc=new Yt,Rc=new ke,Lc=new ke;class Dc extends p{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{if(!1!==this.hasPlaybackControl)return this._startedAt=this.context.currentTime+e,(e=this.context.createBufferSource()).buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect();console.warn("THREE.Audio: this Audio has no playback control.")}}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e=e||[],!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}let Ic=new ke,Nc=new Yt,Oc=new ke,Uc=new ke;class Bc{constructor(e,t,i){let n,r,a;switch(this.binding=e,this.valueSize=i,t){case"quaternion":n=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":n=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:n=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){var i=this.buffer,n=this.valueSize,r=e*n+n;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==n;++e)i[r+e]=i[e];a=t}else{let e=t/(a+=t);this._mixBufferRegion(i,r,0,e,n)}this.cumulativeWeight=a}accumulateAdditive(e){var t=this.buffer,i=this.valueSize,n=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,n,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){var i=this.valueSize,n=this.buffer,r=e*i+i,t=this.cumulativeWeight,e=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,t<1){let e=i*this._origIndex;this._mixBufferRegion(n,r,e,1-t,i)}0<e&&this._mixBufferRegionAdditive(n,r,this._addIndex*i,1,i);for(let e=i,t=i+i;e!==t;++e)if(n[e]!==n[e+i]){a.setValue(n,r);break}}saveOriginalState(){var e=this.binding,i=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(i,r);for(let e=n,t=r;e!==t;++e)i[e]=i[r+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){var t=this._addIndex*this.valueSize,i=t+this.valueSize;for(let e=t;e<i;e++)this.buffer[e]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){var t=this._origIndex*this.valueSize,i=this._addIndex*this.valueSize;for(let e=0;e<this.valueSize;e++)this.buffer[i+e]=this.buffer[t+e]}_select(t,i,n,e,r){if(.5<=e)for(let e=0;e!==r;++e)t[i+e]=t[n+e]}_slerp(e,t,i,n){Yt.slerpFlat(e,t,e,t,e,i,n)}_slerpAdditive(e,t,i,n,r){r=this._workIndex*r;Yt.multiplyQuaternionsFlat(e,r,e,t,e,i),Yt.slerpFlat(e,t,e,t,e,r,n)}_lerp(i,n,r,a,e){var s=1-a;for(let t=0;t!==e;++t){let e=n+t;i[e]=i[e]*s+i[r+t]*a}}_lerpAdditive(i,n,r,a,e){for(let t=0;t!==e;++t){let e=n+t;i[e]=i[e]+i[r+t]*a}}}let Fc="\\[\\]\\.:\\/",Gc=new RegExp("["+Fc+"]","g"),kc="[^"+Fc+"]",Hc="[^"+Fc.replace("\\.","")+"]",zc=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",kc)+/(WCOD+)?/.source.replace("WCOD",Hc)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",kc)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",kc)+"$"),Vc=["material","materials","bones","map"];class f{constructor(e,t,i){this.path=t,this.parsedPath=i||f.parseTrackName(t),this.node=f.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return new(e&&e.isAnimationObjectGroup?f.Composite:f)(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Gc,"")}static parseTrackName(e){var t=zc.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var t={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=t.nodeName&&t.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){let e=t.nodeName.substring(i+1);-1!==Vc.indexOf(e)&&(t.nodeName=t.nodeName.substring(0,i),t.objectName=e)}if(null===t.propertyName||0===t.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return t}static findNode(t,r){if(void 0===r||""===r||"."===r||-1===r||r===t.name||r===t.uuid)return t;if(t.skeleton){var e=t.skeleton.getBoneByName(r);if(void 0!==e)return e}if(t.children){let n=function(t){for(let e=0;e<t.length;e++){var i=t[e];if(i.name===r||i.uuid===r)return i;i=n(i.children);if(i)return i}return null},e=n(t.children);if(e)return e}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(i,n){var r=this.resolvedProperty;for(let e=0,t=r.length;e!==t;++e)i[n++]=r[e]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(i,n){var r=this.resolvedProperty;for(let e=0,t=r.length;e!==t;++e)r[e]=i[n++]}_setValue_array_setNeedsUpdate(i,n){var r=this.resolvedProperty;for(let e=0,t=r.length;e!==t;++e)r[e]=i[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(i,n){var r=this.resolvedProperty;for(let e=0,t=r.length;e!==t;++e)r[e]=i[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let i=this.node,n=this.parsedPath,e=n.objectName,r=n.propertyName,a=n.propertyIndex;if(i||(i=f.findNode(this.rootNode,n.nodeName),this.node=i),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,i){if(e){let t=n.objectIndex;switch(e){case"materials":if(!i.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!i.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);i=i.material.materials;break;case"bones":if(!i.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);i=i.skeleton.bones;for(let e=0;e<i.length;e++)if(i[e].name===t){t=e;break}break;case"map":if("map"in i)i=i.map;else{if(!i.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!i.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);i=i.material.map}break;default:if(void 0===i[e])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);i=i[e]}if(void 0!==t){if(void 0===i[t])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,i);i=i[t]}}var s=i[r];if(void 0===s){let e=n.nodeName;void console.error("THREE.PropertyBinding: Trying to update property for track: "+e+"."+r+" but it wasn't found.",i)}else{let e=this.Versioning.None,t=(void 0!==(this.targetObject=i).needsUpdate?e=this.Versioning.NeedsUpdate:void 0!==i.matrixWorldNeedsUpdate&&(e=this.Versioning.MatrixWorldNeedsUpdate),this.BindingType.Direct);if(void 0!==a){if("morphTargetInfluences"===r){if(!i.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!i.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==i.morphTargetDictionary[a]&&(a=i.morphTargetDictionary[a])}t=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else void 0!==s.fromArray&&void 0!==s.toArray?(t=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(t=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[t],this.setValue=this.SetterByBindingTypeAndVersioning[t][e]}}else console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".")}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}f.Composite=class{constructor(e,t,i){i=i||f.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();var i=this._targetGroup.nCachedObjects_,i=this._bindings[i];void 0!==i&&i.getValue(e,t)}setValue(i,n){var r=this._bindings;for(let e=this._targetGroup.nCachedObjects_,t=r.length;e!==t;++e)r[e].setValue(i,n)}bind(){var i=this._bindings;for(let e=this._targetGroup.nCachedObjects_,t=i.length;e!==t;++e)i[e].bind()}unbind(){var i=this._bindings;for(let e=this._targetGroup.nCachedObjects_,t=i.length;e!==t;++e)i[e].unbind()}},f.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},f.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},f.prototype.GetterByBindingType=[f.prototype._getValue_direct,f.prototype._getValue_array,f.prototype._getValue_arrayElement,f.prototype._getValue_toArray],f.prototype.SetterByBindingTypeAndVersioning=[[f.prototype._setValue_direct,f.prototype._setValue_direct_setNeedsUpdate,f.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[f.prototype._setValue_array,f.prototype._setValue_array_setNeedsUpdate,f.prototype._setValue_array_setMatrixWorldNeedsUpdate],[f.prototype._setValue_arrayElement,f.prototype._setValue_arrayElement_setNeedsUpdate,f.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[f.prototype._setValue_fromArray,f.prototype._setValue_fromArray_setNeedsUpdate,f.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Wc{constructor(e,t,i=null,n=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=n;var r=t.tracks,a=r.length,s=new Array(a),o={endingStart:2400,endingEnd:2400};for(let t=0;t!==a;++t){let e=r[t].createInterpolant(null);(s[t]=e).settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(r,a,e){if(r.fadeOut(a),this.fadeIn(a),e){let e=this._clip.duration,t=r._clip.duration,i=t/e,n=e/t;r.warp(1,i,a),this.warp(n,1,a)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){var n=this._mixer,r=n.time,a=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=n._lendControlInterpolant(),this._timeScaleInterpolant=s);var n=s.parameterPositions,o=s.sampleValues;return n[0]=r,n[1]=r+i,o[0]=e/a,o[1]=t/a,this}stopWarping(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,i,n,r){if(this.enabled){var a=this._startTime;if(null!==a){let e=(t-a)*n;i=e<0||0===n?0:(this._startTime=null,n*e)}i*=this._updateTimeScale(t);var s=this._updateTime(i),o=this._updateWeight(t);if(0<o){let i=this._interpolants,n=this._propertyBindings;if(2501===this.blendMode)for(let e=0,t=i.length;e!==t;++e)i[e].evaluate(s),n[e].accumulateAdditive(o);else for(let e=0,t=i.length;e!==t;++e)i[e].evaluate(s),n[e].accumulate(r,o)}}else this._updateWeight(t)}_updateWeight(e){let t=0;var i,n;return this.enabled&&(t=this.weight,null!==(i=this._weightInterpolant))&&(n=i.evaluate(e)[0],t*=n,e>i.parameterPositions[1])&&(this.stopFading(),0===n)&&(this.enabled=!1),this._effectiveWeight=t}_updateTimeScale(e){let t=0;var i;return this.paused||(t=this.timeScale,null!==(i=this._timeScaleInterpolant)&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1])&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)),this._effectiveTimeScale=t}_updateTime(t){let i=this._clip.duration,e=this.loop,n=this.time+t,r=this._loopCount;var a=2202===e;if(0===t)return-1!==r&&a&&1==(1&r)?i-n:n;if(2200===e){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=i)n=i;else{if(!(n<0)){this.time=n;break e}n=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(0<=t?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),n>=i||n<0){let e=Math.floor(n/i);n-=i*e,r+=Math.abs(e);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n=0<t?i:0,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<t?1:-1});else{if(1==s){let e=t<0;this._setEndings(e,!e,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:e})}}else this.time=n;if(a&&1==(1&r))return i-n}return n}_setEndings(e,t,i){var n=this._interpolantSettings;i?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,n.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)}_scheduleFading(e,t,i){var n=this._mixer,r=n.time;let a=this._weightInterpolant;null===a&&(a=n._lendControlInterpolant(),this._weightInterpolant=a);var n=a.parameterPositions,s=a.sampleValues;return n[0]=r,s[0]=t,n[1]=r+e,s[1]=i,this}}let Xc=new Float32Array(1);let jc=0;function qc(e,t){return e.distance-t.distance}function Yc(e,n,r,t){if(e.layers.test(n.layers)&&e.raycast(n,r),!0===t){let i=e.children;for(let e=0,t=i.length;e<t;e++)Yc(i[e],n,r,!0)}}let Kc=new Fe,Zc=new ke,Jc=new ke,Qc=new ke,$c=new ke,eu=new He,tu=new He;let iu=new ke,nu=new ze,ru=new ze,au=new ke,su=new ke,ou=new ke,lu=new ke,d=new Kn;function m(e,t,n,i,r,a,s){lu.set(r,a,s).unproject(i);var o=t[e];if(void 0!==o){let i=n.getAttribute("position");for(let e=0,t=o.length;e<t;e++)i.setXYZ(o[e],lu.x,lu.y,lu.z)}}let hu=new Jt,cu=new ke,uu,du;"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ve}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ve),e.ACESFilmicToneMapping=z,e.AddEquation=Z,e.AddOperation=B,e.AdditiveAnimationBlendMode=2501,e.AdditiveBlending=2,e.AlphaFormat=1021,e.AlwaysCompare=519,e.AlwaysDepth=1,e.AlwaysStencilFunc=519,e.AmbientLight=cc,e.AnimationAction=Wc,e.AnimationClip=kh,e.AnimationLoader=class extends Wh{constructor(e){super(e)}load(t,i,e,n){let r=this,a=new qh(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(e){try{i(r.parse(JSON.parse(e)))}catch(e){n?n(e):console.error(e),r.manager.itemError(t)}},e,n)}parse(t){var i=[];for(let e=0;e<t.length;e++){var n=kh.parse(t[e]);i.push(n)}return i}},e.AnimationMixer=class extends dt{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,a){let s=e._localRoot||this._root,o=e._clip.tracks,t=o.length,l=e._propertyBindings,h=e._interpolants,c=s.uuid,i=this._bindingsByRootAndName,u=i[c];void 0===u&&(u={},i[c]=u);for(let r=0;r!==t;++r){let t=o[r],i=t.name,n=u[i];if(void 0!==n)++n.referenceCount;else{if(void 0!==(n=l[r])){null===n._cacheIndex&&(++n.referenceCount,this._addInactiveBinding(n,c,i));continue}let e=a&&a._propertyBindings[r].binding.parsedPath;++(n=new Bc(f.create(s,i,e),t.ValueTypeName,t.getValueSize())).referenceCount,this._addInactiveBinding(n,c,i)}l[r]=n,h[r].resultBuffer=n.buffer}}_activateAction(e){if(!this._isActiveAction(e)){null===e._cacheIndex&&(t=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i],this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,t));var t,i,n,r=e._propertyBindings;for(let e=0,t=r.length;e!==t;++e){var a=r[e];0==a.useCount++&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){var i=e._propertyBindings;for(let e=0,t=i.length;e!==t;++e){var n=i[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){e=e._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,i){var n=this._actions,r=this._actionsByClip;let a=r[e];if(void 0===a)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a;else{let e=a.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=n.length,n.push(t),a.actionByRoot[i]=t}_removeInactiveAction(e){var t=this._actions,i=t[t.length-1],n=e._cacheIndex,n=(t[i._cacheIndex=n]=i,t.pop(),e._cacheIndex=null,e._clip.uuid),i=this._actionsByClip,t=i[n],r=t.knownActions,a=r[r.length-1],s=e._byClipCacheIndex;r[a._byClipCacheIndex=s]=a,r.pop(),e._byClipCacheIndex=null,delete t.actionByRoot[(e._localRoot||this._root).uuid],0===r.length&&delete i[n],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){var i=e._propertyBindings;for(let e=0,t=i.length;e!==t;++e){var n=i[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){var t=this._actions,i=e._cacheIndex,n=this._nActiveActions++,r=t[n];t[e._cacheIndex=n]=e,t[r._cacheIndex=i]=r}_takeBackAction(e){var t=this._actions,i=e._cacheIndex,n=--this._nActiveActions,r=t[n];t[e._cacheIndex=n]=e,t[r._cacheIndex=i]=r}_addInactiveBinding(e,t,i){var n=this._bindingsByRootAndName,r=this._bindings;let a=n[t];void 0===a&&(a={},n[t]=a),(a[i]=e)._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){var t=this._bindings,i=e.binding,n=i.rootNode.uuid,i=i.path,r=this._bindingsByRootAndName,a=r[n],s=t[t.length-1],e=e._cacheIndex;t[s._cacheIndex=e]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete r[n]}_lendBinding(e){var t=this._bindings,i=e._cacheIndex,n=this._nActiveBindings++,r=t[n];t[e._cacheIndex=n]=e,t[r._cacheIndex=i]=r}_takeBackBinding(e){var t=this._bindings,i=e._cacheIndex,n=--this._nActiveBindings,r=t[n];t[e._cacheIndex=n]=e,t[r._cacheIndex=i]=r}_lendControlInterpolant(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return void 0===i&&(e[(i=new Rh(new Float32Array(2),new Float32Array(2),1,Xc)).__cacheIndex=t]=i),i}_takeBackControlInterpolant(e){var t=this._controlInterpolants,i=e.__cacheIndex,n=--this._nActiveControlInterpolants,r=t[n];t[e.__cacheIndex=n]=e,t[r.__cacheIndex=i]=r}clipAction(e,t,i){var n=t||this._root,r=n.uuid;let a="string"==typeof e?kh.findByName(n,e):e;var n=null!==a?a.uuid:e,s=this._actionsByClip[n];let o=null;if(void 0===i&&(i=null!==a?a.blendMode:2500),void 0!==s){let e=s.actionByRoot[r];if(void 0!==e&&e.blendMode===i)return e;o=s.knownActions[0],null===a&&(a=o._clip)}return null===a?null:(e=new Wc(this,a,t,i),this._bindAction(e,o),this._addInactiveAction(e,n,r),e)}existingAction(e,t){var t=t||this._root,i=t.uuid,t="string"==typeof e?kh.findByName(t,e):e,t=t?t.uuid:e,e=this._actionsByClip[t];return void 0!==e&&e.actionByRoot[i]||null}stopAllAction(){var t=this._actions;for(let e=this._nActiveActions-1;0<=e;--e)t[e].stop();return this}update(t){t*=this.timeScale;var i=this._actions,n=this._nActiveActions,r=this.time+=t,a=Math.sign(t),s=this._accuIndex^=1;for(let e=0;e!==n;++e)i[e]._update(r,t,a,s);var o=this._bindings,l=this._nActiveBindings;for(let e=0;e!==l;++e)o[e].apply(s);return this}setTime(e){for(let e=this.time=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let a=this._actions,t=e.uuid,i=this._actionsByClip,n=i[t];if(void 0!==n){let r=n.knownActions;for(let n=0,e=r.length;n!==e;++n){let e=r[n],t=(this._deactivateAction(e),e._cacheIndex),i=a[a.length-1];e._cacheIndex=null,e._byClipCacheIndex=null,i._cacheIndex=t,a[t]=i,a.pop(),this._removeInactiveBindingsForAction(e)}delete i[t]}}uncacheRoot(e){let i=e.uuid,n=this._actionsByClip;for(let t in n){let e=n[t].actionByRoot[i];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}let r=this._bindingsByRootAndName[i];if(void 0!==r)for(let t in r){let e=r[t];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){e=this.existingAction(e,t);null!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}},e.AnimationObjectGroup=class{constructor(){this.isAnimationObjectGroup=!0,this.uuid=gt(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var i={};this._indicesByUUID=i;for(let e=0,t=arguments.length;e!==t;++e)i[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};let e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){let i=this._objects,n=this._indicesByUUID,s=this._paths,o=this._parsedPaths,l=this._bindings,h=l.length,c,r=i.length,u=this.nCachedObjects_;for(let e=0,t=arguments.length;e!==t;++e){var d=arguments[e],p=d.uuid;let a=n[p];if(void 0===a){a=r++,n[p]=a,i.push(d);for(let e=0,t=h;e!==t;++e)l[e].push(new f(d,s[e],o[e]))}else if(a<u){c=i[a];let r=--u,e=i[r];n[e.uuid]=a,i[a]=e,n[p]=r,i[r]=d;for(let n=0,e=h;n!==e;++n){let e=l[n],t=e[r],i=e[a];e[a]=t,void 0===i&&(i=new f(d,s[n],o[n])),e[r]=i}}else i[a]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){let i=this._objects,n=this._indicesByUUID,r=this._bindings,a=r.length,s=this.nCachedObjects_;for(let e=0,t=arguments.length;e!==t;++e){var o=arguments[e],l=o.uuid,h=n[l];if(void 0!==h&&h>=s){var c=s++,u=i[c];n[u.uuid]=h,i[h]=u,n[l]=c,i[c]=o;for(let n=0,e=a;n!==e;++n){let e=r[n],t=e[c],i=e[h];e[h]=t,e[c]=i}}}this.nCachedObjects_=s}uncache(){let n=this._objects,r=this._indicesByUUID,a=this._bindings,s=a.length,i=this.nCachedObjects_,o=n.length;for(let e=0,t=arguments.length;e!==t;++e){var l=arguments[e].uuid,h=r[l];if(void 0!==h)if(delete r[l],h<i){var c=--i,l=n[c],u=--o,d=n[u];r[l.uuid]=h,n[h]=l,r[d.uuid]=c,n[c]=d,n.pop();for(let n=0,e=s;n!==e;++n){let e=a[n],t=e[c],i=e[u];e[h]=t,e[c]=i,e.pop()}}else{let i=--o,e=n[i];0<i&&(r[e.uuid]=h),n[h]=e,n.pop();for(let t=0,e=s;t!==e;++t){let e=a[t];e[h]=e[i],e.pop()}}}this.nCachedObjects_=i}subscribe_(i,n){var e=this._bindingsIndicesByPath;let t=e[i];var r=this._bindings;if(void 0!==t)return r[t];var a=this._paths,s=this._parsedPaths,o=this._objects,l=o.length,h=this.nCachedObjects_,c=new Array(l);t=r.length,e[i]=t,a.push(i),s.push(n),r.push(c);for(let t=h,e=o.length;t!==e;++t){let e=o[t];c[t]=new f(e,i,n)}return c}unsubscribe_(e){var t,i,n,r,a,s=this._bindingsIndicesByPath,o=s[e];void 0!==o&&(t=this._paths,i=this._parsedPaths,a=(n=this._bindings)[r=n.length-1],n[s[e[r]]=o]=a,n.pop(),i[o]=i[r],i.pop(),t[o]=t[r],t.pop())}},e.AnimationUtils=Ah,e.ArcCurve=el,e.ArrayCamera=As,e.ArrowHelper=class extends p{constructor(e=new ke(0,0,1),t=new ke(0,0,0),i=1,n=16776960,r=.2*i,a=.2*r){super(),this.type="ArrowHelper",void 0===uu&&((uu=new C).setAttribute("position",new F([0,0,0,0,1,0],3)),(du=new Tl(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Go(uu,new Io({color:n,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new P(du,new dn({color:n,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,r,a)}setDirection(e){.99999<e.y?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(cu.set(e.z,0,-e.x).normalize(),e=Math.acos(e.y),this.quaternion.setFromAxisAngle(cu,e))}setLength(e,t=.2*e,i=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}},e.AttachedBindMode=v,e.Audio=Dc,e.AudioAnalyser=class{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;var i=this.getFrequencyData();for(let e=0;e<i.length;e++)t+=i[e];return t/i.length}},e.AudioContext=bc,e.AudioListener=class extends p{constructor(){super(),this.type="AudioListener",this.context=bc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Ec}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return(null!==this.filter?(this.gain.disconnect(this.filter),this.filter):this.gain).disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);var t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Cc,Pc,Rc),Lc.set(0,0,-1).applyQuaternion(Pc),t.positionX){let e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Cc.x,e),t.positionY.linearRampToValueAtTime(Cc.y,e),t.positionZ.linearRampToValueAtTime(Cc.z,e),t.forwardX.linearRampToValueAtTime(Lc.x,e),t.forwardY.linearRampToValueAtTime(Lc.y,e),t.forwardZ.linearRampToValueAtTime(Lc.z,e),t.upX.linearRampToValueAtTime(i.x,e),t.upY.linearRampToValueAtTime(i.y,e),t.upZ.linearRampToValueAtTime(i.z,e)}else t.setPosition(Cc.x,Cc.y,Cc.z),t.setOrientation(Lc.x,Lc.y,Lc.z,i.x,i.y,i.z)}},e.AudioLoader=class extends Wh{constructor(e){super(e)}load(t,i,e,n){let r=this,a=new qh(this.manager);function s(e){n?n(e):console.error(e),r.manager.itemError(t)}a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(e){try{var t=e.slice(0);bc.getContext().decodeAudioData(t,function(e){i(e)},s)}catch(e){s(e)}},e,n)}},e.AxesHelper=class extends zo{constructor(e=1){var e=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],t=new C;t.setAttribute("position",new F(e,3)),t.setAttribute("color",new F([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(t,new Io({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,i){var n=new ze,r=this.geometry.attributes.color.array;return n.set(e),n.toArray(r,0),n.toArray(r,3),n.set(t),n.toArray(r,6),n.toArray(r,9),n.set(i),n.toArray(r,12),n.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},e.BackSide=Ue,e.BasicDepthPacking=3200,e.BasicShadowMap=0,e.Bone=_o,e.BooleanKeyframeTrack=Ih,e.Box2=class{constructor(e=new Fe(1/0,1/0),t=new Fe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(i){this.makeEmpty();for(let e=0,t=i.length;e<t;e++)this.expandByPoint(i[e]);return this}setFromCenterAndSize(e,t){t=Kc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(t),this.max.copy(e).add(t),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Kc).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},e.Box3=Jt,e.Box3Helper=class extends zo{constructor(e,t=16776960){var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new C;n.setIndex(new A(i,1)),n.setAttribute("position",new F([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(n,new Io({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},e.BoxGeometry=Wn,e.BoxHelper=class extends zo{constructor(e,t=16776960){var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new C;r.setIndex(new A(i,1)),r.setAttribute("position",new A(n,3)),super(r,new Io({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){var t,i,n;void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&hu.setFromObject(this.object),hu.isEmpty()||(e=hu.min,t=hu.max,(n=(i=this.geometry.attributes.position).array)[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=e.x,n[4]=t.y,n[5]=t.z,n[6]=e.x,n[7]=e.y,n[8]=t.z,n[9]=t.x,n[10]=e.y,n[11]=t.z,n[12]=t.x,n[13]=t.y,n[14]=e.z,n[15]=e.x,n[16]=t.y,n[17]=e.z,n[18]=e.x,n[19]=e.y,n[20]=e.z,n[21]=t.x,n[22]=e.y,n[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere())}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}},e.BufferAttribute=A,e.BufferGeometry=C,e.BufferGeometryLoader=vc,e.ByteType=1010,e.Cache=Hh,e.Camera=Kn,e.CameraHelper=class extends zo{constructor(e){let t=new C,i=new Io({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],r=[],a={};function s(e,t){o(e),o(t)}function o(e){n.push(0,0,0),r.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(n.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),t.setAttribute("position",new F(n,3)),t.setAttribute("color",new F(r,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();var e=new ze(16755200),l=new ze(16711680),h=new ze(43775),c=new ze(16777215),u=new ze(3355443);this.setColors(e,l,h,c,u)}setColors(e,t,i,n,r){var a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,n.r,n.g,n.b),a.setXYZ(39,n.r,n.g,n.b),a.setXYZ(40,r.r,r.g,r.b),a.setXYZ(41,r.r,r.g,r.b),a.setXYZ(42,r.r,r.g,r.b),a.setXYZ(43,r.r,r.g,r.b),a.setXYZ(44,r.r,r.g,r.b),a.setXYZ(45,r.r,r.g,r.b),a.setXYZ(46,r.r,r.g,r.b),a.setXYZ(47,r.r,r.g,r.b),a.setXYZ(48,r.r,r.g,r.b),a.setXYZ(49,r.r,r.g,r.b),a.needsUpdate=!0}update(){var e=this.geometry,t=this.pointMap;d.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),m("c",t,e,d,0,0,-1),m("t",t,e,d,0,0,1),m("n1",t,e,d,-1,-1,-1),m("n2",t,e,d,1,-1,-1),m("n3",t,e,d,-1,1,-1),m("n4",t,e,d,1,1,-1),m("f1",t,e,d,-1,-1,1),m("f2",t,e,d,1,-1,1),m("f3",t,e,d,-1,1,1),m("f4",t,e,d,1,1,1),m("u1",t,e,d,.7,1.1,-1),m("u2",t,e,d,-.7,1.1,-1),m("u3",t,e,d,0,2,-1),m("cf1",t,e,d,-1,0,1),m("cf2",t,e,d,1,0,1),m("cf3",t,e,d,0,-1,1),m("cf4",t,e,d,0,1,1),m("cn1",t,e,d,-1,0,-1),m("cn2",t,e,d,1,0,-1),m("cn3",t,e,d,0,-1,-1),m("cn4",t,e,d,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}},e.CanvasTexture=class extends c{constructor(e,t,i,n,r,a,s,o,l){super(e,t,i,n,r,a,s,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},e.CapsuleGeometry=Sl,e.CatmullRomCurve3=sl,e.CineonToneMapping=H,e.CircleGeometry=bl,e.ClampToEdgeWrapping=K,e.Clock=Ec,e.Color=ze,e.ColorKeyframeTrack=Nh,e.ColorManagement=me,e.CompressedArrayTexture=class extends Jo{constructor(e,t,i,n,r,a){super(e,t,i,r,a),this.isCompressedArrayTexture=!0,this.image.depth=n,this.wrapR=K}},e.CompressedCubeTexture=class extends Jo{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,j),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}},e.CompressedTexture=Jo,e.CompressedTextureLoader=class extends Wh{constructor(e){super(e)}load(i,n,r,a){let s=this,o=[],l=new Jo,h=new qh(this.manager),c=(h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(s.withCredentials),0);if(Array.isArray(i))for(let e=0,t=i.length;e<t;++e)(t=>{h.load(i[t],function(e){e=s.parse(e,!0);o[t]={width:e.width,height:e.height,format:e.format,mipmaps:e.mipmaps},6===(c+=1)&&(1===e.mipmapCount&&(l.minFilter=X),l.image=o,l.format=e.format,l.needsUpdate=!0,n)&&n(l)},r,a)})(e);else h.load(i,function(e){var i=s.parse(e,!0);if(i.isCubemap){let e=i.mipmaps.length/i.mipmapCount;for(let t=0;t<e;t++){o[t]={mipmaps:[]};for(let e=0;e<i.mipmapCount;e++)o[t].mipmaps.push(i.mipmaps[t*i.mipmapCount+e]),o[t].format=i.format,o[t].width=i.width,o[t].height=i.height}l.image=o}else l.image.width=i.width,l.image.height=i.height,l.mipmaps=i.mipmaps;1===i.mipmapCount&&(l.minFilter=X),l.format=i.format,l.needsUpdate=!0,n&&n(l)},r,a);return l}},e.ConeGeometry=Ml,e.ConstantAlphaFactor=213,e.ConstantColorFactor=211,e.CubeCamera=Zn,e.CubeReflectionMapping=j,e.CubeRefractionMapping=q,e.CubeTexture=Jn,e.CubeTextureLoader=class extends Wh{constructor(e){super(e)}load(i,n,e,r){let a=new Jn,s=(a.colorSpace=Be,new Yh(this.manager)),o=(s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),0);for(let e=0;e<i.length;++e)(t=>{s.load(i[t],function(e){a.images[t]=e,6===++o&&(a.needsUpdate=!0,n)&&n(a)},void 0,r)})(e);return a}},e.CubeUVReflectionMapping=ge,e.CubicBezierCurve=cl,e.CubicBezierCurve3=ul,e.CubicInterpolant=Ph,e.CullFaceBack=1,e.CullFaceFront=2,e.CullFaceFrontBack=3,e.CullFaceNone=0,e.Curve=Qo,e.CurvePath=yl,e.CustomBlending=5,e.CustomToneMapping=V,e.CylinderGeometry=Tl,e.Cylindrical=class{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return(new this.constructor).copy(this)}},e.Data3DTexture=qt,e.DataArrayTexture=jt,e.DataTexture=xo,e.DataTextureLoader=class extends Wh{constructor(e){super(e)}load(e,i,t,n){let r=this,a=new xo,s=new qh(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(r.withCredentials),s.load(e,function(e){let t;try{t=r.parse(e)}catch(e){if(void 0===n)return void console.error(e);n(e)}void 0!==t.image?a.image=t.image:void 0!==t.data&&(a.image.width=t.width,a.image.height=t.height,a.image.data=t.data),a.wrapS=void 0!==t.wrapS?t.wrapS:K,a.wrapT=void 0!==t.wrapT?t.wrapT:K,a.magFilter=void 0!==t.magFilter?t.magFilter:X,a.minFilter=void 0!==t.minFilter?t.minFilter:X,a.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.colorSpace?a.colorSpace=t.colorSpace:void 0!==t.encoding&&(a.encoding=t.encoding),void 0!==t.flipY&&(a.flipY=t.flipY),void 0!==t.format&&(a.format=t.format),void 0!==t.type&&(a.type=t.type),void 0!==t.mipmaps&&(a.mipmaps=t.mipmaps,a.minFilter=je),1===t.mipmapCount&&(a.minFilter=X),void 0!==t.generateMipmaps&&(a.generateMipmaps=t.generateMipmaps),a.needsUpdate=!0,i&&i(a,t)},t,n),a}},e.DataUtils=gn,e.DecrementStencilOp=7683,e.DecrementWrapStencilOp=34056,e.DefaultLoadingManager=Vh,e.DepthFormat=re,e.DepthStencilFormat=ae,e.DepthTexture=Ls,e.DetachedBindMode="detached",e.DirectionalLight=hc,e.DirectionalLightHelper=class extends p{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",void 0===t&&(t=1);let n=new C;n.setAttribute("position",new F([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));e=new Io({fog:!1,toneMapped:!1});this.lightPlane=new Go(n,e),this.add(this.lightPlane),(n=new C).setAttribute("position",new F([0,0,0,0,0,1],3)),this.targetLine=new Go(n,e),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),au.setFromMatrixPosition(this.light.matrixWorld),su.setFromMatrixPosition(this.light.target.matrixWorld),ou.subVectors(su,au),this.lightPlane.lookAt(su),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(su),this.targetLine.scale.z=ou.length()}},e.DiscreteInterpolant=Lh,e.DisplayP3ColorSpace=Oe,e.DodecahedronGeometry=El,e.DoubleSide=2,e.DstAlphaFactor=206,e.DstColorFactor=208,e.DynamicCopyUsage=35050,e.DynamicDrawUsage=35048,e.DynamicReadUsage=35049,e.EdgesGeometry=Ll,e.EllipseCurve=$o,e.EqualCompare=514,e.EqualDepth=4,e.EqualStencilFunc=514,e.EquirectangularReflectionMapping=_,e.EquirectangularRefractionMapping=x,e.Euler=Ii,e.EventDispatcher=dt,e.ExtrudeGeometry=Ql,e.FileLoader=qh,e.Float16BufferAttribute=class extends A{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=mn(this.array[e*this.itemSize]);return t=this.normalized?bt(t,this.array):t}setX(e,t){return this.normalized&&(t=a(t,this.array)),this.array[e*this.itemSize]=fn(t),this}getY(e){let t=mn(this.array[e*this.itemSize+1]);return t=this.normalized?bt(t,this.array):t}setY(e,t){return this.normalized&&(t=a(t,this.array)),this.array[e*this.itemSize+1]=fn(t),this}getZ(e){let t=mn(this.array[e*this.itemSize+2]);return t=this.normalized?bt(t,this.array):t}setZ(e,t){return this.normalized&&(t=a(t,this.array)),this.array[e*this.itemSize+2]=fn(t),this}getW(e){let t=mn(this.array[e*this.itemSize+3]);return t=this.normalized?bt(t,this.array):t}setW(e,t){return this.normalized&&(t=a(t,this.array)),this.array[e*this.itemSize+3]=fn(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=a(t,this.array),i=a(i,this.array)),this.array[e+0]=fn(t),this.array[e+1]=fn(i),this}setXYZ(e,t,i,n){return e*=this.itemSize,this.normalized&&(t=a(t,this.array),i=a(i,this.array),n=a(n,this.array)),this.array[e+0]=fn(t),this.array[e+1]=fn(i),this.array[e+2]=fn(n),this}setXYZW(e,t,i,n,r){return e*=this.itemSize,this.normalized&&(t=a(t,this.array),i=a(i,this.array),n=a(n,this.array),r=a(r,this.array)),this.array[e+0]=fn(t),this.array[e+1]=fn(i),this.array[e+2]=fn(n),this.array[e+3]=fn(r),this}},e.Float32BufferAttribute=F,e.Float64BufferAttribute=class extends A{constructor(e,t,i){super(new Float64Array(e),t,i)}},e.FloatType=Ze,e.Fog=Fs,e.FogExp2=Bs,e.FramebufferTexture=class extends c{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=W,this.minFilter=W,this.generateMipmaps=!1,this.needsUpdate=!0}},e.FrontSide=We,e.Frustum=ar,e.GLBufferAttribute=class{constructor(e,t,i,n,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=n,this.count=r,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}},e.GLSL1="100",e.GLSL3=ct,e.GreaterCompare=516,e.GreaterDepth=6,e.GreaterEqualCompare=518,e.GreaterEqualDepth=5,e.GreaterEqualStencilFunc=518,e.GreaterStencilFunc=516,e.GridHelper=class extends zo{constructor(e=10,r=10,a=4473924,s=8947848){a=new ze(a),s=new ze(s);var o=r/2,l=e/r,h=e/2,c=[],u=[];for(let t=0,i=0,n=-h;t<=r;t++,n+=l){c.push(-h,0,n,h,0,n),c.push(n,0,-h,n,0,h);let e=t===o?a:s;e.toArray(u,i),i+=3,e.toArray(u,i),i+=3,e.toArray(u,i),i+=3,e.toArray(u,i),i+=3}e=new C;e.setAttribute("position",new F(c,3)),e.setAttribute("color",new F(u,3)),super(e,new Io({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},e.Group=Cs,e.HalfFloatType=Je,e.HemisphereLight=Zh,e.HemisphereLightHelper=class extends p{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";e=new th(t),e.rotateY(.5*Math.PI),this.material=new dn({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0),i=e.getAttribute("position"),t=new Float32Array(3*i.count);e.setAttribute("color",new A(t,3)),this.add(new P(e,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=e.geometry.getAttribute("color");nu.copy(this.light.color),ru.copy(this.light.groundColor);for(let e=0,t=i.count;e<t;e++){var n=e<t/2?nu:ru;i.setXYZ(e,n.r,n.g,n.b)}i.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(iu.setFromMatrixPosition(this.light.matrixWorld).negate())}},e.IcosahedronGeometry=eh,e.ImageBitmapLoader=class extends Wh{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(t,i,e,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);let r=this,a=Hh.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){i&&i(a),r.manager.itemEnd(t)},0),a;var s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,fetch(t,s).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(e){Hh.add(t,e),i&&i(e),r.manager.itemEnd(t)}).catch(function(e){n&&n(e),r.manager.itemError(t),r.manager.itemEnd(t)}),r.manager.itemStart(t)}},e.ImageLoader=Yh,e.ImageUtils=Gt,e.IncrementStencilOp=7682,e.IncrementWrapStencilOp=34055,e.InstancedBufferAttribute=Mo,e.InstancedBufferGeometry=gc,e.InstancedInterleavedBuffer=class extends ks{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){e=super.clone(e);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(e){e=super.toJSON(e);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}},e.InstancedMesh=Do,e.Int16BufferAttribute=class extends A{constructor(e,t,i){super(new Int16Array(e),t,i)}},e.Int32BufferAttribute=class extends A{constructor(e,t,i){super(new Int32Array(e),t,i)}},e.Int8BufferAttribute=class extends A{constructor(e,t,i){super(new Int8Array(e),t,i)}},e.IntType=ne,e.InterleavedBuffer=ks,e.InterleavedBufferAttribute=zs,e.Interpolant=Ch,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.InvertStencilOp=5386,e.KeepStencilOp=7680,e.KeyframeTrack=Dh,e.LOD=oo,e.LatheGeometry=xl,e.Layers=Ni,e.LessCompare=513,e.LessDepth=2,e.LessEqualCompare=515,e.LessEqualDepth=3,e.LessEqualStencilFunc=515,e.LessStencilFunc=513,e.Light=Kh,e.LightProbe=pc,e.Line=Go,e.Line3=class{constructor(e=new ke,t=new ke){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Zc.subVectors(e,this.start),Jc.subVectors(this.end,this.start);e=Jc.dot(Jc);let i=Jc.dot(Zc)/e;return i=t?y(i,0,1):i}closestPointToPoint(e,t,i){e=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(e).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}},e.LineBasicMaterial=Io,e.LineCurve=dl,e.LineCurve3=pl,e.LineDashedMaterial=Sh,e.LineLoop=Vo,e.LineSegments=zo,e.LinearDisplayP3ColorSpace=st,e.LinearEncoding=3e3,e.LinearFilter=X,e.LinearInterpolant=Rh,e.LinearMipMapLinearFilter=1008,e.LinearMipMapNearestFilter=1007,e.LinearMipmapLinearFilter=je,e.LinearMipmapNearestFilter=ie,e.LinearSRGBColorSpace=at,e.LinearToneMapping=G,e.LinearTransfer=ot,e.Loader=Wh,e.LoaderUtils=mc,e.LoadingManager=zh,e.LoopOnce=2200,e.LoopPingPong=2202,e.LoopRepeat=2201,e.LuminanceAlphaFormat=1025,e.LuminanceFormat=1024,e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},e.Material=t,e.MaterialLoader=fc,e.MathUtils=Tt,e.Matrix3=g,e.Matrix4=He,e.MaxEquation=104,e.Mesh=P,e.MeshBasicMaterial=dn,e.MeshDepthMaterial=Ss,e.MeshDistanceMaterial=bs,e.MeshLambertMaterial=_h,e.MeshMatcapMaterial=xh,e.MeshNormalMaterial=yh,e.MeshPhongMaterial=gh,e.MeshPhysicalMaterial=mh,e.MeshStandardMaterial=fh,e.MeshToonMaterial=vh,e.MinEquation=103,e.MirroredRepeatWrapping=$,e.MixOperation=U,e.MultiplyBlending=4,e.MultiplyOperation=O,e.NearestFilter=W,e.NearestMipMapLinearFilter=1005,e.NearestMipMapNearestFilter=1004,e.NearestMipmapLinearFilter=te,e.NearestMipmapNearestFilter=ee,e.NeverCompare=512,e.NeverDepth=0,e.NeverStencilFunc=512,e.NoBlending=0,e.NoColorSpace=Ne,e.NoToneMapping=Xe,e.NormalAnimationBlendMode=2500,e.NormalBlending=1,e.NotEqualCompare=517,e.NotEqualDepth=7,e.NotEqualStencilFunc=517,e.NumberKeyframeTrack=Oh,e.Object3D=p,e.ObjectLoader=class extends Wh{constructor(e){super(e)}load(i,n,e,r){let a=this,t=""===this.path?mc.extractUrlBase(i):this.path;this.resourcePath=this.resourcePath||t;var s=new qh(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(i,function(e){let t=null;try{t=JSON.parse(e)}catch(e){return void 0!==r&&r(e),void console.error("THREE:ObjectLoader: Can't parse "+i+".",e.message)}e=t.metadata;void 0===e||void 0===e.type||"geometry"===e.type.toLowerCase()?(void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+i)),console.error("THREE.ObjectLoader: Can't load "+i)):a.parse(t,n)},e,r)}async loadAsync(e,t){var i=""===this.path?mc.extractUrlBase(e):this.path,i=(this.resourcePath=this.resourcePath||i,new qh(this.manager)),i=(i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),await i.loadAsync(e,t)),t=JSON.parse(i),i=t.metadata;if(void 0===i||void 0===i.type||"geometry"===i.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return this.parseAsync(t)}parse(e,i){let t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),a=this.parseImages(e.images,function(){void 0!==i&&i(l)}),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,r,o,s,t),h=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,h),void 0!==i){let t=!1;for(let e in a)if(a[e].data instanceof HTMLImageElement){t=!0;break}!1===t&&i(l)}return l}async parseAsync(e){var t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,i),n=await this.parseImagesAsync(e.images),n=this.parseTextures(e.textures,n),r=this.parseMaterials(e.materials,n),i=this.parseObject(e.object,i,r,n,t),r=this.parseSkeletons(e.skeletons,i);return this.bindSkeletons(i,r),i}parseShapes(i){var n={};if(void 0!==i)for(let e=0,t=i.length;e<t;e++){var r=(new Dl).fromJSON(i[e]);n[r.uuid]=r}return n}parseSkeletons(i,e){let n={},r={};if(e.traverse(function(e){e.isBone&&(r[e.uuid]=e)}),void 0!==i)for(let e=0,t=i.length;e<t;e++){var a=(new To).fromJSON(i[e],r);n[a.uuid]=a}return n}parseGeometries(i,n){var r={};if(void 0!==i){var a=new vc;for(let t=0,e=i.length;t<e;t++){let e;var s=i[t];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":e=a.parse(s);break;default:s.type in uh?e=uh[s.type].fromJSON(s,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${s.type}"`)}e.uuid=s.uuid,void 0!==s.name&&(e.name=s.name),void 0!==s.userData&&(e.userData=s.userData),r[s.uuid]=e}}return r}parseMaterials(i,e){var n={},r={};if(void 0!==i){var a=new fc;a.setTextures(e);for(let e=0,t=i.length;e<t;e++){var s=i[e];void 0===n[s.uuid]&&(n[s.uuid]=a.parse(s)),r[s.uuid]=n[s.uuid]}}return r}parseAnimations(t){var i={};if(void 0!==t)for(let e=0;e<t.length;e++){var n=t[e],n=kh.parse(n);i[n.uuid]=n}return i}parseImages(i,t){let n=this,r={},a;function s(e){var t,i;return"string"==typeof e?(i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t=e)?t:n.resourcePath+t,n.manager.itemStart(i),a.load(i,function(){n.manager.itemEnd(i)},void 0,function(){n.manager.itemError(i),n.manager.itemEnd(i)})):e.data?{data:At(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==i&&0<i.length){let e=new zh(t);(a=new Yh(e)).setCrossOrigin(this.crossOrigin);for(let e=0,t=i.length;e<t;e++){let t=i[e],n=t.url;if(Array.isArray(n)){let i=[];for(let t=0,e=n.length;t<e;t++){let e=s(n[t]);null!==e&&(e instanceof HTMLImageElement?i.push(e):i.push(new xo(e.data,e.width,e.height)))}r[t.uuid]=new Ht(i)}else{let e=s(t.url);r[t.uuid]=new Ht(e)}}}return r}async parseImagesAsync(i){let n=this,a={},r;async function s(e){var t;return"string"==typeof e?(t=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t=e)?t:n.resourcePath+t,r.loadAsync(t)):e.data?{data:At(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==i&&0<i.length){(r=new Yh(this.manager)).setCrossOrigin(this.crossOrigin);for(let e=0,t=i.length;e<t;e++){let t=i[e],r=t.url;if(Array.isArray(r)){let n=[];for(let i=0,e=r.length;i<e;i++){let e=r[i],t=await s(e);null!==t&&(t instanceof HTMLImageElement?n.push(t):n.push(new xo(t.data,t.width,t.height)))}a[t.uuid]=new Ht(n)}else{let e=await s(t.url);a[t.uuid]=new Ht(e)}}}return a}parseTextures(i,n){function r(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var a={};if(void 0!==i)for(let t=0,e=i.length;t<e;t++){var s=i[t],o=(void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===n[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),n[s.image]),l=o.data;let e;Array.isArray(l)?(e=new Jn,6===l.length&&(e.needsUpdate=!0)):(e=new(l&&l.data?xo:c),l&&(e.needsUpdate=!0)),e.source=o,e.uuid=s.uuid,void 0!==s.name&&(e.name=s.name),void 0!==s.mapping&&(e.mapping=r(s.mapping,yc)),void 0!==s.channel&&(e.channel=s.channel),void 0!==s.offset&&e.offset.fromArray(s.offset),void 0!==s.repeat&&e.repeat.fromArray(s.repeat),void 0!==s.center&&e.center.fromArray(s.center),void 0!==s.rotation&&(e.rotation=s.rotation),void 0!==s.wrap&&(e.wrapS=r(s.wrap[0],_c),e.wrapT=r(s.wrap[1],_c)),void 0!==s.format&&(e.format=s.format),void 0!==s.internalFormat&&(e.internalFormat=s.internalFormat),void 0!==s.type&&(e.type=s.type),void 0!==s.colorSpace&&(e.colorSpace=s.colorSpace),void 0!==s.encoding&&(e.encoding=s.encoding),void 0!==s.minFilter&&(e.minFilter=r(s.minFilter,xc)),void 0!==s.magFilter&&(e.magFilter=r(s.magFilter,xc)),void 0!==s.anisotropy&&(e.anisotropy=s.anisotropy),void 0!==s.flipY&&(e.flipY=s.flipY),void 0!==s.generateMipmaps&&(e.generateMipmaps=s.generateMipmaps),void 0!==s.premultiplyAlpha&&(e.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(e.unpackAlignment=s.unpackAlignment),void 0!==s.compareFunction&&(e.compareFunction=s.compareFunction),void 0!==s.userData&&(e.userData=s.userData),a[s.uuid]=e}return a}parseObject(r,i,a,n,s){let o,l,h;function c(e){return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),i[e]}function u(i){if(void 0!==i){if(Array.isArray(i)){var n=[];for(let e=0,t=i.length;e<t;e++){var r=i[e];void 0===a[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),n.push(a[r])}return n}return void 0===a[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),a[i]}}function d(e){return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),n[e]}switch(r.type){case"Scene":o=new Gs,void 0!==r.background&&(Number.isInteger(r.background)?o.background=new ze(r.background):o.background=d(r.background)),void 0!==r.environment&&(o.environment=d(r.environment)),void 0!==r.fog&&("Fog"===r.fog.type?o.fog=new Fs(r.fog.color,r.fog.near,r.fog.far):"FogExp2"===r.fog.type&&(o.fog=new Bs(r.fog.color,r.fog.density)),""!==r.fog.name)&&(o.fog.name=r.fog.name),void 0!==r.backgroundBlurriness&&(o.backgroundBlurriness=r.backgroundBlurriness),void 0!==r.backgroundIntensity&&(o.backgroundIntensity=r.backgroundIntensity);break;case"PerspectiveCamera":o=new N(r.fov,r.aspect,r.near,r.far),void 0!==r.focus&&(o.focus=r.focus),void 0!==r.zoom&&(o.zoom=r.zoom),void 0!==r.filmGauge&&(o.filmGauge=r.filmGauge),void 0!==r.filmOffset&&(o.filmOffset=r.filmOffset),void 0!==r.view&&(o.view=Object.assign({},r.view));break;case"OrthographicCamera":o=new vr(r.left,r.right,r.top,r.bottom,r.near,r.far),void 0!==r.zoom&&(o.zoom=r.zoom),void 0!==r.view&&(o.view=Object.assign({},r.view));break;case"AmbientLight":o=new cc(r.color,r.intensity);break;case"DirectionalLight":o=new hc(r.color,r.intensity);break;case"PointLight":o=new oc(r.color,r.intensity,r.distance,r.decay);break;case"RectAreaLight":o=new uc(r.color,r.intensity,r.width,r.height);break;case"SpotLight":o=new ic(r.color,r.intensity,r.distance,r.angle,r.penumbra,r.decay);break;case"HemisphereLight":o=new Zh(r.color,r.groundColor,r.intensity);break;case"LightProbe":o=(new pc).fromJSON(r);break;case"SkinnedMesh":l=c(r.geometry),h=u(r.material),o=new yo(l,h),void 0!==r.bindMode&&(o.bindMode=r.bindMode),void 0!==r.bindMatrix&&o.bindMatrix.fromArray(r.bindMatrix),void 0!==r.skeleton&&(o.skeleton=r.skeleton);break;case"Mesh":l=c(r.geometry),h=u(r.material),o=new P(l,h);break;case"InstancedMesh":l=c(r.geometry),h=u(r.material);let e=r.count,t=r.instanceMatrix,i=r.instanceColor;(o=new Do(l,h,e)).instanceMatrix=new Mo(new Float32Array(t.array),16),void 0!==i&&(o.instanceColor=new Mo(new Float32Array(i.array),i.itemSize));break;case"LOD":o=new oo;break;case"Line":o=new Go(c(r.geometry),u(r.material));break;case"LineLoop":o=new Vo(c(r.geometry),u(r.material));break;case"LineSegments":o=new zo(c(r.geometry),u(r.material));break;case"PointCloud":case"Points":o=new Ko(c(r.geometry),u(r.material));break;case"Sprite":o=new no(u(r.material));break;case"Group":o=new Cs;break;case"Bone":o=new _o;break;default:o=new p}if(o.uuid=r.uuid,void 0!==r.name&&(o.name=r.name),void 0!==r.matrix?(o.matrix.fromArray(r.matrix),void 0!==r.matrixAutoUpdate&&(o.matrixAutoUpdate=r.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==r.position&&o.position.fromArray(r.position),void 0!==r.rotation&&o.rotation.fromArray(r.rotation),void 0!==r.quaternion&&o.quaternion.fromArray(r.quaternion),void 0!==r.scale&&o.scale.fromArray(r.scale)),void 0!==r.up&&o.up.fromArray(r.up),void 0!==r.castShadow&&(o.castShadow=r.castShadow),void 0!==r.receiveShadow&&(o.receiveShadow=r.receiveShadow),r.shadow&&(void 0!==r.shadow.bias&&(o.shadow.bias=r.shadow.bias),void 0!==r.shadow.normalBias&&(o.shadow.normalBias=r.shadow.normalBias),void 0!==r.shadow.radius&&(o.shadow.radius=r.shadow.radius),void 0!==r.shadow.mapSize&&o.shadow.mapSize.fromArray(r.shadow.mapSize),void 0!==r.shadow.camera)&&(o.shadow.camera=this.parseObject(r.shadow.camera)),void 0!==r.visible&&(o.visible=r.visible),void 0!==r.frustumCulled&&(o.frustumCulled=r.frustumCulled),void 0!==r.renderOrder&&(o.renderOrder=r.renderOrder),void 0!==r.userData&&(o.userData=r.userData),void 0!==r.layers&&(o.layers.mask=r.layers),void 0!==r.children){let t=r.children;for(let e=0;e<t.length;e++)o.add(this.parseObject(t[e],i,a,n,s))}if(void 0!==r.animations){let i=r.animations;for(let t=0;t<i.length;t++){let e=i[t];o.animations.push(s[e])}}if("LOD"===r.type){void 0!==r.autoUpdate&&(o.autoUpdate=r.autoUpdate);let n=r.levels;for(let i=0;i<n.length;i++){let e=n[i],t=o.getObjectByProperty("uuid",e.object);void 0!==t&&o.addLevel(t,e.distance,e.hysteresis)}}return o}bindSkeletons(e,i){0!==Object.keys(i).length&&e.traverse(function(e){var t;!0===e.isSkinnedMesh&&void 0!==e.skeleton&&(void 0===(t=i[e.skeleton])?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(t,e.bindMatrix))})}},e.ObjectSpaceNormalMap=1,e.OctahedronGeometry=th,e.OneFactor=201,e.OneMinusConstantAlphaFactor=214,e.OneMinusConstantColorFactor=212,e.OneMinusDstAlphaFactor=207,e.OneMinusDstColorFactor=209,e.OneMinusSrcAlphaFactor=Q,e.OneMinusSrcColorFactor=203,e.OrthographicCamera=vr,e.P3Primaries=ht,e.PCFShadowMap=L,e.PCFSoftShadowMap=D,e.PMREMGenerator=Ar,e.Path=_l,e.PerspectiveCamera=N,e.Plane=ir,e.PlaneGeometry=lr,e.PlaneHelper=class extends Go{constructor(e,t=1,i=16776960){var n=new C,n=(n.setAttribute("position",new F([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere(),super(n,new Io({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t,new C);n.setAttribute("position",new F([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),n.computeBoundingSphere(),this.add(new P(n,new dn({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}},e.PointLight=oc,e.PointLightHelper=class extends P{constructor(e,t,i){super(new rh(t,4,2),new dn({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},e.Points=Ko,e.PointsMaterial=Wo,e.PolarGridHelper=class extends zo{constructor(r=10,a=16,n=8,s=64,o=4473924,l=8947848){o=new ze(o),l=new ze(l);var h=[],c=[];if(1<a)for(let n=0;n<a;n++){let e=n/a*(2*Math.PI),t=Math.sin(e)*r,i=Math.cos(e)*r;h.push(0,0,0),h.push(t,0,i);var u=1&n?o:l;c.push(u.r,u.g,u.b),c.push(u.r,u.g,u.b)}for(let e=0;e<n;e++){let t=1&e?o:l,i=r-r/n*e;for(let e=0;e<s;e++){var d=e/s*(2*Math.PI),p=Math.sin(d)*i,f=Math.cos(d)*i;h.push(p,0,f),c.push(t.r,t.g,t.b),d=(e+1)/s*(2*Math.PI),p=Math.sin(d)*i,f=Math.cos(d)*i,h.push(p,0,f),c.push(t.r,t.g,t.b)}}let e=new C;e.setAttribute("position",new F(h,3)),e.setAttribute("color",new F(c,3)),super(e,new Io({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},e.PolyhedronGeometry=wl,e.PositionalAudio=class extends Dc{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(Ic,Nc,Oc),Uc.set(0,0,1).applyQuaternion(Nc);var t=this.panner;if(t.positionX){let e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ic.x,e),t.positionY.linearRampToValueAtTime(Ic.y,e),t.positionZ.linearRampToValueAtTime(Ic.z,e),t.orientationX.linearRampToValueAtTime(Uc.x,e),t.orientationY.linearRampToValueAtTime(Uc.y,e),t.orientationZ.linearRampToValueAtTime(Uc.z,e)}else t.setPosition(Ic.x,Ic.y,Ic.z),t.setOrientation(Uc.x,Uc.y,Uc.z)}}},e.PropertyBinding=f,e.PropertyMixer=Bc,e.QuadraticBezierCurve=fl,e.QuadraticBezierCurve3=ml,e.Quaternion=Yt,e.QuaternionKeyframeTrack=Bh,e.QuaternionLinearInterpolant=Uh,e.RED_GREEN_RGTC2_Format=De,e.RED_RGTC1_Format=36283,e.REVISION=Ve,e.RGBADepthPacking=3201,e.RGBAFormat=tt,e.RGBAIntegerFormat=rt,e.RGBA_ASTC_10x10_Format=we,e.RGBA_ASTC_10x5_Format=be,e.RGBA_ASTC_10x6_Format=Te,e.RGBA_ASTC_10x8_Format=Me,e.RGBA_ASTC_12x10_Format=Ee,e.RGBA_ASTC_12x12_Format=Ae,e.RGBA_ASTC_4x4_Format=ue,e.RGBA_ASTC_5x4_Format=de,e.RGBA_ASTC_5x5_Format=pe,e.RGBA_ASTC_6x5_Format=ve,e.RGBA_ASTC_6x6_Format=ye,e.RGBA_ASTC_8x5_Format=_e,e.RGBA_ASTC_8x6_Format=xe,e.RGBA_ASTC_8x8_Format=Se,e.RGBA_BPTC_Format=Ce,e.RGBA_ETC2_EAC_Format=ce,e.RGBA_PVRTC_2BPPV1_Format=le,e.RGBA_PVRTC_4BPPV1_Format=oe,e.RGBA_S3TC_DXT1_Format=T,e.RGBA_S3TC_DXT3_Format=M,e.RGBA_S3TC_DXT5_Format=w,e.RGB_BPTC_SIGNED_Format=Pe,e.RGB_BPTC_UNSIGNED_Format=Re,e.RGB_ETC1_Format=36196,e.RGB_ETC2_Format=he,e.RGB_PVRTC_2BPPV1_Format=se,e.RGB_PVRTC_4BPPV1_Format=E,e.RGB_S3TC_DXT1_Format=b,e.RGFormat=1030,e.RGIntegerFormat=nt,e.RawShaderMaterial=ph,e.Ray=Ti,e.Raycaster=class{constructor(e,t,i=0,n=1/0){this.ray=new Ti(e,t),this.near=i,this.far=n,this.camera=null,this.layers=new Ni,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return Yc(e,this,i,t),i.sort(qc),i}intersectObjects(i,n=!0,r=[]){for(let e=0,t=i.length;e<t;e++)Yc(i[e],this,r,n);return r.sort(qc),r}},e.Rec709Primaries=lt,e.RectAreaLight=uc,e.RedFormat=1028,e.RedIntegerFormat=it,e.ReinhardToneMapping=k,e.RenderTarget=Wt,e.RepeatWrapping=Y,e.ReplaceStencilOp=7681,e.ReverseSubtractEquation=102,e.RingGeometry=ih,e.SIGNED_RED_GREEN_RGTC2_Format=Ie,e.SIGNED_RED_RGTC1_Format=Le,e.SRGBColorSpace=Be,e.SRGBTransfer=fe,e.Scene=Gs,e.ShaderChunk=R,e.ShaderLib=hr,e.ShaderMaterial=Yn,e.ShadowMaterial=dh,e.Shape=Dl,e.ShapeGeometry=nh,e.ShapePath=class{constructor(){this.type="ShapePath",this.color=new ze,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new _l,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,n){return this.currentPath.quadraticCurveTo(e,t,i,n),this}bezierCurveTo(e,t,i,n,r,a){return this.currentPath.bezierCurveTo(e,t,i,n,r,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(a){var s=Kl.isClockWise,l=this.subPaths;if(0===l.length)return[];let h,c,u;var t=[];if(1===l.length)c=l[0],(u=new Dl).curves=c.curves,t.push(u);else{var d=!s(l[0].getPoints()),d=a?!d:d,p=[],f=[];let i,n,o=[],r=0;f[r]=void 0,o[r]=[];for(let e=0,t=l.length;e<t;e++)i=(c=l[e]).getPoints(),h=s(i),(h=a?!h:h)?(!d&&f[r]&&r++,f[r]={s:new Dl,p:i},f[r].s.curves=c.curves,d&&r++,o[r]=[]):o[r].push({h:c,p:i[0]});if(!f[0]){var m=l;var g=[];for(let e=0,t=m.length;e<t;e++){var v=m[e],y=new Dl;y.curves=v.curves,g.push(y)}return g;return}if(1<f.length){let a=!1,s=0;for(let e=0,t=f.length;e<t;e++)p[e]=[];for(let r=0,e=f.length;r<e;r++){let n=o[r];for(let e=0;e<n.length;e++){let t=n[e],i=!0;for(let e=0;e<f.length;e++)((s,o)=>{var e=o.length;let l=!1;for(let r=e-1,a=0;a<e;r=a++){let t=o[r],e=o[a],i=e.x-t.x,n=e.y-t.y;if(Math.abs(n)>Number.EPSILON){if(n<0&&(t=o[a],i=-i,e=o[r],n=-n),!(s.y<t.y||s.y>e.y))if(s.y===t.y){if(s.x===t.x)return 1}else{let e=n*(s.x-t.x)-i*(s.y-t.y);if(0==e)return 1;e<0||(l=!l)}}else if(s.y===t.y&&(e.x<=s.x&&s.x<=t.x||t.x<=s.x&&s.x<=e.x))return 1}return l})(t.p,f[e].p)&&(r!==e&&s++,i?(i=!1,p[e].push(t)):a=!0);i&&p[r].push(t)}}0<s&&!1===a&&(o=p)}for(let i=0,e=f.length;i<e;i++){u=f[i].s,t.push(u);for(let e=0,t=(n=o[i]).length;e<t;e++)u.holes.push(n[e].h)}}return t}},e.ShapeUtils=Kl,e.ShortType=1011,e.Skeleton=To,e.SkeletonHelper=class extends zo{constructor(e){let i=function t(i){var n=[];!0===i.isBone&&n.push(i);for(let e=0;e<i.children.length;e++)n.push.apply(n,t(i.children[e]));return n}(e),t=new C,n=[],r=[],a=new ze(0,0,1),s=new ze(0,1,0);for(let t=0;t<i.length;t++){let e=i[t];e.parent&&e.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(a.r,a.g,a.b),r.push(s.r,s.g,s.b))}t.setAttribute("position",new F(n,3)),t.setAttribute("color",new F(r,3)),super(t,new Io({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=i,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){var i=this.bones,t=this.geometry,n=t.getAttribute("position");tu.copy(this.root.matrixWorld).invert();for(let e=0,t=0;e<i.length;e++){var r=i[e];r.parent&&r.parent.isBone&&(eu.multiplyMatrices(tu,r.matrixWorld),$c.setFromMatrixPosition(eu),n.setXYZ(t,$c.x,$c.y,$c.z),eu.multiplyMatrices(tu,r.parent.matrixWorld),$c.setFromMatrixPosition(eu),n.setXYZ(t+1,$c.x,$c.y,$c.z),t+=2)}t.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}},e.SkinnedMesh=yo,e.Source=Ht,e.Sphere=mi,e.SphereGeometry=rh,e.Spherical=class{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(y(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}},e.SphericalHarmonics3=dc,e.SplineCurve=gl,e.SpotLight=ic,e.SpotLightHelper=class extends p{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";var e=new C,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let i=0,n=1;i<32;i++,n++){let e=i/32*Math.PI*2,t=n/32*Math.PI*2;r.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}e.setAttribute("position",new F(r,3));let i=new Io({fog:!1,toneMapped:!1});this.cone=new zo(e,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);var e=this.light.distance||1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Qc.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Qc),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},e.Sprite=no,e.SpriteMaterial=Vs,e.SrcAlphaFactor=J,e.SrcAlphaSaturateFactor=210,e.SrcColorFactor=202,e.StaticCopyUsage=35046,e.StaticDrawUsage=35044,e.StaticReadUsage=35045,e.StereoCamera=class{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new N,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new N,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){var t,i,n,r,a=this._cache;a.focus===e.focus&&a.fov===e.fov&&a.aspect===e.aspect*this.aspect&&a.near===e.near&&a.far===e.far&&a.zoom===e.zoom&&a.eyeSep===this.eyeSep||(a.focus=e.focus,a.fov=e.fov,a.aspect=e.aspect*this.aspect,a.near=e.near,a.far=e.far,a.zoom=e.zoom,a.eyeSep=this.eyeSep,wc.copy(e.projectionMatrix),t=(n=a.eyeSep/2)*a.near/a.focus,i=a.near*Math.tan(ft*a.fov*.5)/a.zoom,Mc.elements[12]=-n,Tc.elements[12]=n,n=-i*a.aspect+t,r=i*a.aspect+t,wc.elements[0]=2*a.near/(r-n),wc.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(wc),n=-i*a.aspect-t,r=i*a.aspect-t,wc.elements[0]=2*a.near/(r-n),wc.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(wc)),this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Mc),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Tc)}},e.StreamCopyUsage=35042,e.StreamDrawUsage=35040,e.StreamReadUsage=35041,e.StringKeyframeTrack=Fh,e.SubtractEquation=101,e.SubtractiveBlending=3,e.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},e.TangentSpaceNormalMap=0,e.TetrahedronGeometry=ah,e.Texture=c,e.TextureLoader=class extends Wh{constructor(e){super(e)}load(e,t,i,n){let r=new c,a=new Yh(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)},i,n),r}},e.TorusGeometry=sh,e.TorusKnotGeometry=oh,e.Triangle=sn,e.TriangleFanDrawMode=2,e.TriangleStripDrawMode=1,e.TrianglesDrawMode=0,e.TubeGeometry=lh,e.TwoPassDoubleSide=2,e.UVMapping=300,e.Uint16BufferAttribute=yn,e.Uint32BufferAttribute=_n,e.Uint8BufferAttribute=class extends A{constructor(e,t,i){super(new Uint8Array(e),t,i)}},e.Uint8ClampedBufferAttribute=class extends A{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}},e.Uniform=class pu{constructor(e){this.value=e}clone(){return new pu(void 0===this.value.clone?this.value:this.value.clone())}},e.UniformsGroup=class extends dt{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:jc++}),this.name="",this.usage=35044,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){e=this.uniforms.indexOf(e);return-1!==e&&this.uniforms.splice(e,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;var i=e.uniforms;for(let e=this.uniforms.length=0,t=i.length;e<t;e++)this.uniforms.push(i[e].clone());return this}clone(){return(new this.constructor).copy(this)}},e.UniformsLib=s,e.UniformsUtils=qn,e.UnsignedByteType=qe,e.UnsignedInt248Type=et,e.UnsignedIntType=Ke,e.UnsignedShort4444Type=Qe,e.UnsignedShort5551Type=$e,e.UnsignedShortType=Ye,e.VSMShadowMap=I,e.Vector2=Fe,e.Vector3=ke,e.Vector4=Ge,e.VectorKeyframeTrack=Gh,e.VideoTexture=class extends c{constructor(t,e,i,n,r,a,s,o,l){super(t,e,i,n,r,a,s,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==a?a:X,this.magFilter=void 0!==r?r:X,this.generateMipmaps=!1;let h=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(function e(){h.needsUpdate=!0,t.requestVideoFrameCallback(e)})}clone(){return new this.constructor(this.image).copy(this)}update(){var e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},e.WebGL1Renderer=Us,e.WebGL3DRenderTarget=class extends Xt{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new qt(null,e,t,i),this.texture.isRenderTargetTexture=!0}},e.WebGLArrayRenderTarget=class extends Xt{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new jt(null,e,t,i),this.texture.isRenderTargetTexture=!0}},e.WebGLCoordinateSystem=2e3,e.WebGLCubeRenderTarget=Qn,e.WebGLMultipleRenderTargets=class extends Xt{constructor(e=1,t=1,i=1,n={}){super(e,t,n),this.isWebGLMultipleRenderTargets=!0;var r=this.texture;this.texture=[];for(let e=0;e<i;e++)this.texture[e]=r.clone(),this.texture[e].isRenderTargetTexture=!0}setSize(i,n,r=1){if(this.width!==i||this.height!==n||this.depth!==r){this.width=i,this.height=n,this.depth=r;for(let e=0,t=this.texture.length;e<t;e++)this.texture[e].image.width=i,this.texture[e].image.height=n,this.texture[e].image.depth=r;this.dispose()}this.viewport.set(0,0,i,n),this.scissor.set(0,0,i,n)}copy(i){this.dispose(),this.width=i.width,this.height=i.height,this.depth=i.depth,this.scissor.copy(i.scissor),this.scissorTest=i.scissorTest,this.viewport.copy(i.viewport),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,null!==i.depthTexture&&(this.depthTexture=i.depthTexture.clone());for(let e=this.texture.length=0,t=i.texture.length;e<t;e++)this.texture[e]=i.texture[e].clone(),this.texture[e].isRenderTargetTexture=!0;return this}},e.WebGLRenderTarget=Xt,e.WebGLRenderer=Os,e.WebGLUtils=Es,e.WebGPUCoordinateSystem=2001,e.WireframeGeometry=hh,e.WrapAroundEnding=2402,e.ZeroCurvatureEnding=2400,e.ZeroFactor=200,e.ZeroSlopeEnding=2401,e.ZeroStencilOp=0,e._SRGBAFormat=ut,e.createCanvasElement=Pt,e.sRGBEncoding=3001});